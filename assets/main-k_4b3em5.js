var Vd=n=>{throw TypeError(n)};var ec=(n,t,e)=>t.has(n)||Vd("Cannot "+e);var ye=(n,t,e)=>(ec(n,t,"read from private field"),e?e.call(n):t.get(n)),jn=(n,t,e)=>t.has(n)?Vd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),tn=(n,t,e,i)=>(ec(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),zn=(n,t,e)=>(ec(n,t,"access private method"),e);var Hd=(n,t,e,i)=>({set _(a){tn(n,t,a,e)},get _(){return ye(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:o}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=e,reactJsxRuntime_production.jsxs=e,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=b&&H[b]||H["@@iterator"],typeof H=="function"?H:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function T(H,Q,st){this.props=H,this.context=Q,this.refs=S,this.updater=st||E}T.prototype.isReactComponent={},T.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function D(){}D.prototype=T.prototype;function R(H,Q,st){this.props=H,this.context=Q,this.refs=S,this.updater=st||E}var F=R.prototype=new D;F.constructor=R,A(F,T.prototype),F.isPureReactComponent=!0;var k=Array.isArray;function P(){}var L={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function V(H,Q,st){var dt=st.ref;return{$$typeof:n,type:H,key:Q,ref:dt!==void 0?dt:null,props:st}}function z(H,Q){return V(H.type,Q,H.props)}function j(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function J(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(st){return Q[st]})}var W=/\/+/g;function K(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?J(""+H.key):Q.toString(36)}function $(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(P,P):(H.status="pending",H.then(function(Q){H.status==="pending"&&(H.status="fulfilled",H.value=Q)},function(Q){H.status==="pending"&&(H.status="rejected",H.reason=Q)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function N(H,Q,st,dt,ft){var bt=typeof H;(bt==="undefined"||bt==="boolean")&&(H=null);var mt=!1;if(H===null)mt=!0;else switch(bt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(H.$$typeof){case n:case t:mt=!0;break;case m:return mt=H._init,N(mt(H._payload),Q,st,dt,ft)}}if(mt)return ft=ft(H),mt=dt===""?"."+K(H,0):dt,k(ft)?(st="",mt!=null&&(st=mt.replace(W,"$&/")+"/"),N(ft,Q,st,"",function(wt){return wt})):ft!=null&&(j(ft)&&(ft=z(ft,st+(ft.key==null||H&&H.key===ft.key?"":(""+ft.key).replace(W,"$&/")+"/")+mt)),Q.push(ft)),1;mt=0;var Mt=dt===""?".":dt+":";if(k(H))for(var Ot=0;Ot<H.length;Ot++)dt=H[Ot],bt=Mt+K(dt,Ot),mt+=N(dt,Q,st,bt,ft);else if(Ot=x(H),typeof Ot=="function")for(H=Ot.call(H),Ot=0;!(dt=H.next()).done;)dt=dt.value,bt=Mt+K(dt,Ot++),mt+=N(dt,Q,st,bt,ft);else if(bt==="object"){if(typeof H.then=="function")return N($(H),Q,st,dt,ft);throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return mt}function G(H,Q,st){if(H==null)return H;var dt=[],ft=0;return N(H,dt,"","",function(bt){return Q.call(st,bt,ft++)}),dt}function I(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(st){(H._status===0||H._status===-1)&&(H._status=1,H._result=st)},function(st){(H._status===0||H._status===-1)&&(H._status=2,H._result=st)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var X=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},et={map:G,forEach:function(H,Q,st){G(H,function(){Q.apply(this,arguments)},st)},count:function(H){var Q=0;return G(H,function(){Q++}),Q},toArray:function(H){return G(H,function(Q){return Q})||[]},only:function(H){if(!j(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return react_production.Activity=y,react_production.Children=et,react_production.Component=T,react_production.Fragment=e,react_production.Profiler=a,react_production.PureComponent=R,react_production.StrictMode=i,react_production.Suspense=f,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(H){return L.H.useMemoCache(H)}},react_production.cache=function(H){return function(){return H.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(H,Q,st){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var dt=A({},H.props),ft=H.key;if(Q!=null)for(bt in Q.key!==void 0&&(ft=""+Q.key),Q)!B.call(Q,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&Q.ref===void 0||(dt[bt]=Q[bt]);var bt=arguments.length-2;if(bt===1)dt.children=st;else if(1<bt){for(var mt=Array(bt),Mt=0;Mt<bt;Mt++)mt[Mt]=arguments[Mt+2];dt.children=mt}return V(H.type,ft,dt)},react_production.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},react_production.createElement=function(H,Q,st){var dt,ft={},bt=null;if(Q!=null)for(dt in Q.key!==void 0&&(bt=""+Q.key),Q)B.call(Q,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(ft[dt]=Q[dt]);var mt=arguments.length-2;if(mt===1)ft.children=st;else if(1<mt){for(var Mt=Array(mt),Ot=0;Ot<mt;Ot++)Mt[Ot]=arguments[Ot+2];ft.children=Mt}if(H&&H.defaultProps)for(dt in mt=H.defaultProps,mt)ft[dt]===void 0&&(ft[dt]=mt[dt]);return V(H,bt,ft)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(H){return{$$typeof:u,render:H}},react_production.isValidElement=j,react_production.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:I}},react_production.memo=function(H,Q){return{$$typeof:p,type:H,compare:Q===void 0?null:Q}},react_production.startTransition=function(H){var Q=L.T,st={};L.T=st;try{var dt=H(),ft=L.S;ft!==null&&ft(st,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(P,X)}catch(bt){X(bt)}finally{Q!==null&&st.types!==null&&(Q.types=st.types),L.T=Q}},react_production.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},react_production.use=function(H){return L.H.use(H)},react_production.useActionState=function(H,Q,st){return L.H.useActionState(H,Q,st)},react_production.useCallback=function(H,Q){return L.H.useCallback(H,Q)},react_production.useContext=function(H){return L.H.useContext(H)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(H,Q){return L.H.useDeferredValue(H,Q)},react_production.useEffect=function(H,Q){return L.H.useEffect(H,Q)},react_production.useEffectEvent=function(H){return L.H.useEffectEvent(H)},react_production.useId=function(){return L.H.useId()},react_production.useImperativeHandle=function(H,Q,st){return L.H.useImperativeHandle(H,Q,st)},react_production.useInsertionEffect=function(H,Q){return L.H.useInsertionEffect(H,Q)},react_production.useLayoutEffect=function(H,Q){return L.H.useLayoutEffect(H,Q)},react_production.useMemo=function(H,Q){return L.H.useMemo(H,Q)},react_production.useOptimistic=function(H,Q){return L.H.useOptimistic(H,Q)},react_production.useReducer=function(H,Q,st){return L.H.useReducer(H,Q,st)},react_production.useRef=function(H){return L.H.useRef(H)},react_production.useState=function(H){return L.H.useState(H)},react_production.useSyncExternalStore=function(H,Q,st){return L.H.useSyncExternalStore(H,Q,st)},react_production.useTransition=function(){return L.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(n){function t(N,G){var I=N.length;N.push(G);t:for(;0<I;){var X=I-1>>>1,et=N[X];if(0<a(et,G))N[X]=G,N[I]=et,I=X;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var G=N[0],I=N.pop();if(I!==G){N[0]=I;t:for(var X=0,et=N.length,H=et>>>1;X<H;){var Q=2*(X+1)-1,st=N[Q],dt=Q+1,ft=N[dt];if(0>a(st,I))dt<et&&0>a(ft,st)?(N[X]=ft,N[dt]=I,X=dt):(N[X]=st,N[Q]=I,X=Q);else if(dt<et&&0>a(ft,I))N[X]=ft,N[dt]=I,X=dt;else break t}}return G}function a(N,G){var I=N.sortIndex-G.sortIndex;return I!==0?I:N.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],p=[],m=1,y=null,b=3,x=!1,E=!1,A=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function F(N){for(var G=e(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=N)i(p),G.sortIndex=G.expirationTime,t(f,G);else break;G=e(p)}}function k(N){if(A=!1,F(N),!E)if(e(f)!==null)E=!0,P||(P=!0,J());else{var G=e(p);G!==null&&$(k,G.startTime-N)}}var P=!1,L=-1,B=5,V=-1;function z(){return S?!0:!(n.unstable_now()-V<B)}function j(){if(S=!1,P){var N=n.unstable_now();V=N;var G=!0;try{t:{E=!1,A&&(A=!1,D(L),L=-1),x=!0;var I=b;try{e:{for(F(N),y=e(f);y!==null&&!(y.expirationTime>N&&z());){var X=y.callback;if(typeof X=="function"){y.callback=null,b=y.priorityLevel;var et=X(y.expirationTime<=N);if(N=n.unstable_now(),typeof et=="function"){y.callback=et,F(N),G=!0;break e}y===e(f)&&i(f),F(N)}else i(f);y=e(f)}if(y!==null)G=!0;else{var H=e(p);H!==null&&$(k,H.startTime-N),G=!1}}break t}finally{y=null,b=I,x=!1}G=void 0}}finally{G?J():P=!1}}}var J;if(typeof R=="function")J=function(){R(j)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=j,J=function(){K.postMessage(null)}}else J=function(){T(j,0)};function $(N,G){L=T(function(){N(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(N){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var I=b;b=G;try{return N()}finally{b=I}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(N,G){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var I=b;b=N;try{return G()}finally{b=I}},n.unstable_scheduleCallback=function(N,G,I){var X=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?X+I:X):I=X,N){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=I+et,N={id:m++,callback:G,priorityLevel:N,startTime:I,expirationTime:et,sortIndex:-1},I>X?(N.sortIndex=I,t(p,N),e(f)===null&&N===e(p)&&(A?(D(L),L=-1):A=!0,$(k,I-X))):(N.sortIndex=et,t(f,N),E||x||(E=!0,P||(P=!0,J()))),N},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(N){var G=b;return function(){var I=b;b=G;try{return N.apply(this,arguments)}finally{b=I}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,p,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:p,implementation:m}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,reactDom_production.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(f,p,null,m)},reactDom_production.flushSync=function(f){var p=c.T,m=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=m,i.d.f()}},reactDom_production.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},reactDom_production.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},reactDom_production.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,y=u(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:x}):m==="script"&&i.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},reactDom_production.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=u(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},reactDom_production.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,y=u(m,p.crossOrigin);i.d.L(f,m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},reactDom_production.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=u(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},reactDom_production.requestFormReset=function(f){i.d.r(f)},reactDom_production.unstable_batchedUpdates=function(f,p){return f(p)},reactDom_production.useFormState=function(f,p,m){return c.H.useFormState(f,p,m)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=requireScheduler(),t=requireReact(),e=requireReactDom();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function c(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function p(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(i(188));return l!==s?null:s}for(var d=s,g=l;;){var _=d.return;if(_===null)break;var C=_.alternate;if(C===null){if(g=_.return,g!==null){d=g;continue}break}if(_.child===C.child){for(C=_.child;C;){if(C===d)return f(_),s;if(C===g)return f(_),l;C=C.sibling}throw Error(i(188))}if(d.return!==g.return)d=_,g=C;else{for(var M=!1,O=_.child;O;){if(O===d){M=!0,d=_,g=C;break}if(O===g){M=!0,g=_,d=C;break}O=O.sibling}if(!M){for(O=C.child;O;){if(O===d){M=!0,d=C,g=_;break}if(O===g){M=!0,g=C,d=_;break}O=O.sibling}if(!M)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var W=Symbol.for("react.client.reference");function K(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===W?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList";case V:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case R:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case F:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return l=s.displayName||null,l!==null?l:K(s.type)||"Memo";case B:l=s._payload,s=s._init;try{return K(s(l))}catch{}}return null}var $=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},X=[],et=-1;function H(s){return{current:s}}function Q(s){0>et||(s.current=X[et],X[et]=null,et--)}function st(s,l){et++,X[et]=s.current,s.current=l}var dt=H(null),ft=H(null),bt=H(null),mt=H(null);function Mt(s,l){switch(st(bt,l),st(ft,s),st(dt,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?ud(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=ud(l),s=hd(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(dt),st(dt,s)}function Ot(){Q(dt),Q(ft),Q(bt)}function wt(s){s.memoizedState!==null&&st(mt,s);var l=dt.current,d=hd(l,s.type);l!==d&&(st(ft,s),st(dt,d))}function $t(s){ft.current===s&&(Q(dt),Q(ft)),mt.current===s&&(Q(mt),wa._currentValue=I)}var te,It;function yt(s){if(te===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);te=l&&l[1]||"",It=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+s+It}var Wt=!1;function Zt(s,l){if(!s||Wt)return"";Wt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(lt){var at=lt}Reflect.construct(s,[],ht)}else{try{ht.call()}catch(lt){at=lt}s.call(ht.prototype)}}else{try{throw Error()}catch(lt){at=lt}(ht=s())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(lt){if(lt&&at&&typeof lt.stack=="string")return[lt.stack,at.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),M=C[0],O=C[1];if(M&&O){var U=M.split(`
`),rt=O.split(`
`);for(_=g=0;g<U.length&&!U[g].includes("DetermineComponentFrameRoot");)g++;for(;_<rt.length&&!rt[_].includes("DetermineComponentFrameRoot");)_++;if(g===U.length||_===rt.length)for(g=U.length-1,_=rt.length-1;1<=g&&0<=_&&U[g]!==rt[_];)_--;for(;1<=g&&0<=_;g--,_--)if(U[g]!==rt[_]){if(g!==1||_!==1)do if(g--,_--,0>_||U[g]!==rt[_]){var ct=`
`+U[g].replace(" at new "," at ");return s.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",s.displayName)),ct}while(1<=g&&0<=_);break}}}finally{Wt=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?yt(d):""}function Ae(s,l){switch(s.tag){case 26:case 27:case 5:return yt(s.type);case 16:return yt("Lazy");case 13:return s.child!==l&&l!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return Zt(s.type,!1);case 11:return Zt(s.type.render,!1);case 1:return Zt(s.type,!0);case 31:return yt("Activity");default:return""}}function be(s){try{var l="",d=null;do l+=Ae(s,d),d=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var xe=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,_e=n.unstable_cancelCallback,it=n.unstable_shouldYield,gt=n.unstable_requestPaint,vt=n.unstable_now,St=n.unstable_getCurrentPriorityLevel,Ct=n.unstable_ImmediatePriority,kt=n.unstable_UserBlockingPriority,Xt=n.unstable_NormalPriority,ce=n.unstable_LowPriority,Fe=n.unstable_IdlePriority,Li=n.log,en=n.unstable_setDisableYieldValue,An=null,Oe=null;function _n(s){if(typeof Li=="function"&&en(s),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(An,s)}catch{}}var Ue=Math.clz32?Math.clz32:ka,Pa=Math.log,rr=Math.LN2;function ka(s){return s>>>=0,s===0?32:31-(Pa(s)/rr|0)|0}var ci=256,ar=262144,Oi=4194304;function Hn(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ni(s,l,d){var g=s.pendingLanes;if(g===0)return 0;var _=0,C=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var O=g&134217727;return O!==0?(g=O&~C,g!==0?_=Hn(g):(M&=O,M!==0?_=Hn(M):d||(d=O&~s,d!==0&&(_=Hn(d))))):(O=g&~C,O!==0?_=Hn(O):M!==0?_=Hn(M):d||(d=g&~s,d!==0&&(_=Hn(d)))),_===0?0:l!==0&&l!==_&&(l&C)===0&&(C=_&-_,d=l&-l,C>=d||C===32&&(d&4194048)!==0)?l:_}function Pn(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function sr(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fa(){var s=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),s}function Hr(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function q(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tt(s,l,d,g,_,C){var M=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var O=s.entanglements,U=s.expirationTimes,rt=s.hiddenUpdates;for(d=M&~d;0<d;){var ct=31-Ue(d),ht=1<<ct;O[ct]=0,U[ct]=-1;var at=rt[ct];if(at!==null)for(rt[ct]=null,ct=0;ct<at.length;ct++){var lt=at[ct];lt!==null&&(lt.lane&=-536870913)}d&=~ht}g!==0&&ot(s,g,0),C!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=C&~(M&~l))}function ot(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-Ue(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|d&261930}function pt(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-Ue(d),_=1<<g;_&l|s[g]&l&&(s[g]|=l),d&=~_}}function xt(s,l){var d=l&-l;return d=(d&42)!==0?1:Rt(d),(d&(s.suspendedLanes|l))!==0?0:d}function Rt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Pt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Tt(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:Ld(s.type))}function Ft(s,l){var d=G.p;try{return G.p=s,l()}finally{G.p=d}}var Lt=Math.random().toString(36).slice(2),Et="__reactFiber$"+Lt,At="__reactProps$"+Lt,Vt="__reactContainer$"+Lt,ae="__reactEvents$"+Lt,De="__reactListeners$"+Lt,Be="__reactHandles$"+Lt,he="__reactResources$"+Lt,ee="__reactMarker$"+Lt;function Tn(s){delete s[Et],delete s[At],delete s[ae],delete s[De],delete s[Be]}function un(s){var l=s[Et];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Vt]||d[Et]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=vd(s);s!==null;){if(d=s[Et])return d;s=vd(s)}return l}s=d,d=s.parentNode}return null}function Ge(s){if(s=s[Et]||s[Vt]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function $e(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function kn(s){var l=s[he];return l||(l=s[he]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function me(s){s[ee]=!0}var Fn=new Set,Ii={};function hn(s,l){Ht(s,l),Ht(s+"Capture",l)}function Ht(s,l){for(Ii[s]=l,s=0;s<l.length;s++)Fn.add(l[s])}var Ne=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$n={},Ln={};function Te(s){return xe.call(Ln,s)?!0:xe.call($n,s)?!1:Ne.test(s)?Ln[s]=!0:($n[s]=!0,!1)}function Un(s,l,d){if(Te(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function Bi(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function wn(s,l,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+g)}}function dn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function nc(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function qd(s,l,d){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,C=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return _.call(this)},set:function(M){d=""+M,C.call(this,M)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(M){d=""+M},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ys(s){if(!s._valueTracker){var l=nc(s)?"checked":"value";s._valueTracker=qd(s,l,""+s[l])}}function ic(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=nc(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function La(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Yd=/[\n"\\]/g;function fn(s){return s.replace(Yd,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xs(s,l,d,g,_,C,M,O){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),l!=null?M==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+dn(l)):s.value!==""+dn(l)&&(s.value=""+dn(l)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),l!=null?Ks(s,M,dn(l)):d!=null?Ks(s,M,dn(d)):g!=null&&s.removeAttribute("value"),_==null&&C!=null&&(s.defaultChecked=!!C),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+dn(O):s.removeAttribute("name")}function rc(s,l,d,g,_,C,M,O){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),l!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||l!=null)){Ys(s);return}d=d!=null?""+dn(d):"",l=l!=null?""+dn(l):d,O||l===s.value||(s.value=l),s.defaultValue=l}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=O?s.checked:!!g,s.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),Ys(s)}function Ks(s,l,d){l==="number"&&La(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function or(s,l,d,g){if(s=s.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<s.length;d++)_=l.hasOwnProperty("$"+s[d].value),s[d].selected!==_&&(s[d].selected=_),_&&g&&(s[d].defaultSelected=!0)}else{for(d=""+dn(d),l=null,_=0;_<s.length;_++){if(s[_].value===d){s[_].selected=!0,g&&(s[_].defaultSelected=!0);return}l!==null||s[_].disabled||(l=s[_])}l!==null&&(l.selected=!0)}}function ac(s,l,d){if(l!=null&&(l=""+dn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+dn(d):""}function sc(s,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if($(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=dn(l),s.defaultValue=d,g=s.textContent,g===d&&g!==""&&g!==null&&(s.value=g),Ys(s)}function lr(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Xd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oc(s,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,d):typeof d!="number"||d===0||Xd.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function lc(s,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var _ in l)g=l[_],l.hasOwnProperty(_)&&d[_]!==g&&oc(s,_,g)}else for(var C in l)l.hasOwnProperty(C)&&oc(s,C,l[C])}function Ws(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(s){return Wd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Gn(){}var Zs=null;function Qs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var cr=null,ur=null;function cc(s){var l=Ge(s);if(l&&(s=l.stateNode)){var d=s[At]||null;t:switch(s=l.stateNode,l.type){case"input":if(Xs(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+fn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var _=g[At]||null;if(!_)throw Error(i(90));Xs(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===s.form&&ic(g)}break t;case"textarea":ac(s,d.value,d.defaultValue);break t;case"select":l=d.value,l!=null&&or(s,!!d.multiple,l,!1)}}}var Js=!1;function uc(s,l,d){if(Js)return s(l,d);Js=!0;try{var g=s(l);return g}finally{if(Js=!1,(cr!==null||ur!==null)&&(Ss(),cr&&(l=cr,s=ur,ur=cr=null,cc(l),s)))for(l=0;l<s.length;l++)cc(s[l])}}function $r(s,l){var d=s.stateNode;if(d===null)return null;var g=d[At]||null;if(g===null)return null;d=g[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break t;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(qn)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){to=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{to=!1}var ui=null,eo=null,Na=null;function hc(){if(Na)return Na;var s,l=eo,d=l.length,g,_="value"in ui?ui.value:ui.textContent,C=_.length;for(s=0;s<d&&l[s]===_[s];s++);var M=d-s;for(g=1;g<=M&&l[d-g]===_[C-g];g++);return Na=_.slice(s,1<g?1-g:void 0)}function Ia(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ba(){return!0}function dc(){return!1}function Xe(s){function l(d,g,_,C,M){this._reactName=d,this._targetInst=_,this.type=g,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(d=s[O],this[O]=d?d(C):C[O]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ba:dc,this.isPropagationStopped=dc,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),l}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Xe(ji),Gr=y({},ji,{view:0,detail:0}),Zd=Xe(Gr),no,io,qr,za=y({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qr&&(qr&&s.type==="mousemove"?(no=s.screenX-qr.screenX,io=s.screenY-qr.screenY):io=no=0,qr=s),no)},movementY:function(s){return"movementY"in s?s.movementY:io}}),fc=Xe(za),Qd=y({},za,{dataTransfer:0}),Jd=Xe(Qd),tf=y({},Gr,{relatedTarget:0}),ro=Xe(tf),ef=y({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),nf=Xe(ef),rf=y({},ji,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),af=Xe(rf),sf=y({},ji,{data:0}),pc=Xe(sf),of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uf(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=cf[s])?!!l[s]:!1}function ao(){return uf}var hf=y({},Gr,{key:function(s){if(s.key){var l=of[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ia(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(s){return s.type==="keypress"?Ia(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ia(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),df=Xe(hf),ff=y({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=Xe(ff),pf=y({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),mf=Xe(pf),gf=y({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),yf=Xe(gf),vf=y({},za,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),bf=Xe(vf),xf=y({},ji,{newState:0,oldState:0}),Ef=Xe(xf),Sf=[9,13,27,32],so=qn&&"CompositionEvent"in window,Yr=null;qn&&"documentMode"in document&&(Yr=document.documentMode);var Af=qn&&"TextEvent"in window&&!Yr,gc=qn&&(!so||Yr&&8<Yr&&11>=Yr),yc=" ",vc=!1;function bc(s,l){switch(s){case"keyup":return Sf.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var hr=!1;function _f(s,l){switch(s){case"compositionend":return xc(l);case"keypress":return l.which!==32?null:(vc=!0,yc);case"textInput":return s=l.data,s===yc&&vc?null:s;default:return null}}function Tf(s,l){if(hr)return s==="compositionend"||!so&&bc(s,l)?(s=hc(),Na=eo=ui=null,hr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return gc&&l.locale!=="ko"?null:l.data;default:return null}}var wf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ec(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!wf[s.type]:l==="textarea"}function Sc(s,l,d,g){cr?ur?ur.push(g):ur=[g]:cr=g,l=Rs(l,"onChange"),0<l.length&&(d=new ja("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var Xr=null,Kr=null;function Cf(s){rd(s,0)}function Va(s){var l=$e(s);if(ic(l))return s}function Ac(s,l){if(s==="change")return l}var _c=!1;if(qn){var oo;if(qn){var lo="oninput"in document;if(!lo){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),lo=typeof Tc.oninput=="function"}oo=lo}else oo=!1;_c=oo&&(!document.documentMode||9<document.documentMode)}function wc(){Xr&&(Xr.detachEvent("onpropertychange",Cc),Kr=Xr=null)}function Cc(s){if(s.propertyName==="value"&&Va(Kr)){var l=[];Sc(l,Kr,s,Qs(s)),uc(Cf,l)}}function Df(s,l,d){s==="focusin"?(wc(),Xr=l,Kr=d,Xr.attachEvent("onpropertychange",Cc)):s==="focusout"&&wc()}function Rf(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Va(Kr)}function Mf(s,l){if(s==="click")return Va(l)}function Pf(s,l){if(s==="input"||s==="change")return Va(l)}function kf(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var nn=typeof Object.is=="function"?Object.is:kf;function Wr(s,l){if(nn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var _=d[g];if(!xe.call(l,_)||!nn(s[_],l[_]))return!1}return!0}function Dc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rc(s,l){var d=Dc(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=Dc(d)}}function Mc(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Mc(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Pc(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=La(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=La(s.document)}return l}function co(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Ff=qn&&"documentMode"in document&&11>=document.documentMode,dr=null,uo=null,Zr=null,ho=!1;function kc(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ho||dr==null||dr!==La(g)||(g=dr,"selectionStart"in g&&co(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Zr&&Wr(Zr,g)||(Zr=g,g=Rs(uo,"onSelect"),0<g.length&&(l=new ja("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=dr)))}function zi(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var pr={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionrun:zi("Transition","TransitionRun"),transitionstart:zi("Transition","TransitionStart"),transitioncancel:zi("Transition","TransitionCancel"),transitionend:zi("Transition","TransitionEnd")},fo={},Fc={};qn&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Vi(s){if(fo[s])return fo[s];if(!pr[s])return s;var l=pr[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in Fc)return fo[s]=l[d];return s}var Lc=Vi("animationend"),Oc=Vi("animationiteration"),Nc=Vi("animationstart"),Lf=Vi("transitionrun"),Of=Vi("transitionstart"),Nf=Vi("transitioncancel"),Ic=Vi("transitionend"),Bc=new Map,po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");po.push("scrollEnd");function Cn(s,l){Bc.set(s,l),hn(l,[s])}var Ha=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},pn=[],mr=0,mo=0;function $a(){for(var s=mr,l=mo=mr=0;l<s;){var d=pn[l];pn[l++]=null;var g=pn[l];pn[l++]=null;var _=pn[l];pn[l++]=null;var C=pn[l];if(pn[l++]=null,g!==null&&_!==null){var M=g.pending;M===null?_.next=_:(_.next=M.next,M.next=_),g.pending=_}C!==0&&jc(d,_,C)}}function Ua(s,l,d,g){pn[mr++]=s,pn[mr++]=l,pn[mr++]=d,pn[mr++]=g,mo|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function go(s,l,d,g){return Ua(s,l,d,g),Ga(s)}function Hi(s,l){return Ua(s,null,null,l),Ga(s)}function jc(s,l,d){s.lanes|=d;var g=s.alternate;g!==null&&(g.lanes|=d);for(var _=!1,C=s.return;C!==null;)C.childLanes|=d,g=C.alternate,g!==null&&(g.childLanes|=d),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(_=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,_&&l!==null&&(_=31-Ue(d),s=C.hiddenUpdates,g=s[_],g===null?s[_]=[l]:g.push(l),l.lane=d|536870912),C):null}function Ga(s){if(50<ba)throw ba=0,Tl=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var gr={};function If(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(s,l,d,g){return new If(s,l,d,g)}function yo(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yn(s,l){var d=s.alternate;return d===null?(d=rn(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function zc(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function qa(s,l,d,g,_,C){var M=0;if(g=s,typeof s=="function")yo(s)&&(M=1);else if(typeof s=="string")M=Up(s,d,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case V:return s=rn(31,d,l,_),s.elementType=V,s.lanes=C,s;case A:return $i(d.children,_,C,l);case S:M=8,_|=24;break;case T:return s=rn(12,d,l,_|2),s.elementType=T,s.lanes=C,s;case k:return s=rn(13,d,l,_),s.elementType=k,s.lanes=C,s;case P:return s=rn(19,d,l,_),s.elementType=P,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:M=10;break t;case D:M=9;break t;case F:M=11;break t;case L:M=14;break t;case B:M=16,g=null;break t}M=29,d=Error(i(130,s===null?"null":typeof s,"")),g=null}return l=rn(M,d,l,_),l.elementType=s,l.type=g,l.lanes=C,l}function $i(s,l,d,g){return s=rn(7,s,g,l),s.lanes=d,s}function vo(s,l,d){return s=rn(6,s,null,l),s.lanes=d,s}function Vc(s){var l=rn(18,null,null,0);return l.stateNode=s,l}function bo(s,l,d){return l=rn(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Hc=new WeakMap;function mn(s,l){if(typeof s=="object"&&s!==null){var d=Hc.get(s);return d!==void 0?d:(l={value:s,source:l,stack:be(l)},Hc.set(s,l),l)}return{value:s,source:l,stack:be(l)}}var yr=[],vr=0,Ya=null,Qr=0,gn=[],yn=0,hi=null,On=1,Nn="";function Xn(s,l){yr[vr++]=Qr,yr[vr++]=Ya,Ya=s,Qr=l}function $c(s,l,d){gn[yn++]=On,gn[yn++]=Nn,gn[yn++]=hi,hi=s;var g=On;s=Nn;var _=32-Ue(g)-1;g&=~(1<<_),d+=1;var C=32-Ue(l)+_;if(30<C){var M=_-_%5;C=(g&(1<<M)-1).toString(32),g>>=M,_-=M,On=1<<32-Ue(l)+_|d<<_|g,Nn=C+s}else On=1<<C|d<<_|g,Nn=s}function xo(s){s.return!==null&&(Xn(s,1),$c(s,1,0))}function Eo(s){for(;s===Ya;)Ya=yr[--vr],yr[vr]=null,Qr=yr[--vr],yr[vr]=null;for(;s===hi;)hi=gn[--yn],gn[yn]=null,Nn=gn[--yn],gn[yn]=null,On=gn[--yn],gn[yn]=null}function Uc(s,l){gn[yn++]=On,gn[yn++]=Nn,gn[yn++]=hi,On=l.id,Nn=l.overflow,hi=s}var je=null,de=null,Kt=!1,di=null,vn=!1,So=Error(i(519));function fi(s){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jr(mn(l,s)),So}function Gc(s){var l=s.stateNode,d=s.type,g=s.memoizedProps;switch(l[Et]=s,l[At]=g,d){case"dialog":Gt("cancel",l),Gt("close",l);break;case"iframe":case"object":case"embed":Gt("load",l);break;case"video":case"audio":for(d=0;d<Ea.length;d++)Gt(Ea[d],l);break;case"source":Gt("error",l);break;case"img":case"image":case"link":Gt("error",l),Gt("load",l);break;case"details":Gt("toggle",l);break;case"input":Gt("invalid",l),rc(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Gt("invalid",l);break;case"textarea":Gt("invalid",l),sc(l,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||ld(l.textContent,d)?(g.popover!=null&&(Gt("beforetoggle",l),Gt("toggle",l)),g.onScroll!=null&&Gt("scroll",l),g.onScrollEnd!=null&&Gt("scrollend",l),g.onClick!=null&&(l.onclick=Gn),l=!0):l=!1,l||fi(s,!0)}function qc(s){for(je=s.return;je;)switch(je.tag){case 5:case 31:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:je=je.return}}function br(s){if(s!==je)return!1;if(!Kt)return qc(s),Kt=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||zl(s.type,s.memoizedProps)),d=!d),d&&de&&fi(s),qc(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));de=yd(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));de=yd(s)}else l===27?(l=de,Ci(s.type)?(s=Gl,Gl=null,de=s):de=l):de=je?xn(s.stateNode.nextSibling):null;return!0}function Ui(){de=je=null,Kt=!1}function Ao(){var s=di;return s!==null&&(Qe===null?Qe=s:Qe.push.apply(Qe,s),di=null),s}function Jr(s){di===null?di=[s]:di.push(s)}var _o=H(null),Gi=null,Kn=null;function pi(s,l,d){st(_o,l._currentValue),l._currentValue=d}function Wn(s){s._currentValue=_o.current,Q(_o)}function To(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function wo(s,l,d,g){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var C=_.dependencies;if(C!==null){var M=_.child;C=C.firstContext;t:for(;C!==null;){var O=C;C=_;for(var U=0;U<l.length;U++)if(O.context===l[U]){C.lanes|=d,O=C.alternate,O!==null&&(O.lanes|=d),To(C.return,d,s),g||(M=null);break t}C=O.next}}else if(_.tag===18){if(M=_.return,M===null)throw Error(i(341));M.lanes|=d,C=M.alternate,C!==null&&(C.lanes|=d),To(M,d,s),M=null}else M=_.child;if(M!==null)M.return=_;else for(M=_;M!==null;){if(M===s){M=null;break}if(_=M.sibling,_!==null){_.return=M.return,M=_;break}M=M.return}_=M}}function xr(s,l,d,g){s=null;for(var _=l,C=!1;_!==null;){if(!C){if((_.flags&524288)!==0)C=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var M=_.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var O=_.type;nn(_.pendingProps.value,M.value)||(s!==null?s.push(O):s=[O])}}else if(_===mt.current){if(M=_.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(wa):s=[wa])}_=_.return}s!==null&&wo(l,s,d,g),l.flags|=262144}function Xa(s){for(s=s.firstContext;s!==null;){if(!nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function qi(s){Gi=s,Kn=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ze(s){return Yc(Gi,s)}function Ka(s,l){return Gi===null&&qi(s),Yc(s,l)}function Yc(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Kn===null){if(s===null)throw Error(i(308));Kn=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Kn=Kn.next=l;return d}var Bf=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},jf=n.unstable_scheduleCallback,zf=n.unstable_NormalPriority,Re={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Co(){return{controller:new Bf,data:new Map,refCount:0}}function ta(s){s.refCount--,s.refCount===0&&jf(zf,function(){s.controller.abort()})}var ea=null,Do=0,Er=0,Sr=null;function Vf(s,l){if(ea===null){var d=ea=[];Do=0,Er=Pl(),Sr={status:"pending",value:void 0,then:function(g){d.push(g)}}}return Do++,l.then(Xc,Xc),l}function Xc(){if(--Do===0&&ea!==null){Sr!==null&&(Sr.status="fulfilled");var s=ea;ea=null,Er=0,Sr=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function Hf(s,l){var d=[],g={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var _=0;_<d.length;_++)(0,d[_])(l)},function(_){for(g.status="rejected",g.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),g}var Kc=N.S;N.S=function(s,l){kh=vt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Vf(s,l),Kc!==null&&Kc(s,l)};var Yi=H(null);function Ro(){var s=Yi.current;return s!==null?s:ue.pooledCache}function Wa(s,l){l===null?st(Yi,Yi.current):st(Yi,l.pool)}function Wc(){var s=Ro();return s===null?null:{parent:Re._currentValue,pool:s}}var Ar=Error(i(460)),Mo=Error(i(474)),Za=Error(i(542)),Qa={then:function(){}};function Zc(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qc(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Gn,Gn),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,tu(s),s;default:if(typeof l.status=="string")l.then(Gn,Gn);else{if(s=ue,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var _=l;_.status="fulfilled",_.value=g}},function(g){if(l.status==="pending"){var _=l;_.status="rejected",_.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,tu(s),s}throw Ki=l,Ar}}function Xi(s){try{var l=s._init;return l(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Ki=d,Ar):d}}var Ki=null;function Jc(){if(Ki===null)throw Error(i(459));var s=Ki;return Ki=null,s}function tu(s){if(s===Ar||s===Za)throw Error(i(483))}var _r=null,na=0;function Ja(s){var l=na;return na+=1,_r===null&&(_r=[]),Qc(_r,s,l)}function ia(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function ts(s,l){throw l.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function eu(s){function l(Z,Y){if(s){var nt=Z.deletions;nt===null?(Z.deletions=[Y],Z.flags|=16):nt.push(Y)}}function d(Z,Y){if(!s)return null;for(;Y!==null;)l(Z,Y),Y=Y.sibling;return null}function g(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function _(Z,Y){return Z=Yn(Z,Y),Z.index=0,Z.sibling=null,Z}function C(Z,Y,nt){return Z.index=nt,s?(nt=Z.alternate,nt!==null?(nt=nt.index,nt<Y?(Z.flags|=67108866,Y):nt):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function M(Z){return s&&Z.alternate===null&&(Z.flags|=67108866),Z}function O(Z,Y,nt,ut){return Y===null||Y.tag!==6?(Y=vo(nt,Z.mode,ut),Y.return=Z,Y):(Y=_(Y,nt),Y.return=Z,Y)}function U(Z,Y,nt,ut){var Nt=nt.type;return Nt===A?ct(Z,Y,nt.props.children,ut,nt.key):Y!==null&&(Y.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===B&&Xi(Nt)===Y.type)?(Y=_(Y,nt.props),ia(Y,nt),Y.return=Z,Y):(Y=qa(nt.type,nt.key,nt.props,null,Z.mode,ut),ia(Y,nt),Y.return=Z,Y)}function rt(Z,Y,nt,ut){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==nt.containerInfo||Y.stateNode.implementation!==nt.implementation?(Y=bo(nt,Z.mode,ut),Y.return=Z,Y):(Y=_(Y,nt.children||[]),Y.return=Z,Y)}function ct(Z,Y,nt,ut,Nt){return Y===null||Y.tag!==7?(Y=$i(nt,Z.mode,ut,Nt),Y.return=Z,Y):(Y=_(Y,nt),Y.return=Z,Y)}function ht(Z,Y,nt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=vo(""+Y,Z.mode,nt),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return nt=qa(Y.type,Y.key,Y.props,null,Z.mode,nt),ia(nt,Y),nt.return=Z,nt;case E:return Y=bo(Y,Z.mode,nt),Y.return=Z,Y;case B:return Y=Xi(Y),ht(Z,Y,nt)}if($(Y)||J(Y))return Y=$i(Y,Z.mode,nt,null),Y.return=Z,Y;if(typeof Y.then=="function")return ht(Z,Ja(Y),nt);if(Y.$$typeof===R)return ht(Z,Ka(Z,Y),nt);ts(Z,Y)}return null}function at(Z,Y,nt,ut){var Nt=Y!==null?Y.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Nt!==null?null:O(Z,Y,""+nt,ut);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case x:return nt.key===Nt?U(Z,Y,nt,ut):null;case E:return nt.key===Nt?rt(Z,Y,nt,ut):null;case B:return nt=Xi(nt),at(Z,Y,nt,ut)}if($(nt)||J(nt))return Nt!==null?null:ct(Z,Y,nt,ut,null);if(typeof nt.then=="function")return at(Z,Y,Ja(nt),ut);if(nt.$$typeof===R)return at(Z,Y,Ka(Z,nt),ut);ts(Z,nt)}return null}function lt(Z,Y,nt,ut,Nt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Z=Z.get(nt)||null,O(Y,Z,""+ut,Nt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case x:return Z=Z.get(ut.key===null?nt:ut.key)||null,U(Y,Z,ut,Nt);case E:return Z=Z.get(ut.key===null?nt:ut.key)||null,rt(Y,Z,ut,Nt);case B:return ut=Xi(ut),lt(Z,Y,nt,ut,Nt)}if($(ut)||J(ut))return Z=Z.get(nt)||null,ct(Y,Z,ut,Nt,null);if(typeof ut.then=="function")return lt(Z,Y,nt,Ja(ut),Nt);if(ut.$$typeof===R)return lt(Z,Y,nt,Ka(Y,ut),Nt);ts(Y,ut)}return null}function _t(Z,Y,nt,ut){for(var Nt=null,Qt=null,Dt=Y,zt=Y=0,Yt=null;Dt!==null&&zt<nt.length;zt++){Dt.index>zt?(Yt=Dt,Dt=null):Yt=Dt.sibling;var Jt=at(Z,Dt,nt[zt],ut);if(Jt===null){Dt===null&&(Dt=Yt);break}s&&Dt&&Jt.alternate===null&&l(Z,Dt),Y=C(Jt,Y,zt),Qt===null?Nt=Jt:Qt.sibling=Jt,Qt=Jt,Dt=Yt}if(zt===nt.length)return d(Z,Dt),Kt&&Xn(Z,zt),Nt;if(Dt===null){for(;zt<nt.length;zt++)Dt=ht(Z,nt[zt],ut),Dt!==null&&(Y=C(Dt,Y,zt),Qt===null?Nt=Dt:Qt.sibling=Dt,Qt=Dt);return Kt&&Xn(Z,zt),Nt}for(Dt=g(Dt);zt<nt.length;zt++)Yt=lt(Dt,Z,zt,nt[zt],ut),Yt!==null&&(s&&Yt.alternate!==null&&Dt.delete(Yt.key===null?zt:Yt.key),Y=C(Yt,Y,zt),Qt===null?Nt=Yt:Qt.sibling=Yt,Qt=Yt);return s&&Dt.forEach(function(ki){return l(Z,ki)}),Kt&&Xn(Z,zt),Nt}function Bt(Z,Y,nt,ut){if(nt==null)throw Error(i(151));for(var Nt=null,Qt=null,Dt=Y,zt=Y=0,Yt=null,Jt=nt.next();Dt!==null&&!Jt.done;zt++,Jt=nt.next()){Dt.index>zt?(Yt=Dt,Dt=null):Yt=Dt.sibling;var ki=at(Z,Dt,Jt.value,ut);if(ki===null){Dt===null&&(Dt=Yt);break}s&&Dt&&ki.alternate===null&&l(Z,Dt),Y=C(ki,Y,zt),Qt===null?Nt=ki:Qt.sibling=ki,Qt=ki,Dt=Yt}if(Jt.done)return d(Z,Dt),Kt&&Xn(Z,zt),Nt;if(Dt===null){for(;!Jt.done;zt++,Jt=nt.next())Jt=ht(Z,Jt.value,ut),Jt!==null&&(Y=C(Jt,Y,zt),Qt===null?Nt=Jt:Qt.sibling=Jt,Qt=Jt);return Kt&&Xn(Z,zt),Nt}for(Dt=g(Dt);!Jt.done;zt++,Jt=nt.next())Jt=lt(Dt,Z,zt,Jt.value,ut),Jt!==null&&(s&&Jt.alternate!==null&&Dt.delete(Jt.key===null?zt:Jt.key),Y=C(Jt,Y,zt),Qt===null?Nt=Jt:Qt.sibling=Jt,Qt=Jt);return s&&Dt.forEach(function(em){return l(Z,em)}),Kt&&Xn(Z,zt),Nt}function le(Z,Y,nt,ut){if(typeof nt=="object"&&nt!==null&&nt.type===A&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case x:t:{for(var Nt=nt.key;Y!==null;){if(Y.key===Nt){if(Nt=nt.type,Nt===A){if(Y.tag===7){d(Z,Y.sibling),ut=_(Y,nt.props.children),ut.return=Z,Z=ut;break t}}else if(Y.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===B&&Xi(Nt)===Y.type){d(Z,Y.sibling),ut=_(Y,nt.props),ia(ut,nt),ut.return=Z,Z=ut;break t}d(Z,Y);break}else l(Z,Y);Y=Y.sibling}nt.type===A?(ut=$i(nt.props.children,Z.mode,ut,nt.key),ut.return=Z,Z=ut):(ut=qa(nt.type,nt.key,nt.props,null,Z.mode,ut),ia(ut,nt),ut.return=Z,Z=ut)}return M(Z);case E:t:{for(Nt=nt.key;Y!==null;){if(Y.key===Nt)if(Y.tag===4&&Y.stateNode.containerInfo===nt.containerInfo&&Y.stateNode.implementation===nt.implementation){d(Z,Y.sibling),ut=_(Y,nt.children||[]),ut.return=Z,Z=ut;break t}else{d(Z,Y);break}else l(Z,Y);Y=Y.sibling}ut=bo(nt,Z.mode,ut),ut.return=Z,Z=ut}return M(Z);case B:return nt=Xi(nt),le(Z,Y,nt,ut)}if($(nt))return _t(Z,Y,nt,ut);if(J(nt)){if(Nt=J(nt),typeof Nt!="function")throw Error(i(150));return nt=Nt.call(nt),Bt(Z,Y,nt,ut)}if(typeof nt.then=="function")return le(Z,Y,Ja(nt),ut);if(nt.$$typeof===R)return le(Z,Y,Ka(Z,nt),ut);ts(Z,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,Y!==null&&Y.tag===6?(d(Z,Y.sibling),ut=_(Y,nt),ut.return=Z,Z=ut):(d(Z,Y),ut=vo(nt,Z.mode,ut),ut.return=Z,Z=ut),M(Z)):d(Z,Y)}return function(Z,Y,nt,ut){try{na=0;var Nt=le(Z,Y,nt,ut);return _r=null,Nt}catch(Dt){if(Dt===Ar||Dt===Za)throw Dt;var Qt=rn(29,Dt,null,Z.mode);return Qt.lanes=ut,Qt.return=Z,Qt}finally{}}}var Wi=eu(!0),nu=eu(!1),mi=!1;function Po(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ko(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function gi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function yi(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(ne&2)!==0){var _=g.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),g.pending=l,l=Ga(s),jc(s,null,d),l}return Ua(s,g,l,d),Ga(s)}function ra(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,pt(s,d)}}function Fo(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var _=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var M={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?_=C=M:C=C.next=M,d=d.next}while(d!==null);C===null?_=C=l:C=C.next=l}else _=C=l;d={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var Lo=!1;function aa(){if(Lo){var s=Sr;if(s!==null)throw s}}function sa(s,l,d,g){Lo=!1;var _=s.updateQueue;mi=!1;var C=_.firstBaseUpdate,M=_.lastBaseUpdate,O=_.shared.pending;if(O!==null){_.shared.pending=null;var U=O,rt=U.next;U.next=null,M===null?C=rt:M.next=rt,M=U;var ct=s.alternate;ct!==null&&(ct=ct.updateQueue,O=ct.lastBaseUpdate,O!==M&&(O===null?ct.firstBaseUpdate=rt:O.next=rt,ct.lastBaseUpdate=U))}if(C!==null){var ht=_.baseState;M=0,ct=rt=U=null,O=C;do{var at=O.lane&-536870913,lt=at!==O.lane;if(lt?(qt&at)===at:(g&at)===at){at!==0&&at===Er&&(Lo=!0),ct!==null&&(ct=ct.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});t:{var _t=s,Bt=O;at=l;var le=d;switch(Bt.tag){case 1:if(_t=Bt.payload,typeof _t=="function"){ht=_t.call(le,ht,at);break t}ht=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Bt.payload,at=typeof _t=="function"?_t.call(le,ht,at):_t,at==null)break t;ht=y({},ht,at);break t;case 2:mi=!0}}at=O.callback,at!==null&&(s.flags|=64,lt&&(s.flags|=8192),lt=_.callbacks,lt===null?_.callbacks=[at]:lt.push(at))}else lt={lane:at,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ct===null?(rt=ct=lt,U=ht):ct=ct.next=lt,M|=at;if(O=O.next,O===null){if(O=_.shared.pending,O===null)break;lt=O,O=lt.next,lt.next=null,_.lastBaseUpdate=lt,_.shared.pending=null}}while(!0);ct===null&&(U=ht),_.baseState=U,_.firstBaseUpdate=rt,_.lastBaseUpdate=ct,C===null&&(_.shared.lanes=0),Si|=M,s.lanes=M,s.memoizedState=ht}}function iu(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function ru(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)iu(d[s],l)}var Tr=H(null),es=H(0);function au(s,l){s=ai,st(es,s),st(Tr,l),ai=s|l.baseLanes}function Oo(){st(es,ai),st(Tr,Tr.current)}function No(){ai=es.current,Q(Tr),Q(es)}var an=H(null),bn=null;function vi(s){var l=s.alternate;st(we,we.current&1),st(an,s),bn===null&&(l===null||Tr.current!==null||l.memoizedState!==null)&&(bn=s)}function Io(s){st(we,we.current),st(an,s),bn===null&&(bn=s)}function su(s){s.tag===22?(st(we,we.current),st(an,s),bn===null&&(bn=s)):bi()}function bi(){st(we,we.current),st(an,an.current)}function sn(s){Q(an),bn===s&&(bn=null),Q(we)}var we=H(0);function ns(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||$l(d)||Ul(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Zn=0,jt=null,se=null,Me=null,is=!1,wr=!1,Zi=!1,rs=0,oa=0,Cr=null,$f=0;function Ee(){throw Error(i(321))}function Bo(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!nn(s[d],l[d]))return!1;return!0}function jo(s,l,d,g,_,C){return Zn=C,jt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,N.H=s===null||s.memoizedState===null?$u:tl,Zi=!1,C=d(g,_),Zi=!1,wr&&(C=lu(l,d,g,_)),ou(s),C}function ou(s){N.H=ua;var l=se!==null&&se.next!==null;if(Zn=0,Me=se=jt=null,is=!1,oa=0,Cr=null,l)throw Error(i(300));s===null||Pe||(s=s.dependencies,s!==null&&Xa(s)&&(Pe=!0))}function lu(s,l,d,g){jt=s;var _=0;do{if(wr&&(Cr=null),oa=0,wr=!1,25<=_)throw Error(i(301));if(_+=1,Me=se=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}N.H=Uu,C=l(d,g)}while(wr);return C}function Uf(){var s=N.H,l=s.useState()[0];return l=typeof l.then=="function"?la(l):l,s=s.useState()[0],(se!==null?se.memoizedState:null)!==s&&(jt.flags|=1024),l}function zo(){var s=rs!==0;return rs=0,s}function Vo(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function Ho(s){if(is){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}is=!1}Zn=0,Me=se=jt=null,wr=!1,oa=rs=0,Cr=null}function qe(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?jt.memoizedState=Me=s:Me=Me.next=s,Me}function Ce(){if(se===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=se.next;var l=Me===null?jt.memoizedState:Me.next;if(l!==null)Me=l,se=s;else{if(s===null)throw jt.alternate===null?Error(i(467)):Error(i(310));se=s,s={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Me===null?jt.memoizedState=Me=s:Me=Me.next=s}return Me}function as(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function la(s){var l=oa;return oa+=1,Cr===null&&(Cr=[]),s=Qc(Cr,s,l),l=jt,(Me===null?l.memoizedState:Me.next)===null&&(l=l.alternate,N.H=l===null||l.memoizedState===null?$u:tl),s}function ss(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return la(s);if(s.$$typeof===R)return ze(s)}throw Error(i(438,String(s)))}function $o(s){var l=null,d=jt.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=jt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(_){return _.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=as(),jt.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),g=0;g<s;g++)d[g]=z;return l.index++,d}function Qn(s,l){return typeof l=="function"?l(s):l}function os(s){var l=Ce();return Uo(l,se,s)}function Uo(s,l,d){var g=s.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var _=s.baseQueue,C=g.pending;if(C!==null){if(_!==null){var M=_.next;_.next=C.next,C.next=M}l.baseQueue=_=C,g.pending=null}if(C=s.baseState,_===null)s.memoizedState=C;else{l=_.next;var O=M=null,U=null,rt=l,ct=!1;do{var ht=rt.lane&-536870913;if(ht!==rt.lane?(qt&ht)===ht:(Zn&ht)===ht){var at=rt.revertLane;if(at===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),ht===Er&&(ct=!0);else if((Zn&at)===at){rt=rt.next,at===Er&&(ct=!0);continue}else ht={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},U===null?(O=U=ht,M=C):U=U.next=ht,jt.lanes|=at,Si|=at;ht=rt.action,Zi&&d(C,ht),C=rt.hasEagerState?rt.eagerState:d(C,ht)}else at={lane:ht,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},U===null?(O=U=at,M=C):U=U.next=at,jt.lanes|=ht,Si|=ht;rt=rt.next}while(rt!==null&&rt!==l);if(U===null?M=C:U.next=O,!nn(C,s.memoizedState)&&(Pe=!0,ct&&(d=Sr,d!==null)))throw d;s.memoizedState=C,s.baseState=M,s.baseQueue=U,g.lastRenderedState=C}return _===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Go(s){var l=Ce(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var g=d.dispatch,_=d.pending,C=l.memoizedState;if(_!==null){d.pending=null;var M=_=_.next;do C=s(C,M.action),M=M.next;while(M!==_);nn(C,l.memoizedState)||(Pe=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,g]}function cu(s,l,d){var g=jt,_=Ce(),C=Kt;if(C){if(d===void 0)throw Error(i(407));d=d()}else d=l();var M=!nn((se||_).memoizedState,d);if(M&&(_.memoizedState=d,Pe=!0),_=_.queue,Xo(du.bind(null,g,_,s),[s]),_.getSnapshot!==l||M||Me!==null&&Me.memoizedState.tag&1){if(g.flags|=2048,Dr(9,{destroy:void 0},hu.bind(null,g,_,d,l),null),ue===null)throw Error(i(349));C||(Zn&127)!==0||uu(g,l,d)}return d}function uu(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=jt.updateQueue,l===null?(l=as(),jt.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function hu(s,l,d,g){l.value=d,l.getSnapshot=g,fu(l)&&pu(s)}function du(s,l,d){return d(function(){fu(l)&&pu(s)})}function fu(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!nn(s,d)}catch{return!0}}function pu(s){var l=Hi(s,2);l!==null&&Je(l,s,2)}function qo(s){var l=qe();if(typeof s=="function"){var d=s;if(s=d(),Zi){_n(!0);try{d()}finally{_n(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:s},l}function mu(s,l,d,g){return s.baseState=d,Uo(s,se,typeof g=="function"?g:Qn)}function Gf(s,l,d,g,_){if(us(s))throw Error(i(485));if(s=l.action,s!==null){var C={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};N.T!==null?d(!0):C.isTransition=!1,g(C),d=l.pending,d===null?(C.next=l.pending=C,gu(l,C)):(C.next=d.next,l.pending=d.next=C)}}function gu(s,l){var d=l.action,g=l.payload,_=s.state;if(l.isTransition){var C=N.T,M={};N.T=M;try{var O=d(_,g),U=N.S;U!==null&&U(M,O),yu(s,l,O)}catch(rt){Yo(s,l,rt)}finally{C!==null&&M.types!==null&&(C.types=M.types),N.T=C}}else try{C=d(_,g),yu(s,l,C)}catch(rt){Yo(s,l,rt)}}function yu(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){vu(s,l,g)},function(g){return Yo(s,l,g)}):vu(s,l,d)}function vu(s,l,d){l.status="fulfilled",l.value=d,bu(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,gu(s,d)))}function Yo(s,l,d){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,bu(l),l=l.next;while(l!==g)}s.action=null}function bu(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function xu(s,l){return l}function Eu(s,l){if(Kt){var d=ue.formState;if(d!==null){t:{var g=jt;if(Kt){if(de){e:{for(var _=de,C=vn;_.nodeType!==8;){if(!C){_=null;break e}if(_=xn(_.nextSibling),_===null){_=null;break e}}C=_.data,_=C==="F!"||C==="F"?_:null}if(_){de=xn(_.nextSibling),g=_.data==="F!";break t}}fi(g)}g=!1}g&&(l=d[0])}}return d=qe(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:l},d.queue=g,d=zu.bind(null,jt,g),g.dispatch=d,g=qo(!1),C=Jo.bind(null,jt,!1,g.queue),g=qe(),_={state:l,dispatch:null,action:s,pending:null},g.queue=_,d=Gf.bind(null,jt,_,C,d),_.dispatch=d,g.memoizedState=s,[l,d,!1]}function Su(s){var l=Ce();return Au(l,se,s)}function Au(s,l,d){if(l=Uo(s,l,xu)[0],s=os(Qn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=la(l)}catch(M){throw M===Ar?Za:M}else g=l;l=Ce();var _=l.queue,C=_.dispatch;return d!==l.memoizedState&&(jt.flags|=2048,Dr(9,{destroy:void 0},qf.bind(null,_,d),null)),[g,C,s]}function qf(s,l){s.action=l}function _u(s){var l=Ce(),d=se;if(d!==null)return Au(l,d,s);Ce(),l=l.memoizedState,d=Ce();var g=d.queue.dispatch;return d.memoizedState=s,[l,g,!1]}function Dr(s,l,d,g){return s={tag:s,create:d,deps:g,inst:l,next:null},l=jt.updateQueue,l===null&&(l=as(),jt.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s),s}function Tu(){return Ce().memoizedState}function ls(s,l,d,g){var _=qe();jt.flags|=s,_.memoizedState=Dr(1|l,{destroy:void 0},d,g===void 0?null:g)}function cs(s,l,d,g){var _=Ce();g=g===void 0?null:g;var C=_.memoizedState.inst;se!==null&&g!==null&&Bo(g,se.memoizedState.deps)?_.memoizedState=Dr(l,C,d,g):(jt.flags|=s,_.memoizedState=Dr(1|l,C,d,g))}function wu(s,l){ls(8390656,8,s,l)}function Xo(s,l){cs(2048,8,s,l)}function Yf(s){jt.flags|=4;var l=jt.updateQueue;if(l===null)l=as(),jt.updateQueue=l,l.events=[s];else{var d=l.events;d===null?l.events=[s]:d.push(s)}}function Cu(s){var l=Ce().memoizedState;return Yf({ref:l,nextImpl:s}),function(){if((ne&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function Du(s,l){return cs(4,2,s,l)}function Ru(s,l){return cs(4,4,s,l)}function Mu(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Pu(s,l,d){d=d!=null?d.concat([s]):null,cs(4,4,Mu.bind(null,l,s),d)}function Ko(){}function ku(s,l){var d=Ce();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&Bo(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function Fu(s,l){var d=Ce();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&Bo(l,g[1]))return g[0];if(g=s(),Zi){_n(!0);try{s()}finally{_n(!1)}}return d.memoizedState=[g,l],g}function Wo(s,l,d){return d===void 0||(Zn&1073741824)!==0&&(qt&261930)===0?s.memoizedState=l:(s.memoizedState=d,s=Lh(),jt.lanes|=s,Si|=s,d)}function Lu(s,l,d,g){return nn(d,l)?d:Tr.current!==null?(s=Wo(s,d,g),nn(s,l)||(Pe=!0),s):(Zn&42)===0||(Zn&1073741824)!==0&&(qt&261930)===0?(Pe=!0,s.memoizedState=d):(s=Lh(),jt.lanes|=s,Si|=s,l)}function Ou(s,l,d,g,_){var C=G.p;G.p=C!==0&&8>C?C:8;var M=N.T,O={};N.T=O,Jo(s,!1,l,d);try{var U=_(),rt=N.S;if(rt!==null&&rt(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ct=Hf(U,g);ca(s,l,ct,cn(s))}else ca(s,l,g,cn(s))}catch(ht){ca(s,l,{then:function(){},status:"rejected",reason:ht},cn())}finally{G.p=C,M!==null&&O.types!==null&&(M.types=O.types),N.T=M}}function Xf(){}function Zo(s,l,d,g){if(s.tag!==5)throw Error(i(476));var _=Nu(s).queue;Ou(s,_,l,I,d===null?Xf:function(){return Iu(s),d(g)})}function Nu(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:I},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Iu(s){var l=Nu(s);l.next===null&&(l=s.alternate.memoizedState),ca(s,l.next.queue,{},cn())}function Qo(){return ze(wa)}function Bu(){return Ce().memoizedState}function ju(){return Ce().memoizedState}function Kf(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=cn();s=gi(d);var g=yi(l,s,d);g!==null&&(Je(g,l,d),ra(g,l,d)),l={cache:Co()},s.payload=l;return}l=l.return}}function Wf(s,l,d){var g=cn();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},us(s)?Vu(l,d):(d=go(s,l,d,g),d!==null&&(Je(d,s,g),Hu(d,l,g)))}function zu(s,l,d){var g=cn();ca(s,l,d,g)}function ca(s,l,d,g){var _={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(us(s))Vu(l,_);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var M=l.lastRenderedState,O=C(M,d);if(_.hasEagerState=!0,_.eagerState=O,nn(O,M))return Ua(s,l,_,0),ue===null&&$a(),!1}catch{}finally{}if(d=go(s,l,_,g),d!==null)return Je(d,s,g),Hu(d,l,g),!0}return!1}function Jo(s,l,d,g){if(g={lane:2,revertLane:Pl(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},us(s)){if(l)throw Error(i(479))}else l=go(s,d,g,2),l!==null&&Je(l,s,2)}function us(s){var l=s.alternate;return s===jt||l!==null&&l===jt}function Vu(s,l){wr=is=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function Hu(s,l,d){if((d&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,pt(s,d)}}var ua={readContext:ze,use:ss,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee,useHostTransitionStatus:Ee,useFormState:Ee,useActionState:Ee,useOptimistic:Ee,useMemoCache:Ee,useCacheRefresh:Ee};ua.useEffectEvent=Ee;var $u={readContext:ze,use:ss,useCallback:function(s,l){return qe().memoizedState=[s,l===void 0?null:l],s},useContext:ze,useEffect:wu,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,ls(4194308,4,Mu.bind(null,l,s),d)},useLayoutEffect:function(s,l){return ls(4194308,4,s,l)},useInsertionEffect:function(s,l){ls(4,2,s,l)},useMemo:function(s,l){var d=qe();l=l===void 0?null:l;var g=s();if(Zi){_n(!0);try{s()}finally{_n(!1)}}return d.memoizedState=[g,l],g},useReducer:function(s,l,d){var g=qe();if(d!==void 0){var _=d(l);if(Zi){_n(!0);try{d(l)}finally{_n(!1)}}}else _=l;return g.memoizedState=g.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},g.queue=s,s=s.dispatch=Wf.bind(null,jt,s),[g.memoizedState,s]},useRef:function(s){var l=qe();return s={current:s},l.memoizedState=s},useState:function(s){s=qo(s);var l=s.queue,d=zu.bind(null,jt,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:Ko,useDeferredValue:function(s,l){var d=qe();return Wo(d,s,l)},useTransition:function(){var s=qo(!1);return s=Ou.bind(null,jt,s.queue,!0,!1),qe().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var g=jt,_=qe();if(Kt){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),ue===null)throw Error(i(349));(qt&127)!==0||uu(g,l,d)}_.memoizedState=d;var C={value:d,getSnapshot:l};return _.queue=C,wu(du.bind(null,g,C,s),[s]),g.flags|=2048,Dr(9,{destroy:void 0},hu.bind(null,g,C,d,l),null),d},useId:function(){var s=qe(),l=ue.identifierPrefix;if(Kt){var d=Nn,g=On;d=(g&~(1<<32-Ue(g)-1)).toString(32)+d,l="_"+l+"R_"+d,d=rs++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=$f++,l="_"+l+"r_"+d.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Qo,useFormState:Eu,useActionState:Eu,useOptimistic:function(s){var l=qe();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Jo.bind(null,jt,!0,d),d.dispatch=l,[s,l]},useMemoCache:$o,useCacheRefresh:function(){return qe().memoizedState=Kf.bind(null,jt)},useEffectEvent:function(s){var l=qe(),d={impl:s};return l.memoizedState=d,function(){if((ne&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},tl={readContext:ze,use:ss,useCallback:ku,useContext:ze,useEffect:Xo,useImperativeHandle:Pu,useInsertionEffect:Du,useLayoutEffect:Ru,useMemo:Fu,useReducer:os,useRef:Tu,useState:function(){return os(Qn)},useDebugValue:Ko,useDeferredValue:function(s,l){var d=Ce();return Lu(d,se.memoizedState,s,l)},useTransition:function(){var s=os(Qn)[0],l=Ce().memoizedState;return[typeof s=="boolean"?s:la(s),l]},useSyncExternalStore:cu,useId:Bu,useHostTransitionStatus:Qo,useFormState:Su,useActionState:Su,useOptimistic:function(s,l){var d=Ce();return mu(d,se,s,l)},useMemoCache:$o,useCacheRefresh:ju};tl.useEffectEvent=Cu;var Uu={readContext:ze,use:ss,useCallback:ku,useContext:ze,useEffect:Xo,useImperativeHandle:Pu,useInsertionEffect:Du,useLayoutEffect:Ru,useMemo:Fu,useReducer:Go,useRef:Tu,useState:function(){return Go(Qn)},useDebugValue:Ko,useDeferredValue:function(s,l){var d=Ce();return se===null?Wo(d,s,l):Lu(d,se.memoizedState,s,l)},useTransition:function(){var s=Go(Qn)[0],l=Ce().memoizedState;return[typeof s=="boolean"?s:la(s),l]},useSyncExternalStore:cu,useId:Bu,useHostTransitionStatus:Qo,useFormState:_u,useActionState:_u,useOptimistic:function(s,l){var d=Ce();return se!==null?mu(d,se,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:$o,useCacheRefresh:ju};Uu.useEffectEvent=Cu;function el(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:y({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var nl={enqueueSetState:function(s,l,d){s=s._reactInternals;var g=cn(),_=gi(g);_.payload=l,d!=null&&(_.callback=d),l=yi(s,_,g),l!==null&&(Je(l,s,g),ra(l,s,g))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=cn(),_=gi(g);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=yi(s,_,g),l!==null&&(Je(l,s,g),ra(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=cn(),g=gi(d);g.tag=2,l!=null&&(g.callback=l),l=yi(s,g,d),l!==null&&(Je(l,s,d),ra(l,s,d))}};function Gu(s,l,d,g,_,C,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,C,M):l.prototype&&l.prototype.isPureReactComponent?!Wr(d,g)||!Wr(_,C):!0}function qu(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&nl.enqueueReplaceState(l,l.state,null)}function Qi(s,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(s=s.defaultProps){d===l&&(d=y({},d));for(var _ in s)d[_]===void 0&&(d[_]=s[_])}return d}function Yu(s){Ha(s)}function Xu(s){console.error(s)}function Ku(s){Ha(s)}function hs(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function Wu(s,l,d){try{var g=s.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function il(s,l,d){return d=gi(d),d.tag=3,d.payload={element:null},d.callback=function(){hs(s,l)},d}function Zu(s){return s=gi(s),s.tag=3,s}function Qu(s,l,d,g){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var C=g.value;s.payload=function(){return _(C)},s.callback=function(){Wu(l,d,g)}}var M=d.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){Wu(l,d,g),typeof _!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var O=g.stack;this.componentDidCatch(g.value,{componentStack:O!==null?O:""})})}function Zf(s,l,d,g,_){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&xr(l,d,_,!0),d=an.current,d!==null){switch(d.tag){case 31:case 13:return bn===null?As():d.alternate===null&&Se===0&&(Se=3),d.flags&=-257,d.flags|=65536,d.lanes=_,g===Qa?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),Dl(s,g,_)),!1;case 22:return d.flags|=65536,g===Qa?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),Dl(s,g,_)),!1}throw Error(i(435,d.tag))}return Dl(s,g,_),As(),!1}if(Kt)return l=an.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=_,g!==So&&(s=Error(i(422),{cause:g}),Jr(mn(s,d)))):(g!==So&&(l=Error(i(423),{cause:g}),Jr(mn(l,d))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,g=mn(g,d),_=il(s.stateNode,g,_),Fo(s,_),Se!==4&&(Se=2)),!1;var C=Error(i(520),{cause:g});if(C=mn(C,d),va===null?va=[C]:va.push(C),Se!==4&&(Se=2),l===null)return!0;g=mn(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=_&-_,d.lanes|=s,s=il(d.stateNode,g,s),Fo(d,s),!1;case 1:if(l=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ai===null||!Ai.has(C))))return d.flags|=65536,_&=-_,d.lanes|=_,_=Zu(_),Qu(_,s,d,g),Fo(d,_),!1}d=d.return}while(d!==null);return!1}var rl=Error(i(461)),Pe=!1;function Ve(s,l,d,g){l.child=s===null?nu(l,null,d,g):Wi(l,s.child,d,g)}function Ju(s,l,d,g,_){d=d.render;var C=l.ref;if("ref"in g){var M={};for(var O in g)O!=="ref"&&(M[O]=g[O])}else M=g;return qi(l),g=jo(s,l,d,M,C,_),O=zo(),s!==null&&!Pe?(Vo(s,l,_),Jn(s,l,_)):(Kt&&O&&xo(l),l.flags|=1,Ve(s,l,g,_),l.child)}function th(s,l,d,g,_){if(s===null){var C=d.type;return typeof C=="function"&&!yo(C)&&C.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=C,eh(s,l,C,g,_)):(s=qa(d.type,null,g,l,l.mode,_),s.ref=l.ref,s.return=l,l.child=s)}if(C=s.child,!dl(s,_)){var M=C.memoizedProps;if(d=d.compare,d=d!==null?d:Wr,d(M,g)&&s.ref===l.ref)return Jn(s,l,_)}return l.flags|=1,s=Yn(C,g),s.ref=l.ref,s.return=l,l.child=s}function eh(s,l,d,g,_){if(s!==null){var C=s.memoizedProps;if(Wr(C,g)&&s.ref===l.ref)if(Pe=!1,l.pendingProps=g=C,dl(s,_))(s.flags&131072)!==0&&(Pe=!0);else return l.lanes=s.lanes,Jn(s,l,_)}return al(s,l,d,g,_)}function nh(s,l,d,g){var _=g.children,C=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(C=C!==null?C.baseLanes|d:d,s!==null){for(g=l.child=s.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~C}else g=0,l.child=null;return ih(s,l,C,d,g)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wa(l,C!==null?C.cachePool:null),C!==null?au(l,C):Oo(),su(l);else return g=l.lanes=536870912,ih(s,l,C!==null?C.baseLanes|d:d,d,g)}else C!==null?(Wa(l,C.cachePool),au(l,C),bi(),l.memoizedState=null):(s!==null&&Wa(l,null),Oo(),bi());return Ve(s,l,_,d),l.child}function ha(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function ih(s,l,d,g,_){var C=Ro();return C=C===null?null:{parent:Re._currentValue,pool:C},l.memoizedState={baseLanes:d,cachePool:C},s!==null&&Wa(l,null),Oo(),su(l),s!==null&&xr(s,l,g,!0),l.childLanes=_,null}function ds(s,l){return l=ps({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function rh(s,l,d){return Wi(l,s.child,null,d),s=ds(l,l.pendingProps),s.flags|=2,sn(l),l.memoizedState=null,s}function Qf(s,l,d){var g=l.pendingProps,_=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Kt){if(g.mode==="hidden")return s=ds(l,g),l.lanes=536870912,ha(null,s);if(Io(l),(s=de)?(s=gd(s,vn),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:hi!==null?{id:On,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},d=Vc(s),d.return=l,l.child=d,je=l,de=null)):s=null,s===null)throw fi(l);return l.lanes=536870912,null}return ds(l,g)}var C=s.memoizedState;if(C!==null){var M=C.dehydrated;if(Io(l),_)if(l.flags&256)l.flags&=-257,l=rh(s,l,d);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(i(558));else if(Pe||xr(s,l,d,!1),_=(d&s.childLanes)!==0,Pe||_){if(g=ue,g!==null&&(M=xt(g,d),M!==0&&M!==C.retryLane))throw C.retryLane=M,Hi(s,M),Je(g,s,M),rl;As(),l=rh(s,l,d)}else s=C.treeContext,de=xn(M.nextSibling),je=l,Kt=!0,di=null,vn=!1,s!==null&&Uc(l,s),l=ds(l,g),l.flags|=4096;return l}return s=Yn(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function fs(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function al(s,l,d,g,_){return qi(l),d=jo(s,l,d,g,void 0,_),g=zo(),s!==null&&!Pe?(Vo(s,l,_),Jn(s,l,_)):(Kt&&g&&xo(l),l.flags|=1,Ve(s,l,d,_),l.child)}function ah(s,l,d,g,_,C){return qi(l),l.updateQueue=null,d=lu(l,g,d,_),ou(s),g=zo(),s!==null&&!Pe?(Vo(s,l,C),Jn(s,l,C)):(Kt&&g&&xo(l),l.flags|=1,Ve(s,l,d,C),l.child)}function sh(s,l,d,g,_){if(qi(l),l.stateNode===null){var C=gr,M=d.contextType;typeof M=="object"&&M!==null&&(C=ze(M)),C=new d(g,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=nl,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=g,C.state=l.memoizedState,C.refs={},Po(l),M=d.contextType,C.context=typeof M=="object"&&M!==null?ze(M):gr,C.state=l.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(el(l,d,M,g),C.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&nl.enqueueReplaceState(C,C.state,null),sa(l,g,C,_),aa(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){C=l.stateNode;var O=l.memoizedProps,U=Qi(d,O);C.props=U;var rt=C.context,ct=d.contextType;M=gr,typeof ct=="object"&&ct!==null&&(M=ze(ct));var ht=d.getDerivedStateFromProps;ct=typeof ht=="function"||typeof C.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,ct||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O||rt!==M)&&qu(l,C,g,M),mi=!1;var at=l.memoizedState;C.state=at,sa(l,g,C,_),aa(),rt=l.memoizedState,O||at!==rt||mi?(typeof ht=="function"&&(el(l,d,ht,g),rt=l.memoizedState),(U=mi||Gu(l,d,U,g,at,rt,M))?(ct||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=rt),C.props=g,C.state=rt,C.context=M,g=U):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{C=l.stateNode,ko(s,l),M=l.memoizedProps,ct=Qi(d,M),C.props=ct,ht=l.pendingProps,at=C.context,rt=d.contextType,U=gr,typeof rt=="object"&&rt!==null&&(U=ze(rt)),O=d.getDerivedStateFromProps,(rt=typeof O=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==ht||at!==U)&&qu(l,C,g,U),mi=!1,at=l.memoizedState,C.state=at,sa(l,g,C,_),aa();var lt=l.memoizedState;M!==ht||at!==lt||mi||s!==null&&s.dependencies!==null&&Xa(s.dependencies)?(typeof O=="function"&&(el(l,d,O,g),lt=l.memoizedState),(ct=mi||Gu(l,d,ct,g,at,lt,U)||s!==null&&s.dependencies!==null&&Xa(s.dependencies))?(rt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,lt,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,lt,U)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===s.memoizedProps&&at===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&at===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=lt),C.props=g,C.state=lt,C.context=U,g=ct):(typeof C.componentDidUpdate!="function"||M===s.memoizedProps&&at===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&at===s.memoizedState||(l.flags|=1024),g=!1)}return C=g,fs(s,l),g=(l.flags&128)!==0,C||g?(C=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,s!==null&&g?(l.child=Wi(l,s.child,null,_),l.child=Wi(l,null,d,_)):Ve(s,l,d,_),l.memoizedState=C.state,s=l.child):s=Jn(s,l,_),s}function oh(s,l,d,g){return Ui(),l.flags|=256,Ve(s,l,d,g),l.child}var sl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ol(s){return{baseLanes:s,cachePool:Wc()}}function ll(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ln),s}function lh(s,l,d){var g=l.pendingProps,_=!1,C=(l.flags&128)!==0,M;if((M=C)||(M=s!==null&&s.memoizedState===null?!1:(we.current&2)!==0),M&&(_=!0,l.flags&=-129),M=(l.flags&32)!==0,l.flags&=-33,s===null){if(Kt){if(_?vi(l):bi(),(s=de)?(s=gd(s,vn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:hi!==null?{id:On,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},d=Vc(s),d.return=l,l.child=d,je=l,de=null)):s=null,s===null)throw fi(l);return Ul(s)?l.lanes=32:l.lanes=536870912,null}var O=g.children;return g=g.fallback,_?(bi(),_=l.mode,O=ps({mode:"hidden",children:O},_),g=$i(g,_,d,null),O.return=l,g.return=l,O.sibling=g,l.child=O,g=l.child,g.memoizedState=ol(d),g.childLanes=ll(s,M,d),l.memoizedState=sl,ha(null,g)):(vi(l),cl(l,O))}var U=s.memoizedState;if(U!==null&&(O=U.dehydrated,O!==null)){if(C)l.flags&256?(vi(l),l.flags&=-257,l=ul(s,l,d)):l.memoizedState!==null?(bi(),l.child=s.child,l.flags|=128,l=null):(bi(),O=g.fallback,_=l.mode,g=ps({mode:"visible",children:g.children},_),O=$i(O,_,d,null),O.flags|=2,g.return=l,O.return=l,g.sibling=O,l.child=g,Wi(l,s.child,null,d),g=l.child,g.memoizedState=ol(d),g.childLanes=ll(s,M,d),l.memoizedState=sl,l=ha(null,g));else if(vi(l),Ul(O)){if(M=O.nextSibling&&O.nextSibling.dataset,M)var rt=M.dgst;M=rt,g=Error(i(419)),g.stack="",g.digest=M,Jr({value:g,source:null,stack:null}),l=ul(s,l,d)}else if(Pe||xr(s,l,d,!1),M=(d&s.childLanes)!==0,Pe||M){if(M=ue,M!==null&&(g=xt(M,d),g!==0&&g!==U.retryLane))throw U.retryLane=g,Hi(s,g),Je(M,s,g),rl;$l(O)||As(),l=ul(s,l,d)}else $l(O)?(l.flags|=192,l.child=s.child,l=null):(s=U.treeContext,de=xn(O.nextSibling),je=l,Kt=!0,di=null,vn=!1,s!==null&&Uc(l,s),l=cl(l,g.children),l.flags|=4096);return l}return _?(bi(),O=g.fallback,_=l.mode,U=s.child,rt=U.sibling,g=Yn(U,{mode:"hidden",children:g.children}),g.subtreeFlags=U.subtreeFlags&65011712,rt!==null?O=Yn(rt,O):(O=$i(O,_,d,null),O.flags|=2),O.return=l,g.return=l,g.sibling=O,l.child=g,ha(null,g),g=l.child,O=s.child.memoizedState,O===null?O=ol(d):(_=O.cachePool,_!==null?(U=Re._currentValue,_=_.parent!==U?{parent:U,pool:U}:_):_=Wc(),O={baseLanes:O.baseLanes|d,cachePool:_}),g.memoizedState=O,g.childLanes=ll(s,M,d),l.memoizedState=sl,ha(s.child,g)):(vi(l),d=s.child,s=d.sibling,d=Yn(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,s!==null&&(M=l.deletions,M===null?(l.deletions=[s],l.flags|=16):M.push(s)),l.child=d,l.memoizedState=null,d)}function cl(s,l){return l=ps({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function ps(s,l){return s=rn(22,s,null,l),s.lanes=0,s}function ul(s,l,d){return Wi(l,s.child,null,d),s=cl(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function ch(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),To(s.return,l,d)}function hl(s,l,d,g,_,C){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:_,treeForkCount:C}:(M.isBackwards=l,M.rendering=null,M.renderingStartTime=0,M.last=g,M.tail=d,M.tailMode=_,M.treeForkCount=C)}function uh(s,l,d){var g=l.pendingProps,_=g.revealOrder,C=g.tail;g=g.children;var M=we.current,O=(M&2)!==0;if(O?(M=M&1|2,l.flags|=128):M&=1,st(we,M),Ve(s,l,g,d),g=Kt?Qr:0,!O&&s!==null&&(s.flags&128)!==0)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ch(s,d,l);else if(s.tag===19)ch(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(d=l.child,_=null;d!==null;)s=d.alternate,s!==null&&ns(s)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),hl(l,!1,_,d,C,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(s=_.alternate,s!==null&&ns(s)===null){l.child=_;break}s=_.sibling,_.sibling=d,d=_,_=s}hl(l,!0,d,null,C,g);break;case"together":hl(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Jn(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Si|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(xr(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,d=Yn(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Yn(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function dl(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Xa(s)))}function Jf(s,l,d){switch(l.tag){case 3:Mt(l,l.stateNode.containerInfo),pi(l,Re,s.memoizedState.cache),Ui();break;case 27:case 5:wt(l);break;case 4:Mt(l,l.stateNode.containerInfo);break;case 10:pi(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Io(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(vi(l),l.flags|=128,null):(d&l.child.childLanes)!==0?lh(s,l,d):(vi(l),s=Jn(s,l,d),s!==null?s.sibling:null);vi(l);break;case 19:var _=(s.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(xr(s,l,d,!1),g=(d&l.childLanes)!==0),_){if(g)return uh(s,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),st(we,we.current),g)break;return null;case 22:return l.lanes=0,nh(s,l,d,l.pendingProps);case 24:pi(l,Re,s.memoizedState.cache)}return Jn(s,l,d)}function hh(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)Pe=!0;else{if(!dl(s,d)&&(l.flags&128)===0)return Pe=!1,Jf(s,l,d);Pe=(s.flags&131072)!==0}else Pe=!1,Kt&&(l.flags&1048576)!==0&&$c(l,Qr,l.index);switch(l.lanes=0,l.tag){case 16:t:{var g=l.pendingProps;if(s=Xi(l.elementType),l.type=s,typeof s=="function")yo(s)?(g=Qi(s,g),l.tag=1,l=sh(null,l,s,g,d)):(l.tag=0,l=al(null,l,s,g,d));else{if(s!=null){var _=s.$$typeof;if(_===F){l.tag=11,l=Ju(null,l,s,g,d);break t}else if(_===L){l.tag=14,l=th(null,l,s,g,d);break t}}throw l=K(s)||s,Error(i(306,l,""))}}return l;case 0:return al(s,l,l.type,l.pendingProps,d);case 1:return g=l.type,_=Qi(g,l.pendingProps),sh(s,l,g,_,d);case 3:t:{if(Mt(l,l.stateNode.containerInfo),s===null)throw Error(i(387));g=l.pendingProps;var C=l.memoizedState;_=C.element,ko(s,l),sa(l,g,null,d);var M=l.memoizedState;if(g=M.cache,pi(l,Re,g),g!==C.cache&&wo(l,[Re],d,!0),aa(),g=M.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:M.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=oh(s,l,g,d);break t}else if(g!==_){_=mn(Error(i(424)),l),Jr(_),l=oh(s,l,g,d);break t}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(de=xn(s.firstChild),je=l,Kt=!0,di=null,vn=!0,d=nu(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ui(),g===_){l=Jn(s,l,d);break t}Ve(s,l,g,d)}l=l.child}return l;case 26:return fs(s,l),s===null?(d=Sd(l.type,null,l.pendingProps,null))?l.memoizedState=d:Kt||(d=l.type,s=l.pendingProps,g=Ms(bt.current).createElement(d),g[Et]=l,g[At]=s,He(g,d,s),me(g),l.stateNode=g):l.memoizedState=Sd(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return wt(l),s===null&&Kt&&(g=l.stateNode=bd(l.type,l.pendingProps,bt.current),je=l,vn=!0,_=de,Ci(l.type)?(Gl=_,de=xn(g.firstChild)):de=_),Ve(s,l,l.pendingProps.children,d),fs(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Kt&&((_=g=de)&&(g=Pp(g,l.type,l.pendingProps,vn),g!==null?(l.stateNode=g,je=l,de=xn(g.firstChild),vn=!1,_=!0):_=!1),_||fi(l)),wt(l),_=l.type,C=l.pendingProps,M=s!==null?s.memoizedProps:null,g=C.children,zl(_,C)?g=null:M!==null&&zl(_,M)&&(l.flags|=32),l.memoizedState!==null&&(_=jo(s,l,Uf,null,null,d),wa._currentValue=_),fs(s,l),Ve(s,l,g,d),l.child;case 6:return s===null&&Kt&&((s=d=de)&&(d=kp(d,l.pendingProps,vn),d!==null?(l.stateNode=d,je=l,de=null,s=!0):s=!1),s||fi(l)),null;case 13:return lh(s,l,d);case 4:return Mt(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Wi(l,null,g,d):Ve(s,l,g,d),l.child;case 11:return Ju(s,l,l.type,l.pendingProps,d);case 7:return Ve(s,l,l.pendingProps,d),l.child;case 8:return Ve(s,l,l.pendingProps.children,d),l.child;case 12:return Ve(s,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,pi(l,l.type,g.value),Ve(s,l,g.children,d),l.child;case 9:return _=l.type._context,g=l.pendingProps.children,qi(l),_=ze(_),g=g(_),l.flags|=1,Ve(s,l,g,d),l.child;case 14:return th(s,l,l.type,l.pendingProps,d);case 15:return eh(s,l,l.type,l.pendingProps,d);case 19:return uh(s,l,d);case 31:return Qf(s,l,d);case 22:return nh(s,l,d,l.pendingProps);case 24:return qi(l),g=ze(Re),s===null?(_=Ro(),_===null&&(_=ue,C=Co(),_.pooledCache=C,C.refCount++,C!==null&&(_.pooledCacheLanes|=d),_=C),l.memoizedState={parent:g,cache:_},Po(l),pi(l,Re,_)):((s.lanes&d)!==0&&(ko(s,l),sa(l,null,null,d),aa()),_=s.memoizedState,C=l.memoizedState,_.parent!==g?(_={parent:g,cache:g},l.memoizedState=_,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=_),pi(l,Re,g)):(g=C.cache,pi(l,Re,g),g!==_.cache&&wo(l,[Re],d,!0))),Ve(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function ti(s){s.flags|=4}function fl(s,l,d,g,_){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Bh())s.flags|=8192;else throw Ki=Qa,Mo}else s.flags&=-16777217}function dh(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Cd(l))if(Bh())s.flags|=8192;else throw Ki=Qa,Mo}function ms(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Fa():536870912,s.lanes|=l,kr|=l)}function da(s,l){if(!Kt)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function fe(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var _=s.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)d|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function tp(s,l,d){var g=l.pendingProps;switch(Eo(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(l),null;case 1:return fe(l),null;case 3:return d=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Wn(Re),Ot(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(br(l)?ti(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ao())),fe(l),null;case 26:var _=l.type,C=l.memoizedState;return s===null?(ti(l),C!==null?(fe(l),dh(l,C)):(fe(l),fl(l,_,null,g,d))):C?C!==s.memoizedState?(ti(l),fe(l),dh(l,C)):(fe(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&ti(l),fe(l),fl(l,_,s,g,d)),null;case 27:if($t(l),d=bt.current,_=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&ti(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return fe(l),null}s=dt.current,br(l)?Gc(l):(s=bd(_,g,d),l.stateNode=s,ti(l))}return fe(l),null;case 5:if($t(l),_=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&ti(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return fe(l),null}if(C=dt.current,br(l))Gc(l);else{var M=Ms(bt.current);switch(C){case 1:C=M.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:C=M.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":C=M.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":C=M.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":C=M.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof g.is=="string"?M.createElement("select",{is:g.is}):M.createElement("select"),g.multiple?C.multiple=!0:g.size&&(C.size=g.size);break;default:C=typeof g.is=="string"?M.createElement(_,{is:g.is}):M.createElement(_)}}C[Et]=l,C[At]=g;t:for(M=l.child;M!==null;){if(M.tag===5||M.tag===6)C.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===l)break t;for(;M.sibling===null;){if(M.return===null||M.return===l)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}l.stateNode=C;t:switch(He(C,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}g&&ti(l)}}return fe(l),fl(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,d),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&ti(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(s=bt.current,br(l)){if(s=l.stateNode,d=l.memoizedProps,g=null,_=je,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}s[Et]=l,s=!!(s.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||ld(s.nodeValue,d)),s||fi(l,!0)}else s=Ms(s).createTextNode(g),s[Et]=l,l.stateNode=s}return fe(l),null;case 31:if(d=l.memoizedState,s===null||s.memoizedState!==null){if(g=br(l),d!==null){if(s===null){if(!g)throw Error(i(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Et]=l}else Ui(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fe(l),s=!1}else d=Ao(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return l.flags&256?(sn(l),l):(sn(l),null);if((l.flags&128)!==0)throw Error(i(558))}return fe(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=br(l),g!==null&&g.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Et]=l}else Ui(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fe(l),_=!1}else _=Ao(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return l.flags&256?(sn(l),l):(sn(l),null)}return sn(l),(l.flags&128)!==0?(l.lanes=d,l):(d=g!==null,s=s!==null&&s.memoizedState!==null,d&&(g=l.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==_&&(g.flags|=2048)),d!==s&&d&&(l.child.flags|=8192),ms(l,l.updateQueue),fe(l),null);case 4:return Ot(),s===null&&Ol(l.stateNode.containerInfo),fe(l),null;case 10:return Wn(l.type),fe(l),null;case 19:if(Q(we),g=l.memoizedState,g===null)return fe(l),null;if(_=(l.flags&128)!==0,C=g.rendering,C===null)if(_)da(g,!1);else{if(Se!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(C=ns(s),C!==null){for(l.flags|=128,da(g,!1),s=C.updateQueue,l.updateQueue=s,ms(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)zc(d,s),d=d.sibling;return st(we,we.current&1|2),Kt&&Xn(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&vt()>xs&&(l.flags|=128,_=!0,da(g,!1),l.lanes=4194304)}else{if(!_)if(s=ns(C),s!==null){if(l.flags|=128,_=!0,s=s.updateQueue,l.updateQueue=s,ms(l,s),da(g,!0),g.tail===null&&g.tailMode==="hidden"&&!C.alternate&&!Kt)return fe(l),null}else 2*vt()-g.renderingStartTime>xs&&d!==536870912&&(l.flags|=128,_=!0,da(g,!1),l.lanes=4194304);g.isBackwards?(C.sibling=l.child,l.child=C):(s=g.last,s!==null?s.sibling=C:l.child=C,g.last=C)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=vt(),s.sibling=null,d=we.current,st(we,_?d&1|2:d&1),Kt&&Xn(l,g.treeForkCount),s):(fe(l),null);case 22:case 23:return sn(l),No(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(fe(l),l.subtreeFlags&6&&(l.flags|=8192)):fe(l),d=l.updateQueue,d!==null&&ms(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),s!==null&&Q(Yi),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Wn(Re),fe(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function ep(s,l){switch(Eo(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Wn(Re),Ot(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return $t(l),null;case 31:if(l.memoizedState!==null){if(sn(l),l.alternate===null)throw Error(i(340));Ui()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(sn(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Ui()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Q(we),null;case 4:return Ot(),null;case 10:return Wn(l.type),null;case 22:case 23:return sn(l),No(),s!==null&&Q(Yi),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Wn(Re),null;case 25:return null;default:return null}}function fh(s,l){switch(Eo(l),l.tag){case 3:Wn(Re),Ot();break;case 26:case 27:case 5:$t(l);break;case 4:Ot();break;case 31:l.memoizedState!==null&&sn(l);break;case 13:sn(l);break;case 19:Q(we);break;case 10:Wn(l.type);break;case 22:case 23:sn(l),No(),s!==null&&Q(Yi);break;case 24:Wn(Re)}}function fa(s,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var _=g.next;d=_;do{if((d.tag&s)===s){g=void 0;var C=d.create,M=d.inst;g=C(),M.destroy=g}d=d.next}while(d!==_)}}catch(O){re(l,l.return,O)}}function xi(s,l,d){try{var g=l.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var C=_.next;g=C;do{if((g.tag&s)===s){var M=g.inst,O=M.destroy;if(O!==void 0){M.destroy=void 0,_=l;var U=d,rt=O;try{rt()}catch(ct){re(_,U,ct)}}}g=g.next}while(g!==C)}}catch(ct){re(l,l.return,ct)}}function ph(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{ru(l,d)}catch(g){re(s,s.return,g)}}}function mh(s,l,d){d.props=Qi(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(g){re(s,l,g)}}function pa(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof d=="function"?s.refCleanup=d(g):d.current=g}}catch(_){re(s,l,_)}}function In(s,l){var d=s.ref,g=s.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(_){re(s,l,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){re(s,l,_)}else d.current=null}function gh(s){var l=s.type,d=s.memoizedProps,g=s.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break t;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(_){re(s,s.return,_)}}function pl(s,l,d){try{var g=s.stateNode;Tp(g,s.type,d,l),g[At]=l}catch(_){re(s,s.return,_)}}function yh(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ci(s.type)||s.tag===4}function ml(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||yh(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ci(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gl(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Gn));else if(g!==4&&(g===27&&Ci(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(gl(s,l,d),s=s.sibling;s!==null;)gl(s,l,d),s=s.sibling}function gs(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(g===27&&Ci(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(gs(s,l,d),s=s.sibling;s!==null;)gs(s,l,d),s=s.sibling}function vh(s){var l=s.stateNode,d=s.memoizedProps;try{for(var g=s.type,_=l.attributes;_.length;)l.removeAttributeNode(_[0]);He(l,g,d),l[Et]=s,l[At]=d}catch(C){re(s,s.return,C)}}var ei=!1,ke=!1,yl=!1,bh=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function np(s,l){if(s=s.containerInfo,Bl=Is,s=Pc(s),co(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else t:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var _=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break t}var M=0,O=-1,U=-1,rt=0,ct=0,ht=s,at=null;e:for(;;){for(var lt;ht!==d||_!==0&&ht.nodeType!==3||(O=M+_),ht!==C||g!==0&&ht.nodeType!==3||(U=M+g),ht.nodeType===3&&(M+=ht.nodeValue.length),(lt=ht.firstChild)!==null;)at=ht,ht=lt;for(;;){if(ht===s)break e;if(at===d&&++rt===_&&(O=M),at===C&&++ct===g&&(U=M),(lt=ht.nextSibling)!==null)break;ht=at,at=ht.parentNode}ht=lt}d=O===-1||U===-1?null:{start:O,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(jl={focusedElem:s,selectionRange:d},Is=!1,Ie=l;Ie!==null;)if(l=Ie,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ie=s;else for(;Ie!==null;){switch(l=Ie,C=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)_=s[d],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,d=l,_=C.memoizedProps,C=C.memoizedState,g=d.stateNode;try{var _t=Qi(d.type,_);s=g.getSnapshotBeforeUpdate(_t,C),g.__reactInternalSnapshotBeforeUpdate=s}catch(Bt){re(d,d.return,Bt)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)Hl(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hl(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,Ie=s;break}Ie=l.return}}function xh(s,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:ii(s,d),g&4&&fa(5,d);break;case 1:if(ii(s,d),g&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(M){re(d,d.return,M)}else{var _=Qi(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(_,l,s.__reactInternalSnapshotBeforeUpdate)}catch(M){re(d,d.return,M)}}g&64&&ph(d),g&512&&pa(d,d.return);break;case 3:if(ii(s,d),g&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{ru(s,l)}catch(M){re(d,d.return,M)}}break;case 27:l===null&&g&4&&vh(d);case 26:case 5:ii(s,d),l===null&&g&4&&gh(d),g&512&&pa(d,d.return);break;case 12:ii(s,d);break;case 31:ii(s,d),g&4&&Ah(s,d);break;case 13:ii(s,d),g&4&&_h(s,d),g&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=fp.bind(null,d),Fp(s,d))));break;case 22:if(g=d.memoizedState!==null||ei,!g){l=l!==null&&l.memoizedState!==null||ke,_=ei;var C=ke;ei=g,(ke=l)&&!C?ri(s,d,(d.subtreeFlags&8772)!==0):ii(s,d),ei=_,ke=C}break;case 30:break;default:ii(s,d)}}function Eh(s){var l=s.alternate;l!==null&&(s.alternate=null,Eh(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Tn(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ge=null,Ke=!1;function ni(s,l,d){for(d=d.child;d!==null;)Sh(s,l,d),d=d.sibling}function Sh(s,l,d){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(An,d)}catch{}switch(d.tag){case 26:ke||In(d,l),ni(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ke||In(d,l);var g=ge,_=Ke;Ci(d.type)&&(ge=d.stateNode,Ke=!1),ni(s,l,d),Aa(d.stateNode),ge=g,Ke=_;break;case 5:ke||In(d,l);case 6:if(g=ge,_=Ke,ge=null,ni(s,l,d),ge=g,Ke=_,ge!==null)if(Ke)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(d.stateNode)}catch(C){re(d,l,C)}else try{ge.removeChild(d.stateNode)}catch(C){re(d,l,C)}break;case 18:ge!==null&&(Ke?(s=ge,pd(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),zr(s)):pd(ge,d.stateNode));break;case 4:g=ge,_=Ke,ge=d.stateNode.containerInfo,Ke=!0,ni(s,l,d),ge=g,Ke=_;break;case 0:case 11:case 14:case 15:xi(2,d,l),ke||xi(4,d,l),ni(s,l,d);break;case 1:ke||(In(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&mh(d,l,g)),ni(s,l,d);break;case 21:ni(s,l,d);break;case 22:ke=(g=ke)||d.memoizedState!==null,ni(s,l,d),ke=g;break;default:ni(s,l,d)}}function Ah(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{zr(s)}catch(d){re(l,l.return,d)}}}function _h(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{zr(s)}catch(d){re(l,l.return,d)}}function rp(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new bh),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new bh),l;default:throw Error(i(435,s.tag))}}function ys(s,l){var d=rp(s);l.forEach(function(g){if(!d.has(g)){d.add(g);var _=pp.bind(null,s,g);g.then(_,_)}})}function We(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var _=d[g],C=s,M=l,O=M;t:for(;O!==null;){switch(O.tag){case 27:if(Ci(O.type)){ge=O.stateNode,Ke=!1;break t}break;case 5:ge=O.stateNode,Ke=!1;break t;case 3:case 4:ge=O.stateNode.containerInfo,Ke=!0;break t}O=O.return}if(ge===null)throw Error(i(160));Sh(C,M,_),ge=null,Ke=!1,C=_.alternate,C!==null&&(C.return=null),_.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Th(l,s),l=l.sibling}var Dn=null;function Th(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:We(l,s),Ze(s),g&4&&(xi(3,s,s.return),fa(3,s),xi(5,s,s.return));break;case 1:We(l,s),Ze(s),g&512&&(ke||d===null||In(d,d.return)),g&64&&ei&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var _=Dn;if(We(l,s),Ze(s),g&512&&(ke||d===null||In(d,d.return)),g&4){var C=d!==null?d.memoizedState:null;if(g=s.memoizedState,d===null)if(g===null)if(s.stateNode===null){t:{g=s.type,d=s.memoizedProps,_=_.ownerDocument||_;e:switch(g){case"title":C=_.getElementsByTagName("title")[0],(!C||C[ee]||C[Et]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=_.createElement(g),_.head.insertBefore(C,_.querySelector("head > title"))),He(C,g,d),C[Et]=s,me(C),g=C;break t;case"link":var M=Td("link","href",_).get(g+(d.href||""));if(M){for(var O=0;O<M.length;O++)if(C=M[O],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){M.splice(O,1);break e}}C=_.createElement(g),He(C,g,d),_.head.appendChild(C);break;case"meta":if(M=Td("meta","content",_).get(g+(d.content||""))){for(O=0;O<M.length;O++)if(C=M[O],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){M.splice(O,1);break e}}C=_.createElement(g),He(C,g,d),_.head.appendChild(C);break;default:throw Error(i(468,g))}C[Et]=s,me(C),g=C}s.stateNode=g}else wd(_,s.type,s.stateNode);else s.stateNode=_d(_,g,s.memoizedProps);else C!==g?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,g===null?wd(_,s.type,s.stateNode):_d(_,g,s.memoizedProps)):g===null&&s.stateNode!==null&&pl(s,s.memoizedProps,d.memoizedProps)}break;case 27:We(l,s),Ze(s),g&512&&(ke||d===null||In(d,d.return)),d!==null&&g&4&&pl(s,s.memoizedProps,d.memoizedProps);break;case 5:if(We(l,s),Ze(s),g&512&&(ke||d===null||In(d,d.return)),s.flags&32){_=s.stateNode;try{lr(_,"")}catch(_t){re(s,s.return,_t)}}g&4&&s.stateNode!=null&&(_=s.memoizedProps,pl(s,_,d!==null?d.memoizedProps:_)),g&1024&&(yl=!0);break;case 6:if(We(l,s),Ze(s),g&4){if(s.stateNode===null)throw Error(i(162));g=s.memoizedProps,d=s.stateNode;try{d.nodeValue=g}catch(_t){re(s,s.return,_t)}}break;case 3:if(Fs=null,_=Dn,Dn=Ps(l.containerInfo),We(l,s),Dn=_,Ze(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{zr(l.containerInfo)}catch(_t){re(s,s.return,_t)}yl&&(yl=!1,wh(s));break;case 4:g=Dn,Dn=Ps(s.stateNode.containerInfo),We(l,s),Ze(s),Dn=g;break;case 12:We(l,s),Ze(s);break;case 31:We(l,s),Ze(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,ys(s,g)));break;case 13:We(l,s),Ze(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(bs=vt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,ys(s,g)));break;case 22:_=s.memoizedState!==null;var U=d!==null&&d.memoizedState!==null,rt=ei,ct=ke;if(ei=rt||_,ke=ct||U,We(l,s),ke=ct,ei=rt,Ze(s),g&8192)t:for(l=s.stateNode,l._visibility=_?l._visibility&-2:l._visibility|1,_&&(d===null||U||ei||ke||Ji(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){U=d=l;try{if(C=U.stateNode,_)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{O=U.stateNode;var ht=U.memoizedProps.style,at=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;O.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(_t){re(U,U.return,_t)}}}else if(l.tag===6){if(d===null){U=l;try{U.stateNode.nodeValue=_?"":U.memoizedProps}catch(_t){re(U,U.return,_t)}}}else if(l.tag===18){if(d===null){U=l;try{var lt=U.stateNode;_?md(lt,!0):md(U.stateNode,!1)}catch(_t){re(U,U.return,_t)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,ys(s,d))));break;case 19:We(l,s),Ze(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,ys(s,g)));break;case 30:break;case 21:break;default:We(l,s),Ze(s)}}function Ze(s){var l=s.flags;if(l&2){try{for(var d,g=s.return;g!==null;){if(yh(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var _=d.stateNode,C=ml(s);gs(s,C,_);break;case 5:var M=d.stateNode;d.flags&32&&(lr(M,""),d.flags&=-33);var O=ml(s);gs(s,O,M);break;case 3:case 4:var U=d.stateNode.containerInfo,rt=ml(s);gl(s,rt,U);break;default:throw Error(i(161))}}catch(ct){re(s,s.return,ct)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function wh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;wh(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ii(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)xh(s,l.alternate,l),l=l.sibling}function Ji(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:xi(4,l,l.return),Ji(l);break;case 1:In(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&mh(l,l.return,d),Ji(l);break;case 27:Aa(l.stateNode);case 26:case 5:In(l,l.return),Ji(l);break;case 22:l.memoizedState===null&&Ji(l);break;case 30:Ji(l);break;default:Ji(l)}s=s.sibling}}function ri(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,_=s,C=l,M=C.flags;switch(C.tag){case 0:case 11:case 15:ri(_,C,d),fa(4,C);break;case 1:if(ri(_,C,d),g=C,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(rt){re(g,g.return,rt)}if(g=C,_=g.updateQueue,_!==null){var O=g.stateNode;try{var U=_.shared.hiddenCallbacks;if(U!==null)for(_.shared.hiddenCallbacks=null,_=0;_<U.length;_++)iu(U[_],O)}catch(rt){re(g,g.return,rt)}}d&&M&64&&ph(C),pa(C,C.return);break;case 27:vh(C);case 26:case 5:ri(_,C,d),d&&g===null&&M&4&&gh(C),pa(C,C.return);break;case 12:ri(_,C,d);break;case 31:ri(_,C,d),d&&M&4&&Ah(_,C);break;case 13:ri(_,C,d),d&&M&4&&_h(_,C);break;case 22:C.memoizedState===null&&ri(_,C,d),pa(C,C.return);break;case 30:break;default:ri(_,C,d)}l=l.sibling}}function vl(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&ta(d))}function bl(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&ta(s))}function Rn(s,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ch(s,l,d,g),l=l.sibling}function Ch(s,l,d,g){var _=l.flags;switch(l.tag){case 0:case 11:case 15:Rn(s,l,d,g),_&2048&&fa(9,l);break;case 1:Rn(s,l,d,g);break;case 3:Rn(s,l,d,g),_&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&ta(s)));break;case 12:if(_&2048){Rn(s,l,d,g),s=l.stateNode;try{var C=l.memoizedProps,M=C.id,O=C.onPostCommit;typeof O=="function"&&O(M,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){re(l,l.return,U)}}else Rn(s,l,d,g);break;case 31:Rn(s,l,d,g);break;case 13:Rn(s,l,d,g);break;case 23:break;case 22:C=l.stateNode,M=l.alternate,l.memoizedState!==null?C._visibility&2?Rn(s,l,d,g):ma(s,l):C._visibility&2?Rn(s,l,d,g):(C._visibility|=2,Rr(s,l,d,g,(l.subtreeFlags&10256)!==0||!1)),_&2048&&vl(M,l);break;case 24:Rn(s,l,d,g),_&2048&&bl(l.alternate,l);break;default:Rn(s,l,d,g)}}function Rr(s,l,d,g,_){for(_=_&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var C=s,M=l,O=d,U=g,rt=M.flags;switch(M.tag){case 0:case 11:case 15:Rr(C,M,O,U,_),fa(8,M);break;case 23:break;case 22:var ct=M.stateNode;M.memoizedState!==null?ct._visibility&2?Rr(C,M,O,U,_):ma(C,M):(ct._visibility|=2,Rr(C,M,O,U,_)),_&&rt&2048&&vl(M.alternate,M);break;case 24:Rr(C,M,O,U,_),_&&rt&2048&&bl(M.alternate,M);break;default:Rr(C,M,O,U,_)}l=l.sibling}}function ma(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,g=l,_=g.flags;switch(g.tag){case 22:ma(d,g),_&2048&&vl(g.alternate,g);break;case 24:ma(d,g),_&2048&&bl(g.alternate,g);break;default:ma(d,g)}l=l.sibling}}var ga=8192;function Mr(s,l,d){if(s.subtreeFlags&ga)for(s=s.child;s!==null;)Dh(s,l,d),s=s.sibling}function Dh(s,l,d){switch(s.tag){case 26:Mr(s,l,d),s.flags&ga&&s.memoizedState!==null&&Gp(d,Dn,s.memoizedState,s.memoizedProps);break;case 5:Mr(s,l,d);break;case 3:case 4:var g=Dn;Dn=Ps(s.stateNode.containerInfo),Mr(s,l,d),Dn=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=ga,ga=16777216,Mr(s,l,d),ga=g):Mr(s,l,d));break;default:Mr(s,l,d)}}function Rh(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function ya(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Ie=g,Ph(g,s)}Rh(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mh(s),s=s.sibling}function Mh(s){switch(s.tag){case 0:case 11:case 15:ya(s),s.flags&2048&&xi(9,s,s.return);break;case 3:ya(s);break;case 12:ya(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,vs(s)):ya(s);break;default:ya(s)}}function vs(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];Ie=g,Ph(g,s)}Rh(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:xi(8,l,l.return),vs(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,vs(l));break;default:vs(l)}s=s.sibling}}function Ph(s,l){for(;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:xi(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ta(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Ie=g;else t:for(d=s;Ie!==null;){g=Ie;var _=g.sibling,C=g.return;if(Eh(g),g===d){Ie=null;break t}if(_!==null){_.return=C,Ie=_;break t}Ie=C}}}var ap={getCacheForType:function(s){var l=ze(Re),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d},cacheSignal:function(){return ze(Re).controller.signal}},sp=typeof WeakMap=="function"?WeakMap:Map,ne=0,ue=null,Ut=null,qt=0,ie=0,on=null,Ei=!1,Pr=!1,xl=!1,ai=0,Se=0,Si=0,tr=0,El=0,ln=0,kr=0,va=null,Qe=null,Sl=!1,bs=0,kh=0,xs=1/0,Es=null,Ai=null,Le=0,_i=null,Fr=null,si=0,Al=0,_l=null,Fh=null,ba=0,Tl=null;function cn(){return(ne&2)!==0&&qt!==0?qt&-qt:N.T!==null?Pl():Tt()}function Lh(){if(ln===0)if((qt&536870912)===0||Kt){var s=ar;ar<<=1,(ar&3932160)===0&&(ar=262144),ln=s}else ln=536870912;return s=an.current,s!==null&&(s.flags|=32),ln}function Je(s,l,d){(s===ue&&(ie===2||ie===9)||s.cancelPendingCommit!==null)&&(Lr(s,0),Ti(s,qt,ln,!1)),q(s,d),((ne&2)===0||s!==ue)&&(s===ue&&((ne&2)===0&&(tr|=d),Se===4&&Ti(s,qt,ln,!1)),Bn(s))}function Oh(s,l,d){if((ne&6)!==0)throw Error(i(327));var g=!d&&(l&127)===0&&(l&s.expiredLanes)===0||Pn(s,l),_=g?up(s,l):Cl(s,l,!0),C=g;do{if(_===0){Pr&&!g&&Ti(s,l,0,!1);break}else{if(d=s.current.alternate,C&&!lp(d)){_=Cl(s,l,!1),C=!1;continue}if(_===2){if(C=l,s.errorRecoveryDisabledLanes&C)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){l=M;t:{var O=s;_=va;var U=O.current.memoizedState.isDehydrated;if(U&&(Lr(O,M).flags|=256),M=Cl(O,M,!1),M!==2){if(xl&&!U){O.errorRecoveryDisabledLanes|=C,tr|=C,_=4;break t}C=Qe,Qe=_,C!==null&&(Qe===null?Qe=C:Qe.push.apply(Qe,C))}_=M}if(C=!1,_!==2)continue}}if(_===1){Lr(s,0),Ti(s,l,0,!0);break}t:{switch(g=s,C=_,C){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Ti(g,l,ln,!Ei);break t;case 2:Qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(_=bs+300-vt(),10<_)){if(Ti(g,l,ln,!Ei),Ni(g,0,!0)!==0)break t;si=l,g.timeoutHandle=dd(Nh.bind(null,g,d,Qe,Es,Sl,l,ln,tr,kr,Ei,C,"Throttled",-0,0),_);break t}Nh(g,d,Qe,Es,Sl,l,ln,tr,kr,Ei,C,null,-0,0)}}break}while(!0);Bn(s)}function Nh(s,l,d,g,_,C,M,O,U,rt,ct,ht,at,lt){if(s.timeoutHandle=-1,ht=l.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Dh(l,C,ht);var _t=(C&62914560)===C?bs-vt():(C&4194048)===C?kh-vt():0;if(_t=qp(ht,_t),_t!==null){si=C,s.cancelPendingCommit=_t(Uh.bind(null,s,l,C,d,g,_,M,O,U,ct,ht,null,at,lt)),Ti(s,C,M,!rt);return}}Uh(s,l,C,d,g,_,M,O,U)}function lp(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var _=d[g],C=_.getSnapshot;_=_.value;try{if(!nn(C(),_))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ti(s,l,d,g){l&=~El,l&=~tr,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var _=l;0<_;){var C=31-Ue(_),M=1<<C;g[C]=-1,_&=~M}d!==0&&ot(s,d,l)}function Ss(){return(ne&6)===0?(xa(0),!1):!0}function wl(){if(Ut!==null){if(ie===0)var s=Ut.return;else s=Ut,Kn=Gi=null,Ho(s),_r=null,na=0,s=Ut;for(;s!==null;)fh(s.alternate,s),s=s.return;Ut=null}}function Lr(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,Dp(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),si=0,wl(),ue=s,Ut=d=Yn(s.current,null),qt=l,ie=0,on=null,Ei=!1,Pr=Pn(s,l),xl=!1,kr=ln=El=tr=Si=Se=0,Qe=va=null,Sl=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var _=31-Ue(g),C=1<<_;l|=s[_],g&=~C}return ai=l,$a(),d}function Ih(s,l){jt=null,N.H=ua,l===Ar||l===Za?(l=Jc(),ie=3):l===Mo?(l=Jc(),ie=4):ie=l===rl?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,on=l,Ut===null&&(Se=1,hs(s,mn(l,s.current)))}function Bh(){var s=an.current;return s===null?!0:(qt&4194048)===qt?bn===null:(qt&62914560)===qt||(qt&536870912)!==0?s===bn:!1}function jh(){var s=N.H;return N.H=ua,s===null?ua:s}function zh(){var s=N.A;return N.A=ap,s}function As(){Se=4,Ei||(qt&4194048)!==qt&&an.current!==null||(Pr=!0),(Si&134217727)===0&&(tr&134217727)===0||ue===null||Ti(ue,qt,ln,!1)}function Cl(s,l,d){var g=ne;ne|=2;var _=jh(),C=zh();(ue!==s||qt!==l)&&(Es=null,Lr(s,l)),l=!1;var M=Se;t:do try{if(ie!==0&&Ut!==null){var O=Ut,U=on;switch(ie){case 8:wl(),M=6;break t;case 3:case 2:case 9:case 6:an.current===null&&(l=!0);var rt=ie;if(ie=0,on=null,Or(s,O,U,rt),d&&Pr){M=0;break t}break;default:rt=ie,ie=0,on=null,Or(s,O,U,rt)}}cp(),M=Se;break}catch(ct){Ih(s,ct)}while(!0);return l&&s.shellSuspendCounter++,Kn=Gi=null,ne=g,N.H=_,N.A=C,Ut===null&&(ue=null,qt=0,$a()),M}function cp(){for(;Ut!==null;)Vh(Ut)}function up(s,l){var d=ne;ne|=2;var g=jh(),_=zh();ue!==s||qt!==l?(Es=null,xs=vt()+500,Lr(s,l)):Pr=Pn(s,l);t:do try{if(ie!==0&&Ut!==null){l=Ut;var C=on;e:switch(ie){case 1:ie=0,on=null,Or(s,l,C,1);break;case 2:case 9:if(Zc(C)){ie=0,on=null,Hh(l);break}l=function(){ie!==2&&ie!==9||ue!==s||(ie=7),Bn(s)},C.then(l,l);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:Zc(C)?(ie=0,on=null,Hh(l)):(ie=0,on=null,Or(s,l,C,7));break;case 5:var M=null;switch(Ut.tag){case 26:M=Ut.memoizedState;case 5:case 27:var O=Ut;if(M?Cd(M):O.stateNode.complete){ie=0,on=null;var U=O.sibling;if(U!==null)Ut=U;else{var rt=O.return;rt!==null?(Ut=rt,_s(rt)):Ut=null}break e}}ie=0,on=null,Or(s,l,C,5);break;case 6:ie=0,on=null,Or(s,l,C,6);break;case 8:wl(),Se=6;break t;default:throw Error(i(462))}}hp();break}catch(ct){Ih(s,ct)}while(!0);return Kn=Gi=null,N.H=g,N.A=_,ne=d,Ut!==null?0:(ue=null,qt=0,$a(),Se)}function hp(){for(;Ut!==null&&!it();)Vh(Ut)}function Vh(s){var l=hh(s.alternate,s,ai);s.memoizedProps=s.pendingProps,l===null?_s(s):Ut=l}function Hh(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=ah(d,l,l.pendingProps,l.type,void 0,qt);break;case 11:l=ah(d,l,l.pendingProps,l.type.render,l.ref,qt);break;case 5:Ho(l);default:fh(d,l),l=Ut=zc(l,ai),l=hh(d,l,ai)}s.memoizedProps=s.pendingProps,l===null?_s(s):Ut=l}function Or(s,l,d,g){Kn=Gi=null,Ho(l),_r=null,na=0;var _=l.return;try{if(Zf(s,_,l,d,qt)){Se=1,hs(s,mn(d,s.current)),Ut=null;return}}catch(C){if(_!==null)throw Ut=_,C;Se=1,hs(s,mn(d,s.current)),Ut=null;return}l.flags&32768?(Kt||g===1?s=!0:Pr||(qt&536870912)!==0?s=!1:(Ei=s=!0,(g===2||g===9||g===3||g===6)&&(g=an.current,g!==null&&g.tag===13&&(g.flags|=16384))),$h(l,s)):_s(l)}function _s(s){var l=s;do{if((l.flags&32768)!==0){$h(l,Ei);return}s=l.return;var d=tp(l.alternate,l,ai);if(d!==null){Ut=d;return}if(l=l.sibling,l!==null){Ut=l;return}Ut=l=s}while(l!==null);Se===0&&(Se=5)}function $h(s,l){do{var d=ep(s.alternate,s);if(d!==null){d.flags&=32767,Ut=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){Ut=s;return}Ut=s=d}while(s!==null);Se=6,Ut=null}function Uh(s,l,d,g,_,C,M,O,U){s.cancelPendingCommit=null;do Ts();while(Le!==0);if((ne&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(C=l.lanes|l.childLanes,C|=mo,tt(s,d,C,M,O,U),s===ue&&(Ut=ue=null,qt=0),Fr=l,_i=s,si=d,Al=C,_l=_,Fh=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,mp(Xt,function(){return Kh(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=N.T,N.T=null,_=G.p,G.p=2,M=ne,ne|=4;try{np(s,l,d)}finally{ne=M,G.p=_,N.T=g}}Le=1,Gh(),qh(),Yh()}}function Gh(){if(Le===1){Le=0;var s=_i,l=Fr,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=N.T,N.T=null;var g=G.p;G.p=2;var _=ne;ne|=4;try{Th(l,s);var C=jl,M=Pc(s.containerInfo),O=C.focusedElem,U=C.selectionRange;if(M!==O&&O&&O.ownerDocument&&Mc(O.ownerDocument.documentElement,O)){if(U!==null&&co(O)){var rt=U.start,ct=U.end;if(ct===void 0&&(ct=rt),"selectionStart"in O)O.selectionStart=rt,O.selectionEnd=Math.min(ct,O.value.length);else{var ht=O.ownerDocument||document,at=ht&&ht.defaultView||window;if(at.getSelection){var lt=at.getSelection(),_t=O.textContent.length,Bt=Math.min(U.start,_t),le=U.end===void 0?Bt:Math.min(U.end,_t);!lt.extend&&Bt>le&&(M=le,le=Bt,Bt=M);var Z=Rc(O,Bt),Y=Rc(O,le);if(Z&&Y&&(lt.rangeCount!==1||lt.anchorNode!==Z.node||lt.anchorOffset!==Z.offset||lt.focusNode!==Y.node||lt.focusOffset!==Y.offset)){var nt=ht.createRange();nt.setStart(Z.node,Z.offset),lt.removeAllRanges(),Bt>le?(lt.addRange(nt),lt.extend(Y.node,Y.offset)):(nt.setEnd(Y.node,Y.offset),lt.addRange(nt))}}}}for(ht=[],lt=O;lt=lt.parentNode;)lt.nodeType===1&&ht.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ht.length;O++){var ut=ht[O];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Is=!!Bl,jl=Bl=null}finally{ne=_,G.p=g,N.T=d}}s.current=l,Le=2}}function qh(){if(Le===2){Le=0;var s=_i,l=Fr,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=N.T,N.T=null;var g=G.p;G.p=2;var _=ne;ne|=4;try{xh(s,l.alternate,l)}finally{ne=_,G.p=g,N.T=d}}Le=3}}function Yh(){if(Le===4||Le===3){Le=0,gt();var s=_i,l=Fr,d=si,g=Fh;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Le=5:(Le=0,Fr=_i=null,Xh(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(Ai=null),Pt(d),l=l.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(An,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=N.T,_=G.p,G.p=2,N.T=null;try{for(var C=s.onRecoverableError,M=0;M<g.length;M++){var O=g[M];C(O.value,{componentStack:O.stack})}}finally{N.T=l,G.p=_}}(si&3)!==0&&Ts(),Bn(s),_=s.pendingLanes,(d&261930)!==0&&(_&42)!==0?s===Tl?ba++:(ba=0,Tl=s):ba=0,xa(0)}}function Xh(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,ta(l)))}function Ts(){return Gh(),qh(),Yh(),Kh()}function Kh(){if(Le!==5)return!1;var s=_i,l=Al;Al=0;var d=Pt(si),g=N.T,_=G.p;try{G.p=32>d?32:d,N.T=null,d=_l,_l=null;var C=_i,M=si;if(Le=0,Fr=_i=null,si=0,(ne&6)!==0)throw Error(i(331));var O=ne;if(ne|=4,Mh(C.current),Ch(C,C.current,M,d),ne=O,xa(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(An,C)}catch{}return!0}finally{G.p=_,N.T=g,Xh(s,l)}}function Wh(s,l,d){l=mn(d,l),l=il(s.stateNode,l,2),s=yi(s,l,2),s!==null&&(q(s,2),Bn(s))}function re(s,l,d){if(s.tag===3)Wh(s,s,d);else for(;l!==null;){if(l.tag===3){Wh(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ai===null||!Ai.has(g))){s=mn(d,s),d=Zu(2),g=yi(l,d,2),g!==null&&(Qu(d,g,l,s),q(g,2),Bn(g));break}}l=l.return}}function Dl(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new sp;var _=new Set;g.set(l,_)}else _=g.get(l),_===void 0&&(_=new Set,g.set(l,_));_.has(d)||(xl=!0,_.add(d),s=dp.bind(null,s,l,d),l.then(s,s))}function dp(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,ue===s&&(qt&d)===d&&(Se===4||Se===3&&(qt&62914560)===qt&&300>vt()-bs?(ne&2)===0&&Lr(s,0):El|=d,kr===qt&&(kr=0)),Bn(s)}function Zh(s,l){l===0&&(l=Fa()),s=Hi(s,l),s!==null&&(q(s,l),Bn(s))}function fp(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),Zh(s,d)}function pp(s,l){var d=0;switch(s.tag){case 31:case 13:var g=s.stateNode,_=s.memoizedState;_!==null&&(d=_.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),Zh(s,d)}function mp(s,l){return pe(s,l)}var ws=null,Nr=null,Rl=!1,Cs=!1,Ml=!1,wi=0;function Bn(s){s!==Nr&&s.next===null&&(Nr===null?ws=Nr=s:Nr=Nr.next=s),Cs=!0,Rl||(Rl=!0,yp())}function xa(s,l){if(!Ml&&Cs){Ml=!0;do for(var d=!1,g=ws;g!==null;){if(s!==0){var _=g.pendingLanes;if(_===0)var C=0;else{var M=g.suspendedLanes,O=g.pingedLanes;C=(1<<31-Ue(42|s)+1)-1,C&=_&~(M&~O),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,ed(g,C))}else C=qt,C=Ni(g,g===ue?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Pn(g,C)||(d=!0,ed(g,C));g=g.next}while(d);Ml=!1}}function gp(){Qh()}function Qh(){Cs=Rl=!1;var s=0;wi!==0&&Cp()&&(s=wi);for(var l=vt(),d=null,g=ws;g!==null;){var _=g.next,C=Jh(g,l);C===0?(g.next=null,d===null?ws=_:d.next=_,_===null&&(Nr=d)):(d=g,(s!==0||(C&3)!==0)&&(Cs=!0)),g=_}Le!==0&&Le!==5||xa(s),wi!==0&&(wi=0)}function Jh(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,_=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var M=31-Ue(C),O=1<<M,U=_[M];U===-1?((O&d)===0||(O&g)!==0)&&(_[M]=sr(O,l)):U<=l&&(s.expiredLanes|=O),C&=~O}if(l=ue,d=qt,d=Ni(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,d===0||s===l&&(ie===2||ie===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&_e(g),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Pn(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(g!==null&&_e(g),Pt(d)){case 2:case 8:d=kt;break;case 32:d=Xt;break;case 268435456:d=Fe;break;default:d=Xt}return g=td.bind(null,s),d=pe(d,g),s.callbackPriority=l,s.callbackNode=d,l}return g!==null&&g!==null&&_e(g),s.callbackPriority=2,s.callbackNode=null,2}function td(s,l){if(Le!==0&&Le!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Ts()&&s.callbackNode!==d)return null;var g=qt;return g=Ni(s,s===ue?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(Oh(s,g,l),Jh(s,vt()),s.callbackNode!=null&&s.callbackNode===d?td.bind(null,s):null)}function ed(s,l){if(Ts())return null;Oh(s,l,!0)}function yp(){Rp(function(){(ne&6)!==0?pe(Ct,gp):Qh()})}function Pl(){if(wi===0){var s=Er;s===0&&(s=ci,ci<<=1,(ci&261888)===0&&(ci=256)),wi=s}return wi}function nd(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oa(""+s)}function id(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function vp(s,l,d,g,_){if(l==="submit"&&d&&d.stateNode===_){var C=nd((_[At]||null).action),M=g.submitter;M&&(l=(l=M[At]||null)?nd(l.formAction):M.getAttribute("formAction"),l!==null&&(C=l,M=null));var O=new ja("action","action",null,g,_);s.push({event:O,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(wi!==0){var U=M?id(_,M):new FormData(_);Zo(d,{pending:!0,data:U,method:_.method,action:C},null,U)}}else typeof C=="function"&&(O.preventDefault(),U=M?id(_,M):new FormData(_),Zo(d,{pending:!0,data:U,method:_.method,action:C},C,U))},currentTarget:_}]})}}for(var kl=0;kl<po.length;kl++){var Fl=po[kl],bp=Fl.toLowerCase(),xp=Fl[0].toUpperCase()+Fl.slice(1);Cn(bp,"on"+xp)}Cn(Lc,"onAnimationEnd"),Cn(Oc,"onAnimationIteration"),Cn(Nc,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Lf,"onTransitionRun"),Cn(Of,"onTransitionStart"),Cn(Nf,"onTransitionCancel"),Cn(Ic,"onTransitionEnd"),Ht("onMouseEnter",["mouseout","mouseover"]),Ht("onMouseLeave",["mouseout","mouseover"]),Ht("onPointerEnter",["pointerout","pointerover"]),Ht("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ep=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ea));function rd(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],_=g.event;g=g.listeners;t:{var C=void 0;if(l)for(var M=g.length-1;0<=M;M--){var O=g[M],U=O.instance,rt=O.currentTarget;if(O=O.listener,U!==C&&_.isPropagationStopped())break t;C=O,_.currentTarget=rt;try{C(_)}catch(ct){Ha(ct)}_.currentTarget=null,C=U}else for(M=0;M<g.length;M++){if(O=g[M],U=O.instance,rt=O.currentTarget,O=O.listener,U!==C&&_.isPropagationStopped())break t;C=O,_.currentTarget=rt;try{C(_)}catch(ct){Ha(ct)}_.currentTarget=null,C=U}}}}function Gt(s,l){var d=l[ae];d===void 0&&(d=l[ae]=new Set);var g=s+"__bubble";d.has(g)||(ad(l,s,2,!1),d.add(g))}function Ll(s,l,d){var g=0;l&&(g|=4),ad(d,s,g,l)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function Ol(s){if(!s[Ds]){s[Ds]=!0,Fn.forEach(function(d){d!=="selectionchange"&&(Ep.has(d)||Ll(d,!1,s),Ll(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Ds]||(l[Ds]=!0,Ll("selectionchange",!1,l))}}function ad(s,l,d,g){switch(Ld(l)){case 2:var _=Kp;break;case 8:_=Wp;break;default:_=Wl}d=_.bind(null,l,d,s),_=void 0,!to||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),g?_!==void 0?s.addEventListener(l,d,{capture:!0,passive:_}):s.addEventListener(l,d,!0):_!==void 0?s.addEventListener(l,d,{passive:_}):s.addEventListener(l,d,!1)}function Nl(s,l,d,g,_){var C=g;if((l&1)===0&&(l&2)===0&&g!==null)t:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var O=g.stateNode.containerInfo;if(O===_)break;if(M===4)for(M=g.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===_)return;M=M.return}for(;O!==null;){if(M=un(O),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){g=C=M;continue t}O=O.parentNode}}g=g.return}uc(function(){var rt=C,ct=Qs(d),ht=[];t:{var at=Bc.get(s);if(at!==void 0){var lt=ja,_t=s;switch(s){case"keypress":if(Ia(d)===0)break t;case"keydown":case"keyup":lt=df;break;case"focusin":_t="focus",lt=ro;break;case"focusout":_t="blur",lt=ro;break;case"beforeblur":case"afterblur":lt=ro;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=mf;break;case Lc:case Oc:case Nc:lt=nf;break;case Ic:lt=yf;break;case"scroll":case"scrollend":lt=Zd;break;case"wheel":lt=bf;break;case"copy":case"cut":case"paste":lt=af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=mc;break;case"toggle":case"beforetoggle":lt=Ef}var Bt=(l&4)!==0,le=!Bt&&(s==="scroll"||s==="scrollend"),Z=Bt?at!==null?at+"Capture":null:at;Bt=[];for(var Y=rt,nt;Y!==null;){var ut=Y;if(nt=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||nt===null||Z===null||(ut=$r(Y,Z),ut!=null&&Bt.push(Sa(Y,ut,nt))),le)break;Y=Y.return}0<Bt.length&&(at=new lt(at,_t,null,d,ct),ht.push({event:at,listeners:Bt}))}}if((l&7)===0){t:{if(at=s==="mouseover"||s==="pointerover",lt=s==="mouseout"||s==="pointerout",at&&d!==Zs&&(_t=d.relatedTarget||d.fromElement)&&(un(_t)||_t[Vt]))break t;if((lt||at)&&(at=ct.window===ct?ct:(at=ct.ownerDocument)?at.defaultView||at.parentWindow:window,lt?(_t=d.relatedTarget||d.toElement,lt=rt,_t=_t?un(_t):null,_t!==null&&(le=o(_t),Bt=_t.tag,_t!==le||Bt!==5&&Bt!==27&&Bt!==6)&&(_t=null)):(lt=null,_t=rt),lt!==_t)){if(Bt=fc,ut="onMouseLeave",Z="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Bt=mc,ut="onPointerLeave",Z="onPointerEnter",Y="pointer"),le=lt==null?at:$e(lt),nt=_t==null?at:$e(_t),at=new Bt(ut,Y+"leave",lt,d,ct),at.target=le,at.relatedTarget=nt,ut=null,un(ct)===rt&&(Bt=new Bt(Z,Y+"enter",_t,d,ct),Bt.target=nt,Bt.relatedTarget=le,ut=Bt),le=ut,lt&&_t)e:{for(Bt=Sp,Z=lt,Y=_t,nt=0,ut=Z;ut;ut=Bt(ut))nt++;ut=0;for(var Nt=Y;Nt;Nt=Bt(Nt))ut++;for(;0<nt-ut;)Z=Bt(Z),nt--;for(;0<ut-nt;)Y=Bt(Y),ut--;for(;nt--;){if(Z===Y||Y!==null&&Z===Y.alternate){Bt=Z;break e}Z=Bt(Z),Y=Bt(Y)}Bt=null}else Bt=null;lt!==null&&sd(ht,at,lt,Bt,!1),_t!==null&&le!==null&&sd(ht,le,_t,Bt,!0)}}t:{if(at=rt?$e(rt):window,lt=at.nodeName&&at.nodeName.toLowerCase(),lt==="select"||lt==="input"&&at.type==="file")var Qt=Ac;else if(Ec(at))if(_c)Qt=Pf;else{Qt=Rf;var Dt=Df}else lt=at.nodeName,!lt||lt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&Ws(rt.elementType)&&(Qt=Ac):Qt=Mf;if(Qt&&(Qt=Qt(s,rt))){Sc(ht,Qt,d,ct);break t}Dt&&Dt(s,at,rt),s==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&Ks(at,"number",at.value)}switch(Dt=rt?$e(rt):window,s){case"focusin":(Ec(Dt)||Dt.contentEditable==="true")&&(dr=Dt,uo=rt,Zr=null);break;case"focusout":Zr=uo=dr=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,kc(ht,d,ct);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":kc(ht,d,ct)}var zt;if(so)t:{switch(s){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else hr?bc(s,d)&&(Yt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Yt="onCompositionStart");Yt&&(gc&&d.locale!=="ko"&&(hr||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&hr&&(zt=hc()):(ui=ct,eo="value"in ui?ui.value:ui.textContent,hr=!0)),Dt=Rs(rt,Yt),0<Dt.length&&(Yt=new pc(Yt,s,null,d,ct),ht.push({event:Yt,listeners:Dt}),zt?Yt.data=zt:(zt=xc(d),zt!==null&&(Yt.data=zt)))),(zt=Af?_f(s,d):Tf(s,d))&&(Yt=Rs(rt,"onBeforeInput"),0<Yt.length&&(Dt=new pc("onBeforeInput","beforeinput",null,d,ct),ht.push({event:Dt,listeners:Yt}),Dt.data=zt)),vp(ht,s,rt,d,ct)}rd(ht,l)})}function Sa(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Rs(s,l){for(var d=l+"Capture",g=[];s!==null;){var _=s,C=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||C===null||(_=$r(s,d),_!=null&&g.unshift(Sa(s,_,C)),_=$r(s,l),_!=null&&g.push(Sa(s,_,C))),s.tag===3)return g;s=s.return}return[]}function Sp(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sd(s,l,d,g,_){for(var C=l._reactName,M=[];d!==null&&d!==g;){var O=d,U=O.alternate,rt=O.stateNode;if(O=O.tag,U!==null&&U===g)break;O!==5&&O!==26&&O!==27||rt===null||(U=rt,_?(rt=$r(d,C),rt!=null&&M.unshift(Sa(d,rt,U))):_||(rt=$r(d,C),rt!=null&&M.push(Sa(d,rt,U)))),d=d.return}M.length!==0&&s.push({event:l,listeners:M})}var Ap=/\r\n?/g,_p=/\u0000|\uFFFD/g;function od(s){return(typeof s=="string"?s:""+s).replace(Ap,`
`).replace(_p,"")}function ld(s,l){return l=od(l),od(s)===l}function oe(s,l,d,g,_,C){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||lr(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&lr(s,""+g);break;case"className":Bi(s,"class",g);break;case"tabIndex":Bi(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(s,d,g);break;case"style":lc(s,g,C);break;case"data":if(l!=="object"){Bi(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=Oa(""+g),s.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(l!=="input"&&oe(s,l,"name",_.name,_,null),oe(s,l,"formEncType",_.formEncType,_,null),oe(s,l,"formMethod",_.formMethod,_,null),oe(s,l,"formTarget",_.formTarget,_,null)):(oe(s,l,"encType",_.encType,_,null),oe(s,l,"method",_.method,_,null),oe(s,l,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=Oa(""+g),s.setAttribute(d,g);break;case"onClick":g!=null&&(s.onclick=Gn);break;case"onScroll":g!=null&&Gt("scroll",s);break;case"onScrollEnd":g!=null&&Gt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}d=Oa(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""+g):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":g===!0?s.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,g):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(d,g):s.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(d):s.setAttribute(d,g);break;case"popover":Gt("beforetoggle",s),Gt("toggle",s),Un(s,"popover",g);break;case"xlinkActuate":wn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":wn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":wn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":wn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":wn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":wn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":wn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":wn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":wn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Un(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Kd.get(d)||d,Un(s,d,g))}}function Il(s,l,d,g,_,C){switch(d){case"style":lc(s,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof g=="string"?lr(s,g):(typeof g=="number"||typeof g=="bigint")&&lr(s,""+g);break;case"onScroll":g!=null&&Gt("scroll",s);break;case"onScrollEnd":g!=null&&Gt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ii.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),l=d.slice(2,_?d.length-7:void 0),C=s[At]||null,C=C!=null?C[d]:null,typeof C=="function"&&s.removeEventListener(l,C,_),typeof g=="function")){typeof C!="function"&&C!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,g,_);break t}d in s?s[d]=g:g===!0?s.setAttribute(d,""):Un(s,d,g)}}}function He(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",s),Gt("load",s);var g=!1,_=!1,C;for(C in d)if(d.hasOwnProperty(C)){var M=d[C];if(M!=null)switch(C){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:oe(s,l,C,M,d,null)}}_&&oe(s,l,"srcSet",d.srcSet,d,null),g&&oe(s,l,"src",d.src,d,null);return;case"input":Gt("invalid",s);var O=C=M=_=null,U=null,rt=null;for(g in d)if(d.hasOwnProperty(g)){var ct=d[g];if(ct!=null)switch(g){case"name":_=ct;break;case"type":M=ct;break;case"checked":U=ct;break;case"defaultChecked":rt=ct;break;case"value":C=ct;break;case"defaultValue":O=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,l));break;default:oe(s,l,g,ct,d,null)}}rc(s,C,O,U,rt,M,_,!1);return;case"select":Gt("invalid",s),g=M=C=null;for(_ in d)if(d.hasOwnProperty(_)&&(O=d[_],O!=null))switch(_){case"value":C=O;break;case"defaultValue":M=O;break;case"multiple":g=O;default:oe(s,l,_,O,d,null)}l=C,d=M,s.multiple=!!g,l!=null?or(s,!!g,l,!1):d!=null&&or(s,!!g,d,!0);return;case"textarea":Gt("invalid",s),C=_=g=null;for(M in d)if(d.hasOwnProperty(M)&&(O=d[M],O!=null))switch(M){case"value":g=O;break;case"defaultValue":_=O;break;case"children":C=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:oe(s,l,M,O,d,null)}sc(s,g,_,C);return;case"option":for(U in d)if(d.hasOwnProperty(U)&&(g=d[U],g!=null))switch(U){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:oe(s,l,U,g,d,null)}return;case"dialog":Gt("beforetoggle",s),Gt("toggle",s),Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":Gt("load",s);break;case"video":case"audio":for(g=0;g<Ea.length;g++)Gt(Ea[g],s);break;case"image":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"embed":case"source":case"link":Gt("error",s),Gt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in d)if(d.hasOwnProperty(rt)&&(g=d[rt],g!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:oe(s,l,rt,g,d,null)}return;default:if(Ws(l)){for(ct in d)d.hasOwnProperty(ct)&&(g=d[ct],g!==void 0&&Il(s,l,ct,g,d,void 0));return}}for(O in d)d.hasOwnProperty(O)&&(g=d[O],g!=null&&oe(s,l,O,g,d,null))}function Tp(s,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,C=null,M=null,O=null,U=null,rt=null,ct=null;for(lt in d){var ht=d[lt];if(d.hasOwnProperty(lt)&&ht!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":U=ht;default:g.hasOwnProperty(lt)||oe(s,l,lt,null,g,ht)}}for(var at in g){var lt=g[at];if(ht=d[at],g.hasOwnProperty(at)&&(lt!=null||ht!=null))switch(at){case"type":C=lt;break;case"name":_=lt;break;case"checked":rt=lt;break;case"defaultChecked":ct=lt;break;case"value":M=lt;break;case"defaultValue":O=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,l));break;default:lt!==ht&&oe(s,l,at,lt,g,ht)}}Xs(s,M,O,U,rt,ct,C,_);return;case"select":lt=M=O=at=null;for(C in d)if(U=d[C],d.hasOwnProperty(C)&&U!=null)switch(C){case"value":break;case"multiple":lt=U;default:g.hasOwnProperty(C)||oe(s,l,C,null,g,U)}for(_ in g)if(C=g[_],U=d[_],g.hasOwnProperty(_)&&(C!=null||U!=null))switch(_){case"value":at=C;break;case"defaultValue":O=C;break;case"multiple":M=C;default:C!==U&&oe(s,l,_,C,g,U)}l=O,d=M,g=lt,at!=null?or(s,!!d,at,!1):!!g!=!!d&&(l!=null?or(s,!!d,l,!0):or(s,!!d,d?[]:"",!1));return;case"textarea":lt=at=null;for(O in d)if(_=d[O],d.hasOwnProperty(O)&&_!=null&&!g.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:oe(s,l,O,null,g,_)}for(M in g)if(_=g[M],C=d[M],g.hasOwnProperty(M)&&(_!=null||C!=null))switch(M){case"value":at=_;break;case"defaultValue":lt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==C&&oe(s,l,M,_,g,C)}ac(s,at,lt);return;case"option":for(var _t in d)if(at=d[_t],d.hasOwnProperty(_t)&&at!=null&&!g.hasOwnProperty(_t))switch(_t){case"selected":s.selected=!1;break;default:oe(s,l,_t,null,g,at)}for(U in g)if(at=g[U],lt=d[U],g.hasOwnProperty(U)&&at!==lt&&(at!=null||lt!=null))switch(U){case"selected":s.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:oe(s,l,U,at,g,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in d)at=d[Bt],d.hasOwnProperty(Bt)&&at!=null&&!g.hasOwnProperty(Bt)&&oe(s,l,Bt,null,g,at);for(rt in g)if(at=g[rt],lt=d[rt],g.hasOwnProperty(rt)&&at!==lt&&(at!=null||lt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,l));break;default:oe(s,l,rt,at,g,lt)}return;default:if(Ws(l)){for(var le in d)at=d[le],d.hasOwnProperty(le)&&at!==void 0&&!g.hasOwnProperty(le)&&Il(s,l,le,void 0,g,at);for(ct in g)at=g[ct],lt=d[ct],!g.hasOwnProperty(ct)||at===lt||at===void 0&&lt===void 0||Il(s,l,ct,at,g,lt);return}}for(var Z in d)at=d[Z],d.hasOwnProperty(Z)&&at!=null&&!g.hasOwnProperty(Z)&&oe(s,l,Z,null,g,at);for(ht in g)at=g[ht],lt=d[ht],!g.hasOwnProperty(ht)||at===lt||at==null&&lt==null||oe(s,l,ht,at,g,lt)}function cd(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wp(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var _=d[g],C=_.transferSize,M=_.initiatorType,O=_.duration;if(C&&O&&cd(M)){for(M=0,O=_.responseEnd,g+=1;g<d.length;g++){var U=d[g],rt=U.startTime;if(rt>O)break;var ct=U.transferSize,ht=U.initiatorType;ct&&cd(ht)&&(U=U.responseEnd,M+=ct*(U<O?1:(O-rt)/(U-rt)))}if(--g,l+=8*(C+M)/(_.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Bl=null,jl=null;function Ms(s){return s.nodeType===9?s:s.ownerDocument}function ud(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hd(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function zl(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Vl=null;function Cp(){var s=window.event;return s&&s.type==="popstate"?s===Vl?!1:(Vl=s,!0):(Vl=null,!1)}var dd=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,fd=typeof Promise=="function"?Promise:void 0,Rp=typeof queueMicrotask=="function"?queueMicrotask:typeof fd<"u"?function(s){return fd.resolve(null).then(s).catch(Mp)}:dd;function Mp(s){setTimeout(function(){throw s})}function Ci(s){return s==="head"}function pd(s,l){var d=l,g=0;do{var _=d.nextSibling;if(s.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"||d==="/&"){if(g===0){s.removeChild(_),zr(l);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")Aa(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,Aa(d);for(var C=d.firstChild;C;){var M=C.nextSibling,O=C.nodeName;C[ee]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&C.rel.toLowerCase()==="stylesheet"||d.removeChild(C),C=M}}else d==="body"&&Aa(s.ownerDocument.body);d=_}while(d);zr(l)}function md(s,l){var d=s;s=0;do{var g=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=g}while(d)}function Hl(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Hl(d),Tn(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function Pp(s,l,d,g){for(;s.nodeType===1;){var _=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ee])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var C=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=xn(s.nextSibling),s===null)break}return null}function kp(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=xn(s.nextSibling),s===null))return null;return s}function gd(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=xn(s.nextSibling),s===null))return null;return s}function $l(s){return s.data==="$?"||s.data==="$~"}function Ul(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Fp(s,l){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||d.readyState!=="loading")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function xn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Gl=null;function yd(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(l===0)return xn(s.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}s=s.nextSibling}return null}function vd(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return s;l--}else d!=="/$"&&d!=="/&"||l++}s=s.previousSibling}return null}function bd(s,l,d){switch(l=Ms(d),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Aa(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Tn(s)}var En=new Map,xd=new Set;function Ps(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var oi=G.d;G.d={f:Lp,r:Op,D:Np,C:Ip,L:Bp,m:jp,X:Vp,S:zp,M:Hp};function Lp(){var s=oi.f(),l=Ss();return s||l}function Op(s){var l=Ge(s);l!==null&&l.tag===5&&l.type==="form"?Iu(l):oi.r(s)}var Ir=typeof document>"u"?null:document;function Ed(s,l,d){var g=Ir;if(g&&typeof l=="string"&&l){var _=fn(l);_='link[rel="'+s+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),xd.has(_)||(xd.add(_),s={rel:s,crossOrigin:d,href:l},g.querySelector(_)===null&&(l=g.createElement("link"),He(l,"link",s),me(l),g.head.appendChild(l)))}}function Np(s){oi.D(s),Ed("dns-prefetch",s,null)}function Ip(s,l){oi.C(s,l),Ed("preconnect",s,l)}function Bp(s,l,d){oi.L(s,l,d);var g=Ir;if(g&&s&&l){var _='link[rel="preload"][as="'+fn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+fn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+fn(d.imageSizes)+'"]')):_+='[href="'+fn(s)+'"]';var C=_;switch(l){case"style":C=Br(s);break;case"script":C=jr(s)}En.has(C)||(s=y({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),En.set(C,s),g.querySelector(_)!==null||l==="style"&&g.querySelector(_a(C))||l==="script"&&g.querySelector(Ta(C))||(l=g.createElement("link"),He(l,"link",s),me(l),g.head.appendChild(l)))}}function jp(s,l){oi.m(s,l);var d=Ir;if(d&&s){var g=l&&typeof l.as=="string"?l.as:"script",_='link[rel="modulepreload"][as="'+fn(g)+'"][href="'+fn(s)+'"]',C=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=jr(s)}if(!En.has(C)&&(s=y({rel:"modulepreload",href:s},l),En.set(C,s),d.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Ta(C)))return}g=d.createElement("link"),He(g,"link",s),me(g),d.head.appendChild(g)}}}function zp(s,l,d){oi.S(s,l,d);var g=Ir;if(g&&s){var _=kn(g).hoistableStyles,C=Br(s);l=l||"default";var M=_.get(C);if(!M){var O={loading:0,preload:null};if(M=g.querySelector(_a(C)))O.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":l},d),(d=En.get(C))&&ql(s,d);var U=M=g.createElement("link");me(U),He(U,"link",s),U._p=new Promise(function(rt,ct){U.onload=rt,U.onerror=ct}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,ks(M,l,g)}M={type:"stylesheet",instance:M,count:1,state:O},_.set(C,M)}}}function Vp(s,l){oi.X(s,l);var d=Ir;if(d&&s){var g=kn(d).hoistableScripts,_=jr(s),C=g.get(_);C||(C=d.querySelector(Ta(_)),C||(s=y({src:s,async:!0},l),(l=En.get(_))&&Yl(s,l),C=d.createElement("script"),me(C),He(C,"link",s),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(_,C))}}function Hp(s,l){oi.M(s,l);var d=Ir;if(d&&s){var g=kn(d).hoistableScripts,_=jr(s),C=g.get(_);C||(C=d.querySelector(Ta(_)),C||(s=y({src:s,async:!0,type:"module"},l),(l=En.get(_))&&Yl(s,l),C=d.createElement("script"),me(C),He(C,"link",s),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(_,C))}}function Sd(s,l,d,g){var _=(_=bt.current)?Ps(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Br(d.href),d=kn(_).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Br(d.href);var C=kn(_).hoistableStyles,M=C.get(s);if(M||(_=_.ownerDocument||_,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,M),(C=_.querySelector(_a(s)))&&!C._p&&(M.instance=C,M.state.loading=5),En.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},En.set(s,d),C||$p(_,s,d,M.state))),l&&g===null)throw Error(i(528,""));return M}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=jr(d),d=kn(_).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Br(s){return'href="'+fn(s)+'"'}function _a(s){return'link[rel="stylesheet"]['+s+"]"}function Ad(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function $p(s,l,d,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),He(l,"link",d),me(l),s.head.appendChild(l))}function jr(s){return'[src="'+fn(s)+'"]'}function Ta(s){return"script[async]"+s}function _d(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+fn(d.href)+'"]');if(g)return l.instance=g,me(g),g;var _=y({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),me(g),He(g,"style",_),ks(g,d.precedence,s),l.instance=g;case"stylesheet":_=Br(d.href);var C=s.querySelector(_a(_));if(C)return l.state.loading|=4,l.instance=C,me(C),C;g=Ad(d),(_=En.get(_))&&ql(g,_),C=(s.ownerDocument||s).createElement("link"),me(C);var M=C;return M._p=new Promise(function(O,U){M.onload=O,M.onerror=U}),He(C,"link",g),l.state.loading|=4,ks(C,d.precedence,s),l.instance=C;case"script":return C=jr(d.src),(_=s.querySelector(Ta(C)))?(l.instance=_,me(_),_):(g=d,(_=En.get(C))&&(g=y({},d),Yl(g,_)),s=s.ownerDocument||s,_=s.createElement("script"),me(_),He(_,"link",g),s.head.appendChild(_),l.instance=_);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,ks(g,d.precedence,s));return l.instance}function ks(s,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,C=_,M=0;M<g.length;M++){var O=g[M];if(O.dataset.precedence===l)C=O;else if(C!==_)break}C?C.parentNode.insertBefore(s,C.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function ql(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Yl(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Fs=null;function Td(s,l,d){if(Fs===null){var g=new Map,_=Fs=new Map;_.set(d,g)}else _=Fs,g=_.get(d),g||(g=new Map,_.set(d,g));if(g.has(s))return g;for(g.set(s,null),d=d.getElementsByTagName(s),_=0;_<d.length;_++){var C=d[_];if(!(C[ee]||C[Et]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(l)||"";M=s+M;var O=g.get(M);O?O.push(C):g.set(M,[C])}}return g}function wd(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function Up(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Cd(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Gp(s,l,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var _=Br(g.href),C=l.querySelector(_a(_));if(C){l=C._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Ls.bind(s),l.then(s,s)),d.state.loading|=4,d.instance=C,me(C);return}C=l.ownerDocument||l,g=Ad(g),(_=En.get(_))&&ql(g,_),C=C.createElement("link"),me(C);var M=C;M._p=new Promise(function(O,U){M.onload=O,M.onerror=U}),He(C,"link",g),d.instance=C}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Ls.bind(s),l.addEventListener("load",d),l.addEventListener("error",d))}}var Xl=0;function qp(s,l){return s.stylesheets&&s.count===0&&Ns(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var g=setTimeout(function(){if(s.stylesheets&&Ns(s,s.stylesheets),s.unsuspend){var C=s.unsuspend;s.unsuspend=null,C()}},6e4+l);0<s.imgBytes&&Xl===0&&(Xl=62500*wp());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ns(s,s.stylesheets),s.unsuspend)){var C=s.unsuspend;s.unsuspend=null,C()}},(s.imgBytes>Xl?50:800)+l);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function Ls(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ns(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Os=null;function Ns(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Os=new Map,l.forEach(Yp,s),Os=null,Ls.call(s))}function Yp(s,l){if(!(l.state.loading&4)){var d=Os.get(s);if(d)var g=d.get(null);else{d=new Map,Os.set(s,d);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<_.length;C++){var M=_[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(d.set(M.dataset.precedence,M),g=M)}g&&d.set(null,g)}_=l.instance,M=_.getAttribute("data-precedence"),C=d.get(M)||g,C===g&&d.set(null,_),d.set(M,_),this.count++,g=Ls.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),C?C.parentNode.insertBefore(_,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),l.state.loading|=4}}var wa={$$typeof:R,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function Xp(s,l,d,g,_,C,M,O,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Dd(s,l,d,g,_,C,M,O,U,rt,ct,ht){return s=new Xp(s,l,d,M,U,rt,ct,ht,O),l=1,C===!0&&(l|=24),C=rn(3,null,null,l),s.current=C,C.stateNode=s,l=Co(),l.refCount++,s.pooledCache=l,l.refCount++,C.memoizedState={element:g,isDehydrated:d,cache:l},Po(C),s}function Rd(s){return s?(s=gr,s):gr}function Md(s,l,d,g,_,C){_=Rd(_),g.context===null?g.context=_:g.pendingContext=_,g=gi(l),g.payload={element:d},C=C===void 0?null:C,C!==null&&(g.callback=C),d=yi(s,g,l),d!==null&&(Je(d,s,l),ra(d,s,l))}function Pd(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Kl(s,l){Pd(s,l),(s=s.alternate)&&Pd(s,l)}function kd(s){if(s.tag===13||s.tag===31){var l=Hi(s,67108864);l!==null&&Je(l,s,67108864),Kl(s,67108864)}}function Fd(s){if(s.tag===13||s.tag===31){var l=cn();l=Rt(l);var d=Hi(s,l);d!==null&&Je(d,s,l),Kl(s,l)}}var Is=!0;function Kp(s,l,d,g){var _=N.T;N.T=null;var C=G.p;try{G.p=2,Wl(s,l,d,g)}finally{G.p=C,N.T=_}}function Wp(s,l,d,g){var _=N.T;N.T=null;var C=G.p;try{G.p=8,Wl(s,l,d,g)}finally{G.p=C,N.T=_}}function Wl(s,l,d,g){if(Is){var _=Zl(g);if(_===null)Nl(s,l,g,Bs,d),Od(s,g);else if(Qp(_,s,l,d,g))g.stopPropagation();else if(Od(s,g),l&4&&-1<Zp.indexOf(s)){for(;_!==null;){var C=Ge(_);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=Hn(C.pendingLanes);if(M!==0){var O=C;for(O.pendingLanes|=2,O.entangledLanes|=2;M;){var U=1<<31-Ue(M);O.entanglements[1]|=U,M&=~U}Bn(C),(ne&6)===0&&(xs=vt()+500,xa(0))}}break;case 31:case 13:O=Hi(C,2),O!==null&&Je(O,C,2),Ss(),Kl(C,2)}if(C=Zl(g),C===null&&Nl(s,l,g,Bs,d),C===_)break;_=C}_!==null&&g.stopPropagation()}else Nl(s,l,g,null,d)}}function Zl(s){return s=Qs(s),Ql(s)}var Bs=null;function Ql(s){if(Bs=null,s=un(s),s!==null){var l=o(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=c(l),s!==null)return s;s=null}else if(d===31){if(s=u(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Bs=s,null}function Ld(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(St()){case Ct:return 2;case kt:return 8;case Xt:case ce:return 32;case Fe:return 268435456;default:return 32}default:return 32}}var Jl=!1,Di=null,Ri=null,Mi=null,Ca=new Map,Da=new Map,Pi=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Od(s,l){switch(s){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Ca.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(l.pointerId)}}function Ra(s,l,d,g,_,C){return s===null||s.nativeEvent!==C?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:C,targetContainers:[_]},l!==null&&(l=Ge(l),l!==null&&kd(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),s)}function Qp(s,l,d,g,_){switch(l){case"focusin":return Di=Ra(Di,s,l,d,g,_),!0;case"dragenter":return Ri=Ra(Ri,s,l,d,g,_),!0;case"mouseover":return Mi=Ra(Mi,s,l,d,g,_),!0;case"pointerover":var C=_.pointerId;return Ca.set(C,Ra(Ca.get(C)||null,s,l,d,g,_)),!0;case"gotpointercapture":return C=_.pointerId,Da.set(C,Ra(Da.get(C)||null,s,l,d,g,_)),!0}return!1}function Nd(s){var l=un(s.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){s.blockedOn=l,Ft(s.priority,function(){Fd(d)});return}}else if(l===31){if(l=u(d),l!==null){s.blockedOn=l,Ft(s.priority,function(){Fd(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function js(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Zl(s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);Zs=g,d.target.dispatchEvent(g),Zs=null}else return l=Ge(d),l!==null&&kd(l),s.blockedOn=d,!1;l.shift()}return!0}function Id(s,l,d){js(s)&&d.delete(l)}function Jp(){Jl=!1,Di!==null&&js(Di)&&(Di=null),Ri!==null&&js(Ri)&&(Ri=null),Mi!==null&&js(Mi)&&(Mi=null),Ca.forEach(Id),Da.forEach(Id)}function zs(s,l){s.blockedOn===l&&(s.blockedOn=null,Jl||(Jl=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Jp)))}var Vs=null;function Bd(s){Vs!==s&&(Vs=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Vs===s&&(Vs=null);for(var l=0;l<s.length;l+=3){var d=s[l],g=s[l+1],_=s[l+2];if(typeof g!="function"){if(Ql(g||d)===null)continue;break}var C=Ge(d);C!==null&&(s.splice(l,3),l-=3,Zo(C,{pending:!0,data:_,method:d.method,action:g},g,_))}}))}function zr(s){function l(U){return zs(U,s)}Di!==null&&zs(Di,s),Ri!==null&&zs(Ri,s),Mi!==null&&zs(Mi,s),Ca.forEach(l),Da.forEach(l);for(var d=0;d<Pi.length;d++){var g=Pi[d];g.blockedOn===s&&(g.blockedOn=null)}for(;0<Pi.length&&(d=Pi[0],d.blockedOn===null);)Nd(d),d.blockedOn===null&&Pi.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var _=d[g],C=d[g+1],M=_[At]||null;if(typeof C=="function")M||Bd(d);else if(M){var O=null;if(C&&C.hasAttribute("formAction")){if(_=C,M=C[At]||null)O=M.formAction;else if(Ql(_)!==null)continue}else O=M.action;typeof O=="function"?d[g+1]=O:(d.splice(g,3),g-=3),Bd(d)}}}function jd(){function s(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(M){return _=M})},focusReset:"manual",scroll:"manual"})}function l(){_!==null&&(_(),_=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),_!==null&&(_(),_=null)}}}function tc(s){this._internalRoot=s}Hs.prototype.render=tc.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=cn();Md(d,g,s,l,null,null)},Hs.prototype.unmount=tc.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Md(s.current,2,null,s,null,null),Ss(),l[Vt]=null}};function Hs(s){this._internalRoot=s}Hs.prototype.unstable_scheduleHydration=function(s){if(s){var l=Tt();s={blockedOn:null,target:s,priority:l};for(var d=0;d<Pi.length&&l!==0&&l<Pi[d].priority;d++);Pi.splice(d,0,s),d===0&&Nd(s)}};var zd=t.version;if(zd!=="19.2.0")throw Error(i(527,zd,"19.2.0"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=p(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var tm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$s.isDisabled&&$s.supportsFiber)try{An=$s.inject(tm),Oe=$s}catch{}}return reactDomClient_production.createRoot=function(s,l){if(!a(s))throw Error(i(299));var d=!1,g="",_=Yu,C=Xu,M=Ku;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),l=Dd(s,1,!1,null,null,d,g,null,_,C,M,jd),s[Vt]=l.current,Ol(s),new tc(l)},reactDomClient_production.hydrateRoot=function(s,l,d){if(!a(s))throw Error(i(299));var g=!1,_="",C=Yu,M=Xu,O=Ku,U=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError),d.formState!==void 0&&(U=d.formState)),l=Dd(s,1,!0,l,d??null,g,_,U,C,M,O,jd),l.context=Rd(null),d=l.current,g=cn(),g=Rt(g),_=gi(g),_.callback=null,yi(d,_,g),d=g,l.current.lanes=d,q(l,d),Bn(l),s[Vt]=l.current,Ol(s),new Hs(l)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=n=>{throw TypeError(n)},__accessCheck=(n,t,e)=>t.has(n)||__typeError("Cannot "+e),__privateGet=(n,t,e)=>(__accessCheck(n,t,"read from private field"),e?e.call(n):t.get(n)),__privateAdd=(n,t,e)=>t.has(n)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),PopStateEventType="popstate";function createHashHistory(n={}){function t(a,o){let{pathname:c="/",search:u="",hash:f=""}=parsePath(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),createLocation("",{pathname:c,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let c=a.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let f=a.location.href,p=f.indexOf("#");u=p===-1?f:f.slice(0,p)}return u+"#"+(typeof o=="string"?o:createPath(o))}function i(a,o){warning$1(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return getUrlBasedHistory(t,e,i,n)}function invariant$1(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function warning$1(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(n,t){return{usr:n.state,key:n.key,idx:t}}function createLocation(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:e,key:t&&t.key||i||createKey()}}function createPath({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function parsePath(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function getUrlBasedHistory(n,t,e,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,u="POP",f=null,p=m();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function m(){return(c.state||{idx:null}).idx}function y(){u="POP";let S=m(),T=S==null?null:S-p;p=S,f&&f({action:u,location:A.location,delta:T})}function b(S,T){u="PUSH";let D=createLocation(A.location,S,T);e&&e(D,S),p=m()+1;let R=getHistoryState(D,p),F=A.createHref(D);try{c.pushState(R,"",F)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(F)}o&&f&&f({action:u,location:A.location,delta:1})}function x(S,T){u="REPLACE";let D=createLocation(A.location,S,T);e&&e(D,S),p=m();let R=getHistoryState(D,p),F=A.createHref(D);c.replaceState(R,"",F),o&&f&&f({action:u,location:A.location,delta:0})}function E(S){return createBrowserURLImpl(S)}let A={get action(){return u},get location(){return n(a,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,y),f=S,()=>{a.removeEventListener(PopStateEventType,y),f=null}},createHref(S){return t(a,S)},createURL:E,encodeLocation(S){let T=E(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:x,go(S){return c.go(S)}};return A}function createBrowserURLImpl(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:createPath(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}var _map,RouterContextProvider=class{constructor(n){if(__privateAdd(this,_map,new Map),n)for(let[t,e]of n)this.set(t,e)}get(n){if(__privateGet(this,_map).has(n))return __privateGet(this,_map).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,t){__privateGet(this,_map).set(n,t)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(n){return unsupportedLazyRouteObjectKeys.has(n)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function isUnsupportedLazyRouteFunctionKey(n){return unsupportedLazyRouteFunctionKeys.has(n)}function isIndexRoute(n){return n.index===!0}function convertRoutesToDataRoutes(n,t,e=[],i={},a=!1){return n.map((o,c)=>{let u=[...e,String(c)],f=typeof o.id=="string"?o.id:u.join("-");if(invariant$1(o.index!==!0||!o.children,"Cannot specify children on an index route"),invariant$1(a||!i[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(o)){let p={...o,...t(o),id:f};return i[f]=p,p}else{let p={...o,...t(o),id:f,children:void 0};return i[f]=p,o.children&&(p.children=convertRoutesToDataRoutes(o.children,t,u,i,a)),p}})}function matchRoutes(n,t,e="/"){return matchRoutesImpl(n,t,e,!1)}function matchRoutesImpl(n,t,e,i){let a=typeof t=="string"?parsePath(t):t,o=stripBasename(a.pathname||"/",e);if(o==null)return null;let c=flattenRoutes(n);rankRouteBranches(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let p=decodePath(o);u=matchRouteBranch(c[f],p,i)}return u}function convertRouteMatchToUiMatch(n,t){let{route:e,pathname:i,params:a}=n;return{id:e.id,pathname:i,params:a,data:t[e.id],loaderData:t[e.id],handle:e.handle}}function flattenRoutes(n,t=[],e=[],i="",a=!1){let o=(c,u,f=a,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&f)return;invariant$1(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let y=joinPaths([i,m.relativePath]),b=e.concat(m);c.children&&c.children.length>0&&(invariant$1(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),flattenRoutes(c.children,t,b,y,f)),!(c.path==null&&!c.index)&&t.push({path:y,score:computeScore(y,c.index),routesMeta:b})};return n.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let f of explodeOptionalSegments(c.path))o(c,u,!0,f)}),t}function explodeOptionalSegments(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=explodeOptionalSegments(i.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&u.push(...c),u.map(f=>n.startsWith("/")&&f===""?"/":f)}function rankRouteBranches(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:compareIndexes(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=n=>n==="*";function computeScore(n,t){let e=n.split("/"),i=e.length;return e.some(isSplat)&&(i+=splatPenalty),t&&(i+=indexRouteValue),e.filter(a=>!isSplat(a)).reduce((a,o)=>a+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),i)}function compareIndexes(n,t){return n.length===t.length&&n.slice(0,-1).every((i,a)=>i===t[a])?n[n.length-1]-t[t.length-1]:0}function matchRouteBranch(n,t,e=!1){let{routesMeta:i}=n,a={},o="/",c=[];for(let u=0;u<i.length;++u){let f=i[u],p=u===i.length-1,m=o==="/"?t:t.slice(o.length)||"/",y=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),b=f.route;if(!y&&p&&e&&!i[i.length-1].route.index&&(y=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:joinPaths([o,y.pathname]),pathnameBase:normalizePathname(joinPaths([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=joinPaths([o,y.pathnameBase]))}return c}function matchPath(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=compilePath(n.path,n.caseSensitive,n.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((p,{paramName:m,isOptional:y},b)=>{if(m==="*"){let E=u[b]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const x=u[b];return y&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:n}}function compilePath(n,t=!1,e=!0){warning$1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(i.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function decodePath(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning$1(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function stripBasename(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function prependBasename({basename:n,pathname:t}){return t==="/"?n:joinPaths([n,t])}function resolvePath(n,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof n=="string"?parsePath(n):n;return{pathname:e?e.startsWith("/")?e:resolvePathname(e,t):t,search:normalizeSearch(i),hash:normalizeHash(a)}}function resolvePathname(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function getInvalidPathError(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(n){let t=getPathContributingMatches(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function resolveTo(n,t,e,i=!1){let a;typeof n=="string"?a=parsePath(n):(a={...n},invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let o=n===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let f=resolvePath(a,u),p=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}var joinPaths=n=>n.join("/").replace(/\/\/+/g,"/"),normalizePathname=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,normalizeHash=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,ErrorResponseImpl=class{constructor(n,t,e,i=!1){this.status=n,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function isRouteErrorResponse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=n=>ABSOLUTE_URL_REGEX.test(n),defaultMapRouteProperties=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(n){const t=n.window?n.window:typeof window<"u"?window:void 0,e=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";invariant$1(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||defaultMapRouteProperties,o={},c=convertRoutesToDataRoutes(n.routes,a,void 0,o),u,f=n.basename||"/";f.startsWith("/")||(f=`/${f}`);let p=n.dataStrategy||defaultDataStrategyWithMiddleware,m={...n.future},y=null,b=new Set,x=null,E=null,A=null,S=n.hydrationData!=null,T=matchRoutes(c,n.history.location,f),D=!1,R=null,F;if(T==null&&!n.patchRoutesOnNavigation){let q=getInternalRouterError(404,{pathname:n.history.location.pathname}),{matches:tt,route:ot}=getShortCircuitMatches(c);F=!0,T=tt,R={[ot.id]:q}}else if(T&&!n.hydrationData&&Pn(T,c,n.history.location.pathname).active&&(T=null),T)if(T.some(q=>q.route.lazy))F=!1;else if(!T.some(q=>routeHasLoaderOrMiddleware(q.route)))F=!0;else{let q=n.hydrationData?n.hydrationData.loaderData:null,tt=n.hydrationData?n.hydrationData.errors:null;if(tt){let ot=T.findIndex(pt=>tt[pt.route.id]!==void 0);F=T.slice(0,ot+1).every(pt=>!shouldLoadRouteOnHydration(pt.route,q,tt))}else F=T.every(ot=>!shouldLoadRouteOnHydration(ot.route,q,tt))}else{F=!1,T=[];let q=Pn(null,c,n.history.location.pathname);q.active&&q.matches&&(D=!0,T=q.matches)}let k,P={historyAction:n.history.action,location:n.history.location,matches:T,initialized:F,navigation:IDLE_NAVIGATION,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||R,fetchers:new Map,blockers:new Map},L="POP",B=!1,V,z=!1,j=new Map,J=null,W=!1,K=!1,$=new Set,N=new Map,G=0,I=-1,X=new Map,et=new Set,H=new Map,Q=new Map,st=new Set,dt=new Map,ft,bt=null;function mt(){if(y=n.history.listen(({action:q,location:tt,delta:ot})=>{if(ft){ft(),ft=void 0;return}warning$1(dt.size===0||ot!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let pt=ka({currentLocation:P.location,nextLocation:tt,historyAction:q});if(pt&&ot!=null){let xt=new Promise(Rt=>{ft=Rt});n.history.go(ot*-1),rr(pt,{state:"blocked",location:tt,proceed(){rr(pt,{state:"proceeding",proceed:void 0,reset:void 0,location:tt}),xt.then(()=>n.history.go(ot))},reset(){let Rt=new Map(P.blockers);Rt.set(pt,IDLE_BLOCKER),wt({blockers:Rt})}});return}return yt(q,tt)}),e){restoreAppliedTransitions(t,j);let q=()=>persistAppliedTransitions(t,j);t.addEventListener("pagehide",q),J=()=>t.removeEventListener("pagehide",q)}return P.initialized||yt("POP",P.location,{initialHydration:!0}),k}function Mt(){y&&y(),J&&J(),b.clear(),V&&V.abort(),P.fetchers.forEach((q,tt)=>Fe(tt)),P.blockers.forEach((q,tt)=>Pa(tt))}function Ot(q){return b.add(q),()=>b.delete(q)}function wt(q,tt={}){q.matches&&(q.matches=q.matches.map(xt=>{let Rt=o[xt.route.id],Pt=xt.route;return Pt.element!==Rt.element||Pt.errorElement!==Rt.errorElement||Pt.hydrateFallbackElement!==Rt.hydrateFallbackElement?{...xt,route:Rt}:xt})),P={...P,...q};let ot=[],pt=[];P.fetchers.forEach((xt,Rt)=>{xt.state==="idle"&&(st.has(Rt)?ot.push(Rt):pt.push(Rt))}),st.forEach(xt=>{!P.fetchers.has(xt)&&!N.has(xt)&&ot.push(xt)}),[...b].forEach(xt=>xt(P,{deletedFetchers:ot,viewTransitionOpts:tt.viewTransitionOpts,flushSync:tt.flushSync===!0})),ot.forEach(xt=>Fe(xt)),pt.forEach(xt=>P.fetchers.delete(xt))}function $t(q,tt,{flushSync:ot}={}){let pt=P.actionData!=null&&P.navigation.formMethod!=null&&isMutationMethod(P.navigation.formMethod)&&P.navigation.state==="loading"&&q.state?._isRedirect!==!0,xt;tt.actionData?Object.keys(tt.actionData).length>0?xt=tt.actionData:xt=null:pt?xt=P.actionData:xt=null;let Rt=tt.loaderData?mergeLoaderData(P.loaderData,tt.loaderData,tt.matches||[],tt.errors):P.loaderData,Pt=P.blockers;Pt.size>0&&(Pt=new Map(Pt),Pt.forEach((Et,At)=>Pt.set(At,IDLE_BLOCKER)));let Tt=W?!1:Ni(q,tt.matches||P.matches),Ft=B===!0||P.navigation.formMethod!=null&&isMutationMethod(P.navigation.formMethod)&&q.state?._isRedirect!==!0;u&&(c=u,u=void 0),W||L==="POP"||(L==="PUSH"?n.history.push(q,q.state):L==="REPLACE"&&n.history.replace(q,q.state));let Lt;if(L==="POP"){let Et=j.get(P.location.pathname);Et&&Et.has(q.pathname)?Lt={currentLocation:P.location,nextLocation:q}:j.has(q.pathname)&&(Lt={currentLocation:q,nextLocation:P.location})}else if(z){let Et=j.get(P.location.pathname);Et?Et.add(q.pathname):(Et=new Set([q.pathname]),j.set(P.location.pathname,Et)),Lt={currentLocation:P.location,nextLocation:q}}wt({...tt,actionData:xt,loaderData:Rt,historyAction:L,location:q,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Tt,preventScrollReset:Ft,blockers:Pt},{viewTransitionOpts:Lt,flushSync:ot===!0}),L="POP",B=!1,z=!1,W=!1,K=!1,bt?.resolve(),bt=null}async function te(q,tt){if(typeof q=="number"){n.history.go(q);return}let ot=normalizeTo(P.location,P.matches,f,q,tt?.fromRouteId,tt?.relative),{path:pt,submission:xt,error:Rt}=normalizeNavigateOptions(!1,ot,tt),Pt=P.location,Tt=createLocation(P.location,pt,tt&&tt.state);Tt={...Tt,...n.history.encodeLocation(Tt)};let Ft=tt&&tt.replace!=null?tt.replace:void 0,Lt="PUSH";Ft===!0?Lt="REPLACE":Ft===!1||xt!=null&&isMutationMethod(xt.formMethod)&&xt.formAction===P.location.pathname+P.location.search&&(Lt="REPLACE");let Et=tt&&"preventScrollReset"in tt?tt.preventScrollReset===!0:void 0,At=(tt&&tt.flushSync)===!0,Vt=ka({currentLocation:Pt,nextLocation:Tt,historyAction:Lt});if(Vt){rr(Vt,{state:"blocked",location:Tt,proceed(){rr(Vt,{state:"proceeding",proceed:void 0,reset:void 0,location:Tt}),te(q,tt)},reset(){let ae=new Map(P.blockers);ae.set(Vt,IDLE_BLOCKER),wt({blockers:ae})}});return}await yt(Lt,Tt,{submission:xt,pendingError:Rt,preventScrollReset:Et,replace:tt&&tt.replace,enableViewTransition:tt&&tt.viewTransition,flushSync:At})}function It(){bt||(bt=createDeferred()),St(),wt({revalidation:"loading"});let q=bt.promise;return P.navigation.state==="submitting"?q:P.navigation.state==="idle"?(yt(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),q):(yt(L||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:z===!0}),q)}async function yt(q,tt,ot){V&&V.abort(),V=null,L=q,W=(ot&&ot.startUninterruptedRevalidation)===!0,Hn(P.location,P.matches),B=(ot&&ot.preventScrollReset)===!0,z=(ot&&ot.enableViewTransition)===!0;let pt=u||c,xt=ot&&ot.overrideNavigation,Rt=ot?.initialHydration&&P.matches&&P.matches.length>0&&!D?P.matches:matchRoutes(pt,tt,f),Pt=(ot&&ot.flushSync)===!0;if(Rt&&P.initialized&&!K&&isHashChangeOnly(P.location,tt)&&!(ot&&ot.submission&&isMutationMethod(ot.submission.formMethod))){$t(tt,{matches:Rt},{flushSync:Pt});return}let Tt=Pn(Rt,pt,tt.pathname);if(Tt.active&&Tt.matches&&(Rt=Tt.matches),!Rt){let{error:Be,notFoundMatches:he,route:ee}=ci(tt.pathname);$t(tt,{matches:he,loaderData:{},errors:{[ee.id]:Be}},{flushSync:Pt});return}V=new AbortController;let Ft=createClientSideRequest(n.history,tt,V.signal,ot&&ot.submission),Lt=n.getContext?await n.getContext():new RouterContextProvider,Et;if(ot&&ot.pendingError)Et=[findNearestBoundary(Rt).route.id,{type:"error",error:ot.pendingError}];else if(ot&&ot.submission&&isMutationMethod(ot.submission.formMethod)){let Be=await Wt(Ft,tt,ot.submission,Rt,Lt,Tt.active,ot&&ot.initialHydration===!0,{replace:ot.replace,flushSync:Pt});if(Be.shortCircuited)return;if(Be.pendingActionResult){let[he,ee]=Be.pendingActionResult;if(isErrorResult(ee)&&isRouteErrorResponse(ee.error)&&ee.error.status===404){V=null,$t(tt,{matches:Be.matches,loaderData:{},errors:{[he]:ee.error}});return}}Rt=Be.matches||Rt,Et=Be.pendingActionResult,xt=getLoadingNavigation(tt,ot.submission),Pt=!1,Tt.active=!1,Ft=createClientSideRequest(n.history,Ft.url,Ft.signal)}let{shortCircuited:At,matches:Vt,loaderData:ae,errors:De}=await Zt(Ft,tt,Rt,Lt,Tt.active,xt,ot&&ot.submission,ot&&ot.fetcherSubmission,ot&&ot.replace,ot&&ot.initialHydration===!0,Pt,Et);At||(V=null,$t(tt,{matches:Vt||Rt,...getActionDataForCommit(Et),loaderData:ae,errors:De}))}async function Wt(q,tt,ot,pt,xt,Rt,Pt,Tt={}){St();let Ft=getSubmittingNavigation(tt,ot);if(wt({navigation:Ft},{flushSync:Tt.flushSync===!0}),Rt){let At=await sr(pt,tt.pathname,q.signal);if(At.type==="aborted")return{shortCircuited:!0};if(At.type==="error"){if(At.partialMatches.length===0){let{matches:ae,route:De}=getShortCircuitMatches(c);return{matches:ae,pendingActionResult:[De.id,{type:"error",error:At.error}]}}let Vt=findNearestBoundary(At.partialMatches).route.id;return{matches:At.partialMatches,pendingActionResult:[Vt,{type:"error",error:At.error}]}}else if(At.matches)pt=At.matches;else{let{notFoundMatches:Vt,error:ae,route:De}=ci(tt.pathname);return{matches:Vt,pendingActionResult:[De.id,{type:"error",error:ae}]}}}let Lt,Et=getTargetMatch(pt,tt);if(!Et.route.action&&!Et.route.lazy)Lt={type:"error",error:getInternalRouterError(405,{method:q.method,pathname:tt.pathname,routeId:Et.route.id})};else{let At=getTargetedDataStrategyMatches(a,o,q,pt,Et,Pt?[]:i,xt),Vt=await gt(q,At,xt,null);if(Lt=Vt[Et.route.id],!Lt){for(let ae of pt)if(Vt[ae.route.id]){Lt=Vt[ae.route.id];break}}if(q.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(Lt)){let At;return Tt&&Tt.replace!=null?At=Tt.replace:At=normalizeRedirectLocation(Lt.response.headers.get("Location"),new URL(q.url),f)===P.location.pathname+P.location.search,await it(q,Lt,!0,{submission:ot,replace:At}),{shortCircuited:!0}}if(isErrorResult(Lt)){let At=findNearestBoundary(pt,Et.route.id);return(Tt&&Tt.replace)!==!0&&(L="PUSH"),{matches:pt,pendingActionResult:[At.route.id,Lt,Et.route.id]}}return{matches:pt,pendingActionResult:[Et.route.id,Lt]}}async function Zt(q,tt,ot,pt,xt,Rt,Pt,Tt,Ft,Lt,Et,At){let Vt=Rt||getLoadingNavigation(tt,Pt),ae=Pt||Tt||getSubmissionFromNavigation(Vt),De=!W&&!Lt;if(xt){if(De){let Ne=Ae(At);wt({navigation:Vt,...Ne!==void 0?{actionData:Ne}:{}},{flushSync:Et})}let Ht=await sr(ot,tt.pathname,q.signal);if(Ht.type==="aborted")return{shortCircuited:!0};if(Ht.type==="error"){if(Ht.partialMatches.length===0){let{matches:$n,route:Ln}=getShortCircuitMatches(c);return{matches:$n,loaderData:{},errors:{[Ln.id]:Ht.error}}}let Ne=findNearestBoundary(Ht.partialMatches).route.id;return{matches:Ht.partialMatches,loaderData:{},errors:{[Ne]:Ht.error}}}else if(Ht.matches)ot=Ht.matches;else{let{error:Ne,notFoundMatches:$n,route:Ln}=ci(tt.pathname);return{matches:$n,loaderData:{},errors:{[Ln.id]:Ne}}}}let Be=u||c,{dsMatches:he,revalidatingFetchers:ee}=getMatchesToLoad(q,pt,a,o,n.history,P,ot,ae,tt,Lt?[]:i,Lt===!0,K,$,st,H,et,Be,f,n.patchRoutesOnNavigation!=null,At);if(I=++G,!n.dataStrategy&&!he.some(Ht=>Ht.shouldLoad)&&!he.some(Ht=>Ht.route.middleware&&Ht.route.middleware.length>0)&&ee.length===0){let Ht=Oe();return $t(tt,{matches:ot,loaderData:{},errors:At&&isErrorResult(At[1])?{[At[0]]:At[1].error}:null,...getActionDataForCommit(At),...Ht?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Et}),{shortCircuited:!0}}if(De){let Ht={};if(!xt){Ht.navigation=Vt;let Ne=Ae(At);Ne!==void 0&&(Ht.actionData=Ne)}ee.length>0&&(Ht.fetchers=be(ee)),wt(Ht,{flushSync:Et})}ee.forEach(Ht=>{en(Ht.key),Ht.controller&&N.set(Ht.key,Ht.controller)});let Tn=()=>ee.forEach(Ht=>en(Ht.key));V&&V.signal.addEventListener("abort",Tn);let{loaderResults:un,fetcherResults:Ge}=await vt(he,ee,q,pt);if(q.signal.aborted)return{shortCircuited:!0};V&&V.signal.removeEventListener("abort",Tn),ee.forEach(Ht=>N.delete(Ht.key));let $e=findRedirect(un);if($e)return await it(q,$e.result,!0,{replace:Ft}),{shortCircuited:!0};if($e=findRedirect(Ge),$e)return et.add($e.key),await it(q,$e.result,!0,{replace:Ft}),{shortCircuited:!0};let{loaderData:kn,errors:me}=processLoaderData(P,ot,un,At,ee,Ge);Lt&&P.errors&&(me={...P.errors,...me});let Fn=Oe(),Ii=_n(I),hn=Fn||Ii||ee.length>0;return{matches:ot,loaderData:kn,errors:me,...hn?{fetchers:new Map(P.fetchers)}:{}}}function Ae(q){if(q&&!isErrorResult(q[1]))return{[q[0]]:q[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function be(q){return q.forEach(tt=>{let ot=P.fetchers.get(tt.key),pt=getLoadingFetcher(void 0,ot?ot.data:void 0);P.fetchers.set(tt.key,pt)}),new Map(P.fetchers)}async function xe(q,tt,ot,pt){en(q);let xt=(pt&&pt.flushSync)===!0,Rt=u||c,Pt=normalizeTo(P.location,P.matches,f,ot,tt,pt?.relative),Tt=matchRoutes(Rt,Pt,f),Ft=Pn(Tt,Rt,Pt);if(Ft.active&&Ft.matches&&(Tt=Ft.matches),!Tt){kt(q,tt,getInternalRouterError(404,{pathname:Pt}),{flushSync:xt});return}let{path:Lt,submission:Et,error:At}=normalizeNavigateOptions(!0,Pt,pt);if(At){kt(q,tt,At,{flushSync:xt});return}let Vt=n.getContext?await n.getContext():new RouterContextProvider,ae=(pt&&pt.preventScrollReset)===!0;if(Et&&isMutationMethod(Et.formMethod)){await pe(q,tt,Lt,Tt,Vt,Ft.active,xt,ae,Et);return}H.set(q,{routeId:tt,path:Lt}),await _e(q,tt,Lt,Tt,Vt,Ft.active,xt,ae,Et)}async function pe(q,tt,ot,pt,xt,Rt,Pt,Tt,Ft){St(),H.delete(q);let Lt=P.fetchers.get(q);Ct(q,getSubmittingFetcher(Ft,Lt),{flushSync:Pt});let Et=new AbortController,At=createClientSideRequest(n.history,ot,Et.signal,Ft);if(Rt){let Te=await sr(pt,new URL(At.url).pathname,At.signal,q);if(Te.type==="aborted")return;if(Te.type==="error"){kt(q,tt,Te.error,{flushSync:Pt});return}else if(Te.matches)pt=Te.matches;else{kt(q,tt,getInternalRouterError(404,{pathname:ot}),{flushSync:Pt});return}}let Vt=getTargetMatch(pt,ot);if(!Vt.route.action&&!Vt.route.lazy){let Te=getInternalRouterError(405,{method:Ft.formMethod,pathname:ot,routeId:tt});kt(q,tt,Te,{flushSync:Pt});return}N.set(q,Et);let ae=G,De=getTargetedDataStrategyMatches(a,o,At,pt,Vt,i,xt),he=(await gt(At,De,xt,q))[Vt.route.id];if(At.signal.aborted){N.get(q)===Et&&N.delete(q);return}if(st.has(q)){if(isRedirectResult(he)||isErrorResult(he)){Ct(q,getDoneFetcher(void 0));return}}else{if(isRedirectResult(he))if(N.delete(q),I>ae){Ct(q,getDoneFetcher(void 0));return}else return et.add(q),Ct(q,getLoadingFetcher(Ft)),it(At,he,!1,{fetcherSubmission:Ft,preventScrollReset:Tt});if(isErrorResult(he)){kt(q,tt,he.error);return}}let ee=P.navigation.location||P.location,Tn=createClientSideRequest(n.history,ee,Et.signal),un=u||c,Ge=P.navigation.state!=="idle"?matchRoutes(un,P.navigation.location,f):P.matches;invariant$1(Ge,"Didn't find any matches after fetcher action");let $e=++G;X.set(q,$e);let kn=getLoadingFetcher(Ft,he.data);P.fetchers.set(q,kn);let{dsMatches:me,revalidatingFetchers:Fn}=getMatchesToLoad(Tn,xt,a,o,n.history,P,Ge,Ft,ee,i,!1,K,$,st,H,et,un,f,n.patchRoutesOnNavigation!=null,[Vt.route.id,he]);Fn.filter(Te=>Te.key!==q).forEach(Te=>{let Un=Te.key,Bi=P.fetchers.get(Un),wn=getLoadingFetcher(void 0,Bi?Bi.data:void 0);P.fetchers.set(Un,wn),en(Un),Te.controller&&N.set(Un,Te.controller)}),wt({fetchers:new Map(P.fetchers)});let Ii=()=>Fn.forEach(Te=>en(Te.key));Et.signal.addEventListener("abort",Ii);let{loaderResults:hn,fetcherResults:Ht}=await vt(me,Fn,Tn,xt);if(Et.signal.aborted)return;if(Et.signal.removeEventListener("abort",Ii),X.delete(q),N.delete(q),Fn.forEach(Te=>N.delete(Te.key)),P.fetchers.has(q)){let Te=getDoneFetcher(he.data);P.fetchers.set(q,Te)}let Ne=findRedirect(hn);if(Ne)return it(Tn,Ne.result,!1,{preventScrollReset:Tt});if(Ne=findRedirect(Ht),Ne)return et.add(Ne.key),it(Tn,Ne.result,!1,{preventScrollReset:Tt});let{loaderData:$n,errors:Ln}=processLoaderData(P,Ge,hn,void 0,Fn,Ht);_n($e),P.navigation.state==="loading"&&$e>I?(invariant$1(L,"Expected pending action"),V&&V.abort(),$t(P.navigation.location,{matches:Ge,loaderData:$n,errors:Ln,fetchers:new Map(P.fetchers)})):(wt({errors:Ln,loaderData:mergeLoaderData(P.loaderData,$n,Ge,Ln),fetchers:new Map(P.fetchers)}),K=!1)}async function _e(q,tt,ot,pt,xt,Rt,Pt,Tt,Ft){let Lt=P.fetchers.get(q);Ct(q,getLoadingFetcher(Ft,Lt?Lt.data:void 0),{flushSync:Pt});let Et=new AbortController,At=createClientSideRequest(n.history,ot,Et.signal);if(Rt){let ee=await sr(pt,new URL(At.url).pathname,At.signal,q);if(ee.type==="aborted")return;if(ee.type==="error"){kt(q,tt,ee.error,{flushSync:Pt});return}else if(ee.matches)pt=ee.matches;else{kt(q,tt,getInternalRouterError(404,{pathname:ot}),{flushSync:Pt});return}}let Vt=getTargetMatch(pt,ot);N.set(q,Et);let ae=G,De=getTargetedDataStrategyMatches(a,o,At,pt,Vt,i,xt),he=(await gt(At,De,xt,q))[Vt.route.id];if(N.get(q)===Et&&N.delete(q),!At.signal.aborted){if(st.has(q)){Ct(q,getDoneFetcher(void 0));return}if(isRedirectResult(he))if(I>ae){Ct(q,getDoneFetcher(void 0));return}else{et.add(q),await it(At,he,!1,{preventScrollReset:Tt});return}if(isErrorResult(he)){kt(q,tt,he.error);return}Ct(q,getDoneFetcher(he.data))}}async function it(q,tt,ot,{submission:pt,fetcherSubmission:xt,preventScrollReset:Rt,replace:Pt}={}){tt.response.headers.has("X-Remix-Revalidate")&&(K=!0);let Tt=tt.response.headers.get("Location");invariant$1(Tt,"Expected a Location header on the redirect Response"),Tt=normalizeRedirectLocation(Tt,new URL(q.url),f);let Ft=createLocation(P.location,Tt,{_isRedirect:!0});if(e){let De=!1;if(tt.response.headers.has("X-Remix-Reload-Document"))De=!0;else if(isAbsoluteUrl(Tt)){const Be=createBrowserURLImpl(Tt,!0);De=Be.origin!==t.location.origin||stripBasename(Be.pathname,f)==null}if(De){Pt?t.location.replace(Tt):t.location.assign(Tt);return}}V=null;let Lt=Pt===!0||tt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Et,formAction:At,formEncType:Vt}=P.navigation;!pt&&!xt&&Et&&At&&Vt&&(pt=getSubmissionFromNavigation(P.navigation));let ae=pt||xt;if(redirectPreserveMethodStatusCodes.has(tt.response.status)&&ae&&isMutationMethod(ae.formMethod))await yt(Lt,Ft,{submission:{...ae,formAction:Tt},preventScrollReset:Rt||B,enableViewTransition:ot?z:void 0});else{let De=getLoadingNavigation(Ft,pt);await yt(Lt,Ft,{overrideNavigation:De,fetcherSubmission:xt,preventScrollReset:Rt||B,enableViewTransition:ot?z:void 0})}}async function gt(q,tt,ot,pt){let xt,Rt={};try{xt=await callDataStrategyImpl(p,q,tt,pt,ot,!1)}catch(Pt){return tt.filter(Tt=>Tt.shouldLoad).forEach(Tt=>{Rt[Tt.route.id]={type:"error",error:Pt}}),Rt}if(q.signal.aborted)return Rt;for(let[Pt,Tt]of Object.entries(xt))if(isRedirectDataStrategyResult(Tt)){let Ft=Tt.result;Rt[Pt]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(Ft,q,Pt,tt,f)}}else Rt[Pt]=await convertDataStrategyResultToDataResult(Tt);return Rt}async function vt(q,tt,ot,pt){let xt=gt(ot,q,pt,null),Rt=Promise.all(tt.map(async Ft=>{if(Ft.matches&&Ft.match&&Ft.request&&Ft.controller){let Et=(await gt(Ft.request,Ft.matches,pt,Ft.key))[Ft.match.route.id];return{[Ft.key]:Et}}else return Promise.resolve({[Ft.key]:{type:"error",error:getInternalRouterError(404,{pathname:Ft.path})}})})),Pt=await xt,Tt=(await Rt).reduce((Ft,Lt)=>Object.assign(Ft,Lt),{});return{loaderResults:Pt,fetcherResults:Tt}}function St(){K=!0,H.forEach((q,tt)=>{N.has(tt)&&$.add(tt),en(tt)})}function Ct(q,tt,ot={}){P.fetchers.set(q,tt),wt({fetchers:new Map(P.fetchers)},{flushSync:(ot&&ot.flushSync)===!0})}function kt(q,tt,ot,pt={}){let xt=findNearestBoundary(P.matches,tt);Fe(q),wt({errors:{[xt.route.id]:ot},fetchers:new Map(P.fetchers)},{flushSync:(pt&&pt.flushSync)===!0})}function Xt(q){return Q.set(q,(Q.get(q)||0)+1),st.has(q)&&st.delete(q),P.fetchers.get(q)||IDLE_FETCHER}function ce(q,tt){en(q,tt?.reason),Ct(q,getDoneFetcher(null))}function Fe(q){let tt=P.fetchers.get(q);N.has(q)&&!(tt&&tt.state==="loading"&&X.has(q))&&en(q),H.delete(q),X.delete(q),et.delete(q),st.delete(q),$.delete(q),P.fetchers.delete(q)}function Li(q){let tt=(Q.get(q)||0)-1;tt<=0?(Q.delete(q),st.add(q)):Q.set(q,tt),wt({fetchers:new Map(P.fetchers)})}function en(q,tt){let ot=N.get(q);ot&&(ot.abort(tt),N.delete(q))}function An(q){for(let tt of q){let ot=Xt(tt),pt=getDoneFetcher(ot.data);P.fetchers.set(tt,pt)}}function Oe(){let q=[],tt=!1;for(let ot of et){let pt=P.fetchers.get(ot);invariant$1(pt,`Expected fetcher: ${ot}`),pt.state==="loading"&&(et.delete(ot),q.push(ot),tt=!0)}return An(q),tt}function _n(q){let tt=[];for(let[ot,pt]of X)if(pt<q){let xt=P.fetchers.get(ot);invariant$1(xt,`Expected fetcher: ${ot}`),xt.state==="loading"&&(en(ot),X.delete(ot),tt.push(ot))}return An(tt),tt.length>0}function Ue(q,tt){let ot=P.blockers.get(q)||IDLE_BLOCKER;return dt.get(q)!==tt&&dt.set(q,tt),ot}function Pa(q){P.blockers.delete(q),dt.delete(q)}function rr(q,tt){let ot=P.blockers.get(q)||IDLE_BLOCKER;invariant$1(ot.state==="unblocked"&&tt.state==="blocked"||ot.state==="blocked"&&tt.state==="blocked"||ot.state==="blocked"&&tt.state==="proceeding"||ot.state==="blocked"&&tt.state==="unblocked"||ot.state==="proceeding"&&tt.state==="unblocked",`Invalid blocker state transition: ${ot.state} -> ${tt.state}`);let pt=new Map(P.blockers);pt.set(q,tt),wt({blockers:pt})}function ka({currentLocation:q,nextLocation:tt,historyAction:ot}){if(dt.size===0)return;dt.size>1&&warning$1(!1,"A router only supports one blocker at a time");let pt=Array.from(dt.entries()),[xt,Rt]=pt[pt.length-1],Pt=P.blockers.get(xt);if(!(Pt&&Pt.state==="proceeding")&&Rt({currentLocation:q,nextLocation:tt,historyAction:ot}))return xt}function ci(q){let tt=getInternalRouterError(404,{pathname:q}),ot=u||c,{matches:pt,route:xt}=getShortCircuitMatches(ot);return{notFoundMatches:pt,route:xt,error:tt}}function ar(q,tt,ot){if(x=q,A=tt,E=ot||null,!S&&P.navigation===IDLE_NAVIGATION){S=!0;let pt=Ni(P.location,P.matches);pt!=null&&wt({restoreScrollPosition:pt})}return()=>{x=null,A=null,E=null}}function Oi(q,tt){return E&&E(q,tt.map(pt=>convertRouteMatchToUiMatch(pt,P.loaderData)))||q.key}function Hn(q,tt){if(x&&A){let ot=Oi(q,tt);x[ot]=A()}}function Ni(q,tt){if(x){let ot=Oi(q,tt),pt=x[ot];if(typeof pt=="number")return pt}return null}function Pn(q,tt,ot){if(n.patchRoutesOnNavigation)if(q){if(Object.keys(q[0].params).length>0)return{active:!0,matches:matchRoutesImpl(tt,ot,f,!0)}}else return{active:!0,matches:matchRoutesImpl(tt,ot,f,!0)||[]};return{active:!1,matches:null}}async function sr(q,tt,ot,pt){if(!n.patchRoutesOnNavigation)return{type:"success",matches:q};let xt=q;for(;;){let Rt=u==null,Pt=u||c,Tt=o;try{await n.patchRoutesOnNavigation({signal:ot,path:tt,matches:xt,fetcherKey:pt,patch:(Et,At)=>{ot.aborted||patchRoutesImpl(Et,At,Pt,Tt,a,!1)}})}catch(Et){return{type:"error",error:Et,partialMatches:xt}}finally{Rt&&!ot.aborted&&(c=[...c])}if(ot.aborted)return{type:"aborted"};let Ft=matchRoutes(Pt,tt,f);if(Ft)return{type:"success",matches:Ft};let Lt=matchRoutesImpl(Pt,tt,f,!0);if(!Lt||xt.length===Lt.length&&xt.every((Et,At)=>Et.route.id===Lt[At].route.id))return{type:"success",matches:null};xt=Lt}}function Fa(q){o={},u=convertRoutesToDataRoutes(q,a,void 0,o)}function Hr(q,tt,ot=!1){let pt=u==null;patchRoutesImpl(q,tt,u||c,o,a,ot),pt&&(c=[...c],wt({}))}return k={get basename(){return f},get future(){return m},get state(){return P},get routes(){return c},get window(){return t},initialize:mt,subscribe:Ot,enableScrollRestoration:ar,navigate:te,fetch:xe,revalidate:It,createHref:q=>n.history.createHref(q),encodeLocation:q=>n.history.encodeLocation(q),getFetcher:Xt,resetFetcher:ce,deleteFetcher:Li,dispose:Mt,getBlocker:Ue,deleteBlocker:Pa,patchRoutes:Hr,_internalFetchControllers:N,_internalSetRoutes:Fa,_internalSetStateDoNotUseOrYouWillBreakYourApp(q){wt(q)}},k}function isSubmissionNavigation(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function normalizeTo(n,t,e,i,a,o){let c,u;if(a){c=[];for(let p of t)if(c.push(p),p.route.id===a){u=p;break}}else c=t,u=t[t.length-1];let f=resolveTo(i||".",getResolveToMatches(c),stripBasename(n.pathname,e)||n.pathname,o==="path");if(i==null&&(f.search=n.search,f.hash=n.hash),(i==null||i===""||i===".")&&u){let p=hasNakedIndexQuery(f.search);if(u.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&p){let m=new URLSearchParams(f.search),y=m.getAll("index");m.delete("index"),y.filter(x=>x).forEach(x=>m.append("index",x));let b=m.toString();f.search=b?`?${b}`:""}}return e!=="/"&&(f.pathname=prependBasename({basename:e,pathname:f.pathname})),createPath(f)}function normalizeNavigateOptions(n,t,e){if(!e||!isSubmissionNavigation(e))return{path:t};if(e.formMethod&&!isValidMethod(e.formMethod))return{path:t,error:getInternalRouterError(405,{method:e.formMethod})};let i=()=>({path:t,error:getInternalRouterError(400,{type:"invalid-body"})}),o=(e.formMethod||"get").toUpperCase(),c=stripHashFromPath(t);if(e.body!==void 0){if(e.formEncType==="text/plain"){if(!isMutationMethod(o))return i();let y=typeof e.body=="string"?e.body:e.body instanceof FormData||e.body instanceof URLSearchParams?Array.from(e.body.entries()).reduce((b,[x,E])=>`${b}${x}=${E}
`,""):String(e.body);return{path:t,submission:{formMethod:o,formAction:c,formEncType:e.formEncType,formData:void 0,json:void 0,text:y}}}else if(e.formEncType==="application/json"){if(!isMutationMethod(o))return i();try{let y=typeof e.body=="string"?JSON.parse(e.body):e.body;return{path:t,submission:{formMethod:o,formAction:c,formEncType:e.formEncType,formData:void 0,json:y,text:void 0}}}catch{return i()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let u,f;if(e.formData)u=convertFormDataToSearchParams(e.formData),f=e.formData;else if(e.body instanceof FormData)u=convertFormDataToSearchParams(e.body),f=e.body;else if(e.body instanceof URLSearchParams)u=e.body,f=convertSearchParamsToFormData(u);else if(e.body==null)u=new URLSearchParams,f=new FormData;else try{u=new URLSearchParams(e.body),f=convertSearchParamsToFormData(u)}catch{return i()}let p={formMethod:o,formAction:c,formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(isMutationMethod(p.formMethod))return{path:t,submission:p};let m=parsePath(t);return n&&m.search&&hasNakedIndexQuery(m.search)&&u.append("index",""),m.search=`?${u}`,{path:createPath(m),submission:p}}function getMatchesToLoad(n,t,e,i,a,o,c,u,f,p,m,y,b,x,E,A,S,T,D,R){let F=R?isErrorResult(R[1])?R[1].error:R[1].data:void 0,k=a.createURL(o.location),P=a.createURL(f),L;if(m&&o.errors){let W=Object.keys(o.errors)[0];L=c.findIndex(K=>K.route.id===W)}else if(R&&isErrorResult(R[1])){let W=R[0];L=c.findIndex(K=>K.route.id===W)-1}let B=R?R[1].statusCode:void 0,V=B&&B>=400,z={currentUrl:k,currentParams:o.matches[0]?.params||{},nextUrl:P,nextParams:c[0].params,...u,actionResult:F,actionStatus:B},j=c.map((W,K)=>{let{route:$}=W,N=null;if(L!=null&&K>L?N=!1:$.lazy?N=!0:routeHasLoaderOrMiddleware($)?m?N=shouldLoadRouteOnHydration($,o.loaderData,o.errors):isNewLoader(o.loaderData,o.matches[K],W)&&(N=!0):N=!1,N!==null)return getDataStrategyMatch(e,i,n,W,p,t,N);let G=V?!1:y||k.pathname+k.search===P.pathname+P.search||k.search!==P.search||isNewRouteInstance(o.matches[K],W),I={...z,defaultShouldRevalidate:G},X=shouldRevalidateLoader(W,I);return getDataStrategyMatch(e,i,n,W,p,t,X,I)}),J=[];return E.forEach((W,K)=>{if(m||!c.some(Q=>Q.route.id===W.routeId)||x.has(K))return;let $=o.fetchers.get(K),N=$&&$.state!=="idle"&&$.data===void 0,G=matchRoutes(S,W.path,T);if(!G){if(D&&N)return;J.push({key:K,routeId:W.routeId,path:W.path,matches:null,match:null,request:null,controller:null});return}if(A.has(K))return;let I=getTargetMatch(G,W.path),X=new AbortController,et=createClientSideRequest(a,W.path,X.signal),H=null;if(b.has(K))b.delete(K),H=getTargetedDataStrategyMatches(e,i,et,G,I,p,t);else if(N)y&&(H=getTargetedDataStrategyMatches(e,i,et,G,I,p,t));else{let Q={...z,defaultShouldRevalidate:V?!1:y};shouldRevalidateLoader(I,Q)&&(H=getTargetedDataStrategyMatches(e,i,et,G,I,p,t,Q))}H&&J.push({key:K,routeId:W.routeId,path:W.path,matches:H,match:I,request:et,controller:X})}),{dsMatches:j,revalidatingFetchers:J}}function routeHasLoaderOrMiddleware(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function shouldLoadRouteOnHydration(n,t,e){if(n.lazy)return!0;if(!routeHasLoaderOrMiddleware(n))return!1;let i=t!=null&&n.id in t,a=e!=null&&e[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function isNewLoader(n,t,e){let i=!t||e.route.id!==t.route.id,a=!n.hasOwnProperty(e.route.id);return i||a}function isNewRouteInstance(n,t){let e=n.route.path;return n.pathname!==t.pathname||e!=null&&e.endsWith("*")&&n.params["*"]!==t.params["*"]}function shouldRevalidateLoader(n,t){if(n.route.shouldRevalidate){let e=n.route.shouldRevalidate(t);if(typeof e=="boolean")return e}return t.defaultShouldRevalidate}function patchRoutesImpl(n,t,e,i,a,o){let c;if(n){let p=i[n];invariant$1(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),c=p.children}else c=e;let u=[],f=[];if(t.forEach(p=>{let m=c.find(y=>isSameRoute(p,y));m?f.push({existingRoute:m,newRoute:p}):u.push(p)}),u.length>0){let p=convertRoutesToDataRoutes(u,a,[n||"_","patch",String(c?.length||"0")],i);c.push(...p)}if(o&&f.length>0)for(let p=0;p<f.length;p++){let{existingRoute:m,newRoute:y}=f[p],b=m,[x]=convertRoutesToDataRoutes([y],a,[],{},!0);Object.assign(b,{element:x.element?x.element:b.element,errorElement:x.errorElement?x.errorElement:b.errorElement,hydrateFallbackElement:x.hydrateFallbackElement?x.hydrateFallbackElement:b.hydrateFallbackElement})}}function isSameRoute(n,t){return"id"in n&&"id"in t&&n.id===t.id?!0:n.index===t.index&&n.path===t.path&&n.caseSensitive===t.caseSensitive?(!n.children||n.children.length===0)&&(!t.children||t.children.length===0)?!0:n.children.every((e,i)=>t.children?.some(a=>isSameRoute(e,a))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:n,route:t,manifest:e,mapRouteProperties:i})=>{let a=e[t.id];if(invariant$1(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[n];if(!o)return;let c=lazyRoutePropertyCache.get(a);c||(c={},lazyRoutePropertyCache.set(a,c));let u=c[n];if(u)return u;let f=(async()=>{let p=isUnsupportedLazyRouteObjectKey(n),y=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)warning$1(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(y)warning$1(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await o();b!=null&&(Object.assign(a,{[n]:b}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(b=>b===void 0)&&(a.lazy=void 0))})();return c[n]=f,f},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(n,t,e,i,a){let o=e[n.id];if(invariant$1(o,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let m=lazyRouteFunctionCache.get(o);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let y=(async()=>{invariant$1(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),x={};for(let E in b){let A=b[E];if(A===void 0)continue;let S=isUnsupportedLazyRouteFunctionKey(E),D=o[E]!==void 0&&E!=="hasErrorBoundary";S?warning$1(!S,"Route property "+E+" is not a supported property to be returned from a lazy route function. This property will be ignored."):D?warning$1(!D,`Route "${o.id}" has a static property "${E}" defined but its lazy function is also returning a value for this property. The lazy route property "${E}" will be ignored.`):x[E]=A}Object.assign(o,x),Object.assign(o,{...i(o),lazy:void 0})})();return lazyRouteFunctionCache.set(o,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(n.lazy),u=[],f;for(let m of c){if(a&&a.includes(m))continue;let y=loadLazyRouteProperty({key:m,route:n,manifest:e,mapRouteProperties:i});y&&(u.push(y),m===t&&(f=y))}let p=u.length>0?Promise.all(u).then(()=>{}):void 0;return p?.catch(()=>{}),f?.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:f}}async function defaultDataStrategy(n){let t=n.matches.filter(a=>a.shouldLoad),e={};return(await Promise.all(t.map(a=>a.resolve()))).forEach((a,o)=>{e[t[o].route.id]=a}),e}async function defaultDataStrategyWithMiddleware(n){return n.matches.some(t=>t.route.middleware)?runClientMiddlewarePipeline(n,()=>defaultDataStrategy(n)):defaultDataStrategy(n)}function runClientMiddlewarePipeline(n,t){return runMiddlewarePipeline(n,t,i=>i,isDataStrategyResults,e);function e(i,a,o){if(o)return Promise.resolve(Object.assign(o.value,{[a]:{type:"error",result:i}}));{let{matches:c}=n,u=Math.min(Math.max(c.findIndex(p=>p.route.id===a),0),Math.max(c.findIndex(p=>p.unstable_shouldCallHandler()),0)),f=findNearestBoundary(c,c[u].route.id).route.id;return Promise.resolve({[f]:{type:"error",result:i}})}}}async function runMiddlewarePipeline(n,t,e,i,a){let{matches:o,request:c,params:u,context:f}=n,p=o.flatMap(y=>y.route.middleware?y.route.middleware.map(b=>[y.route.id,b]):[]);return await callRouteMiddleware({request:c,params:u,context:f},p,t,e,i,a)}async function callRouteMiddleware(n,t,e,i,a,o,c=0){let{request:u}=n;if(u.signal.aborted)throw u.signal.reason??new Error(`Request aborted: ${u.method} ${u.url}`);let f=t[c];if(!f)return await e();let[p,m]=f,y,b=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");try{return y={value:await callRouteMiddleware(n,t,e,i,a,o,c+1)},y.value}catch(x){return y={value:await o(x,p,y)},y.value}};try{let x=await m(n,b),E=x!=null?i(x):void 0;return a(E)?E:y?E??y.value:(y={value:await b()},y.value)}catch(x){return await o(x,p,y)}}function getDataStrategyMatchLazyPromises(n,t,e,i,a){let o=loadLazyRouteProperty({key:"middleware",route:i.route,manifest:t,mapRouteProperties:n}),c=loadLazyRoute(i.route,isMutationMethod(e.method)?"action":"loader",t,n,a);return{middleware:o,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function getDataStrategyMatch(n,t,e,i,a,o,c,u=null){let f=!1,p=getDataStrategyMatchLazyPromises(n,t,e,i,a);return{...i,_lazyPromises:p,shouldLoad:c,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler(m){return f=!0,u?typeof m=="boolean"?shouldRevalidateLoader(i,{...u,defaultShouldRevalidate:m}):shouldRevalidateLoader(i,u):c},resolve(m){let{lazy:y,loader:b,middleware:x}=i.route,E=f||c||m&&!isMutationMethod(e.method)&&(y||b),A=x&&x.length>0&&!b&&!y;return E&&!A?callLoaderOrAction({request:e,match:i,lazyHandlerPromise:p?.handler,lazyRoutePromise:p?.route,handlerOverride:m,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(n,t,e,i,a,o,c,u=null){return i.map(f=>f.route.id!==a.route.id?{...f,shouldLoad:!1,unstable_shouldRevalidateArgs:u,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(n,t,e,f,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(n,t,e,f,o,c,!0,u))}async function callDataStrategyImpl(n,t,e,i,a,o){e.some(p=>p._lazyPromises?.middleware)&&await Promise.all(e.map(p=>p._lazyPromises?.middleware));let c={request:t,params:e[0].params,context:a,matches:e},f=await n({...c,fetcherKey:i,runClientMiddleware:p=>{let m=c;return runClientMiddlewarePipeline(m,()=>p({...m,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(e.flatMap(p=>[p._lazyPromises?.handler,p._lazyPromises?.route]))}catch{}return f}async function callLoaderOrAction({request:n,match:t,lazyHandlerPromise:e,lazyRoutePromise:i,handlerOverride:a,scopedContext:o}){let c,u,f=isMutationMethod(n.method),p=f?"action":"loader",m=y=>{let b,x=new Promise((S,T)=>b=T);u=()=>b(),n.signal.addEventListener("abort",u);let E=S=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${t.route.id}]`)):y({request:n,params:t.params,context:o},...S!==void 0?[S]:[]),A=(async()=>{try{return{type:"data",result:await(a?a(T=>E(T)):E())}}catch(S){return{type:"error",result:S}}})();return Promise.race([A,x])};try{let y=f?t.route.action:t.route.loader;if(e||i)if(y){let b,[x]=await Promise.all([m(y).catch(E=>{b=E}),e,i]);if(b!==void 0)throw b;c=x}else{await e;let b=f?t.route.action:t.route.loader;if(b)[c]=await Promise.all([m(b),i]);else if(p==="action"){let x=new URL(n.url),E=x.pathname+x.search;throw getInternalRouterError(405,{method:n.method,pathname:E,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(y)c=await m(y);else{let b=new URL(n.url),x=b.pathname+b.search;throw getInternalRouterError(404,{pathname:x})}}catch(y){return{type:"error",result:y}}finally{u&&n.signal.removeEventListener("abort",u)}return c}async function parseResponseBody(n){let t=n.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?n.body==null?null:n.json():n.text()}async function convertDataStrategyResultToDataResult(n){let{result:t,type:e}=n;if(isResponse(t)){let i;try{i=await parseResponseBody(t)}catch(a){return{type:"error",error:a}}return e==="error"?{type:"error",error:new ErrorResponseImpl(t.status,t.statusText,i),statusCode:t.status,headers:t.headers}:{type:"data",data:i,statusCode:t.status,headers:t.headers}}return e==="error"?isDataWithResponseInit(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(t.init?.status||500,void 0,t.data),statusCode:isRouteErrorResponse(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:isRouteErrorResponse(t)?t.status:void 0}:isDataWithResponseInit(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function normalizeRelativeRoutingRedirectResponse(n,t,e,i,a){let o=n.headers.get("Location");if(invariant$1(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(o)){let c=i.slice(0,i.findIndex(u=>u.route.id===e)+1);o=normalizeTo(new URL(t.url),c,a,o),n.headers.set("Location",o)}return n}function normalizeRedirectLocation(n,t,e){if(isAbsoluteUrl(n)){let i=n,a=i.startsWith("//")?new URL(t.protocol+i):new URL(i),o=stripBasename(a.pathname,e)!=null;if(a.origin===t.origin&&o)return a.pathname+a.search+a.hash}return n}function createClientSideRequest(n,t,e,i){let a=n.createURL(stripHashFromPath(t)).toString(),o={signal:e};if(i&&isMutationMethod(i.formMethod)){let{formMethod:c,formEncType:u}=i;o.method=c.toUpperCase(),u==="application/json"?(o.headers=new Headers({"Content-Type":u}),o.body=JSON.stringify(i.json)):u==="text/plain"?o.body=i.text:u==="application/x-www-form-urlencoded"&&i.formData?o.body=convertFormDataToSearchParams(i.formData):o.body=i.formData}return new Request(a,o)}function convertFormDataToSearchParams(n){let t=new URLSearchParams;for(let[e,i]of n.entries())t.append(e,typeof i=="string"?i:i.name);return t}function convertSearchParamsToFormData(n){let t=new FormData;for(let[e,i]of n.entries())t.append(e,i);return t}function processRouteLoaderData(n,t,e,i=!1,a=!1){let o={},c=null,u,f=!1,p={},m=e&&isErrorResult(e[1])?e[1].error:void 0;return n.forEach(y=>{if(!(y.route.id in t))return;let b=y.route.id,x=t[b];if(invariant$1(!isRedirectResult(x),"Cannot handle redirect results in processLoaderData"),isErrorResult(x)){let E=x.error;if(m!==void 0&&(E=m,m=void 0),c=c||{},a)c[b]=E;else{let A=findNearestBoundary(n,b);c[A.route.id]==null&&(c[A.route.id]=E)}i||(o[b]=ResetLoaderDataSymbol),f||(f=!0,u=isRouteErrorResponse(x.error)?x.error.status:500),x.headers&&(p[b]=x.headers)}else o[b]=x.data,x.statusCode&&x.statusCode!==200&&!f&&(u=x.statusCode),x.headers&&(p[b]=x.headers)}),m!==void 0&&e&&(c={[e[0]]:m},e[2]&&(o[e[2]]=void 0)),{loaderData:o,errors:c,statusCode:u||200,loaderHeaders:p}}function processLoaderData(n,t,e,i,a,o){let{loaderData:c,errors:u}=processRouteLoaderData(t,e,i);return a.filter(f=>!f.matches||f.matches.some(p=>p.shouldLoad)).forEach(f=>{let{key:p,match:m,controller:y}=f;if(y&&y.signal.aborted)return;let b=o[p];if(invariant$1(b,"Did not find corresponding fetcher result"),isErrorResult(b)){let x=findNearestBoundary(n.matches,m?.route.id);u&&u[x.route.id]||(u={...u,[x.route.id]:b.error}),n.fetchers.delete(p)}else if(isRedirectResult(b))invariant$1(!1,"Unhandled fetcher revalidation redirect");else{let x=getDoneFetcher(b.data);n.fetchers.set(p,x)}}),{loaderData:c,errors:u}}function mergeLoaderData(n,t,e,i){let a=Object.entries(t).filter(([,o])=>o!==ResetLoaderDataSymbol).reduce((o,[c,u])=>(o[c]=u,o),{});for(let o of e){let c=o.route.id;if(!t.hasOwnProperty(c)&&n.hasOwnProperty(c)&&o.route.loader&&(a[c]=n[c]),i&&i.hasOwnProperty(c))break}return a}function getActionDataForCommit(n){return n?isErrorResult(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function findNearestBoundary(n,t){return(t?n.slice(0,n.findIndex(i=>i.route.id===t)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function getShortCircuitMatches(n){let t=n.length===1?n[0]:n.find(e=>e.index||!e.path||e.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function getInternalRouterError(n,{pathname:t,routeId:e,method:i,type:a,message:o}={}){let c="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&t&&e?u=`You made a ${i} request to "${t}" but did not provide a \`loader\` for route "${e}", so there is no way to handle the request.`:a==="invalid-body"&&(u="Unable to encode submission body")):n===403?(c="Forbidden",u=`Route "${e}" does not match URL "${t}"`):n===404?(c="Not Found",u=`No route matches URL "${t}"`):n===405&&(c="Method Not Allowed",i&&t&&e?u=`You made a ${i.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${e}", so there is no way to handle the request.`:i&&(u=`Invalid request method "${i.toUpperCase()}"`)),new ErrorResponseImpl(n||500,c,new Error(u),!0)}function findRedirect(n){let t=Object.entries(n);for(let e=t.length-1;e>=0;e--){let[i,a]=t[e];if(isRedirectResult(a))return{key:i,result:a}}}function stripHashFromPath(n){let t=typeof n=="string"?parsePath(n):n;return createPath({...t,hash:""})}function isHashChangeOnly(n,t){return n.pathname!==t.pathname||n.search!==t.search?!1:n.hash===""?t.hash!=="":n.hash===t.hash?!0:t.hash!==""}function isDataStrategyResults(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([t,e])=>typeof t=="string"&&isDataStrategyResult(e))}function isDataStrategyResult(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function isRedirectDataStrategyResult(n){return isResponse(n.result)&&redirectStatusCodes.has(n.result.status)}function isErrorResult(n){return n.type==="error"}function isRedirectResult(n){return(n&&n.type)==="redirect"}function isDataWithResponseInit(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function isResponse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function isValidMethod(n){return validRequestMethods.has(n.toUpperCase())}function isMutationMethod(n){return validMutationMethods.has(n.toUpperCase())}function hasNakedIndexQuery(n){return new URLSearchParams(n).getAll("index").some(t=>t==="")}function getTargetMatch(n,t){let e=typeof t=="string"?parsePath(t).search:t.search;if(n[n.length-1].route.index&&hasNakedIndexQuery(e||""))return n[n.length-1];let i=getPathContributingMatches(n);return i[i.length-1]}function getSubmissionFromNavigation(n){let{formMethod:t,formAction:e,formEncType:i,text:a,formData:o,json:c}=n;if(!(!t||!e||!i)){if(a!=null)return{formMethod:t,formAction:e,formEncType:i,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:t,formAction:e,formEncType:i,formData:o,json:void 0,text:void 0};if(c!==void 0)return{formMethod:t,formAction:e,formEncType:i,formData:void 0,json:c,text:void 0}}}function getLoadingNavigation(n,t){return t?{state:"loading",location:n,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(n,t){return{state:"submitting",location:n,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function getLoadingFetcher(n,t){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function getSubmittingFetcher(n,t){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:t?t.data:void 0}}function getDoneFetcher(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function restoreAppliedTransitions(n,t){try{let e=n.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(e){let i=JSON.parse(e);for(let[a,o]of Object.entries(i||{}))o&&Array.isArray(o)&&t.set(a,new Set(o||[]))}}catch{}}function persistAppliedTransitions(n,t){if(t.size>0){let e={};for(let[i,a]of t)e[i]=[...a];try{n.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(e))}catch(i){warning$1(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function createDeferred(){let n,t,e=new Promise((i,a)=>{n=async o=>{i(o);try{await e}catch{}},t=async o=>{a(o);try{await e}catch{}}});return{promise:e,resolve:n,reject:t}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(n,{relative:t}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:c}=useResolvedPath(n,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:joinPaths([e,o])),i.createHref({pathname:u,search:c,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(n){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(n)}function useNavigate(){let{isDataRoute:n}=reactExports.useContext(RouteContext);return n?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let n=reactExports.useContext(DataRouterContext),{basename:t,navigator:e}=reactExports.useContext(NavigationContext),{matches:i}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(i)),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{c.current=!0}),reactExports.useCallback((f,p={})=>{if(warning$1(c.current,navigateEffectWarning),!c.current)return;if(typeof f=="number"){e.go(f);return}let m=resolveTo(f,JSON.parse(o),a,p.relative==="path");n==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:joinPaths([t,m.pathname])),(p.replace?e.replace:e.push)(m,p.state,p)},[t,e,o,a,n])}reactExports.createContext(null);function useResolvedPath(n,{relative:t}={}){let{matches:e}=reactExports.useContext(RouteContext),{pathname:i}=useLocation(),a=JSON.stringify(getResolveToMatches(e));return reactExports.useMemo(()=>resolveTo(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function useRoutesImpl(n,t,e,i,a){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),u=c[c.length-1],f=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",y=u&&u.route;{let D=y&&y.path||"";warningOnce(p,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let b=useLocation(),x;x=b;let E=x.pathname||"/",A=E;if(m!=="/"){let D=m.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=matchRoutes(n,{pathname:A});return warning$1(y||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),warning$1(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:joinPaths([m,o.encodeLocation?o.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:joinPaths([m,o.encodeLocation?o.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,e,i,a)}function DefaultErrorComponent(){let n=useRouteError(),t=isRouteErrorResponse(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),e?reactExports.createElement("pre",{style:a},e):null,c)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.unstable_onError?this.props.unstable_onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:n,match:t,children:e}){let i=reactExports.useContext(DataRouterContext);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:n},e)}function _renderMatches(n,t=[],e=null,i=null,a=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let o=n,c=e?.errors;if(c!=null){let p=o.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);invariant$1(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,f=-1;if(e)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:y,errors:b}=e,x=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!b||b[m.route.id]===void 0);if(m.route.lazy||x){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,m,y)=>{let b,x=!1,E=null,A=null;e&&(b=c&&m.route.id?c[m.route.id]:void 0,E=m.route.errorElement||defaultErrorElement,u&&(f<0&&y===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):f===y&&(x=!0,A=m.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,y+1)),T=()=>{let D;return b?D=E:x?D=A:m.route.Component?D=reactExports.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=p,reactExports.createElement(RenderedRoute,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:e!=null},children:D})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?reactExports.createElement(RenderErrorBoundary,{location:e.location,revalidation:e.revalidation,component:E,error:b,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:i}):T()},null)}function getDataRouterConsoleError(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(n){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError(n)),t}function useDataRouterState(n){let t=reactExports.useContext(DataRouterStateContext);return invariant$1(t,getDataRouterConsoleError(n)),t}function useRouteContext(n){let t=reactExports.useContext(RouteContext);return invariant$1(t,getDataRouterConsoleError(n)),t}function useCurrentRouteId(n){let t=useRouteContext(n),e=t.matches[t.matches.length-1];return invariant$1(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let n=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),e=useCurrentRouteId("useRouteError");return n!==void 0?n:t.errors?.[e]}function useNavigateStable(){let{router:n}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),e=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{e.current=!0}),reactExports.useCallback(async(a,o={})=>{warning$1(e.current,navigateEffectWarning),e.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:t,...o}))},[n,t])}var alreadyWarned={};function warningOnce(n,t,e){!t&&!alreadyWarned[n]&&(alreadyWarned[n]=!0,warning$1(!1,e))}var alreadyWarned2={};function warnOnce(n,t){!n&&!alreadyWarned2[t]&&(alreadyWarned2[t]=!0,console.warn(t))}function mapRouteProperties(n){let t={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&warning$1(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:reactExports.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&warning$1(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:reactExports.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&warning$1(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:reactExports.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),t}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred=class{constructor(){this.status="pending",this.promise=new Promise((n,t)=>{this.resolve=e=>{this.status==="pending"&&(this.status="resolved",n(e))},this.reject=e=>{this.status==="pending"&&(this.status="rejected",t(e))}})}};function RouterProvider({router:n,flushSync:t,unstable_onError:e}){let[i,a]=reactExports.useState(n.state),[o,c]=reactExports.useState(),[u,f]=reactExports.useState({isTransitioning:!1}),[p,m]=reactExports.useState(),[y,b]=reactExports.useState(),[x,E]=reactExports.useState(),A=reactExports.useRef(new Map),S=reactExports.useCallback(k=>{a(P=>(k.errors&&e&&Object.entries(k.errors).forEach(([L,B])=>{P.errors?.[L]!==B&&e(B)}),k))},[e]),T=reactExports.useCallback((k,{deletedFetchers:P,flushSync:L,viewTransitionOpts:B})=>{k.fetchers.forEach((z,j)=>{z.data!==void 0&&A.current.set(j,z.data)}),P.forEach(z=>A.current.delete(z)),warnOnce(L===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let V=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(warnOnce(B==null||V,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!B||!V){t&&L?t(()=>S(k)):reactExports.startTransition(()=>S(k));return}if(t&&L){t(()=>{y&&(p&&p.resolve(),y.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let z=n.window.document.startViewTransition(()=>{t(()=>S(k))});z.finished.finally(()=>{t(()=>{m(void 0),b(void 0),c(void 0),f({isTransitioning:!1})})}),t(()=>b(z));return}y?(p&&p.resolve(),y.skipTransition(),E({state:k,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(c(k),f({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[n.window,t,y,p,S]);reactExports.useLayoutEffect(()=>n.subscribe(T),[n,T]),reactExports.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new Deferred)},[u]),reactExports.useEffect(()=>{if(p&&o&&n.window){let k=o,P=p.promise,L=n.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>S(k)),await P});L.finished.finally(()=>{m(void 0),b(void 0),c(void 0),f({isTransitioning:!1})}),b(L)}},[o,p,n.window,S]),reactExports.useEffect(()=>{p&&o&&i.location.key===o.location.key&&p.resolve()},[p,y,i.location,o]),reactExports.useEffect(()=>{!u.isTransitioning&&x&&(c(x.state),f({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),E(void 0))},[u.isTransitioning,x]);let D=reactExports.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,P,L)=>n.navigate(k,{state:P,preventScrollReset:L?.preventScrollReset}),replace:(k,P,L)=>n.navigate(k,{replace:!0,state:P,preventScrollReset:L?.preventScrollReset})}),[n]),R=n.basename||"/",F=reactExports.useMemo(()=>({router:n,navigator:D,static:!1,basename:R,unstable_onError:e}),[n,D,R,e]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:F},reactExports.createElement(DataRouterStateContext.Provider,{value:i},reactExports.createElement(FetchersContext.Provider,{value:A.current},reactExports.createElement(ViewTransitionContext.Provider,{value:u},reactExports.createElement(Router,{basename:R,location:i.location,navigationType:i.historyAction,navigator:D},reactExports.createElement(MemoizedDataRoutes,{routes:n.routes,future:n.future,state:i,unstable_onError:e})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:n,future:t,state:e,unstable_onError:i}){return useRoutesImpl(n,void 0,e,i,t)}function Navigate({to:n,replace:t,state:e,relative:i}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=reactExports.useContext(NavigationContext);warning$1(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),u=useNavigate(),f=resolveTo(n,getResolveToMatches(o),c,i==="path"),p=JSON.stringify(f);return reactExports.useEffect(()=>{u(JSON.parse(p),{replace:t,state:e,relative:i})},[u,p,i,t,e]),null}function Router({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:o=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof e=="string"&&(e=parsePath(e));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:b="default"}=e,x=reactExports.useMemo(()=>{let E=stripBasename(f,c);return E==null?null:{location:{pathname:E,search:p,hash:m,state:y,key:b},navigationType:i}},[c,f,p,m,y,b,i]);return warning$1(x!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:t,value:x}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(n){return n!=null&&typeof n.tagName=="string"}function isButtonElement(n){return isHtmlElement(n)&&n.tagName.toLowerCase()==="button"}function isFormElement(n){return isHtmlElement(n)&&n.tagName.toLowerCase()==="form"}function isInputElement(n){return isHtmlElement(n)&&n.tagName.toLowerCase()==="input"}function isModifiedEvent(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function shouldProcessLinkClick(n,t){return n.button===0&&(!t||t==="_self")&&!isModifiedEvent(n)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(n){return n!=null&&!supportedFormEncTypes.has(n)?(warning$1(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):n}function getFormSubmissionInfo(n,t){let e,i,a,o,c;if(isFormElement(n)){let u=n.getAttribute("action");i=u?stripBasename(u,t):null,e=n.getAttribute("method")||defaultMethod,a=getFormEncType(n.getAttribute("enctype"))||defaultEncType,o=new FormData(n)}else if(isButtonElement(n)||isInputElement(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||u.getAttribute("action");if(i=f?stripBasename(f,t):null,e=n.getAttribute("formmethod")||u.getAttribute("method")||defaultMethod,a=getFormEncType(n.getAttribute("formenctype"))||getFormEncType(u.getAttribute("enctype"))||defaultEncType,o=new FormData(u,n),!isFormDataSubmitterSupported()){let{name:p,type:m,value:y}=n;if(m==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(isHtmlElement(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=defaultMethod,i=null,a=defaultEncType,c=n}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function singleFetchUrl(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&stripBasename(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function loadRouteModule(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function getKeyedPrefetchLinks(n,t,e){let i=await Promise.all(n.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await loadRouteModule(o,e);return c.links?c.links():[]}return[]}));return dedupeLinkDescriptors(i.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(n,t,e,i,a,o){let c=(f,p)=>e[p]?f.route.id!==e[p].route.id:!0,u=(f,p)=>e[p].pathname!==f.pathname||e[p].route.path?.endsWith("*")&&e[p].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,p)=>c(f,p)||u(f,p)):o==="data"?t.filter((f,p)=>{let m=i.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(c(f,p)||u(f,p))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function getModuleLinkHrefs(n,t,{includeHydrateFallback:e}={}){return dedupeHrefs(n.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function dedupeHrefs(n){return[...new Set(n)]}function sortKeys(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function dedupeLinkDescriptors(n,t){let e=new Set;return new Set(t),n.reduce((i,a)=>{let o=JSON.stringify(sortKeys(a));return e.has(o)||(e.add(o),i.push({key:o,link:a})),i},[])}function useDataRouterContext2(){let n=reactExports.useContext(DataRouterContext);return invariant2(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function useDataRouterStateContext(){let n=reactExports.useContext(DataRouterStateContext);return invariant2(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let n=reactExports.useContext(FrameworkContext);return invariant2(n,"You must render this element inside a <HydratedRouter> element"),n}function usePrefetchBehavior(n,t){let e=reactExports.useContext(FrameworkContext),[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=t,b=reactExports.useRef(null);reactExports.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let A=T=>{T.forEach(D=>{c(D.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return b.current&&S.observe(b.current),()=>{S.disconnect()}}},[n]),reactExports.useEffect(()=>{if(i){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[i]);let x=()=>{a(!0)},E=()=>{a(!1),c(!1)};return e?n!=="intent"?[o,b,{}]:[o,b,{onFocus:composeEventHandlers(u,x),onBlur:composeEventHandlers(f,E),onMouseEnter:composeEventHandlers(p,x),onMouseLeave:composeEventHandlers(m,E),onTouchStart:composeEventHandlers(y,x)}]:[!1,b,{}]}function composeEventHandlers(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function PrefetchPageLinks({page:n,...t}){let{router:e}=useDataRouterContext2(),i=reactExports.useMemo(()=>matchRoutes(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?reactExports.createElement(PrefetchPageLinksImpl,{page:n,matches:i,...t}):null}function useKeyedPrefetchLinks(n){let{manifest:t,routeModules:e}=useFrameworkContext(),[i,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(n,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[n,t,e]),i}function PrefetchPageLinksImpl({page:n,matches:t,...e}){let i=useLocation(),{manifest:a,routeModules:o}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:u,matches:f}=useDataRouterStateContext(),p=reactExports.useMemo(()=>getNewMatchesForLinks(n,t,f,a,i,"data"),[n,t,f,a,i]),m=reactExports.useMemo(()=>getNewMatchesForLinks(n,t,f,a,i,"assets"),[n,t,f,a,i]),y=reactExports.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let E=new Set,A=!1;if(t.forEach(T=>{let D=a.routes[T.route.id];!D||!D.hasLoader||(!p.some(R=>R.route.id===T.route.id)&&T.route.id in u&&o[T.route.id]?.shouldRevalidate||D.hasClientLoader?A=!0:E.add(T.route.id))}),E.size===0)return[];let S=singleFetchUrl(n,c,"data");return A&&E.size>0&&S.searchParams.set("_routes",t.filter(T=>E.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[c,u,i,a,p,t,n,o]),b=reactExports.useMemo(()=>getModuleLinkHrefs(m,a),[m,a]),x=useKeyedPrefetchLinks(m);return reactExports.createElement(reactExports.Fragment,null,y.map(E=>reactExports.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...e})),b.map(E=>reactExports.createElement("link",{key:E,rel:"modulepreload",href:E,...e})),x.map(({key:E,link:A})=>reactExports.createElement("link",{key:E,nonce:e.nonce,...A})))}function mergeRefs$1(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.9.4")}catch{}function createHashRouter(n,t){return createRouter({basename:t?.basename,getContext:t?.getContext,future:t?.future,history:createHashHistory({window:t?.window}),hydrationData:parseHydrationData(),routes:n,mapRouteProperties,hydrationRouteProperties,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function parseHydrationData(){let n=window?.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:deserializeErrors(n.errors)}),n}function deserializeErrors(n){if(!n)return null;let t=Object.entries(n),e={};for(let[i,a]of t)if(a&&a.__type==="RouteErrorResponse")e[i]=new ErrorResponseImpl(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let c=new o(a.message);c.stack="",e[i]=c}catch{}}if(e[i]==null){let o=new Error(a.message);o.stack="",e[i]=o}}else e[i]=a;return e}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:u,target:f,to:p,preventScrollReset:m,viewTransition:y,...b},x){let{basename:E}=reactExports.useContext(NavigationContext),A=typeof p=="string"&&ABSOLUTE_URL_REGEX2.test(p),S,T=!1;if(typeof p=="string"&&A&&(S=p,isBrowser$1))try{let V=new URL(window.location.href),z=p.startsWith("//")?new URL(V.protocol+p):new URL(p),j=stripBasename(z.pathname,E);z.origin===V.origin&&j!=null?p=j+z.search+z.hash:T=!0}catch{warning$1(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=useHref(p,{relative:a}),[R,F,k]=usePrefetchBehavior(i,b),P=useLinkClickHandler(p,{replace:c,state:u,target:f,preventScrollReset:m,relative:a,viewTransition:y});function L(V){t&&t(V),V.defaultPrevented||P(V)}let B=reactExports.createElement("a",{...b,...k,href:S||D,onClick:T||o?t:L,ref:mergeRefs$1(x,F),target:f,"data-discover":!A&&e==="render"?"true":void 0});return R&&!A?reactExports.createElement(reactExports.Fragment,null,B,reactExports.createElement(PrefetchPageLinks,{page:D})):B});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:u,children:f,...p},m){let y=useResolvedPath(c,{relative:p.relative}),b=useLocation(),x=reactExports.useContext(DataRouterStateContext),{navigator:E,basename:A}=reactExports.useContext(NavigationContext),S=x!=null&&useViewTransitionState(y)&&u===!0,T=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,D=b.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(D=D.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&A&&(R=stripBasename(R,A)||R);const F=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let k=D===T||!a&&D.startsWith(T)&&D.charAt(F)==="/",P=R!=null&&(R===T||!a&&R.startsWith(T)&&R.charAt(T.length)==="/"),L={isActive:k,isPending:P,isTransitioning:S},B=k?t:void 0,V;typeof i=="function"?V=i(L):V=[i,k?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(L):o;return reactExports.createElement(Link,{...p,"aria-current":B,className:V,ref:m,style:z,to:c,viewTransition:u},typeof f=="function"?f(L):f)});NavLink.displayName="NavLink";var Form$1=reactExports.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:o,method:c=defaultMethod,action:u,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:y,...b},x)=>{let E=useSubmit(),A=useFormAction(u,{relative:p}),S=c.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&ABSOLUTE_URL_REGEX2.test(u),D=R=>{if(f&&f(R),R.defaultPrevented)return;R.preventDefault();let F=R.nativeEvent.submitter,k=F?.getAttribute("formmethod")||c;E(F||R.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:a,state:o,relative:p,preventScrollReset:m,viewTransition:y})};return reactExports.createElement("form",{ref:x,method:S,action:A,onSubmit:i?f:D,...b,"data-discover":!T&&n==="render"?"true":void 0})});Form$1.displayName="Form";function getDataRouterConsoleError2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(n){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError2(n)),t}function useLinkClickHandler(n,{target:t,replace:e,state:i,preventScrollReset:a,relative:o,viewTransition:c}={}){let u=useNavigate(),f=useLocation(),p=useResolvedPath(n,{relative:o});return reactExports.useCallback(m=>{if(shouldProcessLinkClick(m,t)){m.preventDefault();let y=e!==void 0?e:createPath(f)===createPath(p);u(n,{replace:y,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[f,u,p,e,i,t,n,a,o,c])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:n}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),e=useRouteId();return reactExports.useCallback(async(i,a={})=>{let{action:o,method:c,encType:u,formData:f,body:p}=getFormSubmissionInfo(i,t);if(a.navigate===!1){let m=a.fetcherKey||getUniqueFetcherId();await n.fetch(m,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,t,e])}function useFormAction(n,{relative:t}={}){let{basename:e}=reactExports.useContext(NavigationContext),i=reactExports.useContext(RouteContext);invariant$1(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...useResolvedPath(n||".",{relative:t})},c=useLocation();if(n==null){o.search=c.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(m=>m==="")){u.delete("index"),f.filter(y=>y).forEach(y=>u.append("index",y));let m=u.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:joinPaths([e,o.pathname])),createPath(o)}function useViewTransitionState(n,{relative:t}={}){let e=reactExports.useContext(ViewTransitionContext);invariant$1(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(n,{relative:t});if(!e.isTransitioning)return!1;let o=stripBasename(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=stripBasename(e.nextLocation.pathname,i)||e.nextLocation.pathname;return matchPath(a.pathname,c)!=null||matchPath(a.pathname,o)!=null}var reactDomExports=requireReactDom();function RouterProvider2(n){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,...n})}const Modal=({message:n,onClose:t})=>jsxRuntimeExports.jsx("div",{className:"fixed font-robotoCondensed inset-0  bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 w-1/3 dark:bg-[#313749] dark:text-white shadow-xl",children:[jsxRuntimeExports.jsx("h2",{className:"font-roboto text-xl font-bold mb-4 dark:text-white",children:"Login Error"}),jsxRuntimeExports.jsx("p",{className:"mb-6 text-gray-700 dark:text-white",children:n}),jsxRuntimeExports.jsx("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",children:"Close"})]})});var isMergeableObject=function(t){return isNonNullObject(t)&&!isSpecial(t)};function isNonNullObject(n){return!!n&&typeof n=="object"}function isSpecial(n){var t=Object.prototype.toString.call(n);return t==="[object RegExp]"||t==="[object Date]"||isReactElement(n)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(n){return n.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(n){return Array.isArray(n)?[]:{}}function cloneUnlessOtherwiseSpecified(n,t){return t.clone!==!1&&t.isMergeableObject(n)?deepmerge(emptyTarget(n),n,t):n}function defaultArrayMerge(n,t,e){return n.concat(t).map(function(i){return cloneUnlessOtherwiseSpecified(i,e)})}function mergeObject(n,t,e){var i={};return e.isMergeableObject(n)&&Object.keys(n).forEach(function(a){i[a]=cloneUnlessOtherwiseSpecified(n[a],e)}),Object.keys(t).forEach(function(a){!e.isMergeableObject(t[a])||!n[a]?i[a]=cloneUnlessOtherwiseSpecified(t[a],e):i[a]=deepmerge(n[a],t[a],e)}),i}function deepmerge(n,t,e){e=e||{},e.arrayMerge=e.arrayMerge||defaultArrayMerge,e.isMergeableObject=e.isMergeableObject||isMergeableObject;var i=Array.isArray(t),a=Array.isArray(n),o=i===a;return o?i?e.arrayMerge(n,t,e):mergeObject(n,t,e):cloneUnlessOtherwiseSpecified(t,e)}deepmerge.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(i,a){return deepmerge(i,a,e)},{})};var deepmerge_1=deepmerge,freeGlobal=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(n){var t=hasOwnProperty$a.call(n,symToStringTag$1),e=n[symToStringTag$1];try{n[symToStringTag$1]=void 0;var i=!0}catch{}var a=nativeObjectToString$1.call(n);return i&&(t?n[symToStringTag$1]=e:delete n[symToStringTag$1]),a}var objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString(n){return nativeObjectToString.call(n)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(n){return n==null?n===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(n)?getRawTag(n):objectToString(n)}function overArg(n,t){return function(e){return n(t(e))}}var getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike(n){return n!=null&&typeof n=="object"}var objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$b=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(n){if(!isObjectLike(n)||baseGetTag(n)!=objectTag$3)return!1;var t=getPrototype(n);if(t===null)return!0;var e=hasOwnProperty$9.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&funcToString$2.call(e)==objectCtorString}function listCacheClear(){this.__data__=[],this.size=0}function eq(n,t){return n===t||n!==n&&t!==t}function assocIndexOf(n,t){for(var e=n.length;e--;)if(eq(n[e][0],t))return e;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(n){var t=this.__data__,e=assocIndexOf(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():splice.call(t,e,1),--this.size,!0}function listCacheGet(n){var t=this.__data__,e=assocIndexOf(t,n);return e<0?void 0:t[e][1]}function listCacheHas(n){return assocIndexOf(this.__data__,n)>-1}function listCacheSet(n,t){var e=this.__data__,i=assocIndexOf(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}function ListCache(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function stackGet(n){return this.__data__.get(n)}function stackHas(n){return this.__data__.has(n)}function isObject$2(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(n){if(!isObject$2(n))return!1;var t=baseGetTag(n);return t==funcTag$2||t==genTag$1||t==asyncTag||t==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=(function(){var n=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function isMasked(n){return!!maskSrcKey&&maskSrcKey in n}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(n){if(n!=null){try{return funcToString$1.call(n)}catch{}try{return n+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$a=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$8=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$8).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(n){if(!isObject$2(n)||isMasked(n))return!1;var t=isFunction$1(n)?reIsNative:reIsHostCtor;return t.test(toSource(n))}function getValue(n,t){return n?.[t]}function getNative(n,t){var e=getValue(n,t);return baseIsNative(e)?e:void 0}var Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(n){var t=this.__data__;if(nativeCreate){var e=t[n];return e===HASH_UNDEFINED$1?void 0:e}return hasOwnProperty$7.call(t,n)?t[n]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(n){var t=this.__data__;return nativeCreate?t[n]!==void 0:hasOwnProperty$6.call(t,n)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=nativeCreate&&t===void 0?HASH_UNDEFINED:t,this}function Hash(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function getMapData(n,t){var e=n.__data__;return isKeyable(t)?e[typeof t=="string"?"string":"hash"]:e.map}function mapCacheDelete(n){var t=getMapData(this,n).delete(n);return this.size-=t?1:0,t}function mapCacheGet(n){return getMapData(this,n).get(n)}function mapCacheHas(n){return getMapData(this,n).has(n)}function mapCacheSet(n,t){var e=getMapData(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}function MapCache(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(n,t){var e=this.__data__;if(e instanceof ListCache){var i=e.__data__;if(!Map$1||i.length<LARGE_ARRAY_SIZE-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new MapCache(i)}return e.set(n,t),this.size=e.size,this}function Stack(n){var t=this.__data__=new ListCache(n);this.size=t.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayEach(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}var defineProperty=(function(){try{var n=getNative(Object,"defineProperty");return n({},"",{}),n}catch{}})();function baseAssignValue(n,t,e){t=="__proto__"&&defineProperty?defineProperty(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function assignValue(n,t,e){var i=n[t];(!(hasOwnProperty$5.call(n,t)&&eq(i,e))||e===void 0&&!(t in n))&&baseAssignValue(n,t,e)}function copyObject(n,t,e,i){var a=!e;e||(e={});for(var o=-1,c=t.length;++o<c;){var u=t[o],f=void 0;f===void 0&&(f=n[u]),a?baseAssignValue(e,u,f):assignValue(e,u,f)}return e}function baseTimes(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var argsTag$2="[object Arguments]";function baseIsArguments(n){return isObjectLike(n)&&baseGetTag(n)==argsTag$2}var objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(n){return isObjectLike(n)&&hasOwnProperty$4.call(n,"callee")&&!propertyIsEnumerable$1.call(n,"callee")},isArray=Array.isArray;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(n,t){var e=typeof n;return t=t??MAX_SAFE_INTEGER$1,!!t&&(e=="number"||e!="symbol"&&reIsUint.test(n))&&n>-1&&n%1==0&&n<t}var MAX_SAFE_INTEGER=9007199254740991;function isLength(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=MAX_SAFE_INTEGER}var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(n){return isObjectLike(n)&&isLength(n.length)&&!!typedArrayTags[baseGetTag(n)]}function baseUnary(n){return function(t){return n(t)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{var n=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return n||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(n,t){var e=isArray(n),i=!e&&isArguments(n),a=!e&&!i&&isBuffer(n),o=!e&&!i&&!a&&isTypedArray(n),c=e||i||a||o,u=c?baseTimes(n.length,String):[],f=u.length;for(var p in n)(t||hasOwnProperty$3.call(n,p))&&!(c&&(p=="length"||a&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||isIndex(p,f)))&&u.push(p);return u}var objectProto$4=Object.prototype;function isPrototype(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||objectProto$4;return n===e}var nativeKeys=overArg(Object.keys,Object),objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function baseKeys(n){if(!isPrototype(n))return nativeKeys(n);var t=[];for(var e in Object(n))hasOwnProperty$2.call(n,e)&&e!="constructor"&&t.push(e);return t}function isArrayLike(n){return n!=null&&isLength(n.length)&&!isFunction$1(n)}function keys(n){return isArrayLike(n)?arrayLikeKeys(n):baseKeys(n)}function baseAssign(n,t){return n&&copyObject(t,keys(t),n)}function nativeKeysIn(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn(n){if(!isObject$2(n))return nativeKeysIn(n);var t=isPrototype(n),e=[];for(var i in n)i=="constructor"&&(t||!hasOwnProperty$1.call(n,i))||e.push(i);return e}function keysIn(n){return isArrayLike(n)?arrayLikeKeys(n,!0):baseKeysIn(n)}function baseAssignIn(n,t){return n&&copyObject(t,keysIn(t),n)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(n,t){if(t)return n.slice();var e=n.length,i=allocUnsafe?allocUnsafe(e):new n.constructor(e);return n.copy(i),i}function copyArray(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}function arrayFilter(n,t){for(var e=-1,i=n==null?0:n.length,a=0,o=[];++e<i;){var c=n[e];t(c,e,n)&&(o[a++]=c)}return o}function stubArray(){return[]}var objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(n){return n==null?[]:(n=Object(n),arrayFilter(nativeGetSymbols$1(n),function(t){return propertyIsEnumerable.call(n,t)}))}:stubArray;function copySymbols(n,t){return copyObject(n,getSymbols(n),t)}function arrayPush(n,t){for(var e=-1,i=t.length,a=n.length;++e<i;)n[a+e]=t[e];return n}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(n){for(var t=[];n;)arrayPush(t,getSymbols(n)),n=getPrototype(n);return t}:stubArray;function copySymbolsIn(n,t){return copyObject(n,getSymbolsIn(n),t)}function baseGetAllKeys(n,t,e){var i=t(n);return isArray(n)?i:arrayPush(i,e(n))}function getAllKeys(n){return baseGetAllKeys(n,keys,getSymbols)}function getAllKeysIn(n){return baseGetAllKeys(n,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag(new Map$1)!=mapTag$3||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$3||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(n){var t=baseGetTag(n),e=t==objectTag$1?n.constructor:void 0,i=e?toSource(e):"";if(i)switch(i){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return t});var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&hasOwnProperty.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(n){var t=new n.constructor(n.byteLength);return new Uint8Array$1(t).set(new Uint8Array$1(n)),t}function cloneDataView(n,t){var e=t?cloneArrayBuffer(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var reFlags=/\w*$/;function cloneRegExp(n){var t=new n.constructor(n.source,reFlags.exec(n));return t.lastIndex=n.lastIndex,t}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(n){return symbolValueOf?Object(symbolValueOf.call(n)):{}}function cloneTypedArray(n,t){var e=t?cloneArrayBuffer(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(n,t,e){var i=n.constructor;switch(t){case arrayBufferTag$1:return cloneArrayBuffer(n);case boolTag$1:case dateTag$1:return new i(+n);case dataViewTag$1:return cloneDataView(n,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(n,e);case mapTag$2:return new i;case numberTag$1:case stringTag$1:return new i(n);case regexpTag$1:return cloneRegExp(n);case setTag$2:return new i;case symbolTag$2:return cloneSymbol(n)}}var objectCreate=Object.create,baseCreate=(function(){function n(){}return function(t){if(!isObject$2(t))return{};if(objectCreate)return objectCreate(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}})();function initCloneObject(n){return typeof n.constructor=="function"&&!isPrototype(n)?baseCreate(getPrototype(n)):{}}var mapTag$1="[object Map]";function baseIsMap(n){return isObjectLike(n)&&getTag(n)==mapTag$1}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$1="[object Set]";function baseIsSet(n){return isObjectLike(n)&&getTag(n)==setTag$1}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(n,t,e,i,a,o){var c,u=t&CLONE_DEEP_FLAG$1,f=t&CLONE_FLAT_FLAG,p=t&CLONE_SYMBOLS_FLAG$2;if(c!==void 0)return c;if(!isObject$2(n))return n;var m=isArray(n);if(m){if(c=initCloneArray(n),!u)return copyArray(n,c)}else{var y=getTag(n),b=y==funcTag||y==genTag;if(isBuffer(n))return cloneBuffer(n,u);if(y==objectTag||y==argsTag||b&&!a){if(c=f||b?{}:initCloneObject(n),!u)return f?copySymbolsIn(n,baseAssignIn(c,n)):copySymbols(n,baseAssign(c,n))}else{if(!cloneableTags[y])return a?n:{};c=initCloneByTag(n,y,u)}}o||(o=new Stack);var x=o.get(n);if(x)return x;o.set(n,c),isSet(n)?n.forEach(function(S){c.add(baseClone(S,t,e,S,n,o))}):isMap(n)&&n.forEach(function(S,T){c.set(T,baseClone(S,t,e,T,n,o))});var E=p?f?getAllKeysIn:getAllKeys:f?keysIn:keys,A=m?void 0:E(n);return arrayEach(A||n,function(S,T){A&&(T=S,S=n[T]),assignValue(c,T,baseClone(S,t,e,T,n,o))}),c}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(n){return baseClone(n,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG$1)}var reactFastCompare,hasRequiredReactFastCompare;function requireReactFastCompare(){if(hasRequiredReactFastCompare)return reactFastCompare;hasRequiredReactFastCompare=1;var n=Array.isArray,t=Object.keys,e=Object.prototype.hasOwnProperty,i=typeof Element<"u";function a(o,c){if(o===c)return!0;if(o&&c&&typeof o=="object"&&typeof c=="object"){var u=n(o),f=n(c),p,m,y;if(u&&f){if(m=o.length,m!=c.length)return!1;for(p=m;p--!==0;)if(!a(o[p],c[p]))return!1;return!0}if(u!=f)return!1;var b=o instanceof Date,x=c instanceof Date;if(b!=x)return!1;if(b&&x)return o.getTime()==c.getTime();var E=o instanceof RegExp,A=c instanceof RegExp;if(E!=A)return!1;if(E&&A)return o.toString()==c.toString();var S=t(o);if(m=S.length,m!==t(c).length)return!1;for(p=m;p--!==0;)if(!e.call(c,S[p]))return!1;if(i&&o instanceof Element&&c instanceof Element)return o===c;for(p=m;p--!==0;)if(y=S[p],!(y==="_owner"&&o.$$typeof)&&!a(o[y],c[y]))return!1;return!0}return o!==o&&c!==c}return reactFastCompare=function(c,u){try{return a(c,u)}catch(f){if(f.message&&f.message.match(/stack|recursion/i)||f.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",f.name,f.message),!1;throw f}},reactFastCompare}var reactFastCompareExports=requireReactFastCompare();const isEqual=getDefaultExportFromCjs(reactFastCompareExports);var CLONE_SYMBOLS_FLAG=4;function clone$1(n){return baseClone(n,CLONE_SYMBOLS_FLAG)}function arrayMap(n,t){for(var e=-1,i=n==null?0:n.length,a=Array(i);++e<i;)a[e]=t(n[e],e,n);return a}var symbolTag="[object Symbol]";function isSymbol(n){return typeof n=="symbol"||isObjectLike(n)&&baseGetTag(n)==symbolTag}var FUNC_ERROR_TEXT="Expected a function";function memoize(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);var e=function(){var i=arguments,a=t?t.apply(this,i):i[0],o=e.cache;if(o.has(a))return o.get(a);var c=n.apply(this,i);return e.cache=o.set(a,c)||o,c};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(n){var t=memoize(n,function(i){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),i}),e=t.cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(rePropName,function(e,i,a,o){t.push(a?o.replace(reEscapeChar,"$1"):i||e)}),t});function toKey(n){if(typeof n=="string"||isSymbol(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}var symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString$1=symbolProto?symbolProto.toString:void 0;function baseToString(n){if(typeof n=="string")return n;if(isArray(n))return arrayMap(n,baseToString)+"";if(isSymbol(n))return symbolToString$1?symbolToString$1.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function toString$1(n){return n==null?"":baseToString(n)}function toPath(n){return isArray(n)?arrayMap(n,toKey):isSymbol(n)?[n]:copyArray(stringToPath(toString$1(n)))}var reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,b=n?Symbol.for("react.suspense_list"):60120,x=n?Symbol.for("react.memo"):60115,E=n?Symbol.for("react.lazy"):60116,A=n?Symbol.for("react.block"):60121,S=n?Symbol.for("react.fundamental"):60117,T=n?Symbol.for("react.responder"):60118,D=n?Symbol.for("react.scope"):60119;function R(k){if(typeof k=="object"&&k!==null){var P=k.$$typeof;switch(P){case t:switch(k=k.type,k){case f:case p:case i:case o:case a:case y:return k;default:switch(k=k&&k.$$typeof,k){case u:case m:case E:case x:case c:return k;default:return P}}case e:return P}}}function F(k){return R(k)===p}return reactIs_production_min.AsyncMode=f,reactIs_production_min.ConcurrentMode=p,reactIs_production_min.ContextConsumer=u,reactIs_production_min.ContextProvider=c,reactIs_production_min.Element=t,reactIs_production_min.ForwardRef=m,reactIs_production_min.Fragment=i,reactIs_production_min.Lazy=E,reactIs_production_min.Memo=x,reactIs_production_min.Portal=e,reactIs_production_min.Profiler=o,reactIs_production_min.StrictMode=a,reactIs_production_min.Suspense=y,reactIs_production_min.isAsyncMode=function(k){return F(k)||R(k)===f},reactIs_production_min.isConcurrentMode=F,reactIs_production_min.isContextConsumer=function(k){return R(k)===u},reactIs_production_min.isContextProvider=function(k){return R(k)===c},reactIs_production_min.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},reactIs_production_min.isForwardRef=function(k){return R(k)===m},reactIs_production_min.isFragment=function(k){return R(k)===i},reactIs_production_min.isLazy=function(k){return R(k)===E},reactIs_production_min.isMemo=function(k){return R(k)===x},reactIs_production_min.isPortal=function(k){return R(k)===e},reactIs_production_min.isProfiler=function(k){return R(k)===o},reactIs_production_min.isStrictMode=function(k){return R(k)===a},reactIs_production_min.isSuspense=function(k){return R(k)===y},reactIs_production_min.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===i||k===p||k===o||k===a||k===y||k===b||typeof k=="object"&&k!==null&&(k.$$typeof===E||k.$$typeof===x||k.$$typeof===c||k.$$typeof===u||k.$$typeof===m||k.$$typeof===S||k.$$typeof===T||k.$$typeof===D||k.$$typeof===A)},reactIs_production_min.typeOf=R,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var n=requireReactIs(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=i,o[n.Memo]=a;function c(E){return n.isMemo(E)?a:o[E.$$typeof]||t}var u=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,b=Object.prototype;function x(E,A,S){if(typeof A!="string"){if(b){var T=y(A);T&&T!==b&&x(E,T,S)}var D=f(A);p&&(D=D.concat(p(A)));for(var R=c(E),F=c(A),k=0;k<D.length;++k){var P=D[k];if(!e[P]&&!(S&&S[P])&&!(F&&F[P])&&!(R&&R[P])){var L=m(A,P);try{u(E,P,L)}catch{}}}}return E}return hoistNonReactStatics_cjs=x,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();function _extends$1(){return _extends$1=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(n,t){if(n==null)return{};var e={},i=Object.keys(n),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(e[a]=n[a]);return e}var FormikContext=reactExports.createContext(void 0);FormikContext.displayName="FormikContext";var FormikProvider=FormikContext.Provider;FormikContext.Consumer;function useFormikContext(){var n=reactExports.useContext(FormikContext);return n}var isFunction=function(t){return typeof t=="function"},isObject$1=function(t){return t!==null&&typeof t=="object"},isInteger=function(t){return String(Math.floor(Number(t)))===t},isString$1=function(t){return Object.prototype.toString.call(t)==="[object String]"},isEmptyChildren=function(t){return reactExports.Children.count(t)===0},isPromise=function(t){return isObject$1(t)&&isFunction(t.then)};function getIn$1(n,t,e,i){i===void 0&&(i=0);for(var a=toPath(t);n&&i<a.length;)n=n[a[i++]];return i!==a.length&&!n||n===void 0?e:n}function setIn(n,t,e){for(var i=clone$1(n),a=i,o=0,c=toPath(t);o<c.length-1;o++){var u=c[o],f=getIn$1(n,c.slice(0,o+1));if(f&&(isObject$1(f)||Array.isArray(f)))a=a[u]=clone$1(f);else{var p=c[o+1];a=a[u]=isInteger(p)&&Number(p)>=0?[]:{}}}return(o===0?n:a)[c[o]]===e?n:(e===void 0?delete a[c[o]]:a[c[o]]=e,o===0&&e===void 0&&delete i[c[o]],i)}function setNestedObjectValues(n,t,e,i){e===void 0&&(e=new WeakMap),i===void 0&&(i={});for(var a=0,o=Object.keys(n);a<o.length;a++){var c=o[a],u=n[c];isObject$1(u)?e.get(u)||(e.set(u,!0),i[c]=Array.isArray(u)?[]:{},setNestedObjectValues(u,t,e,i[c])):i[c]=t}return i}function formikReducer(n,t){switch(t.type){case"SET_VALUES":return _extends$1({},n,{values:t.payload});case"SET_TOUCHED":return _extends$1({},n,{touched:t.payload});case"SET_ERRORS":return isEqual(n.errors,t.payload)?n:_extends$1({},n,{errors:t.payload});case"SET_STATUS":return _extends$1({},n,{status:t.payload});case"SET_ISSUBMITTING":return _extends$1({},n,{isSubmitting:t.payload});case"SET_ISVALIDATING":return _extends$1({},n,{isValidating:t.payload});case"SET_FIELD_VALUE":return _extends$1({},n,{values:setIn(n.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return _extends$1({},n,{touched:setIn(n.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return _extends$1({},n,{errors:setIn(n.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return _extends$1({},n,t.payload);case"SET_FORMIK_STATE":return t.payload(n);case"SUBMIT_ATTEMPT":return _extends$1({},n,{touched:setNestedObjectValues(n.values,!0),isSubmitting:!0,submitCount:n.submitCount+1});case"SUBMIT_FAILURE":return _extends$1({},n,{isSubmitting:!1});case"SUBMIT_SUCCESS":return _extends$1({},n,{isSubmitting:!1});default:return n}}var emptyErrors={},emptyTouched={};function useFormik(n){var t=n.validateOnChange,e=t===void 0?!0:t,i=n.validateOnBlur,a=i===void 0?!0:i,o=n.validateOnMount,c=o===void 0?!1:o,u=n.isInitialValid,f=n.enableReinitialize,p=f===void 0?!1:f,m=n.onSubmit,y=_objectWithoutPropertiesLoose$1(n,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),b=_extends$1({validateOnChange:e,validateOnBlur:a,validateOnMount:c,onSubmit:m},y),x=reactExports.useRef(b.initialValues),E=reactExports.useRef(b.initialErrors||emptyErrors),A=reactExports.useRef(b.initialTouched||emptyTouched),S=reactExports.useRef(b.initialStatus),T=reactExports.useRef(!1),D=reactExports.useRef({});reactExports.useEffect(function(){return T.current=!0,function(){T.current=!1}},[]);var R=reactExports.useState(0),F=R[1],k=reactExports.useRef({values:cloneDeep(b.initialValues),errors:cloneDeep(b.initialErrors)||emptyErrors,touched:cloneDeep(b.initialTouched)||emptyTouched,status:cloneDeep(b.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),P=k.current,L=reactExports.useCallback(function(it){var gt=k.current;k.current=formikReducer(gt,it),gt!==k.current&&F(function(vt){return vt+1})},[]),B=reactExports.useCallback(function(it,gt){return new Promise(function(vt,St){var Ct=b.validate(it,gt);Ct==null?vt(emptyErrors):isPromise(Ct)?Ct.then(function(kt){vt(kt||emptyErrors)},function(kt){St(kt)}):vt(Ct)})},[b.validate]),V=reactExports.useCallback(function(it,gt){var vt=b.validationSchema,St=isFunction(vt)?vt(gt):vt,Ct=gt&&St.validateAt?St.validateAt(gt,it):validateYupSchema(it,St);return new Promise(function(kt,Xt){Ct.then(function(){kt(emptyErrors)},function(ce){ce.name==="ValidationError"?kt(yupToFormErrors(ce)):Xt(ce)})})},[b.validationSchema]),z=reactExports.useCallback(function(it,gt){return new Promise(function(vt){return vt(D.current[it].validate(gt))})},[]),j=reactExports.useCallback(function(it){var gt=Object.keys(D.current).filter(function(St){return isFunction(D.current[St].validate)}),vt=gt.length>0?gt.map(function(St){return z(St,getIn$1(it,St))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(vt).then(function(St){return St.reduce(function(Ct,kt,Xt){return kt==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||kt&&(Ct=setIn(Ct,gt[Xt],kt)),Ct},{})})},[z]),J=reactExports.useCallback(function(it){return Promise.all([j(it),b.validationSchema?V(it):{},b.validate?B(it):{}]).then(function(gt){var vt=gt[0],St=gt[1],Ct=gt[2],kt=deepmerge_1.all([vt,St,Ct],{arrayMerge});return kt})},[b.validate,b.validationSchema,j,B,V]),W=useEventCallback(function(it){return it===void 0&&(it=P.values),L({type:"SET_ISVALIDATING",payload:!0}),J(it).then(function(gt){return T.current&&(L({type:"SET_ISVALIDATING",payload:!1}),L({type:"SET_ERRORS",payload:gt})),gt})});reactExports.useEffect(function(){c&&T.current===!0&&isEqual(x.current,b.initialValues)&&W(x.current)},[c,W]);var K=reactExports.useCallback(function(it){var gt=it&&it.values?it.values:x.current,vt=it&&it.errors?it.errors:E.current?E.current:b.initialErrors||{},St=it&&it.touched?it.touched:A.current?A.current:b.initialTouched||{},Ct=it&&it.status?it.status:S.current?S.current:b.initialStatus;x.current=gt,E.current=vt,A.current=St,S.current=Ct;var kt=function(){L({type:"RESET_FORM",payload:{isSubmitting:!!it&&!!it.isSubmitting,errors:vt,touched:St,status:Ct,values:gt,isValidating:!!it&&!!it.isValidating,submitCount:it&&it.submitCount&&typeof it.submitCount=="number"?it.submitCount:0}})};if(b.onReset){var Xt=b.onReset(P.values,It);isPromise(Xt)?Xt.then(kt):kt()}else kt()},[b.initialErrors,b.initialStatus,b.initialTouched,b.onReset]);reactExports.useEffect(function(){T.current===!0&&!isEqual(x.current,b.initialValues)&&p&&(x.current=b.initialValues,K(),c&&W(x.current))},[p,b.initialValues,K,c,W]),reactExports.useEffect(function(){p&&T.current===!0&&!isEqual(E.current,b.initialErrors)&&(E.current=b.initialErrors||emptyErrors,L({type:"SET_ERRORS",payload:b.initialErrors||emptyErrors}))},[p,b.initialErrors]),reactExports.useEffect(function(){p&&T.current===!0&&!isEqual(A.current,b.initialTouched)&&(A.current=b.initialTouched||emptyTouched,L({type:"SET_TOUCHED",payload:b.initialTouched||emptyTouched}))},[p,b.initialTouched]),reactExports.useEffect(function(){p&&T.current===!0&&!isEqual(S.current,b.initialStatus)&&(S.current=b.initialStatus,L({type:"SET_STATUS",payload:b.initialStatus}))},[p,b.initialStatus,b.initialTouched]);var $=useEventCallback(function(it){if(D.current[it]&&isFunction(D.current[it].validate)){var gt=getIn$1(P.values,it),vt=D.current[it].validate(gt);return isPromise(vt)?(L({type:"SET_ISVALIDATING",payload:!0}),vt.then(function(St){return St}).then(function(St){L({type:"SET_FIELD_ERROR",payload:{field:it,value:St}}),L({type:"SET_ISVALIDATING",payload:!1})})):(L({type:"SET_FIELD_ERROR",payload:{field:it,value:vt}}),Promise.resolve(vt))}else if(b.validationSchema)return L({type:"SET_ISVALIDATING",payload:!0}),V(P.values,it).then(function(St){return St}).then(function(St){L({type:"SET_FIELD_ERROR",payload:{field:it,value:getIn$1(St,it)}}),L({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),N=reactExports.useCallback(function(it,gt){var vt=gt.validate;D.current[it]={validate:vt}},[]),G=reactExports.useCallback(function(it){delete D.current[it]},[]),I=useEventCallback(function(it,gt){L({type:"SET_TOUCHED",payload:it});var vt=gt===void 0?a:gt;return vt?W(P.values):Promise.resolve()}),X=reactExports.useCallback(function(it){L({type:"SET_ERRORS",payload:it})},[]),et=useEventCallback(function(it,gt){var vt=isFunction(it)?it(P.values):it;L({type:"SET_VALUES",payload:vt});var St=gt===void 0?e:gt;return St?W(vt):Promise.resolve()}),H=reactExports.useCallback(function(it,gt){L({type:"SET_FIELD_ERROR",payload:{field:it,value:gt}})},[]),Q=useEventCallback(function(it,gt,vt){L({type:"SET_FIELD_VALUE",payload:{field:it,value:gt}});var St=vt===void 0?e:vt;return St?W(setIn(P.values,it,gt)):Promise.resolve()}),st=reactExports.useCallback(function(it,gt){var vt=gt,St=it,Ct;if(!isString$1(it)){it.persist&&it.persist();var kt=it.target?it.target:it.currentTarget,Xt=kt.type,ce=kt.name,Fe=kt.id,Li=kt.value,en=kt.checked;kt.outerHTML;var An=kt.options,Oe=kt.multiple;vt=gt||ce||Fe,St=/number|range/.test(Xt)?(Ct=parseFloat(Li),isNaN(Ct)?"":Ct):/checkbox/.test(Xt)?getValueForCheckbox(getIn$1(P.values,vt),en,Li):An&&Oe?getSelectedValues(An):Li}vt&&Q(vt,St)},[Q,P.values]),dt=useEventCallback(function(it){if(isString$1(it))return function(gt){return st(gt,it)};st(it)}),ft=useEventCallback(function(it,gt,vt){gt===void 0&&(gt=!0),L({type:"SET_FIELD_TOUCHED",payload:{field:it,value:gt}});var St=vt===void 0?a:vt;return St?W(P.values):Promise.resolve()}),bt=reactExports.useCallback(function(it,gt){it.persist&&it.persist();var vt=it.target,St=vt.name,Ct=vt.id;vt.outerHTML;var kt=gt||St||Ct;ft(kt,!0)},[ft]),mt=useEventCallback(function(it){if(isString$1(it))return function(gt){return bt(gt,it)};bt(it)}),Mt=reactExports.useCallback(function(it){isFunction(it)?L({type:"SET_FORMIK_STATE",payload:it}):L({type:"SET_FORMIK_STATE",payload:function(){return it}})},[]),Ot=reactExports.useCallback(function(it){L({type:"SET_STATUS",payload:it})},[]),wt=reactExports.useCallback(function(it){L({type:"SET_ISSUBMITTING",payload:it})},[]),$t=useEventCallback(function(){return L({type:"SUBMIT_ATTEMPT"}),W().then(function(it){var gt=it instanceof Error,vt=!gt&&Object.keys(it).length===0;if(vt){var St;try{if(St=yt(),St===void 0)return}catch(Ct){throw Ct}return Promise.resolve(St).then(function(Ct){return T.current&&L({type:"SUBMIT_SUCCESS"}),Ct}).catch(function(Ct){if(T.current)throw L({type:"SUBMIT_FAILURE"}),Ct})}else if(T.current&&(L({type:"SUBMIT_FAILURE"}),gt))throw it})}),te=useEventCallback(function(it){it&&it.preventDefault&&isFunction(it.preventDefault)&&it.preventDefault(),it&&it.stopPropagation&&isFunction(it.stopPropagation)&&it.stopPropagation(),$t().catch(function(gt){console.warn("Warning: An unhandled error was caught from submitForm()",gt)})}),It={resetForm:K,validateForm:W,validateField:$,setErrors:X,setFieldError:H,setFieldTouched:ft,setFieldValue:Q,setStatus:Ot,setSubmitting:wt,setTouched:I,setValues:et,setFormikState:Mt,submitForm:$t},yt=useEventCallback(function(){return m(P.values,It)}),Wt=useEventCallback(function(it){it&&it.preventDefault&&isFunction(it.preventDefault)&&it.preventDefault(),it&&it.stopPropagation&&isFunction(it.stopPropagation)&&it.stopPropagation(),K()}),Zt=reactExports.useCallback(function(it){return{value:getIn$1(P.values,it),error:getIn$1(P.errors,it),touched:!!getIn$1(P.touched,it),initialValue:getIn$1(x.current,it),initialTouched:!!getIn$1(A.current,it),initialError:getIn$1(E.current,it)}},[P.errors,P.touched,P.values]),Ae=reactExports.useCallback(function(it){return{setValue:function(vt,St){return Q(it,vt,St)},setTouched:function(vt,St){return ft(it,vt,St)},setError:function(vt){return H(it,vt)}}},[Q,ft,H]),be=reactExports.useCallback(function(it){var gt=isObject$1(it),vt=gt?it.name:it,St=getIn$1(P.values,vt),Ct={name:vt,value:St,onChange:dt,onBlur:mt};if(gt){var kt=it.type,Xt=it.value,ce=it.as,Fe=it.multiple;kt==="checkbox"?Xt===void 0?Ct.checked=!!St:(Ct.checked=!!(Array.isArray(St)&&~St.indexOf(Xt)),Ct.value=Xt):kt==="radio"?(Ct.checked=St===Xt,Ct.value=Xt):ce==="select"&&Fe&&(Ct.value=Ct.value||[],Ct.multiple=!0)}return Ct},[mt,dt,P.values]),xe=reactExports.useMemo(function(){return!isEqual(x.current,P.values)},[x.current,P.values]),pe=reactExports.useMemo(function(){return typeof u<"u"?xe?P.errors&&Object.keys(P.errors).length===0:u!==!1&&isFunction(u)?u(b):u:P.errors&&Object.keys(P.errors).length===0},[u,xe,P.errors,b]),_e=_extends$1({},P,{initialValues:x.current,initialErrors:E.current,initialTouched:A.current,initialStatus:S.current,handleBlur:mt,handleChange:dt,handleReset:Wt,handleSubmit:te,resetForm:K,setErrors:X,setFormikState:Mt,setFieldTouched:ft,setFieldValue:Q,setFieldError:H,setStatus:Ot,setSubmitting:wt,setTouched:I,setValues:et,submitForm:$t,validateForm:W,validateField:$,isValid:pe,dirty:xe,unregisterField:G,registerField:N,getFieldProps:be,getFieldMeta:Zt,getFieldHelpers:Ae,validateOnBlur:a,validateOnChange:e,validateOnMount:c});return _e}function Formik(n){var t=useFormik(n),e=n.component,i=n.children,a=n.render,o=n.innerRef;return reactExports.useImperativeHandle(o,function(){return t}),reactExports.createElement(FormikProvider,{value:t},e?reactExports.createElement(e,t):a?a(t):i?isFunction(i)?i(t):isEmptyChildren(i)?null:reactExports.Children.only(i):null)}function yupToFormErrors(n){var t={};if(n.inner){if(n.inner.length===0)return setIn(t,n.path,n.message);for(var a=n.inner,e=Array.isArray(a),i=0,a=e?a:a[Symbol.iterator]();;){var o;if(e){if(i>=a.length)break;o=a[i++]}else{if(i=a.next(),i.done)break;o=i.value}var c=o;getIn$1(t,c.path)||(t=setIn(t,c.path,c.message))}}return t}function validateYupSchema(n,t,e,i){e===void 0&&(e=!1);var a=prepareDataForValidation(n);return t[e?"validateSync":"validate"](a,{abortEarly:!1,context:a})}function prepareDataForValidation(n){var t=Array.isArray(n)?[]:{};for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e)){var i=String(e);Array.isArray(n[i])===!0?t[i]=n[i].map(function(a){return Array.isArray(a)===!0||isPlainObject(a)?prepareDataForValidation(a):a!==""?a:void 0}):isPlainObject(n[i])?t[i]=prepareDataForValidation(n[i]):t[i]=n[i]!==""?n[i]:void 0}return t}function arrayMerge(n,t,e){var i=n.slice();return t.forEach(function(o,c){if(typeof i[c]>"u"){var u=e.clone!==!1,f=u&&e.isMergeableObject(o);i[c]=f?deepmerge_1(Array.isArray(o)?[]:{},o,e):o}else e.isMergeableObject(o)?i[c]=deepmerge_1(n[c],o,e):n.indexOf(o)===-1&&i.push(o)}),i}function getSelectedValues(n){return Array.from(n).filter(function(t){return t.selected}).map(function(t){return t.value})}function getValueForCheckbox(n,t,e){if(typeof n=="boolean")return!!t;var i=[],a=!1,o=-1;if(Array.isArray(n))i=n,o=n.indexOf(e),a=o>=0;else if(!e||e=="true"||e=="false")return!!t;return t&&e&&!a?i.concat(e):a?i.slice(0,o).concat(i.slice(o+1)):i}var useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useEventCallback(n){var t=reactExports.useRef(n);return useIsomorphicLayoutEffect(function(){t.current=n}),reactExports.useCallback(function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t.current.apply(void 0,i)},[])}function Field(n){var t=n.validate,e=n.name,i=n.render,a=n.children,o=n.as,c=n.component,u=n.className,f=_objectWithoutPropertiesLoose$1(n,["validate","name","render","children","as","component","className"]),p=useFormikContext(),m=_objectWithoutPropertiesLoose$1(p,["validate","validationSchema"]),y=m.registerField,b=m.unregisterField;reactExports.useEffect(function(){return y(e,{validate:t}),function(){b(e)}},[y,b,e,t]);var x=m.getFieldProps(_extends$1({name:e},f)),E=m.getFieldMeta(e),A={field:x,form:m};if(i)return i(_extends$1({},A,{meta:E}));if(isFunction(a))return a(_extends$1({},A,{meta:E}));if(c){if(typeof c=="string"){var S=f.innerRef,T=_objectWithoutPropertiesLoose$1(f,["innerRef"]);return reactExports.createElement(c,_extends$1({ref:S},x,T,{className:u}),a)}return reactExports.createElement(c,_extends$1({field:x,form:m},f,{className:u}),a)}var D=o||"input";if(typeof D=="string"){var R=f.innerRef,F=_objectWithoutPropertiesLoose$1(f,["innerRef"]);return reactExports.createElement(D,_extends$1({ref:R},x,F,{className:u}),a)}return reactExports.createElement(D,_extends$1({},x,f,{className:u}),a)}var Form=reactExports.forwardRef(function(n,t){var e=n.action,i=_objectWithoutPropertiesLoose$1(n,["action"]),a=e??"#",o=useFormikContext(),c=o.handleReset,u=o.handleSubmit;return reactExports.createElement("form",_extends$1({onSubmit:u,ref:t,onReset:c,action:a},i))});Form.displayName="Form";var propertyExpr,hasRequiredPropertyExpr;function requirePropertyExpr(){if(hasRequiredPropertyExpr)return propertyExpr;hasRequiredPropertyExpr=1;function n(T){this._maxSize=T,this.clear()}n.prototype.clear=function(){this._size=0,this._values=Object.create(null)},n.prototype.get=function(T){return this._values[T]},n.prototype.set=function(T,D){return this._size>=this._maxSize&&this.clear(),T in this._values||this._size++,this._values[T]=D};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,e=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,c=512,u=new n(c),f=new n(c),p=new n(c);propertyExpr={Cache:n,split:y,normalizePath:m,setter:function(T){var D=m(T);return f.get(T)||f.set(T,function(F,k){for(var P=0,L=D.length,B=F;P<L-1;){var V=D[P];if(V==="__proto__"||V==="constructor"||V==="prototype")return F;B=B[D[P++]]}B[D[P]]=k})},getter:function(T,D){var R=m(T);return p.get(T)||p.set(T,function(k){for(var P=0,L=R.length;P<L;)if(k!=null||!D)k=k[R[P++]];else return;return k})},join:function(T){return T.reduce(function(D,R){return D+(x(R)||e.test(R)?"["+R+"]":(D?".":"")+R)},"")},forEach:function(T,D,R){b(Array.isArray(T)?T:y(T),D,R)}};function m(T){return u.get(T)||u.set(T,y(T).map(function(D){return D.replace(o,"$2")}))}function y(T){return T.match(t)||[""]}function b(T,D,R){var F=T.length,k,P,L,B;for(P=0;P<F;P++)k=T[P],k&&(S(k)&&(k='"'+k+'"'),B=x(k),L=!B&&/^\d+$/.test(k),D.call(R,k,B,L,P,T))}function x(T){return typeof T=="string"&&T&&["'",'"'].indexOf(T.charAt(0))!==-1}function E(T){return T.match(i)&&!T.match(e)}function A(T){return a.test(T)}function S(T){return!x(T)&&(E(T)||A(T))}return propertyExpr}var propertyExprExports=requirePropertyExpr(),tinyCase,hasRequiredTinyCase;function requireTinyCase(){if(hasRequiredTinyCase)return tinyCase;hasRequiredTinyCase=1;const n=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=m=>m.match(n)||[],e=m=>m[0].toUpperCase()+m.slice(1),i=(m,y)=>t(m).join(y).toLowerCase(),a=m=>t(m).reduce((y,b)=>`${y}${y?b[0].toUpperCase()+b.slice(1).toLowerCase():b.toLowerCase()}`,"");return tinyCase={words:t,upperFirst:e,camelCase:a,pascalCase:m=>e(a(m)),snakeCase:m=>i(m,"_"),kebabCase:m=>i(m,"-"),sentenceCase:m=>e(i(m," ")),titleCase:m=>t(m).map(e).join(" ")},tinyCase}var tinyCaseExports=requireTinyCase(),toposort$1={exports:{}},hasRequiredToposort;function requireToposort(){if(hasRequiredToposort)return toposort$1.exports;hasRequiredToposort=1,toposort$1.exports=function(a){return n(t(a),a)},toposort$1.exports.array=n;function n(a,o){var c=a.length,u=new Array(c),f={},p=c,m=e(o),y=i(a);for(o.forEach(function(x){if(!y.has(x[0])||!y.has(x[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});p--;)f[p]||b(a[p],p,new Set);return u;function b(x,E,A){if(A.has(x)){var S;try{S=", node was:"+JSON.stringify(x)}catch{S=""}throw new Error("Cyclic dependency"+S)}if(!y.has(x))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(x));if(!f[E]){f[E]=!0;var T=m.get(x)||new Set;if(T=Array.from(T),E=T.length){A.add(x);do{var D=T[--E];b(D,y.get(D),A)}while(E);A.delete(x)}u[--c]=x}}}function t(a){for(var o=new Set,c=0,u=a.length;c<u;c++){var f=a[c];o.add(f[0]),o.add(f[1])}return Array.from(o)}function e(a){for(var o=new Map,c=0,u=a.length;c<u;c++){var f=a[c];o.has(f[0])||o.set(f[0],new Set),o.has(f[1])||o.set(f[1],new Set),o.get(f[0]).add(f[1])}return o}function i(a){for(var o=new Map,c=0,u=a.length;c<u;c++)o.set(a[c],c);return o}return toposort$1.exports}var toposortExports=requireToposort();const toposort=getDefaultExportFromCjs(toposortExports),toString=Object.prototype.toString,errorToString=Error.prototype.toString,regExpToString=RegExp.prototype.toString,symbolToString=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",SYMBOL_REGEXP=/^Symbol\((.*)\)(.*)$/;function printNumber(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function printSimpleValue(n,t=!1){if(n==null||n===!0||n===!1)return""+n;const e=typeof n;if(e==="number")return printNumber(n);if(e==="string")return t?`"${n}"`:n;if(e==="function")return"[Function "+(n.name||"anonymous")+"]";if(e==="symbol")return symbolToString.call(n).replace(SYMBOL_REGEXP,"Symbol($1)");const i=toString.call(n).slice(8,-1);return i==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):i==="Error"||n instanceof Error?"["+errorToString.call(n)+"]":i==="RegExp"?regExpToString.call(n):null}function printValue(n,t){let e=printSimpleValue(n,t);return e!==null?e:JSON.stringify(n,function(i,a){let o=printSimpleValue(this[i],t);return o!==null?o:a},2)}function toArray(n){return n==null?[]:[].concat(n)}let _Symbol$toStringTag,_Symbol$hasInstance,_Symbol$toStringTag2,strReg=/\$\{\s*(\w+)\s*\}/g;_Symbol$toStringTag=Symbol.toStringTag;class ValidationErrorNoStack{constructor(t,e,i,a){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[_Symbol$toStringTag]="Error",this.name="ValidationError",this.value=e,this.path=i,this.type=a,this.errors=[],this.inner=[],toArray(t).forEach(o=>{if(ValidationError.isError(o)){this.errors.push(...o.errors);const c=o.inner.length?o.inner:[o];this.inner.push(...c)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}_Symbol$hasInstance=Symbol.hasInstance;_Symbol$toStringTag2=Symbol.toStringTag;class ValidationError extends Error{static formatError(t,e){const i=e.label||e.path||"this";return e=Object.assign({},e,{path:i,originalPath:e.path}),typeof t=="string"?t.replace(strReg,(a,o)=>printValue(e[o])):typeof t=="function"?t(e):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,e,i,a,o){const c=new ValidationErrorNoStack(t,e,i,a);if(o)return c;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[_Symbol$toStringTag2]="Error",this.name=c.name,this.message=c.message,this.type=c.type,this.value=c.value,this.path=c.path,this.errors=c.errors,this.inner=c.inner,Error.captureStackTrace&&Error.captureStackTrace(this,ValidationError)}static[_Symbol$hasInstance](t){return ValidationErrorNoStack[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let mixed={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:t,value:e,originalValue:i})=>{const a=i!=null&&i!==e?` (cast from the value \`${printValue(i,!0)}\`).`:".";return t!=="mixed"?`${n} must be a \`${t}\` type, but the final value was: \`${printValue(e,!0)}\``+a:`${n} must match the configured type. The validated value was: \`${printValue(e,!0)}\``+a}},string={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},number={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},date={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},boolean={isValue:"${path} field must be ${value}"},object={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},array={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},tuple={notType:n=>{const{path:t,value:e,spec:i}=n,a=i.types.length;if(Array.isArray(e)){if(e.length<a)return`${t} tuple value has too few items, expected a length of ${a} but got ${e.length} for value: \`${printValue(e,!0)}\``;if(e.length>a)return`${t} tuple value has too many items, expected a length of ${a} but got ${e.length} for value: \`${printValue(e,!0)}\``}return ValidationError.formatError(mixed.notType,n)}};Object.assign(Object.create(null),{mixed,string,number,date,object,array,boolean,tuple});const isSchema=n=>n&&n.__isYupSchema__;class Condition{static fromOptions(t,e){if(!e.then&&!e.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:a,otherwise:o}=e,c=typeof i=="function"?i:(...u)=>u.every(f=>f===i);return new Condition(t,(u,f)=>{var p;let m=c(...u)?a:o;return(p=m?.(f))!=null?p:f})}constructor(t,e){this.fn=void 0,this.refs=t,this.refs=t,this.fn=e}resolve(t,e){let i=this.refs.map(o=>o.getValue(e?.value,e?.parent,e?.context)),a=this.fn(i,t,e);if(a===void 0||a===t)return t;if(!isSchema(a))throw new TypeError("conditions must return a schema object");return a.resolve(e)}}const prefixes={context:"$",value:"."};class Reference{constructor(t,e={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===prefixes.context,this.isValue=this.key[0]===prefixes.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?prefixes.context:this.isValue?prefixes.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&propertyExprExports.getter(this.path,!0),this.map=e.map}getValue(t,e,i){let a=this.isContext?i:this.isValue?t:e;return this.getter&&(a=this.getter(a||{})),this.map&&(a=this.map(a)),a}cast(t,e){return this.getValue(t,e?.parent,e?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Reference.prototype.__isYupRef=!0;const isAbsent=n=>n==null;function createValidation(n){function t({value:e,path:i="",options:a,originalValue:o,schema:c},u,f){const{name:p,test:m,params:y,message:b,skipAbsent:x}=n;let{parent:E,context:A,abortEarly:S=c.spec.abortEarly,disableStackTrace:T=c.spec.disableStackTrace}=a;const D={value:e,parent:E,context:A};function R(j={}){const J=resolveParams(Object.assign({value:e,originalValue:o,label:c.spec.label,path:j.path||i,spec:c.spec,disableStackTrace:j.disableStackTrace||T},y,j.params),D),W=new ValidationError(ValidationError.formatError(j.message||b,J),e,J.path,j.type||p,J.disableStackTrace);return W.params=J,W}const F=S?u:f;let k={path:i,parent:E,type:p,from:a.from,createError:R,resolve(j){return resolveMaybeRef(j,D)},options:a,originalValue:o,schema:c};const P=j=>{ValidationError.isError(j)?F(j):j?f(null):F(R())},L=j=>{ValidationError.isError(j)?F(j):u(j)};if(x&&isAbsent(e))return P(!0);let V;try{var z;if(V=m.call(k,e,k),typeof((z=V)==null?void 0:z.then)=="function"){if(a.sync)throw new Error(`Validation test of type: "${k.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(V).then(P,L)}}catch(j){L(j);return}P(V)}return t.OPTIONS=n,t}function resolveParams(n,t){if(!n)return n;for(const e of Object.keys(n))n[e]=resolveMaybeRef(n[e],t);return n}function resolveMaybeRef(n,t){return Reference.isRef(n)?n.getValue(t.value,t.parent,t.context):n}function getIn(n,t,e,i=e){let a,o,c;return t?(propertyExprExports.forEach(t,(u,f,p)=>{let m=f?u.slice(1,u.length-1):u;n=n.resolve({context:i,parent:a,value:e});let y=n.type==="tuple",b=p?parseInt(m,10):0;if(n.innerType||y){if(y&&!p)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${c}" must contain an index to the tuple element, e.g. "${c}[0]"`);if(e&&b>=e.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${u}, in the path: ${t}. because there is no value at that index. `);a=e,e=e&&e[b],n=y?n.spec.types[b]:n.innerType}if(!p){if(!n.fields||!n.fields[m])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${c} which is a type: "${n.type}")`);a=e,e=e&&e[m],n=n.fields[m]}o=m,c=f?"["+u+"]":"."+u}),{schema:n,parent:a,parentPath:o}):{parent:a,parentPath:t,schema:n}}class ReferenceSet extends Set{describe(){const t=[];for(const e of this.values())t.push(Reference.isRef(e)?e.describe():e);return t}resolveAll(t){let e=[];for(const i of this.values())e.push(t(i));return e}clone(){return new ReferenceSet(this.values())}merge(t,e){const i=this.clone();return t.forEach(a=>i.add(a)),e.forEach(a=>i.delete(a)),i}}function clone(n,t=new Map){if(isSchema(n)||!n||typeof n!="object")return n;if(t.has(n))return t.get(n);let e;if(n instanceof Date)e=new Date(n.getTime()),t.set(n,e);else if(n instanceof RegExp)e=new RegExp(n),t.set(n,e);else if(Array.isArray(n)){e=new Array(n.length),t.set(n,e);for(let i=0;i<n.length;i++)e[i]=clone(n[i],t)}else if(n instanceof Map){e=new Map,t.set(n,e);for(const[i,a]of n.entries())e.set(i,clone(a,t))}else if(n instanceof Set){e=new Set,t.set(n,e);for(const i of n)e.add(clone(i,t))}else if(n instanceof Object){e={},t.set(n,e);for(const[i,a]of Object.entries(n))e[i]=clone(a,t)}else throw Error(`Unable to clone ${n}`);return e}function createStandardPath(n){if(!(n!=null&&n.length))return;const t=[];let e="",i=!1,a=!1;for(let o=0;o<n.length;o++){const c=n[o];if(c==="["&&!a){e&&(t.push(...e.split(".").filter(Boolean)),e=""),i=!0;continue}if(c==="]"&&!a){e&&(/^\d+$/.test(e)?t.push(e):t.push(e.replace(/^"|"$/g,"")),e=""),i=!1;continue}if(c==='"'){a=!a;continue}if(c==="."&&!i&&!a){e&&(t.push(e),e="");continue}e+=c}return e&&t.push(...e.split(".").filter(Boolean)),t}function createStandardIssues(n,t){const e=t?`${t}.${n.path}`:n.path;return n.errors.map(i=>({message:i,path:createStandardPath(e)}))}function issuesFromValidationError(n,t){var e;if(!((e=n.inner)!=null&&e.length)&&n.errors.length)return createStandardIssues(n,t);const i=t?`${t}.${n.path}`:n.path;return n.inner.flatMap(a=>issuesFromValidationError(a,i))}class Schema{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new ReferenceSet,this._blacklist=new ReferenceSet,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(mixed.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t?.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const e=Object.create(Object.getPrototypeOf(this));return e.type=this.type,e._typeCheck=this._typeCheck,e._whitelist=this._whitelist.clone(),e._blacklist=this._blacklist.clone(),e.internalTests=Object.assign({},this.internalTests),e.exclusiveTests=Object.assign({},this.exclusiveTests),e.deps=[...this.deps],e.conditions=[...this.conditions],e.tests=[...this.tests],e.transforms=[...this.transforms],e.spec=clone(Object.assign({},this.spec,t)),e}label(t){let e=this.clone();return e.spec.label=t,e}meta(...t){if(t.length===0)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},t[0]),e}withMutation(t){let e=this._mutate;this._mutate=!0;let i=t(this);return this._mutate=e,i}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let e=this,i=t.clone();const a=Object.assign({},e.spec,i.spec);return i.spec=a,i.internalTests=Object.assign({},e.internalTests,i.internalTests),i._whitelist=e._whitelist.merge(t._whitelist,t._blacklist),i._blacklist=e._blacklist.merge(t._blacklist,t._whitelist),i.tests=e.tests,i.exclusiveTests=e.exclusiveTests,i.withMutation(o=>{t.tests.forEach(c=>{o.test(c.OPTIONS)})}),i.transforms=[...e.transforms,...i.transforms],i}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let e=this;if(e.conditions.length){let i=e.conditions;e=e.clone(),e.conditions=[],e=i.reduce((a,o)=>o.resolve(a,t),e),e=e.resolve(t)}return e}resolveOptions(t){var e,i,a,o;return Object.assign({},t,{from:t.from||[],strict:(e=t.strict)!=null?e:this.spec.strict,abortEarly:(i=t.abortEarly)!=null?i:this.spec.abortEarly,recursive:(a=t.recursive)!=null?a:this.spec.recursive,disableStackTrace:(o=t.disableStackTrace)!=null?o:this.spec.disableStackTrace})}cast(t,e={}){let i=this.resolve(Object.assign({},e,{value:t})),a=e.assert==="ignore-optionality",o=i._cast(t,e);if(e.assert!==!1&&!i.isType(o)){if(a&&isAbsent(o))return o;let c=printValue(t),u=printValue(o);throw new TypeError(`The value of ${e.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${c} 
`+(u!==c?`result of cast: ${u}`:""))}return o}_cast(t,e){let i=t===void 0?t:this.transforms.reduce((a,o)=>o.call(this,a,t,this,e),t);return i===void 0&&(i=this.getDefault(e)),i}_validate(t,e={},i,a){let{path:o,originalValue:c=t,strict:u=this.spec.strict}=e,f=t;u||(f=this._cast(f,Object.assign({assert:!1},e)));let p=[];for(let m of Object.values(this.internalTests))m&&p.push(m);this.runTests({path:o,value:f,originalValue:c,options:e,tests:p},i,m=>{if(m.length)return a(m,f);this.runTests({path:o,value:f,originalValue:c,options:e,tests:this.tests},i,a)})}runTests(t,e,i){let a=!1,{tests:o,value:c,originalValue:u,path:f,options:p}=t,m=A=>{a||(a=!0,e(A,c))},y=A=>{a||(a=!0,i(A,c))},b=o.length,x=[];if(!b)return y([]);let E={value:c,originalValue:u,path:f,options:p,schema:this};for(let A=0;A<o.length;A++){const S=o[A];S(E,m,function(D){D&&(Array.isArray(D)?x.push(...D):x.push(D)),--b<=0&&y(x)})}}asNestedTest({key:t,index:e,parent:i,parentPath:a,originalParent:o,options:c}){const u=t??e;if(u==null)throw TypeError("Must include `key` or `index` for nested validations");const f=typeof u=="number";let p=i[u];const m=Object.assign({},c,{strict:!0,parent:i,value:p,originalValue:o[u],key:void 0,[f?"index":"key"]:u,path:f||u.includes(".")?`${a||""}[${f?u:`"${u}"`}]`:(a?`${a}.`:"")+t});return(y,b,x)=>this.resolve(m)._validate(p,m,b,x)}validate(t,e){var i;let a=this.resolve(Object.assign({},e,{value:t})),o=(i=e?.disableStackTrace)!=null?i:a.spec.disableStackTrace;return new Promise((c,u)=>a._validate(t,e,(f,p)=>{ValidationError.isError(f)&&(f.value=p),u(f)},(f,p)=>{f.length?u(new ValidationError(f,p,void 0,void 0,o)):c(p)}))}validateSync(t,e){var i;let a=this.resolve(Object.assign({},e,{value:t})),o,c=(i=e?.disableStackTrace)!=null?i:a.spec.disableStackTrace;return a._validate(t,Object.assign({},e,{sync:!0}),(u,f)=>{throw ValidationError.isError(u)&&(u.value=f),u},(u,f)=>{if(u.length)throw new ValidationError(u,t,void 0,void 0,c);o=f}),o}isValid(t,e){return this.validate(t,e).then(()=>!0,i=>{if(ValidationError.isError(i))return!1;throw i})}isValidSync(t,e){try{return this.validateSync(t,e),!0}catch(i){if(ValidationError.isError(i))return!1;throw i}}_getDefault(t){let e=this.spec.default;return e==null?e:typeof e=="function"?e.call(this,t):clone(e)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,e){const i=this.clone({nullable:t});return i.internalTests.nullable=createValidation({message:e,name:"nullable",test(a){return a===null?this.schema.spec.nullable:!0}}),i}optionality(t,e){const i=this.clone({optional:t});return i.internalTests.optionality=createValidation({message:e,name:"optionality",test(a){return a===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(t=mixed.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=mixed.notNull){return this.nullability(!1,t)}required(t=mixed.required){return this.clone().withMutation(e=>e.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let e=this.clone();return e.transforms.push(t),e}test(...t){let e;if(t.length===1?typeof t[0]=="function"?e={test:t[0]}:e=t[0]:t.length===2?e={name:t[0],test:t[1]}:e={name:t[0],message:t[1],test:t[2]},e.message===void 0&&(e.message=mixed.default),typeof e.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),a=createValidation(e),o=e.exclusive||e.name&&i.exclusiveTests[e.name]===!0;if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(i.exclusiveTests[e.name]=!!e.exclusive),i.tests=i.tests.filter(c=>!(c.OPTIONS.name===e.name&&(o||c.OPTIONS.test===a.OPTIONS.test))),i.tests.push(a),i}when(t,e){!Array.isArray(t)&&typeof t!="string"&&(e=t,t=".");let i=this.clone(),a=toArray(t).map(o=>new Reference(o));return a.forEach(o=>{o.isSibling&&i.deps.push(o.key)}),i.conditions.push(typeof e=="function"?new Condition(a,e):Condition.fromOptions(a,e)),i}typeError(t){let e=this.clone();return e.internalTests.typeError=createValidation({message:t,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),e}oneOf(t,e=mixed.oneOf){let i=this.clone();return t.forEach(a=>{i._whitelist.add(a),i._blacklist.delete(a)}),i.internalTests.whiteList=createValidation({message:e,name:"oneOf",skipAbsent:!0,test(a){let o=this.schema._whitelist,c=o.resolveAll(this.resolve);return c.includes(a)?!0:this.createError({params:{values:Array.from(o).join(", "),resolved:c}})}}),i}notOneOf(t,e=mixed.notOneOf){let i=this.clone();return t.forEach(a=>{i._blacklist.add(a),i._whitelist.delete(a)}),i.internalTests.blacklist=createValidation({message:e,name:"notOneOf",test(a){let o=this.schema._blacklist,c=o.resolveAll(this.resolve);return c.includes(a)?this.createError({params:{values:Array.from(o).join(", "),resolved:c}}):!0}}),i}strip(t=!0){let e=this.clone();return e.spec.strip=t,e}describe(t){const e=(t?this.resolve(t):this).clone(),{label:i,meta:a,optional:o,nullable:c}=e.spec;return{meta:a,label:i,optional:o,nullable:c,default:e.getDefault(t),type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.filter((f,p,m)=>m.findIndex(y=>y.OPTIONS.name===f.OPTIONS.name)===p).map(f=>{const p=f.OPTIONS.params&&t?resolveParams(Object.assign({},f.OPTIONS.params),t):f.OPTIONS.params;return{name:f.OPTIONS.name,params:p}})}}get"~standard"(){const t=this;return{version:1,vendor:"yup",async validate(i){try{return{value:await t.validate(i,{abortEarly:!1})}}catch(a){if(a instanceof ValidationError)return{issues:issuesFromValidationError(a)};throw a}}}}}Schema.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Schema.prototype[`${n}At`]=function(t,e,i={}){const{parent:a,parentPath:o,schema:c}=getIn(this,t,e,i.context);return c[n](a&&a[o],Object.assign({},i,{parent:a,path:t}))};for(const n of["equals","is"])Schema.prototype[n]=Schema.prototype.oneOf;for(const n of["not","nope"])Schema.prototype[n]=Schema.prototype.notOneOf;const isoReg=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function parseIsoDate(n){const t=parseDateStruct(n);if(!t)return Date.parse?Date.parse(n):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let e=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(e=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(e=0-e)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+e,t.second,t.millisecond)}function parseDateStruct(n){var t,e;const i=isoReg.exec(n);return i?{year:toNumber(i[1]),month:toNumber(i[2],1)-1,day:toNumber(i[3],1),hour:toNumber(i[4]),minute:toNumber(i[5]),second:toNumber(i[6]),millisecond:i[7]?toNumber(i[7].substring(0,3)):0,precision:(t=(e=i[7])==null?void 0:e.length)!=null?t:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:toNumber(i[10]),minuteOffset:toNumber(i[11])}:null}function toNumber(n,t=0){return Number(n)||t}let rEmail=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rUrl=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,rUUID=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,yearMonthDay="^\\d{4}-\\d{2}-\\d{2}",hourMinuteSecond="\\d{2}:\\d{2}:\\d{2}",zOrOffset="(([+-]\\d{2}(:?\\d{2})?)|Z)",rIsoDateTime=new RegExp(`${yearMonthDay}T${hourMinuteSecond}(\\.\\d+)?${zOrOffset}$`),isTrimmed=n=>isAbsent(n)||n===n.trim(),objStringTag={}.toString();function create$6(){return new StringSchema}class StringSchema extends Schema{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,e)=>{if(!this.spec.coerce||this.isType(t)||Array.isArray(t))return t;const i=t!=null&&t.toString?t.toString():t;return i===objStringTag?t:i})})}required(t){return super.required(t).withMutation(e=>e.test({message:t||mixed.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(e=>e.OPTIONS.name!=="required"),t))}length(t,e=string.length){return this.test({message:e,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(i){return i.length===this.resolve(t)}})}min(t,e=string.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i.length>=this.resolve(t)}})}max(t,e=string.max){return this.test({name:"max",exclusive:!0,message:e,params:{max:t},skipAbsent:!0,test(i){return i.length<=this.resolve(t)}})}matches(t,e){let i=!1,a,o;return e&&(typeof e=="object"?{excludeEmptyString:i=!1,message:a,name:o}=e:a=e),this.test({name:o||"matches",message:a||string.matches,params:{regex:t},skipAbsent:!0,test:c=>c===""&&i||c.search(t)!==-1})}email(t=string.email){return this.matches(rEmail,{name:"email",message:t,excludeEmptyString:!0})}url(t=string.url){return this.matches(rUrl,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=string.uuid){return this.matches(rUUID,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let e="",i,a;return t&&(typeof t=="object"?{message:e="",allowOffset:i=!1,precision:a=void 0}=t:e=t),this.matches(rIsoDateTime,{name:"datetime",message:e||string.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:e||string.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:o=>{if(!o||i)return!0;const c=parseDateStruct(o);return c?!!c.z:!1}}).test({name:"datetime_precision",message:e||string.datetime_precision,params:{precision:a},skipAbsent:!0,test:o=>{if(!o||a==null)return!0;const c=parseDateStruct(o);return c?c.precision===a:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=string.trim){return this.transform(e=>e!=null?e.trim():e).test({message:t,name:"trim",test:isTrimmed})}lowercase(t=string.lowercase){return this.transform(e=>isAbsent(e)?e:e.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>isAbsent(e)||e===e.toLowerCase()})}uppercase(t=string.uppercase){return this.transform(e=>isAbsent(e)?e:e.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>isAbsent(e)||e===e.toUpperCase()})}}create$6.prototype=StringSchema.prototype;let isNaN$1=n=>n!=+n;function create$5(){return new NumberSchema}class NumberSchema extends Schema{constructor(){super({type:"number",check(t){return t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&!isNaN$1(t)}}),this.withMutation(()=>{this.transform((t,e)=>{if(!this.spec.coerce)return t;let i=t;if(typeof i=="string"){if(i=i.replace(/\s/g,""),i==="")return NaN;i=+i}return this.isType(i)||i===null?i:parseFloat(i)})})}min(t,e=number.min){return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i>=this.resolve(t)}})}max(t,e=number.max){return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(i){return i<=this.resolve(t)}})}lessThan(t,e=number.lessThan){return this.test({message:e,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(i){return i<this.resolve(t)}})}moreThan(t,e=number.moreThan){return this.test({message:e,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(i){return i>this.resolve(t)}})}positive(t=number.positive){return this.moreThan(0,t)}negative(t=number.negative){return this.lessThan(0,t)}integer(t=number.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(t=>isAbsent(t)?t:t|0)}round(t){var e;let i=["ceil","floor","round","trunc"];if(t=((e=t)==null?void 0:e.toLowerCase())||"round",t==="trunc")return this.truncate();if(i.indexOf(t.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+i.join(", "));return this.transform(a=>isAbsent(a)?a:Math[t](a))}}create$5.prototype=NumberSchema.prototype;let invalidDate=new Date(""),isDate=n=>Object.prototype.toString.call(n)==="[object Date]";class DateSchema extends Schema{constructor(){super({type:"date",check(t){return isDate(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,e)=>!this.spec.coerce||this.isType(t)||t===null?t:(t=parseIsoDate(t),isNaN(t)?DateSchema.INVALID_DATE:new Date(t)))})}prepareParam(t,e){let i;if(Reference.isRef(t))i=t;else{let a=this.cast(t);if(!this._typeCheck(a))throw new TypeError(`\`${e}\` must be a Date or a value that can be \`cast()\` to a Date`);i=a}return i}min(t,e=date.min){let i=this.prepareParam(t,"min");return this.test({message:e,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(a){return a>=this.resolve(i)}})}max(t,e=date.max){let i=this.prepareParam(t,"max");return this.test({message:e,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(a){return a<=this.resolve(i)}})}}DateSchema.INVALID_DATE=invalidDate;function sortFields(n,t=[]){let e=[],i=new Set,a=new Set(t.map(([c,u])=>`${c}-${u}`));function o(c,u){let f=propertyExprExports.split(c)[0];i.add(f),a.has(`${u}-${f}`)||e.push([u,f])}for(const c of Object.keys(n)){let u=n[c];i.add(c),Reference.isRef(u)&&u.isSibling?o(u.path,c):isSchema(u)&&"deps"in u&&u.deps.forEach(f=>o(f,c))}return toposort.array(Array.from(i),e).reverse()}function findIndex(n,t){let e=1/0;return n.some((i,a)=>{var o;if((o=t.path)!=null&&o.includes(i))return e=a,!0}),e}function sortByKeyOrder(n){return(t,e)=>findIndex(n,t)-findIndex(n,e)}const parseJson=(n,t,e)=>{if(typeof n!="string")return n;let i=n;try{i=JSON.parse(n)}catch{}return e.isType(i)?i:n};function deepPartial(n){if("fields"in n){const t={};for(const[e,i]of Object.entries(n.fields))t[e]=deepPartial(i);return n.setFields(t)}if(n.type==="array"){const t=n.optional();return t.innerType&&(t.innerType=deepPartial(t.innerType)),t}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(deepPartial)}):"optional"in n?n.optional():n}const deepHas=(n,t)=>{const e=[...propertyExprExports.normalizePath(t)];if(e.length===1)return e[0]in n;let i=e.pop(),a=propertyExprExports.getter(propertyExprExports.join(e),!0)(n);return!!(a&&i in a)};let isObject=n=>Object.prototype.toString.call(n)==="[object Object]";function unknown(n,t){let e=Object.keys(n.fields);return Object.keys(t).filter(i=>e.indexOf(i)===-1)}const defaultSort=sortByKeyOrder([]);function create$3(n){return new ObjectSchema(n)}class ObjectSchema extends Schema{constructor(t){super({type:"object",check(e){return isObject(e)||typeof e=="function"}}),this.fields=Object.create(null),this._sortErrors=defaultSort,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,e={}){var i;let a=super._cast(t,e);if(a===void 0)return this.getDefault(e);if(!this._typeCheck(a))return a;let o=this.fields,c=(i=e.stripUnknown)!=null?i:this.spec.noUnknown,u=[].concat(this._nodes,Object.keys(a).filter(y=>!this._nodes.includes(y))),f={},p=Object.assign({},e,{parent:f,__validating:e.__validating||!1}),m=!1;for(const y of u){let b=o[y],x=y in a,E=a[y];if(b){let A;p.path=(e.path?`${e.path}.`:"")+y,b=b.resolve({value:E,context:e.context,parent:f});let S=b instanceof Schema?b.spec:void 0,T=S?.strict;if(S!=null&&S.strip){m=m||y in a;continue}A=!e.__validating||!T?b.cast(E,p):E,A!==void 0&&(f[y]=A)}else x&&!c&&(f[y]=E);(x!==y in f||f[y]!==E)&&(m=!0)}return m?f:a}_validate(t,e={},i,a){let{from:o=[],originalValue:c=t,recursive:u=this.spec.recursive}=e;e.from=[{schema:this,value:c},...o],e.__validating=!0,e.originalValue=c,super._validate(t,e,i,(f,p)=>{if(!u||!isObject(p)){a(f,p);return}c=c||p;let m=[];for(let y of this._nodes){let b=this.fields[y];!b||Reference.isRef(b)||m.push(b.asNestedTest({options:e,key:y,parent:p,parentPath:e.path,originalParent:c}))}this.runTests({tests:m,value:p,originalValue:c,options:e},i,y=>{a(y.sort(this._sortErrors).concat(f),p)})})}clone(t){const e=super.clone(t);return e.fields=Object.assign({},this.fields),e._nodes=this._nodes,e._excludedEdges=this._excludedEdges,e._sortErrors=this._sortErrors,e}concat(t){let e=super.concat(t),i=e.fields;for(let[a,o]of Object.entries(this.fields)){const c=i[a];i[a]=c===void 0?o:c}return e.withMutation(a=>a.setFields(i,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let e={};return this._nodes.forEach(i=>{var a;const o=this.fields[i];let c=t;(a=c)!=null&&a.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[i]})),e[i]=o&&"getDefault"in o?o.getDefault(c):void 0}),e}setFields(t,e){let i=this.clone();return i.fields=t,i._nodes=sortFields(t,e),i._sortErrors=sortByKeyOrder(Object.keys(t)),e&&(i._excludedEdges=e),i}shape(t,e=[]){return this.clone().withMutation(i=>{let a=i._excludedEdges;return e.length&&(Array.isArray(e[0])||(e=[e]),a=[...i._excludedEdges,...e]),i.setFields(Object.assign(i.fields,t),a)})}partial(){const t={};for(const[e,i]of Object.entries(this.fields))t[e]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(t)}deepPartial(){return deepPartial(this)}pick(t){const e={};for(const i of t)this.fields[i]&&(e[i]=this.fields[i]);return this.setFields(e,this._excludedEdges.filter(([i,a])=>t.includes(i)&&t.includes(a)))}omit(t){const e=[];for(const i of Object.keys(this.fields))t.includes(i)||e.push(i);return this.pick(e)}from(t,e,i){let a=propertyExprExports.getter(t,!0);return this.transform(o=>{if(!o)return o;let c=o;return deepHas(o,t)&&(c=Object.assign({},o),i||delete c[t],c[e]=a(o)),c})}json(){return this.transform(parseJson)}exact(t){return this.test({name:"exact",exclusive:!0,message:t||object.exact,test(e){if(e==null)return!0;const i=unknown(this.schema,e);return i.length===0||this.createError({params:{properties:i.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(t=!0,e=object.noUnknown){typeof t!="boolean"&&(e=t,t=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:e,test(a){if(a==null)return!0;const o=unknown(this.schema,a);return!t||o.length===0||this.createError({params:{unknown:o.join(", ")}})}});return i.spec.noUnknown=t,i}unknown(t=!0,e=object.noUnknown){return this.noUnknown(!t,e)}transformKeys(t){return this.transform(e=>{if(!e)return e;const i={};for(const a of Object.keys(e))i[t(a)]=e[a];return i})}camelCase(){return this.transformKeys(tinyCaseExports.camelCase)}snakeCase(){return this.transformKeys(tinyCaseExports.snakeCase)}constantCase(){return this.transformKeys(t=>tinyCaseExports.snakeCase(t).toUpperCase())}describe(t){const e=(t?this.resolve(t):this).clone(),i=super.describe(t);i.fields={};for(const[o,c]of Object.entries(e.fields)){var a;let u=t;(a=u)!=null&&a.value&&(u=Object.assign({},u,{parent:u.value,value:u.value[o]})),i.fields[o]=c.describe(u)}return i}}create$3.prototype=ObjectSchema.prototype;var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,t){if(n==null)return{};var e=_objectWithoutPropertiesLoose(n,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function _objectWithoutPropertiesLoose(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},_extends.apply(this,arguments)}function ownKeys(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,i)}return e}function _objectSpread(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(e),!0).forEach(function(i){_defineProperty(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function _defineProperty(n,t,e){return t=_toPropertyKey(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _toPropertyKey(n){var t=_toPrimitive(n,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((t,e)=>React.createElement(t.tag,_objectSpread({key:e},t.attr),Tree2Element(t.child)))}function GenIcon(n){return t=>React.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},t),Tree2Element(n.child))}function IconBase(n){var t=e=>{var{attr:i,size:a,title:o}=n,c=_objectWithoutProperties(n,_excluded),u=a||e.size||"1em",f;return e.className&&(f=e.className),n.className&&(f=(f?f+" ":"")+n.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,c,{className:f,style:_objectSpread(_objectSpread({color:n.color||e.color},e.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&React.createElement("title",null,o),n.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,e=>t(e)):t(DefaultContext)}function FaBuilding(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(n)}function FaCalendarAlt(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function FaChevronDown(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(n)}function FaChevronLeft(n){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(n)}function FaChevronRight(n){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(n)}function FaFileInvoice(n){return GenIcon({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"},child:[]}]})(n)}function FaLock(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function FaPlus(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function FaSignOutAlt(n){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function FaUser(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function FiCheck(n){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(n)}function FiEyeOff(n){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(n)}function FiEye(n){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(n)}function FiUpload(n){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(n)}const validationSchema$1=create$3({userName:create$6().min(3,"Username must be at least 3 characters").required("Username is required"),password:create$6().min(6,"Password must be at least 6 characters").required("Password is required")}),LoginForm=({onSubmit:n})=>{const[t,e]=reactExports.useState(!1),i=()=>{e(!t)};return jsxRuntimeExports.jsx(Formik,{initialValues:{userName:"",password:"",rememberMe:!1},validationSchema:validationSchema$1,onSubmit:(a,{setSubmitting:o})=>{console.log(a),n(a),o(!1)},children:({errors:a,touched:o,isSubmitting:c})=>jsxRuntimeExports.jsxs(Form,{className:"w-full max-w-md font-robotoCondensed",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"User Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Field,{name:"userName",type:"text",placeholder:"Enter User Name",className:"w-full px-3 py-2 border rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"}),jsxRuntimeExports.jsx(FaUser,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),a.userName&&o.userName&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.userName})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Field,{name:"password",type:t?"text":"password",placeholder:"Enter User Password",className:"w-full px-3 py-2 border rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"}),jsxRuntimeExports.jsx(FaLock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:i,children:t?jsxRuntimeExports.jsx(FiEyeOff,{className:"rounded-md"}):jsxRuntimeExports.jsx(FiEye,{className:"rounded-md"})})]}),a.password&&o.password&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.password})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Logging in...":"Login"})]})})},Logo="/invoice-web/assets/Data-B68aQQpu.jpg",Login=()=>{const n=useNavigate(),[t,e]=reactExports.useState(!1),[i,a]=reactExports.useState(""),o=c=>{try{if(!c.password||c.password.length<6){a("Password must be at least 6 characters long."),e(!0);return}if(!c.userName||c.userName.length<3){a("Username must be at least 3 characters long."),e(!0);return}if(["password","123456","12345678","qwerty","abc123","password123"].includes(c.password.toLowerCase())){a("Password is too weak. Please choose a stronger password."),e(!0);return}if(!/\d/.test(c.password)){a("Password must contain at least one number."),e(!0);return}if(!/[a-zA-Z]/.test(c.password)){a("Password must contain at least one letter."),e(!0);return}const f={isLoggedIn:!0,userName:c.userName,password:c.password,loginTime:new Date().toISOString(),rememberMe:c.rememberMe};localStorage.setItem("session",JSON.stringify(f)),n("/home")}catch{a("An error occurred during login. Please try again."),e(!0)}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row h-screen font-robotoCondensed bg-color-white",children:[jsxRuntimeExports.jsx("div",{className:"w-full lg:w-[50%] h-[40vh] lg:h-full flex flex-col justify-center items-center overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:Logo,alt:"logo",className:"w-full h-full object-contain lg:object-cover max-w-md lg:max-w-none"})}),jsxRuntimeExports.jsxs("div",{className:"mx-auto my-auto px-4  py-2 sm:w-[40%] md:w-[40%] lg:w-[40%] xl:w-[40%]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"font-roboto font-bold text-4xl text-wrap text-start p-0 sm:p-16 md:p-0 lg:p-0 mt-10",children:"Welcome to Edstruments !"}),jsxRuntimeExports.jsx("p",{className:"pt-2 text-color-dark-gray text-wrap sm:text-wrap text-start",children:"Manage operations seamlessly on one platform."})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-4  right-36"}),jsxRuntimeExports.jsx(LoginForm,{onSubmit:o})]}),t&&jsxRuntimeExports.jsx(Modal,{message:i,onClose:()=>e(!1)})]})};function BsThreeDotsVertical(n){return GenIcon({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(n)}function VscSend(n){return GenIcon({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 1.91L1.78 1.5L15 7.44899V8.3999L1.78 14.33L1 13.91L2.58311 8L1 1.91ZM3.6118 8.5L2.33037 13.1295L13.5 7.8999L2.33037 2.83859L3.6118 7.43874L9 7.5V8.5H3.6118Z"},child:[]}]})(n)}function TbMessage(n){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 9h8"},child:[]},{tag:"path",attr:{d:"M8 13h6"},child:[]},{tag:"path",attr:{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"},child:[]}]})(n)}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(n){Number.isInteger(n)&&(verbosity=n)}function getVerbosityLevel(){return verbosity}function info(n){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${n}`)}function warn(n){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${n}`)}function unreachable(n){throw new Error(n)}function assert(n,t){n||unreachable(t)}function _isValidProtocol(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=stringToUTF8String(n)}catch{}const i=t?URL.parse(n,t):URL.parse(n);return _isValidProtocol(i)?i:null}function updateUrlHash(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&createValidAbsoluteUrl(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function shadow(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const BaseException=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class PasswordException extends BaseException{constructor(t,e){super(t,"PasswordException"),this.code=e}}class UnknownErrorException extends BaseException{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class InvalidPDFException extends BaseException{constructor(t){super(t,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class FormatError extends BaseException{constructor(t){super(t,"FormatError")}}class AbortException extends BaseException{constructor(t){super(t,"AbortException")}}function bytesToString(n){(typeof n!="object"||n?.length===void 0)&&unreachable("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=n.subarray(a,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function stringToBytes(n){typeof n!="string"&&unreachable("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function string32(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function isLittleEndian(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return shadow(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return shadow(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Util{static makeHexColor(t,e,i){return`#${hexNumbers[t]}${hexNumbers[e]}${hexNumbers[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],o=t[i+1];t[i]=a*e[0]+o*e[2]+e[4],t[i+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],o=e[1],c=e[2],u=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const y=t[i+m],b=t[i+m+1];t[i+m]=y*a+b*c+f,t[i+m+1]=y*o+b*u+p}}static applyInverseTransform(t,e){const i=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,i){const a=e[0],o=e[1],c=e[2],u=e[3],f=e[4],p=e[5],m=t[0],y=t[1],b=t[2],x=t[3];let E=a*m+f,A=E,S=a*b+f,T=S,D=u*y+p,R=D,F=u*x+p,k=F;if(o!==0||c!==0){const P=o*m,L=o*b,B=c*y,V=c*x;E+=B,T+=B,S+=V,A+=V,D+=P,k+=P,F+=L,R+=L}i[0]=Math.min(i[0],E,S,A,T),i[1]=Math.min(i[1],D,F,R,k),i[2]=Math.max(i[2],E,S,A,T),i[3]=Math.max(i[3],D,F,R,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],o=t[2],c=t[3],u=i**2+a**2,f=i*o+a*c,p=o**2+c**2,m=(u+p)/2,y=Math.sqrt(m**2-(u*p-f**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[i,o,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],e,a)}static#t(t,e,i,a,o,c,u,f,p,m){if(p<=0||p>=1)return;const y=1-p,b=p*p,x=b*p,E=y*(y*(y*t+3*p*e)+3*b*i)+x*a,A=y*(y*(y*o+3*p*c)+3*b*u)+x*f;m[0]=Math.min(m[0],E),m[1]=Math.min(m[1],A),m[2]=Math.max(m[2],E),m[3]=Math.max(m[3],A)}static#e(t,e,i,a,o,c,u,f,p,m,y,b){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,a,o,c,u,f,-y/m,b);return}const x=m**2-4*y*p;if(x<0)return;const E=Math.sqrt(x),A=2*p;this.#t(t,e,i,a,o,c,u,f,(-m+E)/A,b),this.#t(t,e,i,a,o,c,u,f,(-m-E)/A,b)}static bezierBoundingBox(t,e,i,a,o,c,u,f,p){p[0]=Math.min(p[0],t,u),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,u),p[3]=Math.max(p[3],e,f),this.#e(t,i,o,u,e,a,c,f,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),p),this.#e(t,i,o,u,e,a,c,f,3*(-e+3*(a-c)+f),6*(e-2*a+c),3*(a-e),p)}}function stringToUTF8String(n){return decodeURIComponent(escape(n))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(n){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),n.replaceAll(NormalizeRegex,(t,e,i)=>e?e.normalize("NFKC"):NormalizationMap.get(i))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),bytesToString(n)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...o]=e;if(!n(i)&&!Number.isInteger(i)||!t(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const f of o)if(!(typeof f=="number"||u&&f===null))return!1;return!0}function MathClamp(n,t,e){return Math.min(Math.max(n,t),e)}function toBase64Util(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(bytesToString(n))}function fromBase64Util(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):stringToBytes(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class XfaText{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(XfaText.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const f of o.children)a(f)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class XfaLayer{static setupStorage(t,e,i,a,o){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const f=u.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!u||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}u&&o.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:i});const u=o!=="richText",f=t.div;if(f.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=y}u&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),u&&XfaText.shouldBuildText(a.name)&&p.push(y)}return{textDivs:p}}const m=[[a,-1,c]];for(;m.length>0;){const[y,b,x]=m.at(-1);if(b+1===y.children.length){m.pop();continue}const E=y.children[++m.at(-1)[1]];if(E===null)continue;const{name:A}=E;if(A==="#text"){const T=document.createTextNode(E.value);p.push(T),x.append(T);continue}const S=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,A):document.createElement(A);if(x.append(S),E.attributes&&this.setAttributes({html:S,element:E,storage:e,intent:o,linkService:i}),E.children?.length>0)m.push([E,-1,S]);else if(E.value){const T=document.createTextNode(E.value);u&&XfaText.shouldBuildText(A)&&p.push(T),S.append(T)}}for(const y of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg";class PixelsPerInch{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function fetchData(n,t="text"){if(isValidFetchUrl(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class PageViewport{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=c,i*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,y,b,x;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,y=0,b=0,x=1;break;case 90:m=0,y=1,b=1,x=0;break;case 270:m=0,y=-1,b=-1,x=0;break;case 0:m=1,y=0,b=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,x=-x);let E,A,S,T;m===0?(E=Math.abs(p-t[1])*i+o,A=Math.abs(f-t[0])*i+c,S=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(E=Math.abs(f-t[0])*i+o,A=Math.abs(p-t[1])*i+c,S=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[m*i,y*i,b*i,x*i,E-m*i*f-b*i*p,A-y*i*f-x*i*p],this.width=S,this.height=T}get rawDims(){const t=this.viewBox;return shadow(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const i=[t,e];return Util.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Util.applyTransform(e,this.transform);const i=[t[2],t[3]];return Util.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Util.applyInverseTransform(i,this.transform),i}}class RenderingCancelledException extends BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function isDataScheme(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function isPdfFile(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function getFilenameFromUrl(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(n,t="document.pdf"){if(typeof n!="string")return t;if(isDataScheme(n))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const a=u=>{try{let f=decodeURIComponent(u);return f.includes("/")?(f=f.split("/").at(-1),f.test(/^\.pdf$/i)?f:u):f}catch{return u}},o=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(o.test(c))return a(c);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const p of u)if(o.test(p))return a(p);const f=Array.from(i.searchParams.keys()).reverse();for(const p of f)if(o.test(p))return a(p)}if(i.hash){const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(f)return a(f[0])}return t}class StatTimer{started=Object.create(null);times=[];time(t){t in this.started&&warn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||warn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-a}ms
`);return t.join("")}}function isValidFetchUrl(n,t){const e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function noContextMenu(n){n.preventDefault()}function stopEvent(n){n.preventDefault(),n.stopPropagation()}function deprecated(n){console.log("Deprecated API usage: "+n)}class PDFDateString{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=m,u+=y):p==="+"&&(c-=m,u-=y),new Date(Date.UTC(i,a,o,c,u,f))}}function getXfaPageViewport(n,{scale:t=1,rotation:e=0}){const{width:i,height:a}=n.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new PageViewport({viewBox:o,userUnit:1,scale:t,rotation:e})}function getRGB(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(warn(`Not a valid color format: "${n}"`),[0,0,0])}function getColorValues(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,getRGB(i))}t.remove()}function getCurrentTransform(n){const{a:t,b:e,c:i,d:a,e:o,f:c}=n.getTransform();return[t,e,i,a,o,c]}function getCurrentTransformInverse(n){const{a:t,b:e,c:i,d:a,e:o,f:c}=n.getTransform().invertSelf();return[t,e,i,a,o,c]}function setLayerDimensions(n,t,e=!1,i=!0){if(t instanceof PageViewport){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=n,u=util_FeatureTest.isCSSRoundSupported,f=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${o}px`,m=u?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}i&&n.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){const{pixelRatio:t}=OutputScale;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,o=-1){let c=1/0,u=1/0,f=1/0;i=OutputScale.capPixels(i,o),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(u=a/t,f=a/e);const p=Math.min(c,u,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){return shadow(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class CSSConstants{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),shadow(this,"commentForegroundColor",getRGB(i))}}function applyOpacity(n,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return n=Math.round(n*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[n,t,e]}function RGBToHSL(n,t){const e=n[0]/255,i=n[1]/255,a=n[2]/255,o=Math.max(e,i,a),c=Math.min(e,i,a),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const f=o-c;switch(t[1]=u<.5?f/(o+c):f/(2-o-c),o){case e:t[0]=((i-a)/f+(i<a?6:0))*60;break;case i:t[0]=((a-e)/f+2)*60;break;case a:t[0]=((e-i)/f+4)*60;break}}t[2]=u}function HSLToRGB(n,t){const e=n[0],i=n[1],a=n[2],o=(1-Math.abs(2*a-1))*i,c=o*(1-Math.abs(e/60%2-1)),u=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function computeLuminance(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function contrastRatio(n,t,e){HSLToRGB(n,e),e.map(computeLuminance);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];HSLToRGB(t,e),e.map(computeLuminance);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const contrastCache=new Map;function findContrastColor(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=contrastCache.get(e);if(i)return i;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);RGBToHSL(n,c);const u=a.subarray(6,9);RGBToHSL(t,u);const f=u[2]<.5,p=f?12:4.5;if(c[2]=f?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),contrastRatio(c,u,o)<p){let m,y;f?(m=c[2],y=1):(m=0,y=c[2]);const b=.005;for(;y-m>b;){const x=c[2]=(m+y)/2;f===contrastRatio(c,u,o)<p?m=x:y=x}c[2]=f?y:m}return HSLToRGB(c,o),i=Util.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),contrastCache.set(e,i),i}function renderRichText({html:n,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof n=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=n.split(/(?:\r\n?|\n)/);for(let u=0,f=c.length;u<f;++u){const p=c[u];o.append(document.createTextNode(p)),u<f-1&&o.append(document.createElement("br"))}a.append(o)}else XfaLayer.render({xfaHtml:n,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),i.append(a)}class EditorToolbar{#t=null;#e=null;#i;#n=null;#s=null;#r=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,EditorToolbar.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",EditorToolbar.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,stopEvent(t)}#h(t){this.#i._focusEventsAllowed=!0,stopEvent(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",noContextMenu,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",EditorToolbar.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#s=t}addComment(t,e=null){if(this.#r)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#a=this.#g;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class FloatingToolbar{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",noContextMenu,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#s(t,e){let i=0,a=0;for(const o of t){const c=o.y+o.height;if(c<i)continue;const u=o.x+(e?o.width:0);if(c>i){a=u,i=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,i]}show(t,e,i){const[a,o]=this.#s(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",noContextMenu,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function bindEvents(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}class IdManager{#t=0;get id(){return`${AnnotationEditorPrefix}${this.#t++}`}}class ImageManager{#t=getUuid();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await fetchData(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=ImageManager._isSVGFittingCanvas,c=new FileReader,u=new Image,f=new Promise((p,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,p()},c.onload=async()=>{const y=i.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=m});c.readAsDataURL(a),await f}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){warn(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:o}=t;return this.#n(`${e}_${i}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class CommandManager{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const f={cmd:t,undo:e,post:i,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(f);return}if(c&&this.#t[this.#n].type===o){u&&(f.undo=this.#t[this.#n].undo),this.#t[this.#n]=f;return}const p=this.#n+1;p===this.#i?this.#t.splice(0,1):(this.#n=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(f)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class KeyboardManager{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=util_FeatureTest.platform;for(const[i,a,o={}]of t)for(const c of i){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=i;u&&!u(t,e)||(a.bind(t,...c,e)(),o||stopEvent(e))}}class ColorManager{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(t),shadow(this,"_colors",t)}convert(t){const e=getRGB(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((o,c)=>o===e[c]))return ColorManager._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Util.makeHexColor(...e):t}}class AnnotationEditorUIManager{#t=new AbortController;#e=null;#i=null;#n=new Map;#s=new Map;#r=null;#a=null;#o=null;#c=new CommandManager;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#T=null;#A=null;#x=null;#C=null;#S=!1;#_=null;#M=new IdManager;#D=!1;#R=!1;#I=!1;#k=null;#L=null;#B=null;#O=null;#U=null;#w=AnnotationEditorType.NONE;#E=new Set;#F=null;#j=null;#V=null;#Y=null;#q=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#N=null;#G=null;#Q=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=AnnotationEditorUIManager.prototype,e=c=>c.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:f}=u;return f!=="text"&&f!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,i,a,o,c,u,f,p,m,y,b,x,E,A,S){const T=this._signal=this.#t.signal;this.#G=t,this.#Q=e,this.#J=i,this.#r=a,this.#l=o,this.#j=c,this.#q=f,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:T}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),u._on("setpreference",this.onSetPreference.bind(this),{signal:T}),u._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:T}),this.#lt(),this.#dt(),this.#et(),this.#a=f.annotationStorage,this.#T=f.filterFactory,this.#V=p,this.#C=m||null,this.#y=y,this.#b=b,this.#v=x,this.#U=E||null,this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=S!==!1,o?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#s.values())t.destroy();this.#s.clear(),this.#n.clear(),this.#m.clear(),this.#O?.clear(),this.#e=null,this.#E.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#j?.destroy(),this.#_?.hide(),this.#_=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#N&&(clearTimeout(this.#N),this.#N=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#U}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return shadow(this,"hcmFilter",this.#V?this.#T.addHCMFilter(this.#V.foreground,this.#V.background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return shadow(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return shadow(this,"highlightColors",null);const e=new Map,i=!!this.#V;for(const[a,o]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),o);continue}!i&&!c&&e.set(a,o)}return shadow(this,"highlightColors",e)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#s.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#s.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#j?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#j}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,e){for(const i of this.#s.values()){const{x:a,y:o,width:c,height:u}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#s.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u}=i,f=i.toString(),m=this.#Z(i).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;i.empty();const b=this.#tt(m),x=this.#w===AnnotationEditorType.NONE,E=()=>{const A=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u,text:f});x&&this.showAllEditors("highlight",!0,!0),e&&A?.editComment()};if(x){this.switchToMode(AnnotationEditorType.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Z(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#_||=new FloatingToolbar(this),this.#_.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${AnnotationEditorPrefix}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#F&&(this.#_?.hide(),this.#F=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#F)return;const a=this.#Z(t).closest(".textLayer");if(!a){this.#F&&(this.#_?.hide(),this.#F=null,this.#P({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#F=e,this.#P({hasSelectedText:!0}),!(this.#w!==AnnotationEditorType.HIGHLIGHT&&this.#w!==AnnotationEditorType.NONE)&&(this.#w===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#w===AnnotationEditorType.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#R){const c=new AbortController,u=this.combinedSignal(c),f=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#w===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#E)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#k?.abort(),this.#k=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#E){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){warn(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const f of i){const p=await a.deserialize(f);if(!p)return;o.push(p)}const c=()=>{for(const f of o)this.#rt(f);this.#at(o)},u=()=>{for(const f of o)f.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){warn(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&AnnotationEditorUIManager._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#P(t){Object.entries(t).some(([i,a])=>this.#X[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#w===AnnotationEditorType.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#$([[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))}#$(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#P({isEditing:this.#w!==AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#$(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#s.set(t.pageIndex,t),this.#D?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,o=!1){if(this.#w!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#w===AnnotationEditorType.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#w=t,t===AnnotationEditorType.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#n.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const c of this.#n.values())c.addStandaloneCommentButton();t===AnnotationEditorType.SIGNATURE&&await this.#j?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#s.values())c.updateMode(t);if(t===AnnotationEditorType.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const c=new Set,u=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:m,deleted:y}=f;p&&c.add(p),m&&!y&&u.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:m,contentsObj:y}=f;m&&y?.str&&!c.has(p)&&!this.#g.has(p)&&u.push(f)}this.#l?.showSidebar(u)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const c of this.#n.values())c.uid===e?(this.setSelected(c),o?c.editComment():a?c.enterInEditMode():c.focus()):c.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(e);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#E)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#$([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#s.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#D){this.#D=!0;const t=[];for(const e of this.#s.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#D){this.#D=!1;for(const t of this.#s.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#rt(t){const e=this.#s.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#$(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#E);return t}updateUI(t){this.#mt===t&&this.#$(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#$(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#E.has(t)){this.#E.delete(t),t.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#E.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#E)e!==t&&e.unselect();this.#E.clear(),this.#E.add(t),t.select(),this.#$(t.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(t){return this.#E.has(t)}get firstSelectedEditor(){return this.#E.values().next().value}unselect(t){t.unselect(),this.#E.delete(t),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#E.size!==0}get isEnterHandled(){return this.#E.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#P({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#E],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#rt(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#E)e.unselect();this.#E.clear();for(const e of t)e.isEmpty()||(this.#E.add(e),e.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#E)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==AnnotationEditorType.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#E)t.unselect();this.#E.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,o]=this.#H,c=[...this.#E],u=1e3;this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.#N=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const f of c)this.#n.has(f.id)&&(f.translateInPage(a,o),f.translationDone())},undo:()=>{for(const f of c)this.#n.has(f.id)&&(f.translateInPage(-a,-o),f.translationDone())},mustExec:!1})},u);for(const f of c)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#E)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!e)return!1;const i=(a,o,c,u)=>{if(this.#n.has(a.id)){const f=this.#s.get(u);f?a._setParentAndPosition(f,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)i(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)i(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#E.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}isEditingMode(){return this.#w!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(p,m,y,b)=>({x:(m-a)/c,y:1-(p+y-i)/o,width:b/c,height:y/o});break;case"180":u=(p,m,y,b)=>({x:1-(p+y-i)/o,y:1-(m+b-a)/c,width:y/o,height:b/c});break;case"270":u=(p,m,y,b)=>({x:1-(m+b-a)/c,y:(p-i)/o,width:b/c,height:y/o});break;default:u=(p,m,y,b)=>({x:(p-i)/o,y:(m-a)/c,width:y/o,height:b/c});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:x,width:E,height:A}of y.getClientRects())E===0||A===0||f.push(u(b,x,E,A))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#w===AnnotationEditorType.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#O?.get(t);a&&(a.setCanvas(e,i),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class AltText{#t=null;#e=!1;#i=null;#n=null;#s=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,AltText.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){AltText._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",AltText.#f.missing),e.setAttribute("data-l10n-id",AltText.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:i}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await AltText._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",AltText.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",AltText.#f[`${this.#g}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#s;if(!e){this.#s=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Comment{#t=null;#e=null;#i=!1;#n=null;#s=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/c,(e+i-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",noContextMenu,{signal:i}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,stopEvent(o)},{capture:!0,signal:i}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,stopEvent(o)},{capture:!0,signal:i})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:m,height:y,x:b,y:x}=this.#n;i=b+i*m,a=x+a*y}const o=this.#n.parent.boundingClientRect,{x:c,y:u,width:f,height:p}=o;this.#n._uiManager.editComment(this.#n,c+i*f,u+a*p,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#r=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#s=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class TouchManager{#t;#e=!1;#i=null;#n;#s;#r;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#i=i,this.#n=e,this.#s=a,this.#r=o,this.#a=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},f=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(stopEvent(p),f(p))},u),c.addEventListener("pointerup",f,u),c.addEventListener("pointercancel",f,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#p.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",stopEvent,c),o.addEventListener("pointermove",stopEvent,c),o.addEventListener("pointercancel",stopEvent,c),o.addEventListener("pointerup",stopEvent,c),this.#s?.()}if(stopEvent(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;stopEvent(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:o}=e,{screenX:c,screenY:u}=i,f=this.#l,{touch0X:p,touch0Y:m,touch1X:y,touch1Y:b}=f,x=y-p,E=b-m,A=c-a,S=u-o,T=Math.hypot(A,S)||1,D=Math.hypot(x,E)||1;if(!this.#e&&Math.abs(D-T)<=TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=a,f.touch0Y=o,f.touch1X=c,f.touch1Y=u,!this.#e){this.#e=!0;return}const R=[(a+c)/2,(o+u)/2];this.#r?.(R,D,T)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(stopEvent(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class AnnotationEditor{#t=null;#e=null;#i=null;#n=null;#s=null;#r=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#T=0;#A=0;#x=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=AnnotationEditor._zIndex++;static _borderLineWidth=-1;static _colorManager=new ColorManager;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=AnnotationEditor.prototype._resizeWithKeyboard,e=AnnotationEditorUIManager.TRANSLATE_SMALL,i=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,c];const[u,f]=this.parentDimensions;this.x=t.x/u,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new FakeEditor({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(AnnotationEditor._l10n??=t,AnnotationEditor._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),AnnotationEditor._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#N(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[o,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/o,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#M([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[f,p]=this.getBaseTranslation();c+=f,u+=p;const{style:m}=i;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=AnnotationEditor,a=i/t,o=i/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:o,y:c,width:u,height:f}=this;if(u*=i,f*=a,o*=i,c*=a,this._mustFixPosition)switch(t){case 0:o=MathClamp(o,0,i-u),c=MathClamp(c,0,a-f);break;case 90:o=MathClamp(o,0,i-f),c=MathClamp(c,u,a);break;case 180:o=MathClamp(o,u,i),c=MathClamp(c,f,a);break;case 270:o=MathClamp(o,f,i),c=MathClamp(c,0,a-u);break}this.x=o/=i,this.y=c/=a;const[p,m]=this.getBaseTranslation();o+=p,c+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#D(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return AnnotationEditor.#D(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return AnnotationEditor.#D(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#k.bind(this,i),{signal:e}),a.addEventListener("contextmenu",noContextMenu,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:i}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:c}),window.addEventListener("contextmenu",noContextMenu,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=f,this.#B()};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})}#L(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,f=this.height;o===t&&c===e&&u===i&&f===a||this.addCommands({cmd:this.#L.bind(this,o,c,u,f),undo:this.#L.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#O(t,e){const[i,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,f=this.height,p=AnnotationEditor.MIN_SIZE/i,m=AnnotationEditor.MIN_SIZE/a,y=this.#R(this.rotation),b=(N,G)=>[y[0]*N+y[2]*G,y[1]*N+y[3]*G],x=this.#R(360-this.rotation),E=(N,G)=>[x[0]*N+x[2]*G,x[1]*N+x[3]*G];let A,S,T=!1,D=!1;switch(t){case"topLeft":T=!0,A=(N,G)=>[0,0],S=(N,G)=>[N,G];break;case"topMiddle":A=(N,G)=>[N/2,0],S=(N,G)=>[N/2,G];break;case"topRight":T=!0,A=(N,G)=>[N,0],S=(N,G)=>[0,G];break;case"middleRight":D=!0,A=(N,G)=>[N,G/2],S=(N,G)=>[0,G/2];break;case"bottomRight":T=!0,A=(N,G)=>[N,G],S=(N,G)=>[0,0];break;case"bottomMiddle":A=(N,G)=>[N/2,G],S=(N,G)=>[N/2,0];break;case"bottomLeft":T=!0,A=(N,G)=>[0,G],S=(N,G)=>[N,0];break;case"middleLeft":D=!0,A=(N,G)=>[0,G/2],S=(N,G)=>[N,G/2];break}const R=A(u,f),F=S(u,f);let k=b(...F);const P=AnnotationEditor._round(o+k[0]),L=AnnotationEditor._round(c+k[1]);let B=1,V=1,z,j;if(e.fromKeyboard)({deltaX:z,deltaY:j}=e);else{const{screenX:N,screenY:G}=e,[I,X]=this.#l;[z,j]=this.screenToPageTranslation(N-I,G-X),this.#l[0]=N,this.#l[1]=G}if([z,j]=E(z/i,j/a),T){const N=Math.hypot(u,f);B=V=Math.max(Math.min(Math.hypot(F[0]-R[0]-z,F[1]-R[1]-j)/N,1/u,1/f),p/u,m/f)}else D?B=MathClamp(Math.abs(F[0]-R[0]-z),p,1)/u:V=MathClamp(Math.abs(F[1]-R[1]-j),m,1)/f;const J=AnnotationEditor._round(u*B),W=AnnotationEditor._round(f*V);k=b(...S(J,W));const K=P-k[0],$=L-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=J,this.height=W,this.x=K,this.y=$,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(AltText.initialize(AnnotationEditor._l10n),this.#i=new AltText(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Comment(this)}addStandaloneCommentButton(){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Comment(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new Comment(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Comment(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,f=a-100,p=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,f,p,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#V();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),bindEvents(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new TouchManager({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#U.bind(this),onPinching:this.#w.bind(this),onPinchEnd:this.#E.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#U(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#w(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const c=this.#R(this.rotation),u=(P,L)=>[c[0]*P+c[2]*L,c[1]*P+c[3]*L],[f,p]=this.parentDimensions,m=this.x,y=this.y,b=this.width,x=this.height,E=AnnotationEditor.MIN_SIZE/f,A=AnnotationEditor.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/x),E/b,A/x);const S=AnnotationEditor._round(b*o),T=AnnotationEditor._round(x*o);if(S===b&&T===x)return;this.#u||=[m,y,b,x];const D=u(b/2,x/2),R=AnnotationEditor._round(m+D[0]),F=AnnotationEditor._round(y+D[1]),k=u(S/2,T/2);this.x=R-k[0],this.y=F-k[1],this.width=S,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#E(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#j(t);return}this.#F(t)}#F(t){const{isMac:e}=util_FeatureTest.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#j(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=p=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#F(p),i&&this._onStopDragging()};e&&(this.#T=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",p=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=p;if(b!==this.#a){stopEvent(p);return}const[x,E]=this.screenToPageTranslation(m-this.#T,y-this.#A);this.#T=m,this.#A=y,this._uiManager.dragSelectedEditors(x,E)},c),window.addEventListener("touchmove",stopEvent,c),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#C||p.isPrimary)&&u(p),stopEvent(p)},c));const f=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}stopEvent(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,f]=this.pageTranslation,p=t/a,m=e/a,y=this.x*o,b=this.y*c,x=this.width*o,E=this.height*c;switch(i){case 0:return[y+p+u,c-b-m-E+f,y+p+x+u,c-b-m+f];case 90:return[y+m+u,c-b+p+f,y+m+E+u,c-b+p+x+f];case 180:return[y-p-x+u,c-b+m+f,y-p+u,c-b+m+E+f];case 270:return[y-m-E+u,c-b-p-x+f,y-m+u,c-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,o,c]=t,u=o-i,f=c-a;switch(this.rotation){case 0:return[i,e-c,u,f];case 90:return[i,e-a,f,u];case 180:return[o,e-a,u,f];case 270:return[o,e-c,f,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:o,richText:c},uid:u,pageIndex:f,creationDate:p,modificationDate:m}=this;return{id:u,pageIndex:f,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:p,modificationDate:i||m,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&a>0&&t<o&&i>0}#V(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#V()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,c]=a.pageDimensions,[u,f,p,m]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=f/c,a.width=p/o,a.height=m/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#N(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,o,c]=this.getPDFRect();return[AnnotationEditor._round(i+(o-i)*t),AnnotationEditor._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#Y.bind(this),u=this.#q.bind(this),f=this._uiManager._signal;for(const p of this.#e){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",u,{signal:f}),p.addEventListener("focus",this.#X.bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[m])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const u of e){const p=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",AnnotationEditor._l10nResizer[p])}}this.#H(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){AnnotationEditor._resizerKeyboardManager.exec(this,t)}#q(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#N()}#X(t){this.#g=this.#b?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#O(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#N(){this.#b=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#N(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:i}=t;let a=this.#x.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},AnnotationEditor._telemetryTimeout),this.#x.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class FakeEditor extends AnnotationEditor{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(t){this.h1=t?t&4294967295:SEED,this.h2=t?t&4294967295:SEED}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let A=0,S=t.length;A<S;A++){const T=t.charCodeAt(A);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,f=0,p=this.h1,m=this.h2;const y=3432918353,b=461845907,x=y&MASK_LOW,E=b&MASK_LOW;for(let A=0;A<a;A++)A&1?(u=c[A],u=u*y&MASK_HIGH|u*x&MASK_LOW,u=u<<15|u>>>17,u=u*b&MASK_HIGH|u*E&MASK_LOW,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[A],f=f*y&MASK_HIGH|f*x&MASK_LOW,f=f<<15|f>>>17,f=f*b&MASK_HIGH|f*E&MASK_LOW,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&MASK_HIGH|u*x&MASK_LOW,u=u<<15|u>>>17,u=u*b&MASK_HIGH|u*E&MASK_LOW,a&1?p^=u:m^=u}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&MASK_HIGH|t*36045&MASK_LOW,e=e*4283543511&MASK_HIGH|((e<<16|t>>>16)*2950163797&MASK_HIGH)>>>16,t^=e>>>1,t=t*444984403&MASK_HIGH|t*60499&MASK_LOW,e=e*3301882366&MASK_HIGH|((e<<16|t>>>16)*3120437893&MASK_HIGH)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});class AnnotationStorage{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof AnnotationEditor&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[o,c]of Object.entries(e))i[o]!==c&&(a=!0,i[o]=c);else a=!0,this.#n.set(t,e);a&&this.#s(),e instanceof AnnotationEditor&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(this.#n.size===0)return SerializableEmpty;const t=new Map,e=new MurmurHash3_64,i=[],a=Object.create(null);let o=!1;for(const[c,u]of this.#n){const f=u instanceof AnnotationEditor?u.serialize(!1,a):u;f&&(t.set(c,f),e.update(`${c}:${JSON.stringify(f)}`),o||=!!f.bitmap)}if(o)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:SerializableEmpty}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const o of this.#n.values()){if(!(o instanceof AnnotationEditor)){o.popup&&(o.popup.deleted?a+=1:i+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(i+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const f=t[u]||=new Map;for(const[p,m]of Object.entries(c)){if(p==="type")continue;let y=f.get(p);y||(y=new Map,f.set(p,y));const b=y.get(m)??0;y.set(m,b+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[o,c]of e)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class PrintAnnotationStorage extends AnnotationStorage{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:i,transfer:a}}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}class FontLoader{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(assert(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=t,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),i?.(t)}catch{warn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw warn(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return shadow(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(assert(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(F,k){return F.charCodeAt(k)<<24|F.charCodeAt(k+1)<<16|F.charCodeAt(k+2)<<8|F.charCodeAt(k+3)&255}function a(F,k,P,L){const B=F.substring(0,k),V=F.substring(k+P);return B+L+V}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const f=u.getContext("2d");let p=0;function m(F,k){if(++p>30){warn("Load test font never loaded."),k();return}if(f.font="30px "+F,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(m.bind(null,F,k))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const E=16,A=1482184792;let S=i(b,E);for(o=0,c=y.length-3;o<c;o+=4)S=S-A+i(y,o)|0;o<y.length&&(S=S-A+i(y+"XXX",o)|0),b=a(b,E,4,string32(S));const T=`url(data:font/opentype;base64,${btoa(b)});`,D=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(D);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const F of[t.loadedName,y]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=F,R.append(k)}this._document.body.append(R),m(y,()=>{R.remove(),e.complete()})}}class FontFaceObject{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){warn(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function getUrlProp(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(isNodeJS)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(n){if(isNodeJS&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return stringToBytes(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const isRefProxy=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,isNameProxy=n=>typeof n=="object"&&typeof n?.name=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);class LoopbackPort{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(n){if(n instanceof AbortException||n instanceof InvalidPDFException||n instanceof PasswordException||n instanceof ResponseException||n instanceof UnknownErrorException)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new AbortException(n.message);case"InvalidPDFException":return new InvalidPDFException(n.message);case"PasswordException":return new PasswordException(n.message,n.code);case"ResponseException":return new ResponseException(n.message,n.status,n.missing);case"UnknownErrorException":return new UnknownErrorException(n.message,n.details)}return new UnknownErrorException(n.message,n.toString())}class MessageHandler{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===CallbackKind.DATA)a.resolve(t.data);else if(t.callback===CallbackKind.ERROR)a.reject(wrapReason(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:i,targetName:a,callback:CallbackKind.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:i,targetName:a,callback:CallbackKind.ERROR,callbackId:t.callbackId,reason:wrapReason(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,i,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:p.desiredSize},a),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:c,targetName:u,stream:StreamKind.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{assert(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:c,targetName:u,stream:StreamKind.CANCEL,streamId:o,reason:wrapReason(p)}),m.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],f={enqueue(p,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:StreamKind.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){assert(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:StreamKind.ERROR,streamId:e,reason:wrapReason(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(u,t.data,f).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.START_COMPLETE,streamId:e,reason:wrapReason(p)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case StreamKind.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(wrapReason(t.reason));break;case StreamKind.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(wrapReason(t.reason));break;case StreamKind.PULL:if(!u){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||onFn).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.PULL_COMPLETE,streamId:e,reason:wrapReason(p)})});break;case StreamKind.ENQUEUE:if(assert(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case StreamKind.CLOSE:if(assert(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#s(c,e);break;case StreamKind.ERROR:assert(c,"error should have stream controller"),c.controller.error(wrapReason(t.reason)),this.#s(c,e);break;case StreamKind.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(wrapReason(t.reason)),this.#s(c,e);break;case StreamKind.CANCEL:if(!u)break;const f=wrapReason(t.reason);Promise.try(u.onCancel||onFn,f).then(function(){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:a,stream:StreamKind.CANCEL_COMPLETE,streamId:e,reason:wrapReason(p)})}),u.sinkCapability.reject(f),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#s(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class BaseCanvasFactory{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){unreachable("Abstract method `_createCanvas` called.")}}class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){const e=await fetchData(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):stringToBytes(e)}}class BaseFilterFactory{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,o){return"none"}destroy(t=!1){}}class DOMFilterFactory extends BaseFilterFactory{#t;#e;#i;#n;#s;#r;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#s=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#s.createElementNS(SVG_NS,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#s.createElementNS(SVG_NS,"defs"),t.append(i),i.append(this.#i),this.#s.body.append(t)}return this.#i}#d(t){if(t.length===1){const f=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=f[y]/255;const m=p.join(",");return[m,m,m]}const[e,i,a]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let f=0;f<256;f++)o[f]=e[f]/255,c[f]=i[f]/255,u[f]=a[f]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#s.URL;e!==this.#s.baseURI&&(isDataScheme(e)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=updateUrlHash(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,o]=this.#d(t),c=t.length===1?i:`${i}${a}${o}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,f=this.#h(u);this.#o.set(t,f),this.#o.set(c,f);const p=this.#p(u);return this.#m(i,a,o,p),f}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const c=this.#b(t);t=Util.makeHexColor(...c);const u=this.#b(e);if(e=Util.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const f=new Array(256);for(let x=0;x<=255;x++){const E=x/255;f[x]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=f.join(","),m=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(m);this.#m(p,p,p,y),this.#g(y);const b=(x,E)=>{const A=c[x]/255,S=u[x]/255,T=new Array(E+1);for(let D=0;D<=E;D++)T[D]=A+D/E*(S-A);return T.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(m),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#p(o);return this.#y(i,u),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#p(o);return this.#f(u),t&&this.#y(i,u),c}addHighlightHCMFilter(t,e,i,a,o){const c=`${e}-${i}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[f,p]=[e,i].map(this.#b.bind(this));let m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,x]=[a,o].map(this.#b.bind(this));y<m&&([m,y,b,x]=[y,m,x,b]),this.#l.style.color="";const E=(T,D,R)=>{const F=new Array(256),k=(y-m)/R,P=T/255,L=(D-T)/(255*R);let B=0;for(let V=0;V<=R;V++){const z=Math.round(m+V*k),j=P+V*L;for(let J=B;J<=z;J++)F[J]=j;B=z+1}for(let V=B;V<256;V++)F[V]=F[B-1];return F.join(",")},A=`g_${this.#n}_hcm_${t}_filter`,S=u.filter=this.#p(A);return this.#g(S),this.#m(E(b[0],x[0],5),E(b[1],x[1],5),E(b[2],x[2],5),S),u.url=this.#h(A),u.url}destroy(t=!1){t&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(t){const e=this.#s.createElementNS(SVG_NS,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#s.createElementNS(SVG_NS,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#s.createElementNS(SVG_NS,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#s.createElementNS(SVG_NS,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#m(t,e,i,a){const o=this.#s.createElementNS(SVG_NS,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",i)}#y(t,e){const i=this.#s.createElementNS(SVG_NS,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#b(t){return this.#l.style.color=t,getRGB(getComputedStyle(this.#l).getPropertyValue("color"))}}class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}class BaseWasmFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(t){return node_utils_fetchData(t)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(n,t,e,i,a,o){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],a),n[t*4+3]=Math.max(n[t*4+3],o)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class BBoxReader{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===EMPTY_BBOX}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const ensureDebugMetadata=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};class CanvasDependencyTracker{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]};#i=new Map;#n=[];#s=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#y(e),i&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(EMPTY_BBOX,e.length)):this.#u.fill(EMPTY_BBOX)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:this.#e[FORCED_DEPENDENCY_LABEL]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(ensureDebugMetadata(this.#m,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(ensureDebugMetadata(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#s.push(t),this}endMarkedContent(t){const e=this.#s.pop();return e!==void 0&&(ensureDebugMetadata(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(Util.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,o,c){const u=Util.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),f=[1/0,1/0,-1/0,-1/0];Util.axialAlignedBoundingBox([i,o,a,c],u,f);const p=Util.intersect(this.#a,f);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,a,o,c){const u=this.#a;if(u[0]===1/0)return this;const f=Util.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return Util.axialAlignedBoundingBox([i,o,a,c],f,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return Util.axialAlignedBoundingBox([i,o,a,c],f,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(t,e,i,a=1,o=0,c=0,u){const f=i.bbox;let p,m;if(f&&(p=f[2]!==f[0]&&f[3]!==f[1]&&this.#h.get(i),p!==!1&&(m=[0,0,0,0],Util.axialAlignedBoundingBox(f,i.fontMatrix,m),(a!==1||o!==0||c!==0)&&Util.scaleMinMax([a,0,0,-a,o,c],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return f&&m&&p===void 0&&(p=m[0]<=o-y.actualBoundingBoxLeft&&m[2]>=o+y.actualBoundingBoxRight&&m[1]<=c-y.actualBoundingBoxAscent&&m[3]>=c+y.actualBoundingBoxDescent,this.#h.set(i,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,o=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in o&&o[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[FORCED_DEPENDENCY_LABEL]),this.#m){const i=ensureDebugMetadata(this.#m,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#s.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=floor(this.#o[0]*256/this.#f),a=floor(this.#o[1]*256/this.#g),o=ceil(this.#o[2]*256/this.#f),c=ceil(this.#o[3]*256/this.#g);expandBBox(this.#p,t,i,a,o,c);for(const u of this.#l)u!==t&&expandBBox(this.#p,u,i,a,o,c);for(const u of this.#n)u!==t&&expandBBox(this.#p,u,i,a,o,c);for(const u of this.#s)u!==t&&expandBBox(this.#p,u,i,a,o,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new BBoxReader(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class CanvasNestedDependencyTracker{#t;#e;#i;#n=0;#s=0;constructor(t,e,i){if(t instanceof CanvasNestedDependencyTracker&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#s++,this.#t.save(this.#e),this}restore(t){return this.#s>0&&(this.#t.restore(this.#e),this.#s--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,o,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,o,c),this}recordBBox(t,e,i,a,o,c){return this.#i||this.#t.recordBBox(this.#e,e,i,a,o,c),this}recordCharacterBBox(t,e,i,a,o,c,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,o,c,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),n.clip(a)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let o;if(a===PathType.STROKE||a===PathType.FILL){const c=e.current.getClippedPathBoundingBox(a,getCurrentTransform(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",u,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),i=Util.transform(i,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),applyBoundingBox(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);o.setTransform(y)}else applyBoundingBox(t,this._bbox),o=this._createGradient(t);return o}}function drawTriangle(n,t,e,i,a,o,c,u){const f=t.coords,p=t.colors,m=n.data,y=n.width*4;let b;f[e+1]>f[i+1]&&(b=e,e=i,i=b,b=o,o=c,c=b),f[i+1]>f[a+1]&&(b=i,i=a,a=b,b=c,c=u,u=b),f[e+1]>f[i+1]&&(b=e,e=i,i=b,b=o,o=c,c=b);const x=(f[e]+t.offsetX)*t.scaleX,E=(f[e+1]+t.offsetY)*t.scaleY,A=(f[i]+t.offsetX)*t.scaleX,S=(f[i+1]+t.offsetY)*t.scaleY,T=(f[a]+t.offsetX)*t.scaleX,D=(f[a+1]+t.offsetY)*t.scaleY;if(E>=D)return;const R=p[o],F=p[o+1],k=p[o+2],P=p[c],L=p[c+1],B=p[c+2],V=p[u],z=p[u+1],j=p[u+2],J=Math.round(E),W=Math.round(D);let K,$,N,G,I,X,et,H;for(let Q=J;Q<=W;Q++){if(Q<S){const mt=Q<E?0:(E-Q)/(E-S);K=x-(x-A)*mt,$=R-(R-P)*mt,N=F-(F-L)*mt,G=k-(k-B)*mt}else{let mt;Q>D?mt=1:S===D?mt=0:mt=(S-Q)/(S-D),K=A-(A-T)*mt,$=P-(P-V)*mt,N=L-(L-z)*mt,G=B-(B-j)*mt}let st;Q<E?st=0:Q>D?st=1:st=(E-Q)/(E-D),I=x-(x-T)*st,X=R-(R-V)*st,et=F-(F-z)*st,H=k-(k-j)*st;const dt=Math.round(Math.min(K,I)),ft=Math.round(Math.max(K,I));let bt=y*Q+dt*4;for(let mt=dt;mt<=ft;mt++)st=(K-mt)/(K-I),st<0?st=0:st>1&&(st=1),m[bt++]=$-($-X)*st|0,m[bt++]=N-(N-et)*st|0,m[bt++]=G-(G-H)*st|0,m[bt++]=255}}function drawFigure(n,t,e){const i=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,f=Math.floor(i.length/u)-1,p=u-1;for(o=0;o<f;o++){let m=o*u;for(let y=0;y<p;y++,m++)drawTriangle(n,e,i[m],i[m+1],i[m+u],a[m],a[m+1],a[m+u]),drawTriangle(n,e,i[m+u+1],i[m+1],i[m+u],a[m+u+1],a[m+1],a[m+u])}break;case"triangles":for(o=0,c=i.length;o<c;o+=3)drawTriangle(n,e,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),x=p/y,E=m/b,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-f,scaleX:1/x,scaleY:1/E},S=y+4,T=b+4,D=i.getCanvas("mesh",S,T),R=D.context,F=R.createImageData(y,b);if(e){const P=F.data;for(let L=0,B=P.length;L<B;L+=4)P[L]=e[0],P[L+1]=e[1],P[L+2]=e[2],P[L+3]=255}for(const P of this._figures)drawFigure(F,P,A);return R.putImageData(F,2,2),{canvas:D.canvas,offsetX:u-2*x,offsetY:f-2*E,scaleX:x,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){applyBoundingBox(t,this._bbox);const o=new Float32Array(2);if(a===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(t),o);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,o);const[u,f]=o;Util.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=f}else Util.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,a===PathType.SHADING?null:this._background,e.cachedCanvases);return a!==PathType.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(n){switch(n[0]){case"RadialAxial":return new RadialAxialShadingPattern(n);case"Mesh":return new MeshShadingPattern(n);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${n[0]}`)}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:f}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),info("TilingType: "+c);const y=i[0],b=i[1],x=i[2],E=i[3],A=x-y,S=E-b,T=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,T);const[D,R]=T;Util.singularValueDecompose2dScale(this.baseTransform,T);const F=D*T[0],k=R*T[1];let P=A,L=S,B=!1,V=!1;const z=Math.ceil(p*F),j=Math.ceil(m*k),J=Math.ceil(A*F),W=Math.ceil(S*k);z>=J?P=p:B=!0,j>=W?L=m:V=!0;const K=this.getSizeAndScale(P,this.ctx.canvas.width,F),$=this.getSizeAndScale(L,this.ctx.canvas.height,k),N=t.cachedCanvases.getCanvas("pattern",K.size,$.size),G=N.context,I=f.createCanvasGraphics(G,e);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,o,u),G.translate(-K.scale*y,-$.scale*b),I.transform(0,K.scale,0,0,$.scale,0,0),G.save(),I.dependencyTracker?.save(),this.clipBbox(I,y,b,x,E),I.baseTransform=getCurrentTransform(I.ctx),I.executeOperatorList(a),I.endDrawing(),I.dependencyTracker?.restore(),G.restore(),B||V){const X=N.canvas;B&&(P=p),V&&(L=m);const et=this.getSizeAndScale(P,this.ctx.canvas.width,F),H=this.getSizeAndScale(L,this.ctx.canvas.height,k),Q=et.size,st=H.size,dt=t.cachedCanvases.getCanvas("pattern-workaround",Q,st),ft=dt.context,bt=B?Math.floor(A/p):0,mt=V?Math.floor(S/m):0;for(let Mt=0;Mt<=bt;Mt++)for(let Ot=0;Ot<=mt;Ot++)ft.drawImage(X,Q*Mt,st*Ot,Q,st,0,0,Q,st);return{canvas:dt.canvas,scaleX:et.scale,scaleY:H.scale,offsetX:y,offsetY:b}}return{canvas:N.canvas,scaleX:K.scale,scaleY:$.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,i){const a=Math.max(TilingPattern.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=a?o=a:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,a,o){const c=a-e,u=o-i;t.ctx.rect(e,i,c,u),Util.axialAlignedBoundingBox([e,i,a,o],getCurrentTransform(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,o=t.current;switch(e){case PaintType.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=u;break;case PaintType.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new FormatError(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,o){let c=i;a!==PathType.SHADING&&(c=Util.transform(c,e.baseTransform),this.matrix&&(c=Util.transform(c,this.matrix)));const u=this.createPatternCanvas(e,o);let f=new DOMMatrix(c);f=f.translate(u.offsetX,u.offsetY),f=f.scale(1/u.scaleX,1/u.scaleY);const p=t.createPattern(u.canvas,"repeat");return p.setTransform(f),p}}function convertBlackAndWhiteToRGBA({src:n,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=util_FeatureTest.isLittleEndian?4278190080:255,[f,p]=c?[o,u]:[u,o],m=i>>3,y=i&7,b=n.length;e=new Uint32Array(e.buffer);let x=0;for(let E=0;E<a;E++){for(const S=t+m;t<S;t++){const T=t<b?n[t]:255;e[x++]=T&128?p:f,e[x++]=T&64?p:f,e[x++]=T&32?p:f,e[x++]=T&16?p:f,e[x++]=T&8?p:f,e[x++]=T&4?p:f,e[x++]=T&2?p:f,e[x++]=T&1?p:f}if(y===0)continue;const A=t<b?n[t++]:255;for(let S=0;S<y;S++)e[x++]=A&1<<7-S?p:f}return{srcPos:t,destPos:x}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,a,o,c,u){t.transform(e,i,a,o,c,u),this.__originalTransform(e,i,a,o,c,u)},n.setTransform=function(e,i,a,o,c,u){t.setTransform(e,i,a,o,c,u),this.__originalSetTransform(e,i,a,o,c,u)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,a,o,c,u){t.bezierCurveTo(e,i,a,o,c,u),this.__originalBezierCurveTo(e,i,a,o,c,u)},n.rect=function(e,i,a,o){t.rect(e,i,a,o),this.__originalRect(e,i,a,o)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function drawImageAtIntegerCoords(n,t,e,i,a,o,c,u,f,p){const[m,y,b,x,E,A]=getCurrentTransform(n);if(y===0&&b===0){const D=c*m+E,R=Math.round(D),F=u*x+A,k=Math.round(F),P=(c+f)*m+E,L=Math.abs(Math.round(P)-R)||1,B=(u+p)*x+A,V=Math.abs(Math.round(B)-k)||1;return n.setTransform(Math.sign(m),0,0,Math.sign(x),R,k),n.drawImage(t,e,i,a,o,0,0,L,V),n.setTransform(m,y,b,x,E,A),[L,V]}if(m===0&&x===0){const D=u*b+E,R=Math.round(D),F=c*y+A,k=Math.round(F),P=(u+p)*b+E,L=Math.abs(Math.round(P)-R)||1,B=(c+f)*y+A,V=Math.abs(Math.round(B)-k)||1;return n.setTransform(0,Math.sign(y),Math.sign(b),0,R,k),n.drawImage(t,e,i,a,o,0,0,V,L),n.setTransform(m,y,b,x,E,A),[V,L]}n.drawImage(t,e,i,a,o,c,u,f,p);const S=Math.hypot(m,y),T=Math.hypot(b,x);return[S*f,T*p]}class CanvasExtraState{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=FONT_IDENTITY_MATRIX;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=TextRenderingMode.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=MIN_MAX_INIT.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=PathType.FILL,e=null){const i=this.minMax.slice();if(t===PathType.STROKE){e||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(e,XY);const a=XY[0]*this.lineWidth/2,o=XY[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const t=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(t=PathType.FILL,e=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function putBinaryImageData(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%FULL_CHUNK_HEIGHT,o=(e-a)/FULL_CHUNK_HEIGHT,c=a===0?o:o+1,u=n.createImageData(i,FULL_CHUNK_HEIGHT);let f=0,p;const m=t.data,y=u.data;let b,x,E,A;if(t.kind===util_ImageKind.GRAYSCALE_1BPP){const S=m.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),D=T.length,R=i+7>>3,F=4294967295,k=util_FeatureTest.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(E=b<o?FULL_CHUNK_HEIGHT:a,p=0,x=0;x<E;x++){const P=S-f;let L=0;const B=P>R?i:P*8-7,V=B&-8;let z=0,j=0;for(;L<V;L+=8)j=m[f++],T[p++]=j&128?F:k,T[p++]=j&64?F:k,T[p++]=j&32?F:k,T[p++]=j&16?F:k,T[p++]=j&8?F:k,T[p++]=j&4?F:k,T[p++]=j&2?F:k,T[p++]=j&1?F:k;for(;L<B;L++)z===0&&(j=m[f++],z=128),T[p++]=j&z?F:k,z>>=1}for(;p<D;)T[p++]=0;n.putImageData(u,0,b*FULL_CHUNK_HEIGHT)}}else if(t.kind===util_ImageKind.RGBA_32BPP){for(x=0,A=i*FULL_CHUNK_HEIGHT*4,b=0;b<o;b++)y.set(m.subarray(f,f+A)),f+=A,n.putImageData(u,0,x),x+=FULL_CHUNK_HEIGHT;b<c&&(A=i*a*4,y.set(m.subarray(f,f+A)),n.putImageData(u,0,x))}else if(t.kind===util_ImageKind.RGB_24BPP)for(E=FULL_CHUNK_HEIGHT,A=i*E,b=0;b<c;b++){for(b>=o&&(E=a,A=i*E),p=0,x=A;x--;)y[p++]=m[f++],y[p++]=m[f++],y[p++]=m[f++],y[p++]=255;n.putImageData(u,0,b*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${t.kind}`)}function putBinaryImageMask(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%FULL_CHUNK_HEIGHT,o=(e-a)/FULL_CHUNK_HEIGHT,c=a===0?o:o+1,u=n.createImageData(i,FULL_CHUNK_HEIGHT);let f=0;const p=t.data,m=u.data;for(let y=0;y<c;y++){const b=y<o?FULL_CHUNK_HEIGHT:a;({srcPos:f}=convertBlackAndWhiteToRGBA({src:p,srcPos:f,dest:m,width:i,height:b,nonBlackColor:0})),n.putImageData(u,0,y*FULL_CHUNK_HEIGHT)}}function copyCtxState(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function resetCtxToDefault(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function getImageSmoothingEnabled(n,t){if(t)return!0;Util.singularValueDecompose2dScale(n,XY);const e=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=e&&XY[1]<=e}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};class CanvasGraphics{constructor(t,e,i,a,o,{optionalContentConfig:c,markedContentStack:u=null},f,p,m){this.ctx=t,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,i){const f=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(t,e,i,a,o){const c=t.argsArray,u=t.fnArray;let f=e||0;const p=c.length;if(p===f)return f;const m=p-f>EXECUTION_STEPS&&typeof i=="function",y=m?Date.now()+EXECUTION_TIME:0;let b=0;const x=this.commonObjs,E=this.objs;let A,S;for(;;){if(a!==void 0&&f===a.nextBreakPoint)return a.breakIt(f,i),f;if(!o||o(f))if(A=u[f],S=c[f]??null,A!==OPS.dependency)S===null?this[A](f):this[A](f,...S);else for(const T of S){this.dependencyTracker?.recordNamedData(T,f);const D=T.startsWith("g_")?x:E;if(!D.has(T))return D.get(T,i),f}if(f++,f===p)return f;if(m&&++b>EXECUTION_STEPS){if(Date.now()>y)return i(),f;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=i,f=a,p="prescale1",m,y;for(;o>2&&u>1||c>2&&f>1;){let b=u,x=f;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&f>1&&(x=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/x),m=this.cachedCanvases.getCanvas(p,b,x),y=m.context,y.clearRect(0,0,b,x),y.drawImage(t,0,0,u,f,0,0,b,x),t=m.canvas,u=b,f=x,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:f}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:o}=e,c=this.current.fillColor,u=this.current.patternFill,f=getCurrentTransform(i);let p,m,y,b;if((e.bitmap||e.data)&&e.count>1){const z=e.bitmap||e.data.buffer;m=JSON.stringify(u?f:[f.slice(0,4),c]),p=this._cachedBitmapsMap.get(z),p||(p=new Map,this._cachedBitmapsMap.set(z,p));const j=p.get(m);if(j&&!u){const J=Math.round(Math.min(f[0],f[2])+f[4]),W=Math.round(Math.min(f[1],f[3])+f[5]);return this.dependencyTracker?.recordDependencies(t,Dependencies.transformAndFill),{canvas:j,offsetX:J,offsetY:W}}y=j}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),putBinaryImageMask(b.context,e));let x=Util.transform(f,[1/a,0,0,-1/o,0,0]);x=Util.transform(x,[1,0,0,1,0,-o]);const E=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,a,o],x,E);const[A,S,T,D]=E,R=Math.round(T-A)||1,F=Math.round(D-S)||1,k=this.cachedCanvases.getCanvas("fillCanvas",R,F),P=k.context,L=A,B=S;P.translate(-L,-B),P.transform(...x),y||(y=this._scaleImage(b.canvas,getCurrentTransformInverse(P)),y=y.img,p&&u&&p.set(m,y)),P.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(P),e.interpolate),drawImageAtIntegerCoords(P,y,0,0,y.width,y.height,0,0,a,o),P.globalCompositeOperation="source-in";const V=Util.transform(getCurrentTransformInverse(P),[1,0,0,1,-L,-B]);return P.fillStyle=u?c.getPattern(i,this,V,PathType.FILL,t):c,P.fillRect(0,0,a,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,k.canvas)),this.dependencyTracker?.recordDependencies(t,Dependencies.transformAndFill),{canvas:k.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=LINE_CAP_STYLES[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=LINE_JOIN_STYLES[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,c),mirrorContextOperations(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const o=a[0],c=a[1],u=a[2]-o,f=a[3]-c;u===0||f===0||(this.genericComposeSMask(e.context,i,u,f,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,o,c,u,f,p,m,y){let b=t.canvas,x=f-m,E=p-y;if(c)if(x<0||E<0||x+i>b.width||E+a>b.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,a),T=S.context;T.drawImage(b,-x,-E),T.globalCompositeOperation="destination-atop",T.fillStyle=c,T.fillRect(0,0,i,a),T.globalCompositeOperation="source-over",b=S.canvas,x=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(x,E,i,a),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(x,E,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(f,p,i,a),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(b,x,E,i,a,f,p,i,a),e.restore()}save(t){this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const c=e===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const c=i[0]=new Path2D;for(let u=0,f=o.length;u<f;)switch(o[u++]){case DrawOPS.moveTo:c.moveTo(o[u++],o[u++]);break;case DrawOPS.lineTo:c.lineTo(o[u++],o[u++]);break;case DrawOPS.curveTo:c.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case DrawOPS.closePath:c.closePath();break;default:warn(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=c}Util.axialAlignedBoundingBox(a,getCurrentTransform(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,getCurrentTransformInverse(a),PathType.STROKE,t),c){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Dependencies.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const p=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,getCurrentTransformInverse(a),PathType.FILL,t),p){const m=new Path2D;m.addPath(e,a.getTransform().invertSelf().multiplySelf(p)),e=m}u=!0}const f=this.current.getClippedPathBoundingBox();this.contentVisible&&f!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Dependencies.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,f)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Dependencies.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=NORMAL_CLIP}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=EO_CLIP}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:c,x:u,y:f,fontSize:p,path:m}of e)m&&a.addPath(m,new DOMMatrix(c).preMultiplySelf(o).translate(u,f).scale(p,-p));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||FONT_IDENTITY_MATRIX,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+e),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let f="normal";a.black?f="900":a.bold&&(f="bold");const p=a.italic?"italic":"normal";let m=i;i<MIN_FONT_SIZE?m=MIN_FONT_SIZE:i>MAX_FONT_SIZE&&(m=MAX_FONT_SIZE),this.current.fontSizeScale=i/m,this.ctx.font=`${p} ${f} ${m}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,o,c){const u=this.ctx,f=this.current,p=f.font,m=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,b=m&TextRenderingMode.FILL_STROKE_MASK,x=!!(m&TextRenderingMode.ADD_TO_PATH_FLAG),E=f.patternFill&&!p.missingFile,A=f.patternStroke&&!p.missingFile;let S;if((p.disableFontFace||x||E||A)&&!p.missingFile&&(S=p.getPathGenerator(this.commonObjs,e)),S&&(p.disableFontFace||E||A)){u.save(),u.translate(i,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,p);let T;if(b===TextRenderingMode.FILL||b===TextRenderingMode.FILL_STROKE)if(o){T=u.getTransform(),u.setTransform(...o);const D=this.#i(S,T,o);u.fill(D)}else u.fill(S);if(b===TextRenderingMode.STROKE||b===TextRenderingMode.FILL_STROKE)if(c){T||=u.getTransform(),u.setTransform(...c);const{a:D,b:R,c:F,d:k}=T,P=Util.inverseTransform(c),L=Util.transform([D,R,F,k,0,0],P);Util.singularValueDecompose2dScale(L,XY),u.lineWidth*=Math.max(XY[0],XY[1])/y,u.stroke(this.#i(S,T,c))}else u.lineWidth/=y,u.stroke(S);u.restore()}else(b===TextRenderingMode.FILL||b===TextRenderingMode.FILL_STROKE)&&(u.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,i,a,()=>u.measureText(e))),(b===TextRenderingMode.STROKE||b===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,p,y,i,a,()=>u.measureText(e)).recordDependencies(t,Dependencies.stroke),u.strokeText(e,i,a));x&&((this.pendingTextPaths||=[]).push({transform:getCurrentTransform(u),x:i,y:a,fontSize:y,path:S}),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return shadow(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Dependencies.showText).resetBBox(t),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=i.fontSizeScale,f=i.charSpacing,p=i.wordSpacing,m=i.fontDirection,y=i.textHScale*m,b=e.length,x=a.vertical,E=x?1:-1,A=a.defaultVMetrics,S=o*i.fontMatrix[0],T=i.textRenderingMode===TextRenderingMode.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),m>0?c.scale(y,-1):c.scale(y,1);let D,R;if(i.patternFill){c.save();const B=i.fillColor.getPattern(c,this,getCurrentTransformInverse(c),PathType.FILL,t);D=getCurrentTransform(c),c.restore(),c.fillStyle=B}if(i.patternStroke){c.save();const B=i.strokeColor.getPattern(c,this,getCurrentTransformInverse(c),PathType.STROKE,t);R=getCurrentTransform(c),c.restore(),c.strokeStyle=B}let F=i.lineWidth;const k=i.textMatrixScale;if(k===0||F===0){const B=i.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(B===TextRenderingMode.STROKE||B===TextRenderingMode.FILL_STROKE)&&(F=this.getSinglePixelWidth())}else F/=k;if(u!==1&&(c.scale(u,u),F/=u),c.lineWidth=F,a.isInvalidPDFjsFont){const B=[];let V=0;for(const j of e)B.push(j.unicode),V+=j.width;const z=B.join("");if(c.fillText(z,0,0),this.dependencyTracker!==null){const j=c.measureText(z);this.dependencyTracker.recordBBox(t,this.ctx,-j.actualBoundingBoxLeft,j.actualBoundingBoxRight,-j.actualBoundingBoxAscent,j.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=V*S*y,c.restore(),this.compose();return}let P=0,L;for(L=0;L<b;++L){const B=e[L];if(typeof B=="number"){P+=E*B*o/1e3;continue}let V=!1;const z=(B.isSpace?p:0)+f,j=B.fontChar,J=B.accent;let W,K,$=B.width;if(x){const I=B.vmetric||A,X=-(B.vmetric?I[1]:$*.5)*S,et=I[2]*S;$=I?-I[0]:$,W=X/u,K=(P+et)/u}else W=P/u,K=0;let N;if(a.remeasure&&$>0){N=c.measureText(j);const I=N.width*1e3/o*u;if($<I&&this.isFontSubpixelAAEnabled){const X=$/I;V=!0,c.save(),c.scale(X,1),W/=X}else $!==I&&(W+=($-I)/2e3*o/u)}if(this.contentVisible&&(B.isInFont||a.missingFile)){if(T&&!J)c.fillText(j,W,K),this.dependencyTracker?.recordCharacterBBox(t,c,N?{bbox:null}:a,o/u,W,K,()=>N??c.measureText(j));else if(this.paintChar(t,j,W,K,D,R),J){const I=W+o*J.offset.x/u,X=K-o*J.offset.y/u;this.paintChar(t,J.fontChar,I,X,D,R)}}const G=x?$*S-z*m:$*S+z*m;P+=G,V&&c.restore()}x?i.y-=P:i.x+=P*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,o=a.font,c=a.fontSize,u=a.fontDirection,f=o.vertical?1:-1,p=a.charSpacing,m=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||FONT_IDENTITY_MATRIX,x=e.length,E=a.textRenderingMode===TextRenderingMode.INVISIBLE;let A,S,T,D;if(E||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,u);const R=this.dependencyTracker;for(this.dependencyTracker=R?new CanvasNestedDependencyTracker(R,t):null,A=0;A<x;++A){if(S=e[A],typeof S=="number"){D=f*S*c/1e3,this.ctx.translate(D,0),a.x+=D*y;continue}const F=(S.isSpace?m:0)+p,k=o.charProcOperatorList[S.operatorListId];k?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...b),this.executeOperatorList(k),this.restore()):warn(`Type3 character "${S.operatorListId}" is not available.`);const P=[S.width,0];Util.applyTransform(P,b),T=P[0]*c+F,i.translate(T,0),a.x+=T*y}i.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,o,c,u){const f=new Path2D;f.rect(a,o,c-a,u-o),this.ctx.clip(f),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,o,u).recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||getCurrentTransform(this.ctx),o={createCanvasGraphics:(c,u)=>new CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,u,!0):null)};i=new TilingPattern(e,this.ctx,o,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=getShadingPattern(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,getCurrentTransformInverse(i),PathType.SHADING,t);const o=getCurrentTransformInverse(i);if(o){const{width:c,height:u}=i.canvas,f=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,c,u],o,f);const[p,m,y,b]=f;this.ctx.fillRect(p,m,y-p,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Dependencies.transform).recordDependencies(t,Dependencies.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=getCurrentTransform(this.ctx),i)){Util.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,c,u]=i,f=new Path2D;f.rect(a,o,c-a,u-o),this.ctx.clip(f),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||info("TODO: Support non-isolated groups."),e.knockout&&warn("Knockout groups not supported.");const a=getCurrentTransform(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(e.bbox,getCurrentTransform(i),o);const c=[0,0,i.canvas.width,i.canvas.height];o=Util.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),f=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),m=Math.max(Math.ceil(o[3])-f,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,m),x=b.context;x.translate(-u,-f),x.transform(...a);let E=new Path2D;const[A,S,T,D]=e.bbox;if(E.rect(A,S,T-A,D-S),e.matrix){const R=new Path2D;R.addPath(E,new DOMMatrix(e.matrix)),E=R}x.clip(E),e.smask&&this.smaskStack.push({canvas:b.canvas,context:x,offsetX:u,offsetY:f,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,f),i.save()),copyCtxState(i,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=getCurrentTransform(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,o,c){if(this.#t(),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],f=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=f,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:p}=this,m=Math.ceil(u*this.outputScaleX*p),y=Math.ceil(f*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,f*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(t);const p=new Path2D;p.rect(i[0],i[1],u,f),this.ctx.clip(p)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,o=this._createMaskCanvas(t,e),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,o=0,c,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const f=this.ctx;f.save();const p=getCurrentTransform(f);f.transform(i,a,o,c,0,0);const m=this._createMaskCanvas(t,e);f.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const x=Util.transform(p,[i,a,o,c,u[y],u[y+1]]);f.drawImage(m.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(t,this.ctx,x[4],x[4]+m.canvas.width,x[5],x[5]+m.canvas.height)}f.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Dependencies.transformAndFill);for(const c of e){const{data:u,width:f,height:p,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",f,p),b=y.context;b.save();const x=this.getObject(t,u,c);putBinaryImageMask(b,x),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,getCurrentTransformInverse(i),PathType.FILL,t):a,b.fillRect(0,0,f,p),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),drawImageAtIntegerCoords(i,y.canvas,0,0,f,p,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,f,0,p),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,o){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){warn("Dependent image isn't ready yet");return}const u=c.width,f=c.height,p=[];for(let m=0,y=o.length;m<y;m+=2)p.push({transform:[i,0,0,a,o[m],o[m+1]],x:0,y:0,w:u,h:f});this.paintInlineImageXObjectGroup(t,c,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/i,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,a).context;putBinaryImageData(m,e),u=this.applyTransferMapsToCanvas(m)}const f=this._scaleImage(u,getCurrentTransformInverse(o));o.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,i,-a,0).recordDependencies(t,Dependencies.imageXObject).recordOperation(t),drawImageAtIntegerCoords(o,f.img,0,0,f.paintWidth,f.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const c=e.width,u=e.height,p=this.cachedCanvases.getCanvas("inlineImage",c,u).context;putBinaryImageData(p,e),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),drawImageAtIntegerCoords(a,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Dependencies.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===EO_CLIP?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=getCurrentTransform(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:o}=this.ctx.getTransform();let c,u;if(i===0&&a===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)c=u=1/f;else{const m=f*t;c=u=m<1?1/m:1}else if(t===0)c=1/f,u=1/p;else{const m=f*t,y=p*t;c=m<1?1/m:1,u=y<1?1/y:1}}else{const f=Math.abs(e*o-i*a),p=Math.hypot(e,i),m=Math.hypot(a,o);if(t===0)c=m/f,u=p/f;else{const y=t*f;c=m>y?m/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){i.lineWidth=(a||1)*o,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(o,c),SCALE_MATRIX.a=1/o,SCALE_MATRIX.d=1/c;const f=new Path2D;if(f.addPath(t,SCALE_MATRIX),u.length>0){const p=Math.max(o,c);i.setLineDash(u.map(m=>m/p)),i.lineDashOffset/=p}i.lineWidth=a||1,i.stroke(f),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const n in OPS)CanvasGraphics.prototype[n]!==void 0&&(CanvasGraphics.prototype[OPS[n]]=CanvasGraphics.prototype[n]);class CssFontInfo{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const p of CssFontInfo.strings){const m=e.encode(t[p]);i[p]=m,a+=4+m.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),u=new DataView(o);let f=0;for(const p of CssFontInfo.strings){const m=i[p],y=m.length;u.setUint32(f,y),c.set(m,f+4),f+=4+y}return assert(f===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){assert(t<CssFontInfo.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class SystemFontInfo{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const b of SystemFontInfo.strings){const x=e.encode(t[b]);i[b]=x,a+=4+x.length}a+=4;let o,c,u=1+a;t.style&&(o=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+o.length+4+c.length);const f=new ArrayBuffer(u),p=new Uint8Array(f),m=new DataView(f);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,a=0;for(const b of SystemFontInfo.strings){const x=i[b],E=x.length;a+=4+E,m.setUint32(y,E),p.set(x,y+4),y+=4+E}return m.setUint32(y-a-4,a),t.style&&(m.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,m.setUint32(y,c.length),p.set(c,y+4),y+=4+c.length),assert(y<=f.byteLength,"SubstitionInfo.write: Buffer overflow"),f.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){assert(t<SystemFontInfo.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:o}}}class FontInfo{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#s=this.#n+1+6;#r;#a;#o;constructor({data:t,extra:e}){this.#r=t,this.#a=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){assert(t<FontInfo.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return assert(t<FontInfo.numbers.length,"Invalid number index"),this.#o.getFloat64(FontInfo.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=FontInfo.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=FontInfo.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=FontInfo.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){assert(t<FontInfo.strings.length,"Invalid string index");let e=FontInfo.#s+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,e+4,i)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=FontInfo.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=FontInfo.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=FontInfo.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#r,t+4,a)),new CssFontInfo(o.buffer)}get systemFontInfo(){let t=FontInfo.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,t+4,i)),new SystemFontInfo(a.buffer)}static write(t){const e=t.systemFontInfo?SystemFontInfo.write(t.systemFontInfo):null,i=t.cssFontInfo?CssFontInfo.write(t.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const A of FontInfo.strings)o[A]=a.encode(t[A]),c+=4+o[A].length;const u=FontInfo.#s+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),f=new ArrayBuffer(u),p=new Uint8Array(f),m=new DataView(f);let y=0;const b=FontInfo.bools.length;let x=0,E=0;for(let A=0;A<b;A++){const S=t[FontInfo.bools[A]];x|=(S===void 0?0:S?2:1)<<E,E+=2,(E===8||A===b-1)&&(m.setUint8(y++,x),x=0,E=0)}assert(y===FontInfo.#t,"FontInfo.write: Boolean properties offset mismatch");for(const A of FontInfo.numbers)m.setFloat64(y,t[A]),y+=8;if(assert(y===FontInfo.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const A of t.bbox)m.setInt16(y,A,!0),y+=2}else m.setUint8(y++,0),y+=8;if(assert(y===FontInfo.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const A of t.fontMatrix)m.setFloat64(y,A,!0),y+=8}else m.setUint8(y++,0),y+=48;if(assert(y===FontInfo.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const A of t.defaultVMetrics)m.setInt16(y,A,!0),y+=2}else m.setUint8(y++,0),y+=6;assert(y===FontInfo.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(FontInfo.#s,0),y+=4;for(const A of FontInfo.strings){const S=o[A],T=S.length;m.setUint32(y,T),p.set(S,y+4),y+=4+T}if(m.setUint32(FontInfo.#s,y-FontInfo.#s-4),!e)m.setUint32(y,0),y+=4;else{const A=e.byteLength;m.setUint32(y,A),assert(y+4+A<=f.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+A}if(!i)m.setUint32(y,0),y+=4;else{const A=i.byteLength;m.setUint32(y,A),assert(y+4+A<=f.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(i),y+4),y+=4+A}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),assert(y<=f.byteLength,"FontInfo.write: Buffer overflow"),f.transferToFixedLength(y)}}class GlobalWorkerOptions{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Metadata{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const INTERNAL=Symbol("INTERNAL");class OptionalContentGroup{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:o}){this.#t=!!(t&RenderingIntentFlag.DISPLAY),this.#e=!!(t&RenderingIntentFlag.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==INTERNAL&&unreachable("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class OptionalContentConfig{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=RenderingIntentFlag.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new OptionalContentGroup(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(INTERNAL,!1);for(const i of t.on)this.#e.get(i)._setVisible(INTERNAL,!0);for(const i of t.off)this.#e.get(i)._setVisible(INTERNAL,!1);this.#i=this.getHash()}}#s(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=this.#s(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return warn(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return info("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(warn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return warn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return warn(`Unknown optional content policy ${t.policy}.`),!0}return warn(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){warn(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(INTERNAL,!1,!0);a._setVisible(INTERNAL,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#e.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new MurmurHash3_64;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class PDFDataTransportStream{constructor(t,{disableRange:e=!1,disableStream:i=!1}){assert(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});assert(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PDFDataTransportStreamRangeReader(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=isPdfFile(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let m=u(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=c(n),e){const m=p(e);return o(m)}if(e=i("filename","i").exec(n),e){e=e[1];let m=u(e);return m=p(m),o(m)}function i(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),x=stringToBytes(y);y=b.decode(x),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function c(m){const y=[];let b;const x=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=x.exec(m))!==null;){let[,A,S,T]=b;if(A=parseInt(A,10),A in y){if(A===0)break;continue}y[A]=[S,T]}const E=[];for(let A=0;A<y.length&&A in y;++A){let[S,T]=y[A];T=u(T),S&&(T=unescape(T),A===0&&(T=f(T))),E.push(T)}return E.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const x=y[b].indexOf('"');x!==-1&&(y[b]=y[b].slice(0,x),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function f(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),E=m.slice(y+1).replace(/^[^']*'/,"");return a(b,E)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,x,E){if(x==="q"||x==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,S){return String.fromCharCode(parseInt(S,16))}),a(b,E);try{E=atob(E)}catch{}return a(b,E)})}return""}function createHeaders(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function getResponseOrigin(n){return URL.parse(n)?.origin??null}function validateRangeRequestCapabilities({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function extractFilenameFromHeader(n){const t=n.get("Content-Disposition");if(t){let e=getFilenameFromContentDispositionHeader(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(isPdfFile(e))return e}return null}function createResponseError(n,t){return new ResponseException(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function validateResponseStatus(n){return n===200||n===206}function createFetchOptions(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(warn(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class PDFFetchStream{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PDFFetchStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,createFetchOptions(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=getResponseOrigin(o.url),!validateResponseStatus(o.status))throw createResponseError(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:f}=validateRangeRequestCapabilities({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=f||this._contentLength,this._filename=extractFilenameFromHeader(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const c=a.url;fetch(c,createFetchOptions(o,this._withCredentials,this._abortController)).then(u=>{const f=getResponseOrigin(u.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!validateResponseStatus(u.status))throw createResponseError(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:getArrayBuffer(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(n){const t=n.response;return typeof t!="string"?t:stringToBytes(t).buffer}class NetworkManager{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=createHeaders(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=PARTIAL_CONTENT_RESPONSE):a.expectedStatus=OK_RESPONSE,e.responseType="arraybuffer",assert(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const o=a.status||OK_RESPONSE;if(!(o===OK_RESPONSE&&i.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&o!==i.expectedStatus){i.onError(a.status);return}const u=network_getArrayBuffer(a);if(o===PARTIAL_CONTENT_RESPONSE){const f=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?i.onDone({begin:parseInt(p[1],10),chunk:u}):(warn('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new PDFNetworkStreamRangeRequestReader(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFNetworkStreamFullRequestReader{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=getResponseOrigin(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[f,...p]=u.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=validateRangeRequestCapabilities({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=extractFilenameFromHeader(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=createResponseError(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=createResponseError(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(n){if(urlRegex.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class PDFNodeStream{constructor(t){this.source=t,this.url=parseUrlOrPath(t.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PDFNodeStreamFsRangeReader(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class PDFNodeStreamFsFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=createResponseError(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");class PDFObjects{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:INITIAL_DATA}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==INITIAL_DATA}delete(t){const e=this.#t[t];return!e||e.data===INITIAL_DATA?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==INITIAL_DATA&&(yield[t,e])}}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;let TextLayer$1=class Sn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#T=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(f){f.enqueue(t),f.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*OutputScale.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=i.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=a,this.#a=o,Sn.#R(),setLayerDimensions(e,i),this.#t.promise.finally(()=>{Sn.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),Sn.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*OutputScale.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,setLayerDimensions(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const o={div:null,properties:null,ctx:Sn.#M(this.#s)};for(const c of this.#u)o.properties=this.#m.get(c),o.div=c,this.#_(o)}}cancel(){const t=new AbortException("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#r.ctx??=Sn.#M(this.#s);const e=this.#u,i=this.#g;for(const a of t){if(e.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#S(a)}}#S(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=Util.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=Sn.fontFamilyMap.get(u)||u;const f=Math.hypot(a[2],a[3]),p=f*Sn.#I(u,c,this.#s);let m,y;o===0?(m=a[4],y=a[5]-p):(m=a[4]+p*Math.sin(o),y=a[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#l?(x.left=`${(100*m/this.#o).toFixed(2)}%`,x.top=`${(100*y/this.#a).toFixed(2)}%`):(x.left=`${b}${m.toFixed(2)}px)`,x.top=`${b}${y.toFixed(2)}px)`),x.fontSize=`${b}${(Sn.#A*f).toFixed(2)}px)`,x.fontFamily=u,i.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);A!==S&&Math.max(A,S)/Math.min(A,S)>1.5&&(E=!0)}if(E&&(i.canvasWidth=c.vertical?t.height:t.width),this.#m.set(e,i),this.#r.div=e,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#_(t){const{div:e,properties:i,ctx:a}=t,{style:o}=e;let c="";if(Sn.#A>1&&(c=`scale(${1/Sn.#A})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=o,{canvasWidth:f,fontSize:p}=i;Sn.#D(a,p*this.#h,u);const{width:m}=a.measureText(e.textContent);m>0&&(c=`scaleX(${f*this.#h/m}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#M(t=null){let e=this.#v.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#T.set(e,{size:0,family:""})}return e}static#D(t,e,i){const a=this.#T.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#R(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const a=this.#b.get(t);if(a)return a;const o=this.#M(i);o.canvas.width=o.canvas.height=DEFAULT_FONT_SIZE,this.#D(o,DEFAULT_FONT_SIZE,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+f):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),this.#b.set(t,p),p}};const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new PDFDocumentLoadingTask,{docId:e}=t,i=n.url?getUrlProp(n.url):null,a=n.data?getDataProp(n.data):null,o=n.httpHeaders||null,c=n.withCredentials===!0,u=n.password??null,f=n.range instanceof PDFDataRangeTransport$1?n.range:null,p=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let m=n.worker instanceof PDFWorker?n.worker:null;const y=n.verbosity,b=typeof n.docBaseUrl=="string"&&!isDataScheme(n.docBaseUrl)?n.docBaseUrl:null,x=getFactoryUrlProp(n.cMapUrl),E=n.cMapPacked!==!1,A=n.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),S=getFactoryUrlProp(n.iccUrl),T=getFactoryUrlProp(n.standardFontDataUrl),D=n.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),R=getFactoryUrlProp(n.wasmUrl),F=n.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),k=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,L=n.isEvalSupported!==!1,B=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!isNodeJS,V=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),z=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:isNodeJS,J=n.fontExtraProperties===!0,W=n.enableXfa===!0,K=n.ownerDocument||globalThis.document,$=n.disableRange===!0,N=n.disableStream===!0,G=n.disableAutoFetch===!0,I=n.pdfBug===!0,X=n.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),et=n.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),H=n.enableHWA===!0,Q=n.useWasm!==!1,st=f?f.length:n.length??NaN,dt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!isNodeJS&&!j,ft=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(A===DOMCMapReaderFactory&&D===DOMStandardFontDataFactory&&F===DOMWasmFactory&&x&&T&&R&&isValidFetchUrl(x,document.baseURI)&&isValidFetchUrl(T,document.baseURI)&&isValidFetchUrl(R,document.baseURI)),bt=null;setVerbosityLevel(y);const mt={canvasFactory:new X({ownerDocument:K,enableHWA:H}),filterFactory:new et({docId:e,ownerDocument:K}),cMapReaderFactory:ft?null:new A({baseUrl:x,isCompressed:E}),standardFontDataFactory:ft?null:new D({baseUrl:T}),wasmFactory:ft?null:new F({baseUrl:R})};m||(m=PDFWorker.create({verbosity:y,port:GlobalWorkerOptions.workerPort}),t._worker=m);const Mt={docId:e,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:G,rangeChunkSize:p,length:st,docBaseUrl:b,enableXfa:W,evaluatorOptions:{maxImageSize:P,disableFontFace:j,ignoreErrors:k,isEvalSupported:L,isOffscreenCanvasSupported:B,isImageDecoderSupported:V,canvasMaxAreaInBytes:z,fontExtraProperties:J,useSystemFonts:dt,useWasm:Q,useWorkerFetch:ft,cMapUrl:x,iccUrl:S,standardFontDataUrl:T,wasmUrl:R}},Ot={ownerDocument:K,pdfBug:I,styleElement:bt,loadingParams:{disableAutoFetch:G,enableXfa:W}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const wt=m.messageHandler.sendWithPromise("GetDocRequest",Mt,a?[a.buffer]:null);let $t;if(f)$t=new PDFDataTransportStream(f,{disableRange:$,disableStream:N});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const te=isValidFetchUrl(i)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;$t=new te({url:i,length:st,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:$,disableStream:N})}return wt.then(te=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const It=new MessageHandler(e,te,m.port),yt=new WorkerTransport(It,t,$t,Ot,mt,H);t._transport=yt,It.send("Ready",null)})}).catch(t._capability.reject),t}class PDFDocumentLoadingTask{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${PDFDocumentLoadingTask.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let PDFDataRangeTransport$1=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#s=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#s.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#s)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class PDFPageProxy{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new StatTimer:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:o=AnnotationMode.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:f=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:x=!1,operationsFilter:E=null}){this._stats?.time("Overall");const A=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:S,cacheKey:T}=A;this.#t=!1,f||=this._transport.getOptionalContentConfig(S);let D=this._intentStates.get(T);D||(D=Object.create(null),this._intentStates.set(T,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const R=!!(S&RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(A));const F=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(x||F),P=V=>{if(D.renderTasks.delete(L),k){const z=L.gfx?.dependencyTracker.take();z&&(L.stepper&&L.stepper.setOperatorBBoxes(z,L.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=z))}R&&(this.#t=!0),this.#e(),V?(L.capability.reject(V),this._abortOperatorList({intentState:D,reason:V instanceof Error?V:new Error(V)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new InternalRenderTask({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:k?new CanvasDependencyTracker(e,D.operatorList.length,F):null,viewport:i,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:E});(D.renderTasks||=new Set).add(L);const B=L.task;return Promise.all([D.displayReadyCapability.promise,f]).then(([V,z])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(z.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:V,optionalContentConfig:z}),L.operatorListChanged()}).catch(P),B}getOperatorList({intent:t="display",annotationMode:e=AnnotationMode.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(f))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let f;return u.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(f),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>XfaText.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function o(){c.read().then(function({value:f,done:p}){if(p){i(u);return}u.lang??=f.lang,Object.assign(u.styles,f.styles),u.items.push(...f.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new StatTimer),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:c}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},c).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new AbortException(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Fi,Mn,li,er,qs,nr,ir,Ye,Us,$d,Ud,Ma,Vr,Gs;const ve=class ve{constructor({name:t=null,port:e=null,verbosity:i=getVerbosityLevel()}={}){jn(this,Ye);jn(this,Fi,Promise.withResolvers());jn(this,Mn,null);jn(this,li,null);jn(this,er,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(ye(ve,ir).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ye(ve,ir).set(e,this),zn(this,Ye,$d).call(this,e)}else zn(this,Ye,Ud).call(this)}get promise(){return ye(this,Fi).promise}get port(){return ye(this,li)}get messageHandler(){return ye(this,Mn)}destroy(){this.destroyed=!0,ye(this,er)?.terminate(),tn(this,er,null),ye(ve,ir).delete(ye(this,li)),tn(this,li,null),ye(this,Mn)?.destroy(),tn(this,Mn,null)}static create(t){const e=ye(this,ir).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ve(t)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>ye(this,Vr,Gs)?ye(this,Vr,Gs):(await import(this.workerSrc)).WorkerMessageHandler)())}};Fi=new WeakMap,Mn=new WeakMap,li=new WeakMap,er=new WeakMap,qs=new WeakMap,nr=new WeakMap,ir=new WeakMap,Ye=new WeakSet,Us=function(){ye(this,Fi).resolve(),ye(this,Mn).send("configure",{verbosity:this.verbosity})},$d=function(t){tn(this,li,t),tn(this,Mn,new MessageHandler("main","worker",t)),ye(this,Mn).on("ready",()=>{}),zn(this,Ye,Us).call(this)},Ud=function(){if(ye(ve,nr)||ye(ve,Vr,Gs)){zn(this,Ye,Ma).call(this);return}let{workerSrc:t}=ve;try{ve._isSameOrigin(window.location,t)||(t=ve._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new MessageHandler("main","worker",e),a=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?ye(this,Fi).reject(new Error("Worker was destroyed")):zn(this,Ye,Ma).call(this)},o=new AbortController;e.addEventListener("error",()=>{ye(this,er)||a()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}tn(this,Mn,i),tn(this,li,e),tn(this,er,e),zn(this,Ye,Us).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{zn(this,Ye,Ma).call(this)}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{info("The worker has been disabled.")}zn(this,Ye,Ma).call(this)},Ma=function(){ye(ve,nr)||(warn("Setting up fake worker."),tn(ve,nr,!0)),ve._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ye(this,Fi).reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;tn(this,li,e);const i=`fake${Hd(ve,qs)._++}`,a=new MessageHandler(i+"_worker",i,e);t.setup(a,e),tn(this,Mn,new MessageHandler(i,i+"_worker",e)),zn(this,Ye,Us).call(this)}).catch(t=>{ye(this,Fi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Vr=new WeakSet,Gs=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},jn(ve,Vr),jn(ve,qs,0),jn(ve,nr,!1),jn(ve,ir,new WeakMap),isNodeJS&&(tn(ve,nr,!0),GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),ve._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},ve._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ve.fromPort=t=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ve.create(t)};let PDFWorker=ve;class WorkerTransport{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#s=null;constructor(t,e,i,a,o,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#r(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(t,e=AnnotationMode.ENABLE,i=null,a=!1,o=!1){let c=RenderingIntentFlag.DISPLAY,u=SerializableEmpty;switch(t){case"any":c=RenderingIntentFlag.ANY;break;case"display":break;case"print":c=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${t}`)}const f=c&RenderingIntentFlag.PRINT&&i instanceof PrintAnnotationStorage?i:this.annotationStorage;switch(e){case AnnotationMode.DISABLE:c+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:c+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:c+=RenderingIntentFlag.ANNOTATIONS_STORAGE,u=f.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=RenderingIntentFlag.IS_EDITING),o&&(c+=RenderingIntentFlag.OPLIST);const{ids:p,hash:m}=f.modifiedIds,y=[c,u.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),this._networkStream?.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}assert(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}assert(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(i,this))}),t.on("DocException",i=>{e._capability.reject(wrapReason(i))}),t.on("PasswordRequest",i=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw wrapReason(i);const a=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};e.onPassword(a,i.code)}catch(a){this.#s.reject(a)}return this.#s.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const m=o.error;warn(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const c=new FontInfo(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,f=new FontFaceObject(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(i,f)});break;case"CopyLocalImage":const{imageRef:p}=o;assert(p,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,y]of m.objs)if(y?.ref===p)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,o,c])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const c=new PDFPageProxy(e,o,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#i.set(e,a),a}getPageIndex(t){return isRefProxy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new OptionalContentConfig(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(t){if(!isRefProxy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class RenderTask{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class InternalRenderTask{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:x=!1,operationsFilter:E=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=x,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),InternalRenderTask.#e.delete(this._canvas),t||=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="5.4.296",build="f56dc8601";let ColorPicker$1=class Vn{#t=null;#e=null;#i;#n=null;#s=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Vn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Vn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Vn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Vn.prototype._moveToPrevious],[["Home","mac+Home"],Vn.prototype._moveToBeginning],[["End","mac+End"],Vn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#a=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Vn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",Vn.#d[i]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){Vn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#s=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}};class BasicColorPicker{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,BasicColorPicker.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",BasicColorPicker.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function scaleAndClamp(n){return Math.max(0,Math.min(255,255*n))}class ColorConverters{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=scaleAndClamp(t),[t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(scaleAndClamp)}static RGB_HTML(t){return`#${t.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[scaleAndClamp(1-Math.min(1,t+a)),scaleAndClamp(1-Math.min(1,i+a)),scaleAndClamp(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,o=1-e,c=1-i,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class BaseSVGFactory{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(t){return document.createElementNS(SVG_NS,t)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(t);case AnnotationType.TEXT:return new TextAnnotationElement(t);case AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t);case"Sig":return new SignatureWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case AnnotationType.POPUP:return new PopupAnnotationElement(t);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case AnnotationType.LINE:return new LineAnnotationElement(t);case AnnotationType.SQUARE:return new SquareAnnotationElement(t);case AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case AnnotationType.CARET:return new CaretAnnotationElement(t);case AnnotationType.INK:return new InkAnnotationElement(t);case AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case AnnotationType.STAMP:return new StampAnnotationElement(t);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}class AnnotationElement{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AnnotationElement._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let o=-1/0,c=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>c?(c=e[u+1],o=e[u+2]):e[u+1]===c&&(o=Math.max(o,e[u+2]));return[o,c]}if(i?.length>=1){for(const u of i)for(let f=0,p=u.length;f<p;f+=2)u[f+1]>c?(c=u[f+1],o=u[f]):u[f+1]===c&&(o=Math.max(o,u[f]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/i,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:f}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+f)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof PopupAnnotationElement){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:u,height:f}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(A>0||S>0){const D=`calc(${A}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=D}else if(this instanceof RadioButtonWidgetAnnotationElement){const D=`calc(${u}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;c.borderRadius=D}switch(e.borderStyle.style){case AnnotationBorderStyleType.SOLID:c.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:c.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:c.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(this.#e=!0,c.borderColor=Util.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const p=Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:x}=a.rawDims;c.left=`${100*(p[0]-b)/m}%`,c.top=`${100*(p[1]-x)/y}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(c.width=`${100*u/m}%`,c.height=`${100*f/y}%`):this.setRotation(E,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[i]=ColorConverters[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:ColorConverters[`${c}_rgb`](u)})};return shadow(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,o]of Object.entries(e)){const c=i[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,o]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,S,T,D]=t.subarray(2,6);if(a===A&&o===S&&e===T&&i===D)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:A,borderWidth:S}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const f=a-e,p=o-i,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const x=m.createElement("clipPath"),E=`clippath_${this.data.id}`;x.setAttribute("id",E),x.setAttribute("clipPathUnits","objectBoundingBox"),b.append(x);for(let A=2,S=t.length;A<S;A+=8){const T=t[A],D=t[A+1],R=t[A+2],F=t[A+3],k=m.createElement("rect"),P=(R-e)/f,L=(o-D)/p,B=(T-R)/f,V=(D-F)/p;k.setAttribute("x",P),k.setAttribute("y",L),k.setAttribute("width",B),k.setAttribute("height",V),x.append(k),u?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${L}" width="${B}" height="${V}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate);const o=this.#i=new PopupAnnotationElement({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const f=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!GetElementsByNameSet.has(p)){warn(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:f,domElement:p})}return i}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&GetElementsByNameSet.has(a)&&i.push({id:c,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class EditorAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class LinkAnnotationElement extends AnnotationElement{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=i.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:o,include:c}=e,u=[];if(a.length!==0||o.length!==0){const m=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:x}of b)m.add(x)}for(const y of Object.values(this._fieldObjects))for(const b of y)m.has(b.id)===c&&u.push(b)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const f=this.annotationStorage,p=[];for(const m of u){const{id:y}=m;switch(p.push(y),m.type){case"text":{const x=m.defaultValue||"";f.setValue(y,{value:x});break}case"checkbox":case"radiobutton":{const x=m.defaultValue===m.exportValues;f.setValue(y,{value:x});break}case"combobox":case"listbox":{const x=m.defaultValue||"";f.setValue(y,{value:x});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!GetElementsByNameSet.has(b)){warn(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return util_FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,o){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}})})}_setEventListeners(t,e,i,a){for(const[o,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,o=t.style;let c;const u=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(p/(LINE_FACTOR*a))||1,y=p/m;c=Math.min(a,f(y/LINE_FACTOR))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,f(p/LINE_FACTOR))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=Util.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),o.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const f={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),GetElementsByNameSet.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:p,datetimeType:m,timeStep:y}=this.data,b=!!m&&this.enableScripting;p&&(i.title=p),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",E=>{t.setValue(e,{value:E.target.value}),this.setPropertyOnSiblings(i,"value",E.target.value,"value"),f.formattedValue=null}),i.addEventListener("resetform",E=>{const A=this.data.defaultFieldValue??"";i.value=f.userValue=A,f.formattedValue=null});let x=E=>{const{formattedValue:A}=f;A!=null&&(E.target.value=A),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",A=>{if(f.focused)return;const{target:S}=A;if(b&&(S.type=m,y&&(S.step=y)),f.userValue){const T=f.userValue;if(b)if(m==="time"){const D=new Date(T),R=[D.getHours(),D.getMinutes(),D.getSeconds()];S.value=R.map(F=>F.toString().padStart(2,"0")).join(":")}else S.value=new Date(T-TIMEZONE_OFFSET).toISOString().split(m==="date"?"T":".",1)[0];else S.value=T}f.lastCommittedValue=S.value,f.commitKey=1,this.data.actions?.Focus||(f.focused=!0)}),i.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const S={value(T){f.userValue=T.detail.value??"",b||t.setValue(e,{value:f.userValue.toString()}),T.target.value=f.userValue},formattedValue(T){const{formattedValue:D}=T.detail;f.formattedValue=D,D!=null&&T.target!==document.activeElement&&(T.target.value=D);const R={formattedValue:D};b&&(R.value=D),t.setValue(e,R)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:D}=T.detail,{target:R}=T;if(D===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",D);let F=f.userValue;!F||F.length<=D||(F=F.slice(0,D),R.value=f.userValue=F,t.setValue(e,{value:F}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(S,A)}),i.addEventListener("keydown",A=>{f.commitKey=1;let S=-1;if(A.key==="Escape"?S=0:A.key==="Enter"&&!this.data.multiLine?S=2:A.key==="Tab"&&(f.commitKey=3),S===-1)return;const{value:T}=A.target;f.lastCommittedValue!==T&&(f.lastCommittedValue=T,f.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:S,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const E=x;x=null,i.addEventListener("blur",A=>{if(!f.focused||!A.relatedTarget)return;this.data.actions?.Blur||(f.focused=!1);const{target:S}=A;let{value:T}=S;if(b){if(T&&m==="time"){const D=T.split(":").map(R=>parseInt(R,10));T=new Date(2e3,0,1,D[0],D[1],D[2]||0).valueOf(),S.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();S.type="text"}f.userValue=T,f.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:f.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}),E(A)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",A=>{f.lastCommittedValue=null;const{data:S,target:T}=A,{value:D,selectionStart:R,selectionEnd:F}=T;let k=R,P=F;switch(A.inputType){case"deleteWordBackward":{const L=D.substring(0,R).match(/\w*[^\w]*$/);L&&(k-=L[0].length);break}case"deleteWordForward":{const L=D.substring(R).match(/^[^\w]*\w*/);L&&(P+=L[0].length);break}case"deleteContentBackward":R===F&&(k-=1);break;case"deleteContentForward":R===F&&(P+=1);break}A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,change:S||"",willCommit:!1,selStart:k,selEnd:P}})}),this._setEventListeners(i,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(x&&i.addEventListener("blur",x),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return GetElementsByNameSet.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:f}=c.target;for(const p of this._getElementsByName(u,i)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(GetElementsByNameSet.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:f}=c.target;for(const p of this._getElementsByName(u,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const f={value:p=>{const m=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=m&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(f,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");GetElementsByNameSet.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,i.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),c=()=>{m.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=m=>{const y=m?"value":"textContent",{options:b,multiple:x}=a;return x?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let f=u(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const y={value(b){c?.();const x=b.detail.value,E=new Set(Array.isArray(x)?x:[x]);for(const A of a.options)A.selected=E.has(A.value);t.setValue(e,{value:u(!0)}),f=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const x=a.options,E=b.detail.remove;x[E].selected=!1,a.remove(E),x.length>0&&Array.prototype.findIndex.call(x,S=>S.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),f=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),f=u(!1)},insert(b){const{index:x,displayValue:E,exportValue:A}=b.detail.insert,S=a.children[x],T=document.createElement("option");T.textContent=E,T.value=A,S?S.before(T):a.append(T),t.setValue(e,{value:u(!0),items:p(b)}),f=u(!1)},items(b){const{items:x}=b.detail;for(;a.length!==0;)a.remove(0);for(const E of x){const{displayValue:A,exportValue:S}=E,T=document.createElement("option");T.textContent=A,T.value=S,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:p(b)}),f=u(!1)},indices(b){const x=new Set(b.detail.indices);for(const E of b.target.options)E.selected=x.has(E.index);t.setValue(e,{value:u(!0)}),f=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),a.addEventListener("input",m=>{const y=u(!0),b=u(!1);t.setValue(e,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){const{data:e,elements:i,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&AnnotationElement._hasPopupData(e)}),this.elements=i,o&&AnnotationElement._hasPopupData(e)){const c=this.popup=this.#t();for(const u of i)u.popup=c}else this.popup=null}#t(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${AnnotationPrefix}${a}`).join(",")),this.container}}class PopupElement{#t=null;#e=this.#U.bind(this);#i=this.#j.bind(this);#n=this.#F.bind(this);#s=this.#E.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#T=null;#A=null;#x=null;#C=!1;#S=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:f,rect:p,parentRect:m,open:y,commentManager:b=null}){this.#a=t,this.#A=a,this.#o=c,this.#T=u,this.#d=f,this.#r=e,this.#v=p,this.#h=m,this.#l=i,this.#t=b,this.#S=i[0],this.#c=PDFDateString.toDateObject(o),this.trigger=i.flatMap(x=>x.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,y&&this.#E())}#M(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#s,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#D(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#D(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#S.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#S.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#m=document.createElement("button");c.className="annotationCommentButton";const u=this.#S.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#R(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#R(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#m;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#_||=this.#S.commentText,this.#_}set comment(t){t!==this.comment&&(this.#S.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:i}=this.#m.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#S.layer.getBoundingClientRect();return[(t-a)/c,(e+i-o)/u]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#b||this.commentButtonPosition.map(p=>p/100),a=this.parentBoundingClientRect,{x:o,y:c,width:u,height:f}=a;this.#t.showDialog(null,this,o+e*u,c+i*f,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=Util.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}renderRichText({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#k(){const t=this.#T,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#T.html||null}get#L(){return this.#k?.attributes?.style?.fontSize||0}get#B(){return this.#k?.attributes?.style?.color||null}#O(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#B,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return i}#U(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#E()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#I(),this.#_=e.text)),t&&(this.#y=null,this.#D(),this.#R());return}if(i||e?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),e&&e.text&&(this.#T=this.#O(e.text),this.#c=PDFDateString.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#T}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#w(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#v;for(const E of this.#l)if(!u||Util.intersect(E.data.rect,u)!==null){u=E.data.rect,c=!0;break}const f=Util.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=c?u[2]-u[0]+5:0,y=f[0]+m,b=f[1];this.#u=[100*(y-a)/e,100*(b-o)/i];const{style:x}=this.#a;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#E(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#F(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#e)):(this.#j(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#e))}#F(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#w(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#j(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#C&&(this.#g||this.#F(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class LineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class SquareAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",e-o),c.setAttribute("height",i-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CircleAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-o/2),c.setAttribute("ry",i/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolylineAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:o,height:c}=this;if(!e)return this.container;const u=this.svgFactory.create(o,c,!0);let f=[];for(let m=0,y=e.length;m<y;m+=2){const b=e[m]-t[0],x=t[3]-e[m+1];f.push(`${b},${x}`)}f=f.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",f),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class InkAnnotationElement extends AnnotationElement{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:f}=this.#i(e,t),p=this.svgFactory.create(u,f,!0),m=this.#t=this.svgFactory.createElement("svg:g");p.append(m),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let y=0,b=i.length;y<b;y++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",i[y].join(",")),m.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),i)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:u,height:f}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${f}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=util_FeatureTest.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let AnnotationLayer$1=class Gd{#t=null;#e=null;#i=null;#n=new Map;#s=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u,commentManager:f,linkService:p,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#s=u||null,this.#r=p||null,this.#i=m||new AnnotationStorage,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=f||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const a=t.firstChild||t,o=a.id=`${AnnotationPrefix}${e}`,c=await this.#s?.getAriaAttributes(o);if(c)for(const[u,f]of c)a.setAttribute(u,f);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;setLayerDimensions(i,this.viewport);const a=new Map,o={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const u=c.annotationType===AnnotationType.POPUP;if(u){const m=a.get(c.id);if(!m)continue;o.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const f=AnnotationElementFactory.create(o);if(!f.isRenderable)continue;if(!u&&c.popupRef){const m=a.get(c.popupRef);m?m.push(f):a.set(c.popupRef,[f])}const p=f.render();c.hidden&&(p.style.visibility="hidden"),await this.#a(p,c.id,o.elements),f.extraPopupElement?.popup?.renderCommentButton(),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new DOMSVGFactory,parent:this};for(const i of t){i.borderStyle||=Gd._defaultBorderStyle,e.data=i;const a=AnnotationElementFactory.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,setLayerDimensions(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,o=new EditorAnnotationElement({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i}),c=o.render();return e.append(c),this.#t?.moveElementInDOM(e,c,c,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const EOL_PATTERN=/\r\n?|\n/g;class FreeTextEditor extends AnnotationEditor{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=FreeTextEditor.prototype,e=o=>o.isEmpty(),i=AnnotationEditorUIManager.TRANSLATE_SMALL,a=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=AnnotationEditorType.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor,this.#n=t.fontSize||FreeTextEditor._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){AnnotationEditor.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=e;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=e;break}}updateParams(t,e){switch(t){case AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(e);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this.#n],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new BasicColorPicker(this),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}#s(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-FreeTextEditor._internalPadding*t,-(FreeTextEditor._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(FreeTextEditor.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){FreeTextEditor._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,f]=this.getInitialTranslation();[u,f]=this.pageTranslationToScreen(u,f);const[p,m]=this.pageDimensions,[y,b]=this.pageTranslation;let x,E;switch(this.rotation){case 0:x=t+(c[0]-y)/p,E=e+this.height-(c[1]-b)/m;break;case 90:x=t+(c[0]-y)/p,E=e-(c[1]-b)/m,[u,f]=[f,-u];break;case 180:x=t-this.width+(c[0]-y)/p,E=e-(c[1]-b)/m,[u,f]=[-u,-f];break;case 270:x=t+(c[0]-y-this.height*m)/p,E=e+(c[1]-b-this.width*p)/m,[u,f]=[-f,u];break}this.setAt(x*a,E*o,u,f)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(EOL_PATTERN,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=FreeTextEditor.#h(e.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:f}=c,p=[],m=[];if(u.nodeType===Node.TEXT_NODE){const x=u.parentElement;if(m.push(u.nodeValue.slice(f).replaceAll(EOL_PATTERN,"")),x!==this.editorDiv){let E=p;for(const A of this.editorDiv.childNodes){if(A===x){E=m;continue}E.push(FreeTextEditor.#c(A))}}p.push(u.nodeValue.slice(0,f).replaceAll(EOL_PATTERN,""))}else if(u===this.editorDiv){let x=p,E=0;for(const A of this.editorDiv.childNodes)E++===f&&(x=m),x.push(FreeTextEditor.#c(A))}this.#t=`${p.join(`
`)}${a}${m.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(p.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const E=x.nodeValue.length;if(b<=E){y.setStart(x,b),y.setEnd(x,b);break}b-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=FreeTextEditor._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:f,rotation:p,id:m,popupRef:y,richText:b,contentsObj:x,creationDate:E,modificationDate:A},textContent:S,textPosition:T,parent:{page:{pageNumber:D}}}=t;if(!S||S.length===0)return null;a=t={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(u),fontSize:c,value:S.join(`
`),position:T,pageIndex:D-1,rect:f.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:y,comment:x?.str||null,richText:b,creationDate:E,modificationDate:A}}const o=await super.deserialize(t,e,i);return o.#n=t.fontSize,o.color=Util.makeHexColor(...t.color),o.#t=FreeTextEditor.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,u)=>c!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Outline{static PRECISION=1e-4;toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(t,e){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,o,c){c||=new Float32Array(t.length);for(let u=0,f=t.length;u<f;u+=2)c[u]=e+t[u]*a,c[u+1]=i+t[u+1]*o;return c}static _rescaleAndSwap(t,e,i,a,o,c){c||=new Float32Array(t.length);for(let u=0,f=t.length;u<f;u+=2)c[u]=e+t[u+1]*a,c[u+1]=i+t[u]*o;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o],a[o+1]=i+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,o){switch(o){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,o,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+o)/6,(5*a+c)/6,(i+o)/2,(a+c)/2]}}class FreeDrawOutliner{#t;#e=[];#i;#n;#s=[];#r=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=FreeDrawOutliner.#g+FreeDrawOutliner.#p;constructor({x:t,y:e},i,a,o,c,u=0){this.#t=i,this.#h=o*a,this.#n=c,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=FreeDrawOutliner.#g*a,this.#c=FreeDrawOutliner.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#m(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,a,o,c]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/c,(this.#a+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,a,o,c]=this.#t;let[u,f,p,m]=this.#r.subarray(8,12);const y=t-p,b=e-m,x=Math.hypot(y,b);if(x<this.#c)return!1;const E=x-this.#l,A=E/x,S=A*y,T=A*b;let D=u,R=f;u=p,f=m,p+=S,m+=T,this.#f?.push(t,e);const F=-T/E,k=S/E,P=F*this.#h,L=k*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([p+P,m+L],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([p-P,m-L],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([u+P,f+L],2),this.#s.push(NaN,NaN,NaN,NaN,(u+P-i)/o,(f+L-a)/c),this.#r.set([u-P,f-L],14),this.#e.push(NaN,NaN,NaN,NaN,(u-P-i)/o,(f-L-a)/c)),this.#r.set([D,R,u,f,p,m],6),!this.isEmpty()):(this.#r.set([D,R,u,f,p,m],6),Math.abs(Math.atan2(R-f,D-u)-Math.atan2(T,S))<Math.PI/2?([u,f,p,m]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((u+p)/2-i)/o,((f+m)/2-a)/c),[u,f,D,R]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((D+u)/2-i)/o,((R+f)/2-a)/c),!0):([D,R,u,f,p,m]=this.#r.subarray(0,6),this.#s.push(((D+5*u)/6-i)/o,((R+5*f)/6-a)/c,((5*u+p)/6-i)/o,((5*f+m)/6-a)/c,((u+p)/2-i)/o,((f+m)/2-a)/c),[p,m,u,f,D,R]=this.#r.subarray(12,18),this.#e.push(((D+5*u)/6-i)/o,((R+5*f)/6-a)/c,((5*u+p)/6-i)/o,((5*f+m)/6-a)/c,((u+p)/2-i)/o,((f+m)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#s,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#v(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#b(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[o,c,u,f]=this.#m();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/a} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/a} L${o} ${c} L${u} ${f} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/a} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/a} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,i,a,o]=this.#t,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[f,p,m,y]=this.#m();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/o} L${f} ${p} L${m} ${y} L${(u[0]-e)/a} ${(u[1]-i)/o}`)}newFreeDrawOutline(t,e,i,a,o,c){return new FreeDrawOutline(t,e,i,a,o,c)}getOutlines(){const t=this.#s,e=this.#e,i=this.#r,[a,o,c,u]=this.#t,f=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=f.length-2;y<b;y+=2)f[y]=(this.#f[y]-a)/c,f[y+1]=(this.#f[y+1]-o)/u;if(f[f.length-2]=(this.#a-a)/c,f[f.length-1]=(this.#o-o)/u,isNaN(i[6])&&!this.isEmpty())return this.#T(f);const p=new Float32Array(this.#s.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}m=this.#x(p,m);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[y+b],p[m+1]=e[y+b+1],m+=2}return this.#A(p,m),this.newFreeDrawOutline(p,f,this.#t,this.#d,this.#i,this.#n)}#T(t){const e=this.#r,[i,a,o,c]=this.#t,[u,f,p,m]=this.#m(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-a)/c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#A(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[o,c,u,f]=this.#t,[p,m,y,b]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/f],e),e+=24}}class FreeDrawOutline extends Outline{#t;#e=new Float32Array(4);#i;#n;#s;#r;#a;constructor(t,e,i,a,o,c){super(),this.#a=t,this.#s=e,this.#t=i,this.#r=a,this.#i=o,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,f,p,m]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/p,t[y+1]=(t[y+1]-f)/m;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-u)/p,e[y+1]=(e[y+1]-f)/m}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],o){const c=i-t,u=a-e;let f,p;switch(o){case 0:f=Outline._rescale(this.#a,t,a,c,-u),p=Outline._rescale(this.#s,t,a,c,-u);break;case 90:f=Outline._rescaleAndSwap(this.#a,t,e,c,u),p=Outline._rescaleAndSwap(this.#s,t,e,c,u);break;case 180:f=Outline._rescale(this.#a,i,e,-c,u),p=Outline._rescale(this.#s,i,e,-c,u);break;case 270:f=Outline._rescaleAndSwap(this.#a,i,a,-c,-u),p=Outline._rescaleAndSwap(this.#s,i,a,-c,-u);break}return{outline:Array.from(f),points:[Array.from(p)]}}#o(t){const e=this.#a;let i=e[4],a=e[5];const o=[i,a,i,a];let c=i,u=a,f=i,p=a;const m=t?Math.max:Math.min,y=new Float32Array(4);for(let x=6,E=e.length;x<E;x+=6){const A=e[x+4],S=e[x+5];isNaN(e[x])?(Util.pointBoundingBox(A,S,o),u>S?(c=A,u=S):u===S&&(c=m(c,A)),p<S?(f=A,p=S):p===S&&(f=m(f,A))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,Util.bezierBoundingBox(i,a,...e.slice(x,x+6),y),Util.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=m(c,y[0])),p<y[3]?(f=y[2],p=y[3]):p===y[3]&&(f=m(f,y[2]))),i=A,a=S}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[c,u],this.lastPoint=[f,p]}get box(){return this.#e}newOutliner(t,e,i,a,o,c=0){return new FreeDrawOutliner(t,e,i,a,o,c)}getNewOutline(t,e){const[i,a,o,c]=this.#e,[u,f,p,m]=this.#t,y=o*p,b=c*m,x=i*p+u,E=a*m+f,A=this.newOutliner({x:this.#s[0]*y+x,y:this.#s[1]*b+E},this.#t,this.#r,t,this.#n,e??this.#i);for(let S=2;S<this.#s.length;S+=2)A.add({x:this.#s[S]*y+x,y:this.#s[S+1]*b+E});return A.getOutlines()}}class HighlightOutliner{#t;#e;#i;#n=[];#s=[];constructor(t,e=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:A,y:S,width:T,height:D}of t){const R=Math.floor((A-e)/c)*c,F=Math.ceil((A+T+e)/c)*c,k=Math.floor((S-e)/c)*c,P=Math.ceil((S+D+e)/c)*c,L=[R,k,P,!0],B=[F,k,P,!1];this.#n.push(L,B),Util.rectBoundingBox(R,k,F,P,o)}const u=o[2]-o[0]+2*i,f=o[3]-o[1]+2*i,p=o[0]-i,m=o[1]-i;let y=a?-1/0:1/0,b=1/0;const x=this.#n.at(a?-1:-2),E=[x[0],x[2]];for(const A of this.#n){const[S,T,D,R]=A;!R&&a?T<b?(b=T,y=S):T===b&&(y=Math.max(y,S)):R&&!a&&(T<b?(b=T,y=S):T===b&&(y=Math.min(y,S))),A[0]=(S-p)/u,A[1]=(T-m)/f,A[2]=(D-m)/f}this.#t=new Float32Array([p,m,u,f]),this.#e=[y,b],this.#i=E}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const c of t){const[u,f,p]=c;e.push([u,f,c],[u,p,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const f=e[c][2],p=e[c+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const a=[];let o;for(;i.size>0;){const c=i.values().next().value;let[u,f,p,m,y]=c;i.delete(c);let b=u,x=f;for(o=[u,p],a.push(o);;){let E;if(i.has(m))E=m;else if(i.has(y))E=y;else break;i.delete(E),[u,f,p,m,y]=E,b!==u&&(o.push(b,x,u,x===f?f:p),b=u),x=x===f?p:f}o.push(b,x)}return new HighlightOutline(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#s;let i=0,a=e.length-1;for(;i<=a;){const o=i+a>>1,c=e[o][0];if(c===t)return o;c<t?i=o+1:a=o-1}return a+1}#o([,t,e]){const i=this.#a(t);this.#s.splice(i,0,[t,e])}#c([,t,e]){const i=this.#a(t);for(let a=i;a<this.#s.length;a++){const[o,c]=this.#s[a];if(o!==t)break;if(o===t&&c===e){this.#s.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,c]=this.#s[a];if(o!==t)break;if(o===t&&c===e){this.#s.splice(a,1);return}}}#l(t){const[e,i,a]=t,o=[[e,i,a]],c=this.#a(a);for(let u=0;u<c;u++){const[f,p]=this.#s[u];for(let m=0,y=o.length;m<y;m++){const[,b,x]=o[m];if(!(p<=b||x<=f)){if(b>=f){if(x>p)o[m][1]=p;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=f,x>p&&o.push([e,p,x])}}}return o}}class HighlightOutline extends Outline{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let o=2;o<e.length;o+=2){const c=e[o],u=e[o+1];c===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],o){const c=[],u=i-t,f=a-e;for(const p of this.#e){const m=new Array(p.length);for(let y=0;y<p.length;y+=2)m[y]=t+p[y]*u,m[y+1]=a-p[y+1]*f;c.push(m)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(t,e,i,a,o,c){return new FreeHighlightOutline(t,e,i,a,o,c)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(t,e,i,a,o,c=0){return new FreeHighlightOutliner(t,e,i,a,o,c)}}class HighlightEditor extends AnnotationEditor{#t=null;#e=0;#i;#n=null;#s=null;#r=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=AnnotationEditorType.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=HighlightEditor.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||HighlightEditor._defaultColor,this.#m=t.thickness||HighlightEditor._defaultThickness,this.opacity=t.opacity||HighlightEditor._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#S()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new HighlightOutliner(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new HighlightOutliner(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#r;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#r=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:HighlightEditor.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:HighlightEditor.#_(this.#r.box,y),path:{d:this.#r.toSVGPath()}})}const[o,c,u,f]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=f;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*b/y,this.height=f*y/b;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=f;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*b/y,this.height=f*y/b;break}}const{firstPoint:p}=t;this.#f=[(p[0]-o)/u,(p[1]-c)/f];const{lastPoint:m}=this.#r;this.#g=[(m[0]-o)/u,(m[1]-c)/f]}static initialize(t,e){AnnotationEditor.initialize(t,e),HighlightEditor._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:HighlightEditor._defaultColor=e;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:HighlightEditor._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#T(e);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,HighlightEditor._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,this.#m||HighlightEditor._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#T(t){const e=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,HighlightEditor._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#m,i=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new ColorPicker$1({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,i,a],o){switch(o){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=HighlightEditor.#_(this.#l.box,t)):i=HighlightEditor.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:HighlightEditor.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),bindEvents(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(t){HighlightEditor._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#D(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:f,y:p,width:m,height:y}of o){const b=f*t+i,x=(1-p)*e+a;c[u]=c[u+4]=b,c[u+1]=c[u+3]=x,c[u+2]=c[u+6]=b+m*t,c[u+5]=c[u+7]=x-y*e,u+=8}return c}#k(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,e,{target:i,x:a,y:o}){const{x:c,y:u,width:f,height:p}=i.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),b=x=>{m.abort(),this.#B(t,x)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",noContextMenu,{signal:y}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:y}),this._freeHighlight=new FreeHighlightOutliner({x:a,y:o},[c,u,f,p],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof HighlightAnnotationElement){const{data:{quadPoints:E,rect:A,rotation:S,id:T,color:D,opacity:R,popupRef:F,richText:k,contentsObj:P,creationDate:L,modificationDate:B},parent:{page:{pageNumber:V}}}=t;a=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(D),opacity:R,quadPoints:E,boxes:null,pageIndex:V-1,rect:A.slice(0),rotation:S,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:k,comment:P?.str||null,creationDate:L,modificationDate:B}}else if(t instanceof InkAnnotationElement){const{data:{inkLists:E,rect:A,rotation:S,id:T,color:D,borderStyle:{rawWidth:R},popupRef:F,richText:k,contentsObj:P,creationDate:L,modificationDate:B},parent:{page:{pageNumber:V}}}=t;a=t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(D),thickness:R,inkLists:E,boxes:null,pageIndex:V-1,rect:A.slice(0),rotation:S,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:k,comment:P?.str||null,creationDate:L,modificationDate:B}}const{color:o,quadPoints:c,inkLists:u,opacity:f}=t,p=await super.deserialize(t,e,i);p.color=Util.makeHexColor(...o),p.opacity=f||1,u&&(p.#m=t.thickness),p._initialData=a,t.comment&&p.setCommentData(t);const[m,y]=p.pageDimensions,[b,x]=p.pageTranslation;if(c){const E=p.#i=[];for(let A=0;A<c.length;A+=8)E.push({x:(c[A]-b)/m,y:1-(c[A+1]-x)/y,width:(c[A+2]-c[A])/m,height:(c[A+1]-c[A+5])/y});p.#b(),p.#S(),p.rotate(p.rotation)}else if(u){p.#h=!0;const E=u[0],A={x:E[0]-b,y:y-(E[1]-x)},S=new FreeHighlightOutliner(A,[0,0,m,y],1,p.#m/2,!0,.001);for(let R=0,F=E.length;R<F;R+=2)A.x=E[R]-b,A.y=y-(E[R+1]-x),S.add(A);const{id:T,clipPathId:D}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);p.#v({highlightOutlines:S.getOutlines(),highlightId:T,clipPathId:D}),p.#S(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#I(),outlines:this.#k(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#O(i)?null:(i.id=this.annotationElementId,i)}#O(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class DrawingOptions{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){unreachable("Not implemented")}}class DrawingEditor extends AnnotationEditor{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#s=null;static#r=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(DrawingEditor.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,o=a[e],c=u=>{a.updateProperty(e,u);const f=this.#t.updateProperty(e,u);f&&this.#u(f),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(c/o),a*(o/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/o),a*(o/c)];default:return[t,e,i,a]}}#p(){const{x:t,y:e,width:i,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(o/c),a*(c/o)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(o/c),a*(c/o)];default:return[t,e,i,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:i,height:a,rotation:o,parentRotation:c,parentDimensions:[u,f]}=this;switch((o*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(u/f),a*(f/u),i*(u/f)];case 5:return[1-e,t,i*(u/f),a*(f/u)];case 6:return[1-t-a*(f/u),1-e,a*(f/u),i*(u/f)];case 7:return[e-i*(u/f),1-t-a*(f/u),i*(u/f),a*(f/u)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(f/u),e,a*(f/u),i*(u/f)];case 13:return[1-e-i*(u/f),t-a*(f/u),i*(u/f),a*(f/u)];case 14:return[1-t,1-e-i*(u/f),a*(f/u),i*(u/f)];case 15:return[e,1-t,i*(u/f),a*(f/u)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,DrawingEditor._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,o){unreachable("Not implemented")}static startDrawing(t,e,i,a){const{target:o,offsetX:c,offsetY:u,pointerId:f,pointerType:p}=a;if(DrawingEditor.#a&&DrawingEditor.#a!==p)return;const{viewport:{rotation:m}}=t,{width:y,height:b}=o.getBoundingClientRect(),x=DrawingEditor.#n=new AbortController,E=t.combinedSignal(x);if(DrawingEditor.#r||=f,DrawingEditor.#a??=p,window.addEventListener("pointerup",A=>{DrawingEditor.#r===A.pointerId?this._endDraw(A):DrawingEditor.#o?.delete(A.pointerId)},{signal:E}),window.addEventListener("pointercancel",A=>{DrawingEditor.#r===A.pointerId?this._currentParent.endDrawingSession():DrawingEditor.#o?.delete(A.pointerId)},{signal:E}),window.addEventListener("pointerdown",A=>{DrawingEditor.#a===A.pointerType&&((DrawingEditor.#o||=new Set).add(A.pointerId),DrawingEditor.#i.isCancellable()&&(DrawingEditor.#i.removeLastElement(),DrawingEditor.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",noContextMenu,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",A=>{A.timeStamp===DrawingEditor.#c&&stopEvent(A)},{signal:E}),t.toggleDrawing(),e._editorUndoBar?.hide(),DrawingEditor.#i){t.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#i.startNew(c,u,y,b,m));return}e.updateUIForDefaultProperties(this),DrawingEditor.#i=this.createDrawerInstance(c,u,y,b,m),DrawingEditor.#s=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#s.toSVGProperties(),DrawingEditor.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(DrawingEditor.#c=-1,!DrawingEditor.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(DrawingEditor.#r===a){if(DrawingEditor.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#i.add(e,i)),DrawingEditor.#c=t.timeStamp,stopEvent(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,DrawingEditor.#i=null,DrawingEditor.#s=null,DrawingEditor.#a=null,DrawingEditor.#c=NaN),DrawingEditor.#n&&(DrawingEditor.#n.abort(),DrawingEditor.#n=null,DrawingEditor.#r=NaN,DrawingEditor.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,DrawingEditor.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=DrawingEditor.#i,a=this._currentDrawId,o=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!DrawingEditor.#i.isEmpty()){const{pageDimensions:[i,a],scale:o}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:DrawingEditor.#i.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:DrawingEditor.#s,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,o,c){unreachable("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=e.viewport,f=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,t),p=await super.deserialize(t,e,i);return p.createDrawingOptions(t),p.#l({drawOutlines:f}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[e,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class InkDrawOutliner{#t=new Float64Array(6);#e;#i;#n;#s;#r;#a="";#o=0;#c=new InkDrawOutline;#l;#d;constructor(t,e,i,a,o,c){this.#l=i,this.#d=a,this.#n=o,this.#s=c,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#i=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#h(t,e){return Outline._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,o,c]=this.#t.subarray(2,6),u=t-o,f=e-c;return Math.hypot(this.#l*u,this.#d*f)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([o,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,o,c,t,e],0),this.#e.push(...Outline.createBezierPoints(i,a,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,o){this.#l=i,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#r}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#r=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=Outline.svgRound(this.#e[4]),e=Outline.svgRound(this.#e[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#r.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const a=Outline.svgRound(this.#e[10]),o=Outline.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[c,u,f,p,m,y]=this.#e.slice(a,a+6).map(Outline.svgRound);i.push(`C${c} ${u} ${f} ${p} ${m} ${y}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,i,this.#n,this.#s,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class InkDrawOutline extends Outline{#t;#e=0;#i;#n;#s;#r;#a;#o;#c;build(t,e,i,a,o,c,u){this.#s=e,this.#r=i,this.#a=a,this.#o=o,this.#c=c,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Outline.svgRound(e[4])} ${Outline.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Outline.svgRound(e[10])} ${Outline.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[o,c,u,f,p,m]=e.subarray(i,i+6).map(Outline.svgRound);t.push(`C${o} ${c} ${u} ${f} ${p} ${m}`)}}return t.join("")}serialize([t,e,i,a],o){const c=[],u=[],[f,p,m,y]=this.#d();let b,x,E,A,S,T,D,R,F;switch(this.#o){case 0:F=Outline._rescale,b=t,x=e+a,E=i,A=-a,S=t+f*i,T=e+(1-p-y)*a,D=t+(f+m)*i,R=e+(1-p)*a;break;case 90:F=Outline._rescaleAndSwap,b=t,x=e,E=i,A=a,S=t+p*i,T=e+f*a,D=t+(p+y)*i,R=e+(f+m)*a;break;case 180:F=Outline._rescale,b=t+i,x=e,E=-i,A=a,S=t+(1-f-m)*i,T=e+p*a,D=t+(1-f)*i,R=e+(p+y)*a;break;case 270:F=Outline._rescaleAndSwap,b=t+i,x=e+a,E=-i,A=-a,S=t+(1-p-y)*i,T=e+(1-f-m)*a,D=t+(1-p)*i,R=e+(1-f)*a;break}for(const{line:k,points:P}of this.#n)c.push(F(k,b,x,E,A,o?new Array(k.length):null)),u.push(F(P,b,x,E,A,o?new Array(P.length):null));return{lines:c,points:u,rect:[S,T,D,R]}}static deserialize(t,e,i,a,o,{paths:{lines:c,points:u},rotation:f,thickness:p}){const m=[];let y,b,x,E,A;switch(f){case 0:A=Outline._rescale,y=-t/i,b=e/a+1,x=1/i,E=-1/a;break;case 90:A=Outline._rescaleAndSwap,y=-e/a,b=-t/i,x=1/a,E=1/i;break;case 180:A=Outline._rescale,y=t/i+1,b=-e/a,x=-1/i,E=1/a;break;case 270:A=Outline._rescaleAndSwap,y=e/a+1,b=t/i+1,x=-1/a,E=-1/i;break}if(!c){c=[];for(const T of u){const D=T.length;if(D===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(D===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const R=new Float32Array(3*(D-2));c.push(R);let[F,k,P,L]=T.subarray(0,4);R.set([NaN,NaN,NaN,NaN,F,k],0);for(let B=4;B<D;B+=2){const V=T[B],z=T[B+1];R.set(Outline.createBezierPoints(F,k,P,L,V,z),(B-2)*3),[F,k,P,L]=[P,L,V,z]}}}for(let T=0,D=c.length;T<D;T++)m.push({line:A(c[T].map(R=>R??NaN),y,b,x,E),points:A(u[T].map(R=>R??NaN),y,b,x,E)});const S=new this.prototype.constructor;return S.build(m,i,a,1,f,p,o),S}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#s,e/this.#r]:[e/this.#r,e/this.#s]}#d(){const[t,e,i,a]=this.#t,[o,c]=this.#l(0);return[t+o,e+c,i-2*o,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,f=a.length;u<f;u+=6)Util.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],c=a[5];for(let u=6,f=a.length;u<f;u+=6){const[p,m,y,b,x,E]=a.subarray(u,u+6);Util.bezierBoundingBox(o,c,p,m,y,b,x,E,t),o=x,c=E}}const[e,i]=this.#l();t[0]=MathClamp(t[0]-e,0,1),t[1]=MathClamp(t[1]-i,0,1),t[2]=MathClamp(t[2]+e,0,1),t[3]=MathClamp(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,o]=this.#l(),[c,u]=[a-e,o-i],f=this.#t;return f[0]-=c,f[1]-=u,f[2]+=2*c,f[3]+=2*u,f}updateParentDimensions([t,e],i){const[a,o]=this.#l();this.#s=t,this.#r=e,this.#a=i;const[c,u]=this.#l(),f=c-a,p=u-o,m=this.#t;return m[0]-=f,m[1]-=p,m[2]+=2*f,m[3]+=2*p,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Outline.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,o=0,c=0,u=0,f=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:i=-1,c=-1,u=t,f=e;break;case 270:a=-e/t,o=t/e,f=e;break;default:return""}return`matrix(${i} ${a} ${o} ${c} ${Outline.svgRound(u)} ${Outline.svgRound(f)})`}getPathResizingSVGProperties([t,e,i,a]){const[o,c]=this.#l(),[u,f,p,m]=this.#t;if(Math.abs(p-o)<=Outline.PRECISION||Math.abs(m-c)<=Outline.PRECISION){const A=t+i/2-(u+p/2),S=e+a/2-(f+m/2);return{path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:`${this.rotationTransform} translate(${A} ${S})`}}}const y=(i-2*o)/(p-2*o),b=(a-2*c)/(m-2*c),x=p/i,E=m/a;return{path:{"transform-origin":`${Outline.svgRound(u)} ${Outline.svgRound(f)}`,transform:`${this.rotationTransform} scale(${x} ${E}) translate(${Outline.svgRound(o)} ${Outline.svgRound(c)}) scale(${y} ${b}) translate(${Outline.svgRound(-o)} ${Outline.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[o,c]=this.#l(),u=this.#t,[f,p,m,y]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=a,Math.abs(m-o)<=Outline.PRECISION||Math.abs(y-c)<=Outline.PRECISION){const S=t+i/2-(f+m/2),T=e+a/2-(p+y/2);for(const{line:D,points:R}of this.#n)Outline._translate(D,S,T,D),Outline._translate(R,S,T,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*o)/(m-2*o),x=(a-2*c)/(y-2*c),E=-b*(f+o)+t+o,A=-x*(p+c)+e+c;if(b!==1||x!==1||E!==0||A!==0)for(const{line:S,points:T}of this.#n)Outline._rescale(S,E,A,b,x,S),Outline._rescale(T,E,A,b,x,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,o]=i,c=this.#t,u=t-c[0],f=e-c[1];if(this.#s===a&&this.#r===o)for(const{line:p,points:m}of this.#n)Outline._translate(p,u,f,p),Outline._translate(m,u,f,m);else{const p=this.#s/a,m=this.#r/o;this.#s=a,this.#r=o;for(const{line:y,points:b}of this.#n)Outline._rescale(y,u,f,p,m,y),Outline._rescale(b,u,f,p,m,b);c[2]*=p,c[3]*=m}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t)} ${Outline.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(t[0])} ${Outline.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class InkDrawingOptions extends DrawingOptions{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new InkDrawingOptions(this._viewParameters);return t.updateAll(this),t}}class InkEditor extends DrawingEditor{static _type="ink";static _editorType=AnnotationEditorType.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){AnnotationEditor.initialize(t,e),this._defaultDrawingOptions=new InkDrawingOptions(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,o){return new InkDrawOutliner(t,e,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,o,c){return InkDrawOutline.deserialize(t,e,i,a,o,c)}static async deserialize(t,e,i){let a=null;if(t instanceof InkAnnotationElement){const{data:{inkLists:c,rect:u,rotation:f,id:p,color:m,opacity:y,borderStyle:{rawWidth:b},popupRef:x,richText:E,contentsObj:A,creationDate:S,modificationDate:T},parent:{page:{pageNumber:D}}}=t;a=t={annotationType:AnnotationEditorType.INK,color:Array.from(m),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:D-1,rect:u.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:x,richText:E,comment:A?.str||null,creationDate:S,modificationDate:T}}const o=await super.deserialize(t,e,i);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new BasicColorPicker(this),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=InkEditor.getDefaultDrawingOptions({stroke:Util.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:AnnotationEditor._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==e[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;class SignatureExtractor{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,o,c,u){const f=this.#e(i,a,o,c);for(let p=0;p<8;p++){const m=(-p+f-u+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(a+b)]!==0)return m}return-1}static#s(t,e,i,a,o,c,u){const f=this.#e(i,a,o,c);for(let p=0;p<8;p++){const m=(p+f+u+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(a+b)]!==0)return m}return-1}static#r(t,e,i,a){const o=t.length,c=new Int32Array(o);for(let m=0;m<o;m++)c[m]=t[m]<=a?1:0;for(let m=1;m<i-1;m++)c[m*e]=c[m*e+e-1]=0;for(let m=0;m<e;m++)c[m]=c[e*i-1-m]=0;let u=1,f;const p=[];for(let m=1;m<i-1;m++){f=1;for(let y=1;y<e-1;y++){const b=m*e+y,x=c[b];if(x===0)continue;let E=m,A=y;if(x===1&&c[b-1]===0)u+=1,A-=1;else if(x>=1&&c[b+1]===0)u+=1,A+=1,x>1&&(f=x);else{x!==1&&(f=Math.abs(x));continue}const S=[y,m],T=A===y+1,D={isHole:T,points:S,id:u,parent:0};p.push(D);let R;for(const j of p)if(j.id===f){R=j;break}R?R.isHole?D.parent=T?R.parent:f:D.parent=T?f:R.parent:D.parent=T?f:0;const F=this.#n(c,e,m,y,E,A,0);if(F===-1){c[b]=-u,c[b]!==1&&(f=Math.abs(c[b]));continue}let k=this.#i[2*F],P=this.#i[2*F+1];const L=m+k,B=y+P;E=L,A=B;let V=m,z=y;for(;;){const j=this.#s(c,e,V,z,E,A,1);k=this.#i[2*j],P=this.#i[2*j+1];const J=V+k,W=z+P;S.push(W,J);const K=V*e+z;if(c[K+1]===0?c[K]=-u:c[K]===1&&(c[K]=u),J===m&&W===y&&V===L&&z===B){c[b]!==1&&(f=Math.abs(c[b]));break}else E=V,A=z,V=J,z=W}}}return p}static#a(t,e,i,a){if(i-e<=4){for(let L=e;L<i-2;L+=2)a.push(t[L],t[L+1]);return}const o=t[e],c=t[e+1],u=t[i-4]-o,f=t[i-3]-c,p=Math.hypot(u,f),m=u/p,y=f/p,b=m*c-y*o,x=f/u,E=1/p,A=Math.atan(x),S=Math.cos(A),T=Math.sin(A),D=E*(Math.abs(S)+Math.abs(T)),R=E*(1-D+D**2),F=Math.max(Math.atan(Math.abs(T+S)*R),Math.atan(Math.abs(T-S)*R));let k=0,P=e;for(let L=e+2;L<i-2;L+=2){const B=Math.abs(b-m*t[L+1]+y*t[L]);B>k&&(P=L,k=B)}k>(p*F)**2?(this.#a(t,e,P+2,a),this.#a(t,P,i,a)):a.push(o,c)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,o,c){const u=new Float32Array(c**2),f=-2*a**2,p=c>>1;for(let A=0;A<c;A++){const S=(A-p)**2;for(let T=0;T<c;T++)u[A*c+T]=Math.exp((S+(T-p)**2)/f)}const m=new Float32Array(256),y=-2*o**2;for(let A=0;A<256;A++)m[A]=Math.exp(A**2/y);const b=t.length,x=new Uint8Array(b),E=new Uint32Array(256);for(let A=0;A<i;A++)for(let S=0;S<e;S++){const T=A*e+S,D=t[T];let R=0,F=0;for(let P=0;P<c;P++){const L=A+P-p;if(!(L<0||L>=i))for(let B=0;B<c;B++){const V=S+B-p;if(V<0||V>=e)continue;const z=t[L*e+V],j=u[P*c+B]*m[Math.abs(z-D)];R+=z*j,F+=j}}const k=x[T]=Math.round(R/F);E[k]++}return[x,E]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,f=i.length;u<f;u++){const p=i[u]=t[u<<2];a=Math.max(a,p),o=Math.min(o,p)}const c=255/(a-o);for(let u=0,f=i.length;u<f;u++)i[u]=(i[u]-o)*c;return i}static#h(t){let e,i=-1/0,a=-1/0;const o=t.findIndex(f=>f!==0);let c=o,u=o;for(e=o;e<256;e++){const f=t[e];f>i&&(e-c>a&&(a=e-c,u=e-1),i=f,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:o}=this.#t;let c=i,u=a;if(i>o||a>o){let b=i,x=a,E=Math.log2(Math.max(i,a)/o);const A=Math.floor(E);E=E===A?A-1:A;for(let T=0;T<E;T++){c=Math.ceil(b/2),u=Math.ceil(x/2);const D=new OffscreenCanvas(c,u);D.getContext("2d").drawImage(t,0,0,b,x,0,0,c,u),b=c,x=u,t!==e&&t.close(),t=D.transferToImageBitmap()}const S=Math.min(o/c,o/u);c=Math.round(c*S),u=Math.round(u*S)}const p=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,c,u),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,c,u);const m=p.getImageData(0,0,c,u).data;return[this.#d(m),c,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},o,c,u,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const y=200,b=m.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:E,actualBoundingBoxAscent:A,actualBoundingBoxDescent:S,fontBoundingBoxAscent:T,fontBoundingBoxDescent:D,width:R}=m.measureText(t),F=1.5,k=Math.ceil(Math.max(Math.abs(x)+Math.abs(E)||0,R)*F),P=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||y,Math.abs(T)+Math.abs(D)||y)*F);p=new OffscreenCanvas(k,P),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,k,P),m.fillStyle="black",m.fillText(t,k*(F-1)/2,P*(3-F)/2);const L=this.#d(m.getImageData(0,0,k,P).data),B=this.#l(L),V=this.#h(B),z=this.#r(L,k,P,V);return this.processDrawnLines({lines:{curves:z,width:k,height:P},pageWidth:o,pageHeight:c,rotation:u,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,o){const[c,u,f]=this.#f(t),[p,m]=this.#c(c,u,f,Math.hypot(u,f)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(m),b=this.#r(p,u,f,y);return this.processDrawnLines({lines:{curves:b,width:u,height:f},pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([e,i]=[i,e]);const{curves:f,width:p,height:m}=t,y=t.thickness??0,b=[],x=Math.min(e/p,i/m),E=x/e,A=x/i,S=[];for(const{points:D}of f){const R=c?this.#o(D):D;if(!R)continue;S.push(R);const F=R.length,k=new Float32Array(F),P=new Float32Array(3*(F===2?2:F-2));if(b.push({line:P,points:k}),F===2){k[0]=R[0]*E,k[1]=R[1]*A,P.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[L,B,V,z]=R;L*=E,B*=A,V*=E,z*=A,k.set([L,B,V,z],0),P.set([NaN,NaN,NaN,NaN,L,B],0);for(let j=4;j<F;j+=2){const J=k[j]=R[j]*E,W=k[j+1]=R[j+1]*A;P.set(Outline.createBezierPoints(L,B,V,z,J,W),(j-2)*3),[L,B,V,z]=[V,z,J,W]}}if(b.length===0)return null;const T=u?new ContourDrawOutline:new InkDrawOutline;return T.build(b,e,i,1,a,u?0:y,o),{outline:T,newCurves:S,areContours:u,thickness:y,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:o}){let c=1/0,u=-1/0,f=0;for(const R of t){f+=R.length;for(let F=2,k=R.length;F<k;F++){const P=R[F]-R[F-2];c=Math.min(c,P),u=Math.max(u,P)}}let p;c>=-128&&u<=127?p=Int8Array:c>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const m=t.length,y=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*m,b=new Uint32Array(y);let x=0;b[x++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,b[x++]=0,b[x++]=a,b[x++]=o,b[x++]=e?0:1,b[x++]=Math.max(0,Math.floor(i??0)),b[x++]=m,b[x++]=p.BYTES_PER_ELEMENT;for(const R of t)b[x++]=R.length-2,b[x++]=R[0],b[x++]=R[1];const E=new CompressionStream("deflate-raw"),A=E.writable.getWriter();await A.ready,A.write(b);const S=p.prototype.constructor;for(const R of t){const F=new S(R.length-2);for(let k=2,P=R.length;k<P;k++)F[k-2]=R[k]-R[k-2];A.write(F)}A.close();const T=await new Response(E.readable).arrayBuffer(),D=new Uint8Array(T);return toBase64Util(D)}static async decompressSignature(t){try{const e=fromBase64Util(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const R of i)c||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),c.set(R,u),u+=R.length;const f=new Uint32Array(c.buffer,0,c.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],y=f[3],b=f[4]===0,x=f[5],E=f[6],A=f[7],S=[],T=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*E)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(A){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(c.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(c.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(c.buffer,T);break}u=0;for(let R=0;R<E;R++){const F=f[POINTS_PROPERTIES_NUMBER*R+BASE_HEADER_LENGTH],k=new Float32Array(F+2);S.push(k);for(let P=0;P<POINTS_PROPERTIES_NUMBER-1;P++)k[P]=f[POINTS_PROPERTIES_NUMBER*R+BASE_HEADER_LENGTH+P+1];for(let P=0;P<F;P++)k[P+2]=k[P]+D[u++]}return{areContours:b,thickness:x,outlines:S,width:m,height:y}}catch(e){return warn(`decompressSignature: ${e}`),null}}}class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const t=new SignatureOptions;return t.updateAll(this),t}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(t){super(t),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const t=new DrawnSignatureOptions(this._viewParameters);return t.updateAll(this),t}}class SignatureEditor extends DrawingEditor{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=AnnotationEditorType.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){AnnotationEditor.initialize(t,e),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:f,heightInPage:p}=this.#i,{rawDims:{pageWidth:m,pageHeight:y},rotation:b}=this.parent.viewport,x=SignatureExtractor.processDrawnLines({lines:a,pageWidth:m,pageHeight:y,rotation:b,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(x,p,u,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:o}=this.#i,c=Math.max(a,o),u=SignatureExtractor.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:i,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:o,y:c}=this,{outline:u}=this.#i=t;this.#t=u instanceof ContourDrawOutline,this.description=i;let f;this.#t?f=SignatureEditor.getDefaultDrawingOptions():(f=SignatureEditor._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:f});const[,p]=this.pageDimensions;let m=e/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return SignatureExtractor.process(t,e,i,a,SignatureEditor._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(t,e,i,a,o,SignatureEditor._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:SignatureEditor._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=SignatureEditor.getDefaultDrawingOptions():(this._drawingOptions=SignatureEditor._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,i,a,o,c){return c.areContours?ContourDrawOutline.deserialize(t,e,i,a,o,c):InkDrawOutline.deserialize(t,e,i,a,o,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class StampEditor extends AnnotationEditor{#t=null;#e=null;#i=null;#n=null;#s=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=AnnotationEditorType.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){AnnotationEditor.initialize(t,e)}static isHandlingMimeForPasting(t){return SupportedImageMimeTypes.includes(t)}static paste(t,e){e.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const f=u.output;return await this.setGuessedAltText(f),e&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=SupportedImageMimeTypes.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#s||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,o]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*o;else if(e>c*a||i>c*o){const f=Math.min(c*a/e,c*o/i);e*=f,i*=f}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=i/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:o}=this.#t,c=new OutputScale;let u=this.#t,f=a,p=o,m=null;if(e){if(a>e||o>e){const P=Math.min(e/a,e/o);f=Math.floor(a*P),p=Math.floor(o*P)}m=document.createElement("canvas");const b=m.width=Math.ceil(f*c.sx),x=m.height=Math.ceil(p*c.sy);this.#l||(u=this.#u(b,x));const E=m.getContext("2d");E.filter=this._uiManager.hcmFilter;let A="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":ColorScheme.isDarkMode&&(A="#8f8f9d",S="#42414d");const T=15,D=T*c.sx,R=T*c.sy,F=new OffscreenCanvas(D*2,R*2),k=F.getContext("2d");k.fillStyle=A,k.fillRect(0,0,D*2,R*2),k.fillStyle=S,k.fillRect(0,0,D,R),k.fillRect(D,R,D,R),E.fillStyle=E.createPattern(F,"repeat"),E.fillRect(0,0,b,x),E.drawImage(u,0,0,u.width,u.height,0,0,b,x)}let y=null;if(i){let b,x;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,x=u.height;else if(u=this.#t,a>t||o>t){const S=Math.min(t/a,t/o);b=Math.floor(a*S),x=Math.floor(o*S),this.#l||(u=this.#u(b,x))}const A=new OffscreenCanvas(b,x).getContext("2d",{willReadFrequently:!0});A.drawImage(u,0,0,u.width,u.height,0,0,b,x),y={width:b,height:x,data:A.getImageData(0,0,b,x).data}}return{canvas:m,width:f,height:p,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let o=i,c=a,u=this.#t;for(;o>2*t||c>2*e;){const f=o,p=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(u,0,0,f,p,0,0,o,c),u=m.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,o=new OutputScale,c=Math.ceil(i*t*o.sx),u=Math.ceil(a*e*o.sy),f=this.#a;if(!f||f.width===c&&f.height===u)return;f.width=c,f.height=u;const p=this.#l?this.#t:this.#u(c,u),m=f.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,c,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*PixelsPerInch.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*PixelsPerInch.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,o=!1;if(t instanceof StampAnnotationElement){const{data:{rect:A,rotation:S,id:T,structParent:D,popupRef:R,richText:F,contentsObj:k,creationDate:P,modificationDate:L},container:B,parent:{page:{pageNumber:V}},canvas:z}=t;let j,J;z?(delete t.canvas,{id:j,bitmap:J}=i.imageManager.getFromCanvas(B.id,z),z.remove()):(o=!0,t._hasNoCanvas=!0);const W=(await e._structTree.getAriaAttributes(`${AnnotationPrefix}${T}`))?.get("aria-label")||"";a=t={annotationType:AnnotationEditorType.STAMP,bitmapId:j,bitmap:J,pageIndex:V-1,rect:A.slice(0),rotation:S,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:W},isSvg:!1,structParent:D,popupRef:R,richText:F,comment:k?.str||null,creationDate:P,modificationDate:L}}const c=await super.deserialize(t,e,i),{rect:u,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:y,accessibilityData:b}=t;o?(i.addMissingCanvas(t.id,c),c.#o=!0):m&&i.imageManager.isValidId(m)?(c.#e=m,f&&(c.#t=f)):c.#n=p,c.#l=y;const[x,E]=c.pageDimensions;return c.width=(u[2]-u[0])/x,c.height=(u[3]-u[1])/E,b&&(c.altTextData=b),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return i}#b(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class AnnotationEditorLayer{#t;#e=!1;#i=null;#n=null;#s=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:f,viewport:p,l10n:m}){const y=[...AnnotationEditorLayer.#m.values()];if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=o,this.#i=c,this.viewport=p,this.#h=f,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===AnnotationEditorType.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===AnnotationEditorType.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of AnnotationEditorLayer.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:u,timeStamp:f}=a,p=this.#p;if(f-p>500){this.#p=f;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(c,u);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const x=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const A of y)if(x.test(A.id)){b=A.id;break}if(!b)return;const E=this.#r.get(b);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:i,capture:!0})}const t=this.#i;if(t){const i=new Map,a=new Map;for(const c of this.#y){if(c.disableEditing(),!c.annotationElementId){c.updateFakeAnnotationElement(t);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const o=t.getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(this.#u.isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let f=a.get(u);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=i.get(u),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(c)&&f.show(!1)),c.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of AnnotationEditorLayer.#m.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return AnnotationEditorLayer.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#A(),o=this.getNextId(),c=this.#T({parent:this,id:o,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await AnnotationEditorLayer.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),o=this.#T({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+i),f=Math.min(window.innerHeight,e+a),p=(o+u)/2-t,m=(c+f)/2-e,[y,b]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===AnnotationEditorType.STAMP||i===AnnotationEditorType.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,setLayerDimensions(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,setLayerDimensions(this.div,{rotation:i}),e!==i)for(const a of this.#r.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class DrawLayer{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}static#s(t,[e,i,a,o]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`}#r(){const t=DrawLayer._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=DrawLayer._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=DrawLayer._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=DrawLayer.#n++,o=this.#r(),c=DrawLayer._svgFactory.createElement("defs");o.append(c);const u=DrawLayer._svgFactory.createElement("path");c.append(u);const f=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",f),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,u);const p=i?this.#a(c,f):null,m=DrawLayer._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=DrawLayer.#n++,a=this.#r(),o=DrawLayer._svgFactory.createElement("defs");a.append(o);const c=DrawLayer._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const y=DrawLayer._svgFactory.createElement("mask");o.append(y),f=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const b=DrawLayer._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const x=DrawLayer._svgFactory.createElement("use");y.append(x),x.setAttribute("href",`#${u}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const p=DrawLayer._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${u}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return a.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:o,path:c}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),a&&DrawLayer.#s(u,a),o){const{classList:f}=u;for(const[p,m]of Object.entries(o))f.toggle(p,m)}if(c){const p=u.firstChild.firstChild;this.#o(p,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker:ColorPicker$1,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$1,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker:ColorPicker$1,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$1,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));function r(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(t=0;t<a;t++)n[t]&&(e=r(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function clsx(){for(var n,t,e=0,i="",a=arguments.length;e<a;e++)(n=arguments[e])&&(t=r(n))&&(i&&(i+=" "),i+=t);return i}var has=Object.prototype.hasOwnProperty;function find(n,t,e){for(e of n.keys())if(dequal(e,t))return e}function dequal(n,t){var e,i,a;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((i=n.length)===t.length)for(;i--&&dequal(n[i],t[i]););return i===-1}if(e===Set){if(n.size!==t.size)return!1;for(i of n)if(a=i,a&&typeof a=="object"&&(a=find(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(i of n)if(a=i[0],a&&typeof a=="object"&&(a=find(t,a),!a)||!dequal(i[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((i=n.byteLength)===t.byteLength)for(;i--&&n.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===t.byteLength)for(;i--&&n[i]===t[i];);return i===-1}if(!e||typeof n=="object"){i=0;for(e in n)if(has.call(n,e)&&++i&&!has.call(t,e)||!(e in t)||!dequal(n[e],t[e]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}function makeCancellablePromise(n){let t=!1;return{promise:new Promise((i,a)=>{n.then(o=>!t&&i(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(n,t){const e={};for(const i of allEvents){const a=n[i];a&&(t?e[i]=(o=>a(o,t(i))):e[i]=a)}return e}var prefix="Invariant failed";function invariant(n,t){if(!n)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var n=function(){};return warning_1=n,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports),documentContext=reactExports.createContext(null),DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{invariant(Array.isArray(e));const i=e[0];new Promise(a=>{invariant(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{a(o)}).catch(()=>{invariant(!1)}):typeof i=="number"?a(i):invariant(!1)}).then(a=>{const o=a+1;invariant(this.pdfViewer),invariant(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Message({children:n,type:t}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function reducer(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(n){return typeof n<"u"}function isProvided(n){return isDefined(n)&&n!==null}function isString(n){return typeof n=="string"}function isArrayBuffer(n){return n instanceof ArrayBuffer}function isBlob(n){return invariant(isBrowser),n instanceof Blob}function isDataURI(n){return isString(n)&&/^data:/.test(n)}function dataURItoByteString(n){invariant(isDataURI(n));const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(n){n?.cancel&&n.cancel()}function makePageCallback(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function isCancelException(n){return n.name==="RenderingCancelledException"}function loadFromFile(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(n,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case PasswordResponses.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function isParameterObject(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const Document=reactExports.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:c,inputRef:u,imageResourcesPath:f,loading:p="Loading PDF…",noData:m="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:x,onLoadSuccess:E,onPassword:A=defaultOnPassword,onSourceError:S,onSourceSuccess:T,options:D,renderMode:R,rotate:F,scale:k,...P},L){const[B,V]=useResolver(),{value:z,error:j}=B,[J,W]=useResolver(),{value:K,error:$}=J,N=reactExports.useRef(new LinkService),G=reactExports.useRef([]),I=reactExports.useRef(void 0),X=reactExports.useRef(void 0);c&&c!==I.current&&isParameterObject(c)&&(warning(!dequal(c,I.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),I.current=c),D&&D!==X.current&&(warning(!dequal(D,X.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),X.current=D);const et=reactExports.useRef({scrollPageIntoView:It=>{const{dest:yt,pageNumber:Wt,pageIndex:Zt=Wt-1}=It;if(y){y({dest:yt,pageIndex:Zt,pageNumber:Wt});return}const Ae=G.current[Zt];if(Ae){Ae.scrollIntoView();return}warning(!1,`An internal link leading to page ${Wt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(L,()=>({linkService:N,pages:G,viewer:et}),[]);function H(){T&&T()}function Q(){j&&(warning(!1,j.toString()),S&&S(j))}function st(){V({type:"RESET"})}reactExports.useEffect(st,[c,V]);const dt=reactExports.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return isDataURI(c)?{data:dataURItoByteString(c)}:(displayCORSWarning(),{url:c});if(c instanceof PDFDataRangeTransport)return{range:c};if(isArrayBuffer(c))return{data:c};if(isBrowser&&isBlob(c))return{data:await loadFromFile(c)};if(invariant(typeof c=="object"),invariant(isParameterObject(c)),"url"in c&&typeof c.url=="string"){if(isDataURI(c.url)){const{url:It,...yt}=c;return{data:dataURItoByteString(It),...yt}}displayCORSWarning()}return c},[c]);reactExports.useEffect(()=>{const It=makeCancellablePromise(dt());return It.promise.then(yt=>{V({type:"RESOLVE",value:yt})}).catch(yt=>{V({type:"REJECT",error:yt})}),()=>{cancelRunningTask(It)}},[dt,V]),reactExports.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){Q();return}H()}},[z]);function ft(){K&&(E&&E(K),G.current=new Array(K.numPages),N.current.setDocument(K))}function bt(){$&&(warning(!1,$.toString()),b&&b($))}reactExports.useEffect(function(){W({type:"RESET"})},[W,z]),reactExports.useEffect(function(){if(!z)return;const yt=D?{...z,...D}:z,Wt=getDocument(yt);x&&(Wt.onProgress=x),A&&(Wt.onPassword=A);const Zt=Wt,Ae=Zt.promise.then(be=>{W({type:"RESOLVE",value:be})}).catch(be=>{Zt.destroyed||W({type:"REJECT",error:be})});return()=>{Ae.finally(()=>Zt.destroy())}},[D,W,z]),reactExports.useEffect(()=>{if(!(typeof K>"u")){if(K===!1){bt();return}ft()}},[K]),reactExports.useEffect(function(){N.current.setViewer(et.current),N.current.setExternalLinkRel(a),N.current.setExternalLinkTarget(o)},[a,o]);const mt=reactExports.useCallback((It,yt)=>{G.current[It]=yt},[]),Mt=reactExports.useCallback(It=>{delete G.current[It]},[]),Ot=reactExports.useMemo(()=>({imageResourcesPath:f,linkService:N.current,onItemClick:y,pdf:K,registerPage:mt,renderMode:R,rotate:F,scale:k,unregisterPage:Mt}),[f,y,K,mt,R,F,k,Mt]),wt=reactExports.useMemo(()=>makeEventProps(P,()=>K),[P,K]);function $t(){function It(Wt){return!!Wt?.pdf}if(!It(Ot))throw new Error("pdf is undefined");const yt=typeof t=="function"?t(Ot):t;return jsxRuntimeExports.jsx(documentContext.Provider,{value:Ot,children:yt})}function te(){return c?K==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof p=="function"?p():p}):K===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof i=="function"?i():i}):$t():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof m=="function"?m():m})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",e),ref:u,...wt,children:te()})});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(o){for(var c=0,u=e;c<u.length;c++){var f=u[c];typeof f=="function"?f(o):f&&(f.current=o)}}}const pageContext=reactExports.createContext(null);function usePageContext(){return reactExports.useContext(pageContext)}function AnnotationLayer(){const n=useDocumentContext(),t=usePageContext();invariant(t);const e={...n,...t},{imageResourcesPath:i,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:f,page:p,pdf:m,renderForms:y,rotate:b,scale:x=1}=e;invariant(m),invariant(p),invariant(a);const[E,A]=useResolver(),{value:S,error:T}=E,D=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){S&&c&&c(S)}function F(){T&&(warning(!1,T.toString()),o&&o(T))}reactExports.useEffect(function(){A({type:"RESET"})},[A,p]),reactExports.useEffect(function(){if(!p)return;const V=makeCancellablePromise(p.getAnnotations()),z=V;return V.promise.then(j=>{A({type:"RESOLVE",value:j})}).catch(j=>{A({type:"REJECT",error:j})}),()=>{cancelRunningTask(z)}},[A,p]),reactExports.useEffect(()=>{if(S!==void 0){if(S===!1){F();return}R()}},[S]);function k(){f&&f()}function P(B){warning(!1,`${B}`),u&&u(B)}const L=reactExports.useMemo(()=>p.getViewport({scale:x,rotation:b}),[p,b,x]);return reactExports.useEffect(function(){if(!m||!p||!a||!S)return;const{current:V}=D;if(!V)return;const z=L.clone({dontFlip:!0}),j={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:V,l10n:null,linkService:a,page:p,structTreeLayer:null,viewport:z},J={annotations:S,annotationStorage:m.annotationStorage,div:V,imageResourcesPath:i,linkService:a,page:p,renderForms:y,viewport:z};V.innerHTML="";try{new AnnotationLayer$1(j).render(J),k()}catch(W){P(W)}return()=>{}},[S,i,a,p,m,y,L]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:D})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(n){return n in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(n){return"children"in n}function isStructTreeNodeWithOnlyContentChild(n){return isStructTreeNode(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function getRoleAttributes(n){const t={};if(isStructTreeNode(n)){const{role:e}=n,i=e.match(HEADING_PATTERN);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(isPdfRole(e)){const a=PDF_ROLE_TO_HTML_ROLE[e];a&&(t.role=a)}}return t}function getBaseAttributes(n){const t={};if(isStructTreeNode(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),isStructTreeNodeWithOnlyContentChild(n)){const[e]=n.children;if(e){const i=getBaseAttributes(e);return{...t,...i}}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function getAttributes(n){return n?{...getRoleAttributes(n),...getBaseAttributes(n)}:null}function StructTreeItem({className:n,node:t}){const e=reactExports.useMemo(()=>getAttributes(t),[t]),i=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((a,o)=>jsxRuntimeExports.jsx(StructTreeItem,{node:a},o)),[t]);return jsxRuntimeExports.jsx("span",{className:n,...e,children:i})}function StructTree(){const n=usePageContext();invariant(n);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[i,a]=useResolver(),{value:o,error:c}=i,{customTextRenderer:u,page:f}=n;function p(){o&&e&&e(o)}function m(){c&&(warning(!1,c.toString()),t&&t(c))}return reactExports.useEffect(function(){a({type:"RESET"})},[a,f]),reactExports.useEffect(function(){if(u||!f)return;const b=makeCancellablePromise(f.getStructTree()),x=b;return b.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>cancelRunningTask(x)},[u,f,a]),reactExports.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}p()}},[o]),o?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:o}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(n){const t=usePageContext();invariant(t);const e={...t,...n},{_className:i,canvasBackground:a,devicePixelRatio:o=getDevicePixelRatio(),onRenderError:c,onRenderSuccess:u,page:f,renderForms:p,renderTextLayer:m,rotate:y,scale:b}=e,{canvasRef:x}=n;invariant(f);const E=reactExports.useRef(null);function A(){f&&u&&u(makePageCallback(f,b))}function S(F){isCancelException(F)||(warning(!1,F.toString()),c&&c(F))}const T=reactExports.useMemo(()=>f.getViewport({scale:b*o,rotation:y}),[o,f,y,b]),D=reactExports.useMemo(()=>f.getViewport({scale:b,rotation:y}),[f,y,b]);reactExports.useEffect(function(){if(!f)return;f.cleanup();const{current:k}=E;if(!k)return;k.width=T.width,k.height=T.height,k.style.width=`${Math.floor(D.width)}px`,k.style.height=`${Math.floor(D.height)}px`,k.style.visibility="hidden";const P={annotationMode:p?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:k,canvasContext:k.getContext("2d",{alpha:!1}),viewport:T};a&&(P.background=a);const L=f.render(P),B=L;return L.promise.then(()=>{k.style.visibility="",A()}).catch(S),()=>cancelRunningTask(B)},[a,f,p,T,D]);const R=reactExports.useCallback(()=>{const{current:F}=E;F&&(F.width=0,F.height=0)},[]);return reactExports.useEffect(()=>R,[R]),jsxRuntimeExports.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:mergeRefs(x,E),style:{display:"block",userSelect:"none"},children:m?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(n){return"str"in n}function TextLayer(){const n=usePageContext();invariant(n);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:f,rotate:p,scale:m}=n;invariant(c);const[y,b]=useResolver(),{value:x,error:E}=y,A=reactExports.useRef(null);warning(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){x&&i&&i(x)}function T(){E&&(warning(!1,E.toString()),e&&e(E))}reactExports.useEffect(function(){b({type:"RESET"})},[c,b]),reactExports.useEffect(function(){if(!c)return;const B=makeCancellablePromise(c.getTextContent()),V=B;return B.promise.then(z=>{b({type:"RESOLVE",value:z})}).catch(z=>{b({type:"REJECT",error:z})}),()=>cancelRunningTask(V)},[c,b]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){T();return}S()}},[x]);const D=reactExports.useCallback(()=>{o&&o()},[o]),R=reactExports.useCallback(L=>{warning(!1,L.toString()),a&&a(L)},[a]);function F(){const L=A.current;L&&L.classList.add("selecting")}function k(){const L=A.current;L&&L.classList.remove("selecting")}const P=reactExports.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return reactExports.useLayoutEffect(function(){if(!c||!x)return;const{current:B}=A;if(!B)return;B.innerHTML="";const V=c.streamTextContent({includeMarkedContent:!0}),z={container:B,textContentSource:V,viewport:P},j=new TextLayer$1(z),J=j;return j.render().then(()=>{const W=document.createElement("div");W.className="endOfContent",B.append(W);const K=B.querySelectorAll('[role="presentation"]');if(t){let $=0;x.items.forEach((N,G)=>{if(!isTextItem(N))return;const I=K[$];if(!I)return;const X=t({pageIndex:u,pageNumber:f,itemIndex:G,...N});I.innerHTML=X,$+=N.str&&N.hasEOL?2:1})}D()}).catch(R),()=>cancelRunningTask(J)},[t,R,D,c,u,f,x,P]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:F,ref:A})}const defaultScale=1;function Page(n){const e={...useDocumentContext(),...n},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:c,children:u,className:f,customRenderer:p,customTextRenderer:m,devicePixelRatio:y,error:b="Failed to load the page.",height:x,inputRef:E,loading:A="Loading page…",noData:S="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:D,onGetStructTreeError:R,onGetStructTreeSuccess:F,onGetTextError:k,onGetTextSuccess:P,onLoadError:L,onLoadSuccess:B,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:z,onRenderError:j,onRenderSuccess:J,onRenderTextLayerError:W,onRenderTextLayerSuccess:K,pageIndex:$,pageNumber:N,pdf:G,registerPage:I,renderAnnotationLayer:X=!0,renderForms:et=!1,renderMode:H="canvas",renderTextLayer:Q=!0,rotate:st,scale:dt=defaultScale,unregisterPage:ft,width:bt,...mt}=e,[Mt,Ot]=useResolver(),{value:wt,error:$t}=Mt,te=reactExports.useRef(null);invariant(G);const It=isProvided(N)?N-1:$??null,yt=N??(isProvided($)?$+1:null),Wt=st??(wt?wt.rotate:null),Zt=reactExports.useMemo(()=>{if(!wt)return null;let kt=1;const Xt=dt??defaultScale;if(bt||x){const ce=wt.getViewport({scale:1,rotation:Wt});bt?kt=bt/ce.width:x&&(kt=x/ce.height)}return Xt*kt},[x,wt,Wt,dt,bt]);reactExports.useEffect(function(){return()=>{isProvided(It)&&a&&ft&&ft(It)}},[a,G,It,ft]);function Ae(){if(B){if(!wt||!Zt)return;B(makePageCallback(wt,Zt))}if(a&&I){if(!isProvided(It)||!te.current)return;I(It,te.current)}}function be(){$t&&(warning(!1,$t.toString()),L&&L($t))}reactExports.useEffect(function(){Ot({type:"RESET"})},[Ot,G,It]),reactExports.useEffect(function(){if(!G||!yt)return;const Xt=makeCancellablePromise(G.getPage(yt)),ce=Xt;return Xt.promise.then(Fe=>{Ot({type:"RESOLVE",value:Fe})}).catch(Fe=>{Ot({type:"REJECT",error:Fe})}),()=>cancelRunningTask(ce)},[Ot,G,yt]),reactExports.useEffect(()=>{if(wt!==void 0){if(wt===!1){be();return}Ae()}},[wt,Zt]);const xe=reactExports.useMemo(()=>isProvided(It)&&yt&&isProvided(Wt)&&isProvided(Zt)?{_className:i,canvasBackground:o,customTextRenderer:m,devicePixelRatio:y,onGetAnnotationsError:T,onGetAnnotationsSuccess:D,onGetStructTreeError:R,onGetStructTreeSuccess:F,onGetTextError:k,onGetTextSuccess:P,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:z,onRenderError:j,onRenderSuccess:J,onRenderTextLayerError:W,onRenderTextLayerSuccess:K,page:wt,pageIndex:It,pageNumber:yt,renderForms:et,renderTextLayer:Q,rotate:Wt,scale:Zt}:null,[i,o,m,y,T,D,R,F,k,P,V,z,j,J,W,K,wt,It,yt,et,Q,Wt,Zt]),pe=reactExports.useMemo(()=>makeEventProps(mt,()=>wt&&(Zt?makePageCallback(wt,Zt):void 0)),[mt,wt,Zt]),_e=`${It}@${Zt}/${Wt}`;function it(){switch(H){case"custom":return invariant(p),jsxRuntimeExports.jsx(p,{},`${_e}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:c},`${_e}_canvas`)}}function gt(){return Q?jsxRuntimeExports.jsx(TextLayer,{},`${_e}_text`):null}function vt(){return X?jsxRuntimeExports.jsx(AnnotationLayer,{},`${_e}_annotations`):null}function St(){function kt(ce){return!!ce?.page}if(!kt(xe))throw new Error("page is undefined");const Xt=typeof u=="function"?u(xe):u;return jsxRuntimeExports.jsxs(pageContext.Provider,{value:xe,children:[it(),gt(),vt(),Xt]})}function Ct(){return yt?G===null||wt===void 0||wt===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof A=="function"?A():A}):G===!1||wt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof b=="function"?b():b}):St():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof S=="function"?S():S})}return jsxRuntimeExports.jsx("div",{className:clsx(i,f),"data-page-number":yt,ref:mergeRefs(E,te),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Zt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...pe,children:Ct()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";function PdfComponent({fileUrl:n}){const[t,e]=reactExports.useState(),[i,a]=reactExports.useState(1);function o({numPages:f}){e(f)}const c=()=>{a(Math.max(1,i-1))},u=()=>{a(Math.min(t,i+1))};return n?jsxRuntimeExports.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Page ",i," of ",t||"..."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:c,disabled:i<=1,className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",title:"Previous Page",children:jsxRuntimeExports.jsx(FaChevronLeft,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:u,disabled:i>=(t||1),className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",title:"Next Page",children:jsxRuntimeExports.jsx(FaChevronRight,{className:"w-4 h-4"})})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(Document,{file:n,onLoadSuccess:o,children:jsxRuntimeExports.jsx(Page,{pageNumber:i,width:400,renderAnnotationLayer:!1,renderTextLayer:!1,className:"shadow-lg mx-auto"})})})]}):null}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(n,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])})(n,t)};function __extends(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}extendStatics(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var __assign=function(){return(__assign=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}).apply(this,arguments)};function __awaiter(n,t,e,i){return new(e||(e=Promise))((function(a,o){function c(p){try{f(i.next(p))}catch(m){o(m)}}function u(p){try{f(i.throw(p))}catch(m){o(m)}}function f(p){var m;p.done?a(p.value):(m=p.value,m instanceof e?m:new e((function(y){y(m)}))).then(c,u)}f((i=i.apply(n,[])).next())}))}function __generator(n,t){var e,i,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(p){return(function(m){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return c.label++,{value:m[1],done:!1};case 5:c.label++,i=m[1],m=[0];continue;case 7:m=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!((a=a.length>0&&a[a.length-1])||m[0]!==6&&m[0]!==2)){c=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){c.label=m[1];break}if(m[0]===6&&c.label<a[1]){c.label=a[1],a=m;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(m);break}a[2]&&c.ops.pop(),c.trys.pop();continue}m=t.call(n,c)}catch(y){m=[6,y],i=0}finally{e=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}})([f,p])}}}function createCommonjsModule(n,t){return n(t={exports:{}},t.exports),t.exports}var lottie=createCommonjsModule((function(module,exports){typeof navigator<"u"&&(function(n,t){module.exports=t()})(0,(function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(n){_useWebWorker=!!n},getWebWorker=function(){return _useWebWorker},setLocationHref=function(n){locationHref=n},getLocationHref=function(){return locationHref};function createTag(n){return document.createElement(n)}function extendPrototype(n,t){var e,i,a=n.length;for(e=0;e<a;e+=1)for(var o in i=n[e].prototype)Object.prototype.hasOwnProperty.call(i,o)&&(t.prototype[o]=i[o])}function getDescriptor(n,t){return Object.getOwnPropertyDescriptor(n,t)}function createProxyFunction(n){function t(){}return t.prototype=n,t}var audioControllerFactory=(function(){function n(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return n.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new n}})(),createTypedArray=(function(){function n(t,e){var i,a=0,o=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(a=0;a<e;a+=1)o.push(i);return o}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(t,e){return t==="float32"?new Float32Array(e):t==="int16"?new Int16Array(e):t==="uint8c"?new Uint8ClampedArray(e):n(t,e)}:n})();function createSizedArray(n){return Array.apply(null,{length:n})}function _typeof$6(n){return(_typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var n,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e=t.length;for(n=0;n<e;n+=1)BMMath[t[n]]=Math[t[n]]})(),BMMath.random=Math.random,BMMath.abs=function(n){if(_typeof$6(n)==="object"&&n.length){var t,e=createSizedArray(n.length),i=n.length;for(t=0;t<i;t+=1)e[t]=Math.abs(n[t]);return e}return Math.abs(n)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(n){n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.display="block",n.style.transformOrigin="0 0",n.style.webkitTransformOrigin="0 0",n.style.backfaceVisibility="visible",n.style.webkitBackfaceVisibility="visible",n.style.transformStyle="preserve-3d",n.style.webkitTransformStyle="preserve-3d",n.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(n,t,e,i){this.type=n,this.currentTime=t,this.totalTime=e,this.direction=i<0?-1:1}function BMCompleteEvent(n,t){this.type=n,this.direction=t<0?-1:1}function BMCompleteLoopEvent(n,t,e,i){this.type=n,this.currentLoop=e,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(n,t,e){this.type=n,this.firstFrame=t,this.totalFrames=e}function BMDestroyEvent(n,t){this.type=n,this.target=t}function BMRenderFrameErrorEvent(n,t){this.type="renderFrameError",this.nativeError=n,this.currentTime=t}function BMConfigErrorEvent(n){this.type="configError",this.nativeError=n}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(n,t,e){var i,a,o,c,u,f,p,m;switch(f=e*(1-t),p=e*(1-(u=6*n-(c=Math.floor(6*n)))*t),m=e*(1-(1-u)*t),c%6){case 0:i=e,a=m,o=f;break;case 1:i=p,a=e,o=f;break;case 2:i=f,a=e,o=m;break;case 3:i=f,a=p,o=e;break;case 4:i=m,a=f,o=e;break;case 5:i=e,a=f,o=p}return[i,a,o]}function RGBtoHSV(n,t,e){var i,a=Math.max(n,t,e),o=Math.min(n,t,e),c=a-o,u=a===0?0:c/a,f=a/255;switch(a){case o:i=0;break;case n:i=t-e+c*(t<e?6:0),i/=6*c;break;case t:i=e-n+2*c,i/=6*c;break;case e:i=n-t+4*c,i/=6*c}return[i,u,f]}function addSaturationToRGB(n,t){var e=RGBtoHSV(255*n[0],255*n[1],255*n[2]);return e[1]+=t,e[1]>1?e[1]=1:e[1]<=0&&(e[1]=0),HSVtoRGB(e[0],e[1],e[2])}function addBrightnessToRGB(n,t){var e=RGBtoHSV(255*n[0],255*n[1],255*n[2]);return e[2]+=t,e[2]>1?e[2]=1:e[2]<0&&(e[2]=0),HSVtoRGB(e[0],e[1],e[2])}function addHueToRGB(n,t){var e=RGBtoHSV(255*n[0],255*n[1],255*n[2]);return e[0]+=t/360,e[0]>1?e[0]-=1:e[0]<0&&(e[0]+=1),HSVtoRGB(e[0],e[1],e[2])}var rgbToHex=(function(){var n,t,e=[];for(n=0;n<256;n+=1)t=n.toString(16),e[n]=t.length===1?"0"+t:t;return function(i,a,o){return i<0&&(i=0),a<0&&(a=0),o<0&&(o=0),"#"+e[i]+e[a]+e[o]}})(),setSubframeEnabled=function(n){subframeEnabled=!!n},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(n){expressionsPlugin=n},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(n){expressionsInterfaces=n},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(n){defaultCurveSegments=n},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(n){idPrefix$1=n};function createNS(n){return document.createElementNS(svgNS,n)}function _typeof$5(n){return(_typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var dataManager=(function(){var n,t,e=1,i=[],a={onmessage:function(){},postMessage:function(f){n({data:f})}},o={postMessage:function(f){a.onmessage({data:f})}};function c(){t||((t=(function(f){if(window.Worker&&window.Blob&&getWebWorker()){var p=new Blob(["var _workerSelf = self; self.onmessage = ",f.toString()],{type:"text/javascript"}),m=URL.createObjectURL(p);return new Worker(m)}return n=f,a})((function(f){if(o.dataManager||(o.dataManager=(function(){function m(L,B){var V,z,j,J,W,K,$=L.length;for(z=0;z<$;z+=1)if("ks"in(V=L[z])&&!V.completed){if(V.completed=!0,V.hasMask){var N=V.masksProperties;for(J=N.length,j=0;j<J;j+=1)if(N[j].pt.k.i)x(N[j].pt.k);else for(K=N[j].pt.k.length,W=0;W<K;W+=1)N[j].pt.k[W].s&&x(N[j].pt.k[W].s[0]),N[j].pt.k[W].e&&x(N[j].pt.k[W].e[0])}V.ty===0?(V.layers=y(V.refId,B),m(V.layers,B)):V.ty===4?b(V.shapes):V.ty===5&&k(V)}}function y(L,B){var V=(function(z,j){for(var J=0,W=j.length;J<W;){if(j[J].id===z)return j[J];J+=1}return null})(L,B);return V?V.layers.__used?JSON.parse(JSON.stringify(V.layers)):(V.layers.__used=!0,V.layers):null}function b(L){var B,V,z;for(B=L.length-1;B>=0;B-=1)if(L[B].ty==="sh")if(L[B].ks.k.i)x(L[B].ks.k);else for(z=L[B].ks.k.length,V=0;V<z;V+=1)L[B].ks.k[V].s&&x(L[B].ks.k[V].s[0]),L[B].ks.k[V].e&&x(L[B].ks.k[V].e[0]);else L[B].ty==="gr"&&b(L[B].it)}function x(L){var B,V=L.i.length;for(B=0;B<V;B+=1)L.i[B][0]+=L.v[B][0],L.i[B][1]+=L.v[B][1],L.o[B][0]+=L.v[B][0],L.o[B][1]+=L.v[B][1]}function E(L,B){var V=B?B.split("."):[100,100,100];return L[0]>V[0]||!(V[0]>L[0])&&(L[1]>V[1]||!(V[1]>L[1])&&(L[2]>V[2]||!(V[2]>L[2])&&null))}var A,S=(function(){var L=[4,4,14];function B(V){var z,j,J,W=V.length;for(z=0;z<W;z+=1)V[z].ty===5&&(j=V[z],J=void 0,J=j.t.d,j.t.d={k:[{s:J,t:0}]})}return function(V){if(E(L,V.v)&&(B(V.layers),V.assets)){var z,j=V.assets.length;for(z=0;z<j;z+=1)V.assets[z].layers&&B(V.assets[z].layers)}}})(),T=(A=[4,7,99],function(L){if(L.chars&&!E(A,L.v)){var B,V=L.chars.length;for(B=0;B<V;B+=1){var z=L.chars[B];z.data&&z.data.shapes&&(b(z.data.shapes),z.data.ip=0,z.data.op=99999,z.data.st=0,z.data.sr=1,z.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},L.chars[B].t||(z.data.shapes.push({ty:"no"}),z.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),D=(function(){var L=[5,7,15];function B(V){var z,j,J,W=V.length;for(z=0;z<W;z+=1)V[z].ty===5&&(j=V[z],J=void 0,typeof(J=j.t.p).a=="number"&&(J.a={a:0,k:J.a}),typeof J.p=="number"&&(J.p={a:0,k:J.p}),typeof J.r=="number"&&(J.r={a:0,k:J.r}))}return function(V){if(E(L,V.v)&&(B(V.layers),V.assets)){var z,j=V.assets.length;for(z=0;z<j;z+=1)V.assets[z].layers&&B(V.assets[z].layers)}}})(),R=(function(){var L=[4,1,9];function B(z){var j,J,W,K=z.length;for(j=0;j<K;j+=1)if(z[j].ty==="gr")B(z[j].it);else if(z[j].ty==="fl"||z[j].ty==="st")if(z[j].c.k&&z[j].c.k[0].i)for(W=z[j].c.k.length,J=0;J<W;J+=1)z[j].c.k[J].s&&(z[j].c.k[J].s[0]/=255,z[j].c.k[J].s[1]/=255,z[j].c.k[J].s[2]/=255,z[j].c.k[J].s[3]/=255),z[j].c.k[J].e&&(z[j].c.k[J].e[0]/=255,z[j].c.k[J].e[1]/=255,z[j].c.k[J].e[2]/=255,z[j].c.k[J].e[3]/=255);else z[j].c.k[0]/=255,z[j].c.k[1]/=255,z[j].c.k[2]/=255,z[j].c.k[3]/=255}function V(z){var j,J=z.length;for(j=0;j<J;j+=1)z[j].ty===4&&B(z[j].shapes)}return function(z){if(E(L,z.v)&&(V(z.layers),z.assets)){var j,J=z.assets.length;for(j=0;j<J;j+=1)z.assets[j].layers&&V(z.assets[j].layers)}}})(),F=(function(){var L=[4,4,18];function B(z){var j,J,W;for(j=z.length-1;j>=0;j-=1)if(z[j].ty==="sh")if(z[j].ks.k.i)z[j].ks.k.c=z[j].closed;else for(W=z[j].ks.k.length,J=0;J<W;J+=1)z[j].ks.k[J].s&&(z[j].ks.k[J].s[0].c=z[j].closed),z[j].ks.k[J].e&&(z[j].ks.k[J].e[0].c=z[j].closed);else z[j].ty==="gr"&&B(z[j].it)}function V(z){var j,J,W,K,$,N,G=z.length;for(J=0;J<G;J+=1){if((j=z[J]).hasMask){var I=j.masksProperties;for(K=I.length,W=0;W<K;W+=1)if(I[W].pt.k.i)I[W].pt.k.c=I[W].cl;else for(N=I[W].pt.k.length,$=0;$<N;$+=1)I[W].pt.k[$].s&&(I[W].pt.k[$].s[0].c=I[W].cl),I[W].pt.k[$].e&&(I[W].pt.k[$].e[0].c=I[W].cl)}j.ty===4&&B(j.shapes)}}return function(z){if(E(L,z.v)&&(V(z.layers),z.assets)){var j,J=z.assets.length;for(j=0;j<J;j+=1)z.assets[j].layers&&V(z.assets[j].layers)}}})();function k(L){L.t.a.length===0&&L.t.p}var P={completeData:function(L){L.__complete||(R(L),S(L),T(L),D(L),F(L),m(L.layers,L.assets),(function(B,V){if(B){var z=0,j=B.length;for(z=0;z<j;z+=1)B[z].t===1&&(B[z].data.layers=y(B[z].data.refId,V),m(B[z].data.layers,V))}})(L.chars,L.assets),L.__complete=!0)}};return P.checkColors=R,P.checkChars=T,P.checkPathProperties=D,P.checkShapes=F,P.completeLayers=m,P})()),o.assetLoader||(o.assetLoader=(function(){function m(y){var b=y.getResponseHeader("content-type");return b&&y.responseType==="json"&&b.indexOf("json")!==-1||y.response&&_typeof$5(y.response)==="object"?y.response:y.response&&typeof y.response=="string"?JSON.parse(y.response):y.responseText?JSON.parse(y.responseText):null}return{load:function(y,b,x,E){var A,S=new XMLHttpRequest;try{S.responseType="json"}catch{}S.onreadystatechange=function(){if(S.readyState===4)if(S.status===200)A=m(S),x(A);else try{A=m(S),x(A)}catch(T){E&&E(T)}};try{S.open(["G","E","T"].join(""),y,!0)}catch{S.open(["G","E","T"].join(""),b+"/"+y,!0)}S.send()}}})()),f.data.type==="loadAnimation")o.assetLoader.load(f.data.path,f.data.fullPath,(function(m){o.dataManager.completeData(m),o.postMessage({id:f.data.id,payload:m,status:"success"})}),(function(){o.postMessage({id:f.data.id,status:"error"})}));else if(f.data.type==="complete"){var p=f.data.animation;o.dataManager.completeData(p),o.postMessage({id:f.data.id,payload:p,status:"success"})}else f.data.type==="loadData"&&o.assetLoader.load(f.data.path,f.data.fullPath,(function(m){o.postMessage({id:f.data.id,payload:m,status:"success"})}),(function(){o.postMessage({id:f.data.id,status:"error"})}))}))).onmessage=function(f){var p=f.data,m=p.id,y=i[m];i[m]=null,p.status==="success"?y.onComplete(p.payload):y.onError&&y.onError()})}function u(f,p){var m="processId_"+(e+=1);return i[m]={onComplete:f,onError:p},m}return{loadAnimation:function(f,p,m){c();var y=u(p,m);t.postMessage({type:"loadAnimation",path:f,fullPath:window.location.origin+window.location.pathname,id:y})},loadData:function(f,p,m){c();var y=u(p,m);t.postMessage({type:"loadData",path:f,fullPath:window.location.origin+window.location.pathname,id:y})},completeAnimation:function(f,p,m){c();var y=u(p,m);t.postMessage({type:"complete",animation:f,id:y})}}})(),ImagePreloader=(function(){var n=(function(){var u=createTag("canvas");u.width=1,u.height=1;var f=u.getContext("2d");return f.fillStyle="rgba(0,0,0,0)",f.fillRect(0,0,1,1),u})();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function e(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(u,f,p){var m="";if(u.e)m=u.p;else if(f){var y=u.p;y.indexOf("images/")!==-1&&(y=y.split("/")[1]),m=f+y}else m=p,m+=u.u?u.u:"",m+=u.p;return m}function a(u){var f=0,p=setInterval((function(){(u.getBBox().width||f>500)&&(this._imageLoaded(),clearInterval(p)),f+=1}).bind(this),50)}function o(u){var f={assetData:u},p=i(u,this.assetsPath,this.path);return dataManager.loadData(p,(function(m){f.img=m,this._footageLoaded()}).bind(this),(function(){f.img={},this._footageLoaded()}).bind(this)),f}function c(){this._imageLoaded=t.bind(this),this._footageLoaded=e.bind(this),this.testImageLoaded=a.bind(this),this.createFootageData=o.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return c.prototype={loadAssets:function(u,f){var p;this.imagesLoadedCb=f;var m=u.length;for(p=0;p<m;p+=1)u[p].layers||(u[p].t&&u[p].t!=="seq"?u[p].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(u[p]))):(this.totalImages+=1,this.images.push(this._createImageData(u[p]))))},setAssetsPath:function(u){this.assetsPath=u||""},setPath:function(u){this.path=u||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(u){for(var f=0,p=this.images.length;f<p;){if(this.images[f].assetData===u)return this.images[f].img;f+=1}return null},createImgData:function(u){var f=i(u,this.assetsPath,this.path),p=createTag("img");p.crossOrigin="anonymous",p.addEventListener("load",this._imageLoaded,!1),p.addEventListener("error",(function(){m.img=n,this._imageLoaded()}).bind(this),!1),p.src=f;var m={img:p,assetData:u};return m},createImageData:function(u){var f=i(u,this.assetsPath,this.path),p=createNS("image");isSafari?this.testImageLoaded(p):p.addEventListener("load",this._imageLoaded,!1),p.addEventListener("error",(function(){m.img=n,this._imageLoaded()}).bind(this),!1),p.setAttributeNS("http://www.w3.org/1999/xlink","href",f),this._elementHelper.append?this._elementHelper.append(p):this._elementHelper.appendChild(p);var m={img:p,assetData:u};return m},imageLoaded:t,footageLoaded:e,setCacheType:function(u,f){u==="svg"?(this._elementHelper=f,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},c})();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(n,t){if(this._cbs[n])for(var e=this._cbs[n],i=0;i<e.length;i+=1)e[i](t)},addEventListener:function(n,t){return this._cbs[n]||(this._cbs[n]=[]),this._cbs[n].push(t),(function(){this.removeEventListener(n,t)}).bind(this)},removeEventListener:function(n,t){if(t){if(this._cbs[n]){for(var e=0,i=this._cbs[n].length;e<i;)this._cbs[n][e]===t&&(this._cbs[n].splice(e,1),e-=1,i-=1),e+=1;this._cbs[n].length||(this._cbs[n]=null)}}else this._cbs[n]=null}};var markerParser=(function(){function n(t){for(var e,i=t.split(`\r
`),a={},o=0,c=0;c<i.length;c+=1)(e=i[c].split(":")).length===2&&(a[e[0]]=e[1].trim(),o+=1);if(o===0)throw new Error;return a}return function(t){for(var e=[],i=0;i<t.length;i+=1){var a=t[i],o={time:a.tm,duration:a.dr};try{o.payload=JSON.parse(t[i].cm)}catch{try{o.payload=n(t[i].cm)}catch{o.payload={name:t[i].cm}}}e.push(o)}return e}})(),ProjectInterface=(function(){function n(t){this.compositions.push(t)}return function(){function t(e){for(var i=0,a=this.compositions.length;i<a;){if(this.compositions[i].data&&this.compositions[i].data.nm===e)return this.compositions[i].prepareFrame&&this.compositions[i].data.xt&&this.compositions[i].prepareFrame(this.currentFrame),this.compositions[i].compInterface;i+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=n,t}})(),renderers={},registerRenderer=function(n,t){renderers[n]=t};function getRenderer(n){return renderers[n]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var n in renderers)if(renderers[n])return n;return""}function _typeof$4(n){return(_typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(n){(n.wrapper||n.container)&&(this.wrapper=n.wrapper||n.container);var t="svg";n.animType?t=n.animType:n.renderer&&(t=n.renderer);var e=getRenderer(t);this.renderer=new e(this,n.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,n.loop===""||n.loop===null||n.loop===void 0||n.loop===!0?this.loop=!0:n.loop===!1?this.loop=!1:this.loop=parseInt(n.loop,10),this.autoplay=!("autoplay"in n)||n.autoplay,this.name=n.name?n.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(n,"autoloadSegments")||n.autoloadSegments,this.assetsPath=n.assetsPath,this.initialSegment=n.initialSegment,n.audioFactory&&this.audioController.setAudioFactory(n.audioFactory),n.animationData?this.setupAnimation(n.animationData):n.path&&(n.path.lastIndexOf("\\")!==-1?this.path=n.path.substr(0,n.path.lastIndexOf("\\")+1):this.path=n.path.substr(0,n.path.lastIndexOf("/")+1),this.fileName=n.path.substr(n.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(n.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(n){dataManager.completeAnimation(n,this.configAnimation)},AnimationItem.prototype.setData=function(n,t){t&&_typeof$4(t)!=="object"&&(t=JSON.parse(t));var e={wrapper:n,animationData:t},i=n.attributes;e.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",e.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var a=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";a==="false"?e.loop=!1:a==="true"?e.loop=!0:a!==""&&(e.loop=parseInt(a,10));var o=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:!i.getNamedItem("bm-autoplay")||i.getNamedItem("bm-autoplay").value;e.autoplay=o!=="false",e.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"",(i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"")==="false"&&(e.prerender=!1),e.path?this.setParams(e):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(n){n.op>this.animationData.op&&(this.animationData.op=n.op,this.totalFrames=Math.floor(n.op-this.animationData.ip));var t,e,i=this.animationData.layers,a=i.length,o=n.layers,c=o.length;for(e=0;e<c;e+=1)for(t=0;t<a;){if(i[t].id===o[e].id){i[t]=o[e];break}t+=1}if((n.chars||n.fonts)&&(this.renderer.globalData.fontManager.addChars(n.chars),this.renderer.globalData.fontManager.addFonts(n.fonts,this.renderer.globalData.defs)),n.assets)for(a=n.assets.length,t=0;t<a;t+=1)this.animationData.assets.push(n.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(n){this.animationData=n;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var n=this.animationData.segments;if(!n||n.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=n.shift();this.timeCompleted=t.time*this.frameRate;var e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(e,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(n){if(this.renderer)try{this.animationData=n,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(n),n.assets||(n.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(n.assets),this.markers=markerParser(n.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var n=getExpressionsPlugin();n&&n.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(n,t){var e=typeof n=="number"?n:void 0,i=typeof t=="number"?t:void 0;this.renderer.updateContainerSize(e,i)},AnimationItem.prototype.setSubframe=function(n){this.isSubframeEnabled=!!n},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(n){this.triggerRenderFrameError(n)}},AnimationItem.prototype.play=function(n){n&&this.name!==n||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(n){n&&this.name!==n||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(n){n&&this.name!==n||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(n){n&&this.name!==n||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(n){for(var t,e=0;e<this.markers.length;e+=1)if((t=this.markers[e]).payload&&t.payload.name===n)return t;return null},AnimationItem.prototype.goToAndStop=function(n,t,e){if(!e||this.name===e){var i=Number(n);if(isNaN(i)){var a=this.getMarkerData(n);a&&this.goToAndStop(a.time,!0)}else t?this.setCurrentRawFrameValue(n):this.setCurrentRawFrameValue(n*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(n,t,e){if(!e||this.name===e){var i=Number(n);if(isNaN(i)){var a=this.getMarkerData(n);a&&(a.duration?this.playSegments([a.time,a.time+a.duration],!0):this.goToAndStop(a.time,!0))}else this.goToAndStop(i,t,e);this.play()}},AnimationItem.prototype.advanceTime=function(n){if(this.isPaused!==!0&&this.isLoaded!==!1){var t=this.currentRawFrame+n*this.frameModifier,e=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(e=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(e=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),e&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(n,t){this.playCount=0,n[1]<n[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=n[0]-n[1],this.timeCompleted=this.totalFrames,this.firstFrame=n[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):n[1]>n[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=n[1]-n[0],this.timeCompleted=this.totalFrames,this.firstFrame=n[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(n,t){var e=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<n?e=n:this.currentRawFrame+this.firstFrame>t&&(e=t-n)),this.firstFrame=n,this.totalFrames=t-n,this.timeCompleted=this.totalFrames,e!==-1&&this.goToAndStop(e,!0)},AnimationItem.prototype.playSegments=function(n,t){if(t&&(this.segments.length=0),_typeof$4(n[0])==="object"){var e,i=n.length;for(e=0;e<i;e+=1)this.segments.push(n[e])}else this.segments.push(n);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(n){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),n&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(n){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),n),!0)},AnimationItem.prototype.destroy=function(n){n&&this.name!==n||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(n){this.currentRawFrame=n,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(n){this.playSpeed=n,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(n){this.playDirection=n<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(n){this.loop=n},AnimationItem.prototype.setVolume=function(n,t){t&&this.name!==t||this.audioController.setVolume(n)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(n){n&&this.name!==n||this.audioController.mute()},AnimationItem.prototype.unmute=function(n){n&&this.name!==n||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(n){var t="";if(n.e)t=n.p;else if(this.assetsPath){var e=n.p;e.indexOf("images/")!==-1&&(e=e.split("/")[1]),t=this.assetsPath+e}else t=this.path,t+=n.u?n.u:"",t+=n.p;return t},AnimationItem.prototype.getAssetData=function(n){for(var t=0,e=this.assets.length;t<e;){if(n===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(n){return n?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(n,t,e){try{this.renderer.getElementByPath(n).updateDocumentData(t,e)}catch{}},AnimationItem.prototype.trigger=function(n){if(this._cbs&&this._cbs[n])switch(n){case"enterFrame":this.triggerEvent(n,new BMEnterFrameEvent(n,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(n,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(n,new BMCompleteLoopEvent(n,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(n,new BMCompleteEvent(n,this.frameMult));break;case"segmentStart":this.triggerEvent(n,new BMSegmentStartEvent(n,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(n,new BMDestroyEvent(n,this));break;default:this.triggerEvent(n)}n==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(n,this.currentFrame,this.totalFrames,this.frameMult)),n==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(n,this.loop,this.playCount,this.frameMult)),n==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(n,this.frameMult)),n==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(n,this.firstFrame,this.totalFrames)),n==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(n,this))},AnimationItem.prototype.triggerRenderFrameError=function(n){var t=new BMRenderFrameErrorEvent(n,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(n){var t=new BMConfigErrorEvent(n,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=(function(){var n={},t=[],e=0,i=0,a=0,o=!0,c=!1;function u(A){for(var S=0,T=A.target;S<i;)t[S].animation===T&&(t.splice(S,1),S-=1,i-=1,T.isPaused||m()),S+=1}function f(A,S){if(!A)return null;for(var T=0;T<i;){if(t[T].elem===A&&t[T].elem!==null)return t[T].animation;T+=1}var D=new AnimationItem;return y(D,A),D.setData(A,S),D}function p(){a+=1,E()}function m(){a-=1}function y(A,S){A.addEventListener("destroy",u),A.addEventListener("_active",p),A.addEventListener("_idle",m),t.push({elem:S,animation:A}),i+=1}function b(A){var S,T=A-e;for(S=0;S<i;S+=1)t[S].animation.advanceTime(T);e=A,a&&!c?window.requestAnimationFrame(b):o=!0}function x(A){e=A,window.requestAnimationFrame(b)}function E(){!c&&a&&o&&(window.requestAnimationFrame(x),o=!1)}return n.registerAnimation=f,n.loadAnimation=function(A){var S=new AnimationItem;return y(S,null),S.setParams(A),S},n.setSpeed=function(A,S){var T;for(T=0;T<i;T+=1)t[T].animation.setSpeed(A,S)},n.setDirection=function(A,S){var T;for(T=0;T<i;T+=1)t[T].animation.setDirection(A,S)},n.play=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.play(A)},n.pause=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.pause(A)},n.stop=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.stop(A)},n.togglePause=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.togglePause(A)},n.searchAnimations=function(A,S,T){var D,R=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),F=R.length;for(D=0;D<F;D+=1)T&&R[D].setAttribute("data-bm-type",T),f(R[D],A);if(S&&F===0){T||(T="svg");var k=document.getElementsByTagName("body")[0];k.innerText="";var P=createTag("div");P.style.width="100%",P.style.height="100%",P.setAttribute("data-bm-type",T),k.appendChild(P),f(P,A)}},n.resize=function(){var A;for(A=0;A<i;A+=1)t[A].animation.resize()},n.goToAndStop=function(A,S,T){var D;for(D=0;D<i;D+=1)t[D].animation.goToAndStop(A,S,T)},n.destroy=function(A){var S;for(S=i-1;S>=0;S-=1)t[S].animation.destroy(A)},n.freeze=function(){c=!0},n.unfreeze=function(){c=!1,E()},n.setVolume=function(A,S){var T;for(T=0;T<i;T+=1)t[T].animation.setVolume(A,S)},n.mute=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.mute(A)},n.unmute=function(A){var S;for(S=0;S<i;S+=1)t[S].animation.unmute(A)},n.getRegisteredAnimations=function(){var A,S=t.length,T=[];for(A=0;A<S;A+=1)T.push(t[A].animation);return T},n})(),BezierFactory=(function(){var n={getBezierEasing:function(p,m,y,b,x){var E=x||("bez_"+p+"_"+m+"_"+y+"_"+b).replace(/\./g,"p");if(t[E])return t[E];var A=new f([p,m,y,b]);return t[E]=A,A}},t={},e=typeof Float32Array=="function";function i(p,m){return 1-3*m+3*p}function a(p,m){return 3*m-6*p}function o(p){return 3*p}function c(p,m,y){return((i(m,y)*p+a(m,y))*p+o(m))*p}function u(p,m,y){return 3*i(m,y)*p*p+2*a(m,y)*p+o(m)}function f(p){this._p=p,this._mSampleValues=e?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return f.prototype={get:function(p){var m=this._p[0],y=this._p[1],b=this._p[2],x=this._p[3];return this._precomputed||this._precompute(),m===y&&b===x?p:p===0?0:p===1?1:c(this._getTForX(p),y,x)},_precompute:function(){var p=this._p[0],m=this._p[1],y=this._p[2],b=this._p[3];this._precomputed=!0,p===m&&y===b||this._calcSampleValues()},_calcSampleValues:function(){for(var p=this._p[0],m=this._p[2],y=0;y<11;++y)this._mSampleValues[y]=c(.1*y,p,m)},_getTForX:function(p){for(var m=this._p[0],y=this._p[2],b=this._mSampleValues,x=0,E=1;E!==10&&b[E]<=p;++E)x+=.1;var A=x+.1*((p-b[--E])/(b[E+1]-b[E])),S=u(A,m,y);return S>=.001?(function(T,D,R,F){for(var k=0;k<4;++k){var P=u(D,R,F);if(P===0)return D;D-=(c(D,R,F)-T)/P}return D})(p,A,m,y):S===0?A:(function(T,D,R,F,k){var P,L,B=0;do(P=c(L=D+(R-D)/2,F,k)-T)>0?R=L:D=L;while(Math.abs(P)>1e-7&&++B<10);return L})(p,x,x+.1,m,y)}},n})(),pooling={double:function(n){return n.concat(createSizedArray(n.length))}},poolFactory=function(n,t,e){var i=0,a=n,o=createSizedArray(a);return{newElement:function(){return i?o[i-=1]:t()},release:function(c){i===a&&(o=pooling.double(o),a*=2),e&&e(c),o[i]=c,i+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(n){var t,e=n.lengths.length;for(t=0;t<e;t+=1)bezierLengthPool.release(n.lengths[t]);n.lengths.length=0}));function bezFunction(){var n=Math;function t(p,m,y,b,x,E){var A=p*b+m*x+y*E-x*b-E*p-y*m;return A>-.001&&A<.001}var e=function(p,m,y,b){var x,E,A,S,T,D,R=getDefaultCurveSegments(),F=0,k=[],P=[],L=bezierLengthPool.newElement();for(A=y.length,x=0;x<R;x+=1){for(T=x/(R-1),D=0,E=0;E<A;E+=1)S=bmPow(1-T,3)*p[E]+3*bmPow(1-T,2)*T*y[E]+3*(1-T)*bmPow(T,2)*b[E]+bmPow(T,3)*m[E],k[E]=S,P[E]!==null&&(D+=bmPow(k[E]-P[E],2)),P[E]=k[E];D&&(F+=D=bmSqrt(D)),L.percents[x]=T,L.lengths[x]=F}return L.addedLength=F,L};function i(p){this.segmentLength=0,this.points=new Array(p)}function a(p,m){this.partialLength=p,this.point=m}var o,c=(o={},function(p,m,y,b){var x=(p[0]+"_"+p[1]+"_"+m[0]+"_"+m[1]+"_"+y[0]+"_"+y[1]+"_"+b[0]+"_"+b[1]).replace(/\./g,"p");if(!o[x]){var E,A,S,T,D,R,F,k=getDefaultCurveSegments(),P=0,L=null;p.length===2&&(p[0]!==m[0]||p[1]!==m[1])&&t(p[0],p[1],m[0],m[1],p[0]+y[0],p[1]+y[1])&&t(p[0],p[1],m[0],m[1],m[0]+b[0],m[1]+b[1])&&(k=2);var B=new i(k);for(S=y.length,E=0;E<k;E+=1){for(F=createSizedArray(S),D=E/(k-1),R=0,A=0;A<S;A+=1)T=bmPow(1-D,3)*p[A]+3*bmPow(1-D,2)*D*(p[A]+y[A])+3*(1-D)*bmPow(D,2)*(m[A]+b[A])+bmPow(D,3)*m[A],F[A]=T,L!==null&&(R+=bmPow(F[A]-L[A],2));P+=R=bmSqrt(R),B.points[E]=new a(R,F),L=F}B.segmentLength=P,o[x]=B}return o[x]});function u(p,m){var y=m.percents,b=m.lengths,x=y.length,E=bmFloor((x-1)*p),A=p*m.addedLength,S=0;if(E===x-1||E===0||A===b[E])return y[E];for(var T=b[E]>A?-1:1,D=!0;D;)if(b[E]<=A&&b[E+1]>A?(S=(A-b[E])/(b[E+1]-b[E]),D=!1):E+=T,E<0||E>=x-1){if(E===x-1)return y[E];D=!1}return y[E]+(y[E+1]-y[E])*S}var f=createTypedArray("float32",8);return{getSegmentsLength:function(p){var m,y=segmentsLengthPool.newElement(),b=p.c,x=p.v,E=p.o,A=p.i,S=p._length,T=y.lengths,D=0;for(m=0;m<S-1;m+=1)T[m]=e(x[m],x[m+1],E[m],A[m+1]),D+=T[m].addedLength;return b&&S&&(T[m]=e(x[m],x[0],E[m],A[0]),D+=T[m].addedLength),y.totalLength=D,y},getNewSegment:function(p,m,y,b,x,E,A){x<0?x=0:x>1&&(x=1);var S,T=u(x,A),D=u(E=E>1?1:E,A),R=p.length,F=1-T,k=1-D,P=F*F*F,L=T*F*F*3,B=T*T*F*3,V=T*T*T,z=F*F*k,j=T*F*k+F*T*k+F*F*D,J=T*T*k+F*T*D+T*F*D,W=T*T*D,K=F*k*k,$=T*k*k+F*D*k+F*k*D,N=T*D*k+F*D*D+T*k*D,G=T*D*D,I=k*k*k,X=D*k*k+k*D*k+k*k*D,et=D*D*k+k*D*D+D*k*D,H=D*D*D;for(S=0;S<R;S+=1)f[4*S]=n.round(1e3*(P*p[S]+L*y[S]+B*b[S]+V*m[S]))/1e3,f[4*S+1]=n.round(1e3*(z*p[S]+j*y[S]+J*b[S]+W*m[S]))/1e3,f[4*S+2]=n.round(1e3*(K*p[S]+$*y[S]+N*b[S]+G*m[S]))/1e3,f[4*S+3]=n.round(1e3*(I*p[S]+X*y[S]+et*b[S]+H*m[S]))/1e3;return f},getPointInSegment:function(p,m,y,b,x,E){var A=u(x,E),S=1-A;return[n.round(1e3*(S*S*S*p[0]+(A*S*S+S*A*S+S*S*A)*y[0]+(A*A*S+S*A*A+A*S*A)*b[0]+A*A*A*m[0]))/1e3,n.round(1e3*(S*S*S*p[1]+(A*S*S+S*A*S+S*S*A)*y[1]+(A*A*S+S*A*A+A*S*A)*b[1]+A*A*A*m[1]))/1e3]},buildBezierData:c,pointOnLine2D:t,pointOnLine3D:function(p,m,y,b,x,E,A,S,T){if(y===0&&E===0&&T===0)return t(p,m,b,x,A,S);var D,R=n.sqrt(n.pow(b-p,2)+n.pow(x-m,2)+n.pow(E-y,2)),F=n.sqrt(n.pow(A-p,2)+n.pow(S-m,2)+n.pow(T-y,2)),k=n.sqrt(n.pow(A-b,2)+n.pow(S-x,2)+n.pow(T-E,2));return(D=R>F?R>k?R-F-k:k-F-R:k>F?k-F-R:F-R-k)>-1e-4&&D<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(n,t){var e,i=this.offsetTime;this.propType==="multidimensional"&&(e=createTypedArray("float32",this.pv.length));for(var a,o,c,u,f,p,m,y,b,x=t.lastIndex,E=x,A=this.keyframes.length-1,S=!0;S;){if(a=this.keyframes[E],o=this.keyframes[E+1],E===A-1&&n>=o.t-i){a.h&&(a=o),x=0;break}if(o.t-i>n){x=E;break}E<A-1?E+=1:(x=0,S=!1)}c=this.keyframesMetadata[E]||{};var T,D=o.t-i,R=a.t-i;if(a.to){c.bezierData||(c.bezierData=bez.buildBezierData(a.s,o.s||a.e,a.to,a.ti));var F=c.bezierData;if(n>=D||n<R){var k=n>=D?F.points.length-1:0;for(f=F.points[k].point.length,u=0;u<f;u+=1)e[u]=F.points[k].point[u]}else{c.__fnct?b=c.__fnct:(b=BezierFactory.getBezierEasing(a.o.x,a.o.y,a.i.x,a.i.y,a.n).get,c.__fnct=b),p=b((n-R)/(D-R));var P,L=F.segmentLength*p,B=t.lastFrame<n&&t._lastKeyframeIndex===E?t._lastAddedLength:0;for(y=t.lastFrame<n&&t._lastKeyframeIndex===E?t._lastPoint:0,S=!0,m=F.points.length;S;){if(B+=F.points[y].partialLength,L===0||p===0||y===F.points.length-1){for(f=F.points[y].point.length,u=0;u<f;u+=1)e[u]=F.points[y].point[u];break}if(L>=B&&L<B+F.points[y+1].partialLength){for(P=(L-B)/F.points[y+1].partialLength,f=F.points[y].point.length,u=0;u<f;u+=1)e[u]=F.points[y].point[u]+(F.points[y+1].point[u]-F.points[y].point[u])*P;break}y<m-1?y+=1:S=!1}t._lastPoint=y,t._lastAddedLength=B-F.points[y].partialLength,t._lastKeyframeIndex=E}}else{var V,z,j,J,W;if(A=a.s.length,T=o.s||a.e,this.sh&&a.h!==1)n>=D?(e[0]=T[0],e[1]=T[1],e[2]=T[2]):n<=R?(e[0]=a.s[0],e[1]=a.s[1],e[2]=a.s[2]):quaternionToEuler(e,slerp(createQuaternion(a.s),createQuaternion(T),(n-R)/(D-R)));else for(E=0;E<A;E+=1)a.h!==1&&(n>=D?p=1:n<R?p=0:(a.o.x.constructor===Array?(c.__fnct||(c.__fnct=[]),c.__fnct[E]?b=c.__fnct[E]:(V=a.o.x[E]===void 0?a.o.x[0]:a.o.x[E],z=a.o.y[E]===void 0?a.o.y[0]:a.o.y[E],j=a.i.x[E]===void 0?a.i.x[0]:a.i.x[E],J=a.i.y[E]===void 0?a.i.y[0]:a.i.y[E],b=BezierFactory.getBezierEasing(V,z,j,J).get,c.__fnct[E]=b)):c.__fnct?b=c.__fnct:(V=a.o.x,z=a.o.y,j=a.i.x,J=a.i.y,b=BezierFactory.getBezierEasing(V,z,j,J).get,a.keyframeMetadata=b),p=b((n-R)/(D-R)))),T=o.s||a.e,W=a.h===1?a.s[E]:a.s[E]+(T[E]-a.s[E])*p,this.propType==="multidimensional"?e[E]=W:e=W}return t.lastIndex=x,e}function slerp(n,t,e){var i,a,o,c,u,f=[],p=n[0],m=n[1],y=n[2],b=n[3],x=t[0],E=t[1],A=t[2],S=t[3];return(a=p*x+m*E+y*A+b*S)<0&&(a=-a,x=-x,E=-E,A=-A,S=-S),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),c=Math.sin((1-e)*i)/o,u=Math.sin(e*i)/o):(c=1-e,u=e),f[0]=c*p+u*x,f[1]=c*m+u*E,f[2]=c*y+u*A,f[3]=c*b+u*S,f}function quaternionToEuler(n,t){var e=t[0],i=t[1],a=t[2],o=t[3],c=Math.atan2(2*i*o-2*e*a,1-2*i*i-2*a*a),u=Math.asin(2*e*i+2*a*o),f=Math.atan2(2*e*o-2*i*a,1-2*e*e-2*a*a);n[0]=c/degToRads,n[1]=u/degToRads,n[2]=f/degToRads}function createQuaternion(n){var t=n[0]*degToRads,e=n[1]*degToRads,i=n[2]*degToRads,a=Math.cos(t/2),o=Math.cos(e/2),c=Math.cos(i/2),u=Math.sin(t/2),f=Math.sin(e/2),p=Math.sin(i/2);return[u*f*c+a*o*p,u*o*c+a*f*p,a*f*c-u*o*p,a*o*c-u*f*p]}function getValueAtCurrentTime(){var n=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,e=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(n===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=e&&n>=e||this._caching.lastFrame<t&&n<t))){this._caching.lastFrame>=n&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(n,this._caching);this.pv=i}return this._caching.lastFrame=n,this.pv}function setVValue(n){var t;if(this.propType==="unidimensional")t=n*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var e=0,i=this.v.length;e<i;)t=n[e]*this.mult,mathAbs(this.v[e]-t)>1e-5&&(this.v[e]=t,this._mdf=!0),e+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var n;this.lock=!0,this._mdf=this._isFirstFrame;var t=this.effectsSequence.length,e=this.kf?this.pv:this.data.k;for(n=0;n<t;n+=1)e=this.effectsSequence[n](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(n){this.effectsSequence.push(n),this.container.addDynamicProperty(this)}function ValueProperty(n,t,e,i){this.propType="unidimensional",this.mult=e||1,this.data=t,this.v=e?t.k*e:t.k,this.pv=t.k,this._mdf=!1,this.elem=n,this.container=i,this.comp=n.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(n,t,e,i){var a;this.propType="multidimensional",this.mult=e||1,this.data=t,this._mdf=!1,this.elem=n,this.container=i,this.comp=n.comp,this.k=!1,this.kf=!1,this.frameId=-1;var o=t.k.length;for(this.v=createTypedArray("float32",o),this.pv=createTypedArray("float32",o),this.vel=createTypedArray("float32",o),a=0;a<o;a+=1)this.v[a]=t.k[a]*this.mult,this.pv[a]=t.k[a];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(n,t,e,i){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=n.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=e||1,this.elem=n,this.container=i,this.comp=n.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(n,t,e,i){var a;this.propType="multidimensional";var o,c,u,f,p=t.k.length;for(a=0;a<p-1;a+=1)t.k[a].to&&t.k[a].s&&t.k[a+1]&&t.k[a+1].s&&(o=t.k[a].s,c=t.k[a+1].s,u=t.k[a].to,f=t.k[a].ti,(o.length===2&&(o[0]!==c[0]||o[1]!==c[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],o[0]+u[0],o[1]+u[1])&&bez.pointOnLine2D(o[0],o[1],c[0],c[1],c[0]+f[0],c[1]+f[1])||o.length===3&&(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],o[0]+u[0],o[1]+u[1],o[2]+u[2])&&bez.pointOnLine3D(o[0],o[1],o[2],c[0],c[1],c[2],c[0]+f[0],c[1]+f[1],c[2]+f[2]))&&(t.k[a].to=null,t.k[a].ti=null),o[0]===c[0]&&o[1]===c[1]&&u[0]===0&&u[1]===0&&f[0]===0&&f[1]===0&&(o.length===2||o[2]===c[2]&&u[2]===0&&f[2]===0)&&(t.k[a].to=null,t.k[a].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=n.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=e||1,this.elem=n,this.container=i,this.comp=n.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var m=t.k[0].s.length;for(this.v=createTypedArray("float32",m),this.pv=createTypedArray("float32",m),a=0;a<m;a+=1)this.v[a]=initFrame,this.pv[a]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",m)},this.addEffect=addEffect}var PropertyFactory={getProp:function(n,t,e,i,a){var o;if(t.sid&&(t=n.globalData.slotManager.getProp(t)),t.k.length)if(typeof t.k[0]=="number")o=new MultiDimensionalProperty(n,t,i,a);else switch(e){case 0:o=new KeyframedValueProperty(n,t,i,a);break;case 1:o=new KeyframedMultidimensionalProperty(n,t,i,a)}else o=new ValueProperty(n,t,i,a);return o.effectsSequence.length&&a.addDynamicProperty(o),o}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(n){this.dynamicProperties.indexOf(n)===-1&&(this.dynamicProperties.push(n),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var n;this._mdf=!1;var t=this.dynamicProperties.length;for(n=0;n<t;n+=1)this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(n){this.container=n,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(n,t){this.c=n,this.setLength(t);for(var e=0;e<t;)this.v[e]=pointPool.newElement(),this.o[e]=pointPool.newElement(),this.i[e]=pointPool.newElement(),e+=1},ShapePath.prototype.setLength=function(n){for(;this._maxLength<n;)this.doubleArrayLength();this._length=n},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(n,t,e,i,a){var o;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),e){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o;break;default:o=[]}(!o[i]||o[i]&&!a)&&(o[i]=pointPool.newElement()),o[i][0]=n,o[i][1]=t},ShapePath.prototype.setTripleAt=function(n,t,e,i,a,o,c,u){this.setXYAt(n,t,"v",c,u),this.setXYAt(e,i,"o",c,u),this.setXYAt(a,o,"i",c,u)},ShapePath.prototype.reverse=function(){var n=new ShapePath;n.setPathData(this.c,this._length);var t=this.v,e=this.o,i=this.i,a=0;this.c&&(n.setTripleAt(t[0][0],t[0][1],i[0][0],i[0][1],e[0][0],e[0][1],0,!1),a=1);var o,c=this._length-1,u=this._length;for(o=a;o<u;o+=1)n.setTripleAt(t[c][0],t[c][1],i[c][0],i[c][1],e[c][0],e[c][1],o,!1),c-=1;return n},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(n){var t,e=n._length;for(t=0;t<e;t+=1)pointPool.release(n.v[t]),pointPool.release(n.i[t]),pointPool.release(n.o[t]),n.v[t]=null,n.i[t]=null,n.o[t]=null;n._length=0,n.c=!1})),factory.clone=function(n){var t,e=factory.newElement(),i=n._length===void 0?n.v.length:n._length;for(e.setLength(i),e.c=n.c,t=0;t<i;t+=1)e.setTripleAt(n.v[t][0],n.v[t][1],n.o[t][0],n.o[t][1],n.i[t][0],n.i[t][1],t);return e},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(n){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=n,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var n;for(n=0;n<this._length;n+=1)shapePool.release(this.shapes[n]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(n){var t,e=n._length;for(t=0;t<e;t+=1)shapePool.release(n.shapes[t]);n._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=n,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=(function(){function n(b,x,E){var A,S,T,D,R,F,k,P,L,B=E.lastIndex,V=this.keyframes;if(b<V[0].t-this.offsetTime)A=V[0].s[0],T=!0,B=0;else if(b>=V[V.length-1].t-this.offsetTime)A=V[V.length-1].s?V[V.length-1].s[0]:V[V.length-2].e[0],T=!0;else{for(var z,j,J,W=B,K=V.length-1,$=!0;$&&(z=V[W],!((j=V[W+1]).t-this.offsetTime>b));)W<K-1?W+=1:$=!1;if(J=this.keyframesMetadata[W]||{},B=W,!(T=z.h===1)){if(b>=j.t-this.offsetTime)P=1;else if(b<z.t-this.offsetTime)P=0;else{var N;J.__fnct?N=J.__fnct:(N=BezierFactory.getBezierEasing(z.o.x,z.o.y,z.i.x,z.i.y).get,J.__fnct=N),P=N((b-(z.t-this.offsetTime))/(j.t-this.offsetTime-(z.t-this.offsetTime)))}S=j.s?j.s[0]:z.e[0]}A=z.s[0]}for(F=x._length,k=A.i[0].length,E.lastIndex=B,D=0;D<F;D+=1)for(R=0;R<k;R+=1)L=T?A.i[D][R]:A.i[D][R]+(S.i[D][R]-A.i[D][R])*P,x.i[D][R]=L,L=T?A.o[D][R]:A.o[D][R]+(S.o[D][R]-A.o[D][R])*P,x.o[D][R]=L,L=T?A.v[D][R]:A.v[D][R]+(S.v[D][R]-A.v[D][R])*P,x.v[D][R]=L}function t(){var b=this.comp.renderedFrame-this.offsetTime,x=this.keyframes[0].t-this.offsetTime,E=this.keyframes[this.keyframes.length-1].t-this.offsetTime,A=this._caching.lastFrame;return A!==-999999&&(A<x&&b<x||A>E&&b>E)||(this._caching.lastIndex=A<b?this._caching.lastIndex:0,this.interpolateShape(b,this.pv,this._caching)),this._caching.lastFrame=b,this.pv}function e(){this.paths=this.localShapeCollection}function i(b){(function(x,E){if(x._length!==E._length||x.c!==E.c)return!1;var A,S=x._length;for(A=0;A<S;A+=1)if(x.v[A][0]!==E.v[A][0]||x.v[A][1]!==E.v[A][1]||x.o[A][0]!==E.o[A][0]||x.o[A][1]!==E.o[A][1]||x.i[A][0]!==E.i[A][0]||x.i[A][1]!==E.i[A][1])return!1;return!0})(this.v,b)||(this.v=shapePool.clone(b),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var b,x;this.lock=!0,this._mdf=!1,b=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var E=this.effectsSequence.length;for(x=0;x<E;x+=1)b=this.effectsSequence[x](b);this.setVValue(b),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function o(b,x,E){this.propType="shape",this.comp=b.comp,this.container=b,this.elem=b,this.data=x,this.k=!1,this.kf=!1,this._mdf=!1;var A=E===3?x.pt.k:x.ks.k;this.v=shapePool.clone(A),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=e,this.effectsSequence=[]}function c(b){this.effectsSequence.push(b),this.container.addDynamicProperty(this)}function u(b,x,E){this.propType="shape",this.comp=b.comp,this.elem=b,this.container=b,this.offsetTime=b.data.st,this.keyframes=E===3?x.pt.k:x.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var A=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,A),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=e,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[t.bind(this)]}o.prototype.interpolateShape=n,o.prototype.getValue=a,o.prototype.setVValue=i,o.prototype.addEffect=c,u.prototype.getValue=a,u.prototype.interpolateShape=n,u.prototype.setVValue=i,u.prototype.addEffect=c;var f=(function(){var b=roundCorner;function x(E,A){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=A.d,this.elem=E,this.comp=E.comp,this.frameId=-1,this.initDynamicPropertyContainer(E),this.p=PropertyFactory.getProp(E,A.p,1,0,this),this.s=PropertyFactory.getProp(E,A.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return x.prototype={reset:e,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var E=this.p.v[0],A=this.p.v[1],S=this.s.v[0]/2,T=this.s.v[1]/2,D=this.d!==3,R=this.v;R.v[0][0]=E,R.v[0][1]=A-T,R.v[1][0]=D?E+S:E-S,R.v[1][1]=A,R.v[2][0]=E,R.v[2][1]=A+T,R.v[3][0]=D?E-S:E+S,R.v[3][1]=A,R.i[0][0]=D?E-S*b:E+S*b,R.i[0][1]=A-T,R.i[1][0]=D?E+S:E-S,R.i[1][1]=A-T*b,R.i[2][0]=D?E+S*b:E-S*b,R.i[2][1]=A+T,R.i[3][0]=D?E-S:E+S,R.i[3][1]=A+T*b,R.o[0][0]=D?E+S*b:E-S*b,R.o[0][1]=A-T,R.o[1][0]=D?E+S:E-S,R.o[1][1]=A+T*b,R.o[2][0]=D?E-S*b:E+S*b,R.o[2][1]=A+T,R.o[3][0]=D?E-S:E+S,R.o[3][1]=A-T*b}},extendPrototype([DynamicPropertyContainer],x),x})(),p=(function(){function b(x,E){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=x,this.comp=x.comp,this.data=E,this.frameId=-1,this.d=E.d,this.initDynamicPropertyContainer(x),E.sy===1?(this.ir=PropertyFactory.getProp(x,E.ir,0,0,this),this.is=PropertyFactory.getProp(x,E.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(x,E.pt,0,0,this),this.p=PropertyFactory.getProp(x,E.p,1,0,this),this.r=PropertyFactory.getProp(x,E.r,0,degToRads,this),this.or=PropertyFactory.getProp(x,E.or,0,0,this),this.os=PropertyFactory.getProp(x,E.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return b.prototype={reset:e,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var x,E,A,S,T=2*Math.floor(this.pt.v),D=2*Math.PI/T,R=!0,F=this.or.v,k=this.ir.v,P=this.os.v,L=this.is.v,B=2*Math.PI*F/(2*T),V=2*Math.PI*k/(2*T),z=-Math.PI/2;z+=this.r.v;var j=this.data.d===3?-1:1;for(this.v._length=0,x=0;x<T;x+=1){A=R?P:L,S=R?B:V;var J=(E=R?F:k)*Math.cos(z),W=E*Math.sin(z),K=J===0&&W===0?0:W/Math.sqrt(J*J+W*W),$=J===0&&W===0?0:-J/Math.sqrt(J*J+W*W);J+=+this.p.v[0],W+=+this.p.v[1],this.v.setTripleAt(J,W,J-K*S*A*j,W-$*S*A*j,J+K*S*A*j,W+$*S*A*j,x,!0),R=!R,z+=D*j}},convertPolygonToPath:function(){var x,E=Math.floor(this.pt.v),A=2*Math.PI/E,S=this.or.v,T=this.os.v,D=2*Math.PI*S/(4*E),R=.5*-Math.PI,F=this.data.d===3?-1:1;for(R+=this.r.v,this.v._length=0,x=0;x<E;x+=1){var k=S*Math.cos(R),P=S*Math.sin(R),L=k===0&&P===0?0:P/Math.sqrt(k*k+P*P),B=k===0&&P===0?0:-k/Math.sqrt(k*k+P*P);k+=+this.p.v[0],P+=+this.p.v[1],this.v.setTripleAt(k,P,k-L*D*T*F,P-B*D*T*F,k+L*D*T*F,P+B*D*T*F,x,!0),R+=A*F}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],b),b})(),m=(function(){function b(x,E){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=x,this.comp=x.comp,this.frameId=-1,this.d=E.d,this.initDynamicPropertyContainer(x),this.p=PropertyFactory.getProp(x,E.p,1,0,this),this.s=PropertyFactory.getProp(x,E.s,1,0,this),this.r=PropertyFactory.getProp(x,E.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return b.prototype={convertRectToPath:function(){var x=this.p.v[0],E=this.p.v[1],A=this.s.v[0]/2,S=this.s.v[1]/2,T=bmMin(A,S,this.r.v),D=T*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(x+A,E-S+T,x+A,E-S+T,x+A,E-S+D,0,!0),this.v.setTripleAt(x+A,E+S-T,x+A,E+S-D,x+A,E+S-T,1,!0),T!==0?(this.v.setTripleAt(x+A-T,E+S,x+A-T,E+S,x+A-D,E+S,2,!0),this.v.setTripleAt(x-A+T,E+S,x-A+D,E+S,x-A+T,E+S,3,!0),this.v.setTripleAt(x-A,E+S-T,x-A,E+S-T,x-A,E+S-D,4,!0),this.v.setTripleAt(x-A,E-S+T,x-A,E-S+D,x-A,E-S+T,5,!0),this.v.setTripleAt(x-A+T,E-S,x-A+T,E-S,x-A+D,E-S,6,!0),this.v.setTripleAt(x+A-T,E-S,x+A-D,E-S,x+A-T,E-S,7,!0)):(this.v.setTripleAt(x-A,E+S,x-A+D,E+S,x-A,E+S,2),this.v.setTripleAt(x-A,E-S,x-A,E-S+D,x-A,E-S,3))):(this.v.setTripleAt(x+A,E-S+T,x+A,E-S+D,x+A,E-S+T,0,!0),T!==0?(this.v.setTripleAt(x+A-T,E-S,x+A-T,E-S,x+A-D,E-S,1,!0),this.v.setTripleAt(x-A+T,E-S,x-A+D,E-S,x-A+T,E-S,2,!0),this.v.setTripleAt(x-A,E-S+T,x-A,E-S+T,x-A,E-S+D,3,!0),this.v.setTripleAt(x-A,E+S-T,x-A,E+S-D,x-A,E+S-T,4,!0),this.v.setTripleAt(x-A+T,E+S,x-A+T,E+S,x-A+D,E+S,5,!0),this.v.setTripleAt(x+A-T,E+S,x+A-D,E+S,x+A-T,E+S,6,!0),this.v.setTripleAt(x+A,E+S-T,x+A,E+S-T,x+A,E+S-D,7,!0)):(this.v.setTripleAt(x-A,E-S,x-A+D,E-S,x-A,E-S,1,!0),this.v.setTripleAt(x-A,E+S,x-A,E+S-D,x-A,E+S,2,!0),this.v.setTripleAt(x+A,E+S,x+A-D,E+S,x+A,E+S,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:e},extendPrototype([DynamicPropertyContainer],b),b})(),y={getShapeProp:function(b,x,E){var A;return E===3||E===4?A=(E===3?x.pt:x.ks).k.length?new u(b,x,E):new o(b,x,E):E===5?A=new m(b,x):E===6?A=new f(b,x):E===7&&(A=new p(b,x)),A.k&&b.addDynamicProperty(A),A},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return u}};return y})(),Matrix=(function(){var n=Math.cos,t=Math.sin,e=Math.tan,i=Math.round;function a(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(I){if(I===0)return this;var X=n(I),et=t(I);return this._t(X,-et,0,0,et,X,0,0,0,0,1,0,0,0,0,1)}function c(I){if(I===0)return this;var X=n(I),et=t(I);return this._t(1,0,0,0,0,X,-et,0,0,et,X,0,0,0,0,1)}function u(I){if(I===0)return this;var X=n(I),et=t(I);return this._t(X,0,et,0,0,1,0,0,-et,0,X,0,0,0,0,1)}function f(I){if(I===0)return this;var X=n(I),et=t(I);return this._t(X,-et,0,0,et,X,0,0,0,0,1,0,0,0,0,1)}function p(I,X){return this._t(1,X,I,1,0,0)}function m(I,X){return this.shear(e(I),e(X))}function y(I,X){var et=n(X),H=t(X);return this._t(et,H,0,0,-H,et,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,e(I),1,0,0,0,0,1,0,0,0,0,1)._t(et,-H,0,0,H,et,0,0,0,0,1,0,0,0,0,1)}function b(I,X,et){return et||et===0||(et=1),I===1&&X===1&&et===1?this:this._t(I,0,0,0,0,X,0,0,0,0,et,0,0,0,0,1)}function x(I,X,et,H,Q,st,dt,ft,bt,mt,Mt,Ot,wt,$t,te,It){return this.props[0]=I,this.props[1]=X,this.props[2]=et,this.props[3]=H,this.props[4]=Q,this.props[5]=st,this.props[6]=dt,this.props[7]=ft,this.props[8]=bt,this.props[9]=mt,this.props[10]=Mt,this.props[11]=Ot,this.props[12]=wt,this.props[13]=$t,this.props[14]=te,this.props[15]=It,this}function E(I,X,et){return et=et||0,I!==0||X!==0||et!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,I,X,et,1):this}function A(I,X,et,H,Q,st,dt,ft,bt,mt,Mt,Ot,wt,$t,te,It){var yt=this.props;if(I===1&&X===0&&et===0&&H===0&&Q===0&&st===1&&dt===0&&ft===0&&bt===0&&mt===0&&Mt===1&&Ot===0)return yt[12]=yt[12]*I+yt[15]*wt,yt[13]=yt[13]*st+yt[15]*$t,yt[14]=yt[14]*Mt+yt[15]*te,yt[15]*=It,this._identityCalculated=!1,this;var Wt=yt[0],Zt=yt[1],Ae=yt[2],be=yt[3],xe=yt[4],pe=yt[5],_e=yt[6],it=yt[7],gt=yt[8],vt=yt[9],St=yt[10],Ct=yt[11],kt=yt[12],Xt=yt[13],ce=yt[14],Fe=yt[15];return yt[0]=Wt*I+Zt*Q+Ae*bt+be*wt,yt[1]=Wt*X+Zt*st+Ae*mt+be*$t,yt[2]=Wt*et+Zt*dt+Ae*Mt+be*te,yt[3]=Wt*H+Zt*ft+Ae*Ot+be*It,yt[4]=xe*I+pe*Q+_e*bt+it*wt,yt[5]=xe*X+pe*st+_e*mt+it*$t,yt[6]=xe*et+pe*dt+_e*Mt+it*te,yt[7]=xe*H+pe*ft+_e*Ot+it*It,yt[8]=gt*I+vt*Q+St*bt+Ct*wt,yt[9]=gt*X+vt*st+St*mt+Ct*$t,yt[10]=gt*et+vt*dt+St*Mt+Ct*te,yt[11]=gt*H+vt*ft+St*Ot+Ct*It,yt[12]=kt*I+Xt*Q+ce*bt+Fe*wt,yt[13]=kt*X+Xt*st+ce*mt+Fe*$t,yt[14]=kt*et+Xt*dt+ce*Mt+Fe*te,yt[15]=kt*H+Xt*ft+ce*Ot+Fe*It,this._identityCalculated=!1,this}function S(I){var X=I.props;return this.transform(X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15])}function T(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function D(I){for(var X=0;X<16;){if(I.props[X]!==this.props[X])return!1;X+=1}return!0}function R(I){var X;for(X=0;X<16;X+=1)I.props[X]=this.props[X];return I}function F(I){var X;for(X=0;X<16;X+=1)this.props[X]=I[X]}function k(I,X,et){return{x:I*this.props[0]+X*this.props[4]+et*this.props[8]+this.props[12],y:I*this.props[1]+X*this.props[5]+et*this.props[9]+this.props[13],z:I*this.props[2]+X*this.props[6]+et*this.props[10]+this.props[14]}}function P(I,X,et){return I*this.props[0]+X*this.props[4]+et*this.props[8]+this.props[12]}function L(I,X,et){return I*this.props[1]+X*this.props[5]+et*this.props[9]+this.props[13]}function B(I,X,et){return I*this.props[2]+X*this.props[6]+et*this.props[10]+this.props[14]}function V(){var I=this.props[0]*this.props[5]-this.props[1]*this.props[4],X=this.props[5]/I,et=-this.props[1]/I,H=-this.props[4]/I,Q=this.props[0]/I,st=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/I,dt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/I,ft=new Matrix;return ft.props[0]=X,ft.props[1]=et,ft.props[4]=H,ft.props[5]=Q,ft.props[12]=st,ft.props[13]=dt,ft}function z(I){return this.getInverseMatrix().applyToPointArray(I[0],I[1],I[2]||0)}function j(I){var X,et=I.length,H=[];for(X=0;X<et;X+=1)H[X]=z(I[X]);return H}function J(I,X,et){var H=createTypedArray("float32",6);if(this.isIdentity())H[0]=I[0],H[1]=I[1],H[2]=X[0],H[3]=X[1],H[4]=et[0],H[5]=et[1];else{var Q=this.props[0],st=this.props[1],dt=this.props[4],ft=this.props[5],bt=this.props[12],mt=this.props[13];H[0]=I[0]*Q+I[1]*dt+bt,H[1]=I[0]*st+I[1]*ft+mt,H[2]=X[0]*Q+X[1]*dt+bt,H[3]=X[0]*st+X[1]*ft+mt,H[4]=et[0]*Q+et[1]*dt+bt,H[5]=et[0]*st+et[1]*ft+mt}return H}function W(I,X,et){return this.isIdentity()?[I,X,et]:[I*this.props[0]+X*this.props[4]+et*this.props[8]+this.props[12],I*this.props[1]+X*this.props[5]+et*this.props[9]+this.props[13],I*this.props[2]+X*this.props[6]+et*this.props[10]+this.props[14]]}function K(I,X){if(this.isIdentity())return I+","+X;var et=this.props;return Math.round(100*(I*et[0]+X*et[4]+et[12]))/100+","+Math.round(100*(I*et[1]+X*et[5]+et[13]))/100}function $(){for(var I=0,X=this.props,et="matrix3d(";I<16;)et+=i(1e4*X[I])/1e4,et+=I===15?")":",",I+=1;return et}function N(I){return I<1e-6&&I>0||I>-1e-6&&I<0?i(1e4*I)/1e4:I}function G(){var I=this.props;return"matrix("+N(I[0])+","+N(I[1])+","+N(I[4])+","+N(I[5])+","+N(I[12])+","+N(I[13])+")"}return function(){this.reset=a,this.rotate=o,this.rotateX=c,this.rotateY=u,this.rotateZ=f,this.skew=m,this.skewFromAxis=y,this.shear=p,this.scale=b,this.setTransform=x,this.translate=E,this.transform=A,this.multiply=S,this.applyToPoint=k,this.applyToX=P,this.applyToY=L,this.applyToZ=B,this.applyToPointArray=W,this.applyToTriplePoints=J,this.applyToPointStringified=K,this.toCSS=$,this.to2dCSS=G,this.clone=R,this.cloneFromProps=F,this.equals=D,this.inversePoints=j,this.inversePoint=z,this.getInverseMatrix=V,this._t=this.transform,this.isIdentity=T,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}})();function _typeof$3(n){return(_typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var lottie={};function setLocation(n){setLocationHref(n)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(n){setSubframeEnabled(n)}function setPrefix(n){setIdPrefix(n)}function loadAnimation(n){return animationManager.loadAnimation(n)}function setQuality(n){if(typeof n=="string")switch(n){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(n)&&n>1&&setDefaultCurveSegments(n)}function inBrowser(){return typeof navigator<"u"}function installPlugin(n,t){n==="expressions"&&setExpressionsPlugin(t)}function getFactory(n){switch(n){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(n){for(var t=queryString.split("&"),e=0;e<t.length;e+=1){var i=t[e].split("=");if(decodeURIComponent(i[0])==n)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(n){}var ShapeModifiers=(function(){var n={},t={};return n.registerModifier=function(e,i){t[e]||(t[e]=i)},n.getModifier=function(e,i,a){return new t[e](i,a)},n})();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(n){if(!this.closed){n.sh.container.addDynamicProperty(n.sh);var t={shape:n.sh,data:n,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&n.setAsAnimated()}},ShapeModifier.prototype.init=function(n,t){this.shapes=[],this.elem=n,this.initDynamicPropertyContainer(n),this.initModifierProperties(n,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(n,t){this.s=PropertyFactory.getProp(n,t.s,0,.01,this),this.e=PropertyFactory.getProp(n,t.e,0,.01,this),this.o=PropertyFactory.getProp(n,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(n){n.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(n,t,e,i,a){var o=[];t<=1?o.push({s:n,e:t}):n>=1?o.push({s:n-1,e:t-1}):(o.push({s:n,e:1}),o.push({s:0,e:t-1}));var c,u,f=[],p=o.length;for(c=0;c<p;c+=1){var m,y;(u=o[c]).e*a<i||u.s*a>i+e||(m=u.s*a<=i?0:(u.s*a-i)/e,y=u.e*a>=i+e?1:(u.e*a-i)/e,f.push([m,y]))}return f.length||f.push([0,0]),f},TrimModifier.prototype.releasePathsData=function(n){var t,e=n.length;for(t=0;t<e;t+=1)segmentsLengthPool.release(n[t]);return n.length=0,n},TrimModifier.prototype.processShapes=function(n){var t,e,i,a;if(this._mdf||n){var o=this.o.v%360/360;if(o<0&&(o+=1),(t=this.s.v>1?1+o:this.s.v<0?0+o:this.s.v+o)>(e=this.e.v>1?1+o:this.e.v<0?0+o:this.e.v+o)){var c=t;t=e,e=c}t=1e-4*Math.round(1e4*t),e=1e-4*Math.round(1e4*e),this.sValue=t,this.eValue=e}else t=this.sValue,e=this.eValue;var u,f,p,m,y,b=this.shapes.length,x=0;if(e===t)for(a=0;a<b;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(e===1&&t===0||e===0&&t===1){if(this._mdf)for(a=0;a<b;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var E,A,S=[];for(a=0;a<b;a+=1)if((E=this.shapes[a]).shape._mdf||this._mdf||n||this.m===2){if(f=(i=E.shape.paths)._length,y=0,!E.shape._mdf&&E.pathsData.length)y=E.totalShapeLength;else{for(p=this.releasePathsData(E.pathsData),u=0;u<f;u+=1)m=bez.getSegmentsLength(i.shapes[u]),p.push(m),y+=m.totalLength;E.totalShapeLength=y,E.pathsData=p}x+=y,E.shape._mdf=!0}else E.shape.paths=E.localShapeCollection;var T,D=t,R=e,F=0;for(a=b-1;a>=0;a-=1)if((E=this.shapes[a]).shape._mdf){for((A=E.localShapeCollection).releaseShapes(),this.m===2&&b>1?(T=this.calculateShapeEdges(t,e,E.totalShapeLength,F,x),F+=E.totalShapeLength):T=[[D,R]],f=T.length,u=0;u<f;u+=1){D=T[u][0],R=T[u][1],S.length=0,R<=1?S.push({s:E.totalShapeLength*D,e:E.totalShapeLength*R}):D>=1?S.push({s:E.totalShapeLength*(D-1),e:E.totalShapeLength*(R-1)}):(S.push({s:E.totalShapeLength*D,e:E.totalShapeLength}),S.push({s:0,e:E.totalShapeLength*(R-1)}));var k=this.addShapes(E,S[0]);if(S[0].s!==S[0].e){if(S.length>1)if(E.shape.paths.shapes[E.shape.paths._length-1].c){var P=k.pop();this.addPaths(k,A),k=this.addShapes(E,S[1],P)}else this.addPaths(k,A),k=this.addShapes(E,S[1]);this.addPaths(k,A)}}E.shape.paths=A}}},TrimModifier.prototype.addPaths=function(n,t){var e,i=n.length;for(e=0;e<i;e+=1)t.addShape(n[e])},TrimModifier.prototype.addSegment=function(n,t,e,i,a,o,c){a.setXYAt(t[0],t[1],"o",o),a.setXYAt(e[0],e[1],"i",o+1),c&&a.setXYAt(n[0],n[1],"v",o),a.setXYAt(i[0],i[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(n,t,e,i){t.setXYAt(n[1],n[5],"o",e),t.setXYAt(n[2],n[6],"i",e+1),i&&t.setXYAt(n[0],n[4],"v",e),t.setXYAt(n[3],n[7],"v",e+1)},TrimModifier.prototype.addShapes=function(n,t,e){var i,a,o,c,u,f,p,m,y=n.pathsData,b=n.shape.paths.shapes,x=n.shape.paths._length,E=0,A=[],S=!0;for(e?(u=e._length,m=e._length):(e=shapePool.newElement(),u=0,m=0),A.push(e),i=0;i<x;i+=1){for(f=y[i].lengths,e.c=b[i].c,o=b[i].c?f.length:f.length+1,a=1;a<o;a+=1)if(E+(c=f[a-1]).addedLength<t.s)E+=c.addedLength,e.c=!1;else{if(E>t.e){e.c=!1;break}t.s<=E&&t.e>=E+c.addedLength?(this.addSegment(b[i].v[a-1],b[i].o[a-1],b[i].i[a],b[i].v[a],e,u,S),S=!1):(p=bez.getNewSegment(b[i].v[a-1],b[i].v[a],b[i].o[a-1],b[i].i[a],(t.s-E)/c.addedLength,(t.e-E)/c.addedLength,f[a-1]),this.addSegmentFromArray(p,e,u,S),S=!1,e.c=!1),E+=c.addedLength,u+=1}if(b[i].c&&f.length){if(c=f[a-1],E<=t.e){var T=f[a-1].addedLength;t.s<=E&&t.e>=E+T?(this.addSegment(b[i].v[a-1],b[i].o[a-1],b[i].i[0],b[i].v[0],e,u,S),S=!1):(p=bez.getNewSegment(b[i].v[a-1],b[i].v[0],b[i].o[a-1],b[i].i[0],(t.s-E)/T,(t.e-E)/T,f[a-1]),this.addSegmentFromArray(p,e,u,S),S=!1,e.c=!1)}else e.c=!1;E+=c.addedLength,u+=1}if(e._length&&(e.setXYAt(e.v[m][0],e.v[m][1],"i",m),e.setXYAt(e.v[e._length-1][0],e.v[e._length-1][1],"o",e._length-1)),E>t.e)break;i<x-1&&(e=shapePool.newElement(),S=!0,A.push(e),u=0)}return A},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(n,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(n,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(n,t){var e=t/100,i=[0,0],a=n._length,o=0;for(o=0;o<a;o+=1)i[0]+=n.v[o][0],i[1]+=n.v[o][1];i[0]/=a,i[1]/=a;var c,u,f,p,m,y,b=shapePool.newElement();for(b.c=n.c,o=0;o<a;o+=1)c=n.v[o][0]+(i[0]-n.v[o][0])*e,u=n.v[o][1]+(i[1]-n.v[o][1])*e,f=n.o[o][0]+(i[0]-n.o[o][0])*-e,p=n.o[o][1]+(i[1]-n.o[o][1])*-e,m=n.i[o][0]+(i[0]-n.i[o][0])*-e,y=n.i[o][1]+(i[1]-n.i[o][1])*-e,b.setTripleAt(c,u,f,p,m,y,o);return b},PuckerAndBloatModifier.prototype.processShapes=function(n){var t,e,i,a,o,c,u=this.shapes.length,f=this.amount.v;if(f!==0)for(e=0;e<u;e+=1){if(c=(o=this.shapes[e]).localShapeCollection,o.shape._mdf||this._mdf||n)for(c.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,a=o.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(t[i],f));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=(function(){var n=[0,0];function t(e,i,a){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=i,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(a||e),i.p&&i.p.s?(this.px=PropertyFactory.getProp(e,i.p.x,0,0,this),this.py=PropertyFactory.getProp(e,i.p.y,0,0,this),i.p.z&&(this.pz=PropertyFactory.getProp(e,i.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,i.p||{k:[0,0,0]},1,0,this),i.rx){if(this.rx=PropertyFactory.getProp(e,i.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,i.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,i.rz,0,degToRads,this),i.or.k[0].ti){var o,c=i.or.k.length;for(o=0;o<c;o+=1)i.or.k[o].to=null,i.or.k[o].ti=null}this.or=PropertyFactory.getProp(e,i.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,i.r||{k:0},0,degToRads,this);i.sk&&(this.sk=PropertyFactory.getProp(e,i.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,i.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,i.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,i.s||{k:[100,100,100]},1,.01,this),i.o?this.o=PropertyFactory.getProp(e,i.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var i=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||i,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var i;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var a,o;if(i=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(a=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),o=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(a=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),o=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(a=this.p.pv,o=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){a=[],o=[];var c=this.px,u=this.py;c._caching.lastFrame+c.offsetTime<=c.keyframes[0].t?(a[0]=c.getValueAtTime((c.keyframes[0].t+.01)/i,0),a[1]=u.getValueAtTime((u.keyframes[0].t+.01)/i,0),o[0]=c.getValueAtTime(c.keyframes[0].t/i,0),o[1]=u.getValueAtTime(u.keyframes[0].t/i,0)):c._caching.lastFrame+c.offsetTime>=c.keyframes[c.keyframes.length-1].t?(a[0]=c.getValueAtTime(c.keyframes[c.keyframes.length-1].t/i,0),a[1]=u.getValueAtTime(u.keyframes[u.keyframes.length-1].t/i,0),o[0]=c.getValueAtTime((c.keyframes[c.keyframes.length-1].t-.01)/i,0),o[1]=u.getValueAtTime((u.keyframes[u.keyframes.length-1].t-.01)/i,0)):(a=[c.pv,u.pv],o[0]=c.getValueAtTime((c._caching.lastFrame+c.offsetTime-.01)/i,c.offsetTime),o[1]=u.getValueAtTime((u._caching.lastFrame+u.offsetTime-.01)/i,u.offsetTime))}else a=o=n;this.v.rotate(-Math.atan2(a[1]-o[1],a[0]-o[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,i,a){return new t(e,i,a)}}})();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(n,t){return 1e5*Math.abs(n-t)<=Math.min(Math.abs(n),Math.abs(t))}function floatZero(n){return Math.abs(n)<=1e-5}function lerp(n,t,e){return n*(1-e)+t*e}function lerpPoint(n,t,e){return[lerp(n[0],t[0],e),lerp(n[1],t[1],e)]}function quadRoots(n,t,e){if(n===0)return[];var i=t*t-4*n*e;if(i<0)return[];var a=-t/(2*n);if(i===0)return[a];var o=Math.sqrt(i)/(2*n);return[a-o,a+o]}function polynomialCoefficients(n,t,e,i){return[3*t-n-3*e+i,3*n-6*t+3*e,-3*n+3*t,n]}function singlePoint(n){return new PolynomialBezier(n,n,n,n,!1)}function PolynomialBezier(n,t,e,i,a){a&&pointEqual(n,t)&&(t=lerpPoint(n,i,1/3)),a&&pointEqual(e,i)&&(e=lerpPoint(n,i,2/3));var o=polynomialCoefficients(n[0],t[0],e[0],i[0]),c=polynomialCoefficients(n[1],t[1],e[1],i[1]);this.a=[o[0],c[0]],this.b=[o[1],c[1]],this.c=[o[2],c[2]],this.d=[o[3],c[3]],this.points=[n,t,e,i]}function extrema(n,t){var e=n.points[0][t],i=n.points[n.points.length-1][t];if(e>i){var a=i;i=e,e=a}for(var o=quadRoots(3*n.a[t],2*n.b[t],n.c[t]),c=0;c<o.length;c+=1)if(o[c]>0&&o[c]<1){var u=n.point(o[c])[t];u<e?e=u:u>i&&(i=u)}return{min:e,max:i}}function intersectData(n,t,e){var i=n.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:n,t:(t+e)/2,t1:t,t2:e}}function splitData(n){var t=n.bez.split(.5);return[intersectData(t[0],n.t1,n.t),intersectData(t[1],n.t,n.t2)]}function boxIntersect(n,t){return 2*Math.abs(n.cx-t.cx)<n.width+t.width&&2*Math.abs(n.cy-t.cy)<n.height+t.height}function intersectsImpl(n,t,e,i,a,o){if(boxIntersect(n,t))if(e>=o||n.width<=i&&n.height<=i&&t.width<=i&&t.height<=i)a.push([n.t,t.t]);else{var c=splitData(n),u=splitData(t);intersectsImpl(c[0],u[0],e+1,i,a,o),intersectsImpl(c[0],u[1],e+1,i,a,o),intersectsImpl(c[1],u[0],e+1,i,a,o),intersectsImpl(c[1],u[1],e+1,i,a,o)}}function crossProduct(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function lineIntersection(n,t,e,i){var a=[n[0],n[1],1],o=[t[0],t[1],1],c=[e[0],e[1],1],u=[i[0],i[1],1],f=crossProduct(crossProduct(a,o),crossProduct(c,u));return floatZero(f[2])?null:[f[0]/f[2],f[1]/f[2]]}function polarOffset(n,t,e){return[n[0]+Math.cos(t)*e,n[1]-Math.sin(t)*e]}function pointDistance(n,t){return Math.hypot(n[0]-t[0],n[1]-t[1])}function pointEqual(n,t){return floatEqual(n[0],t[0])&&floatEqual(n[1],t[1])}function ZigZagModifier(){}function setPoint(n,t,e,i,a,o,c){var u=e-Math.PI/2,f=e+Math.PI/2,p=t[0]+Math.cos(e)*i*a,m=t[1]-Math.sin(e)*i*a;n.setTripleAt(p,m,p+Math.cos(u)*o,m-Math.sin(u)*o,p+Math.cos(f)*c,m-Math.sin(f)*c,n.length())}function getPerpendicularVector(n,t){var e=[t[0]-n[0],t[1]-n[1]],i=.5*-Math.PI;return[Math.cos(i)*e[0]-Math.sin(i)*e[1],Math.sin(i)*e[0]+Math.cos(i)*e[1]]}function getProjectingAngle(n,t){var e=t===0?n.length()-1:t-1,i=(t+1)%n.length(),a=getPerpendicularVector(n.v[e],n.v[i]);return Math.atan2(0,1)-Math.atan2(a[1],a[0])}function zigZagCorner(n,t,e,i,a,o,c){var u=getProjectingAngle(t,e),f=t.v[e%t._length],p=t.v[e===0?t._length-1:e-1],m=t.v[(e+1)%t._length],y=o===2?Math.sqrt(Math.pow(f[0]-p[0],2)+Math.pow(f[1]-p[1],2)):0,b=o===2?Math.sqrt(Math.pow(f[0]-m[0],2)+Math.pow(f[1]-m[1],2)):0;setPoint(n,t.v[e%t._length],u,c,i,b/(2*(a+1)),y/(2*(a+1)))}function zigZagSegment(n,t,e,i,a,o){for(var c=0;c<i;c+=1){var u=(c+1)/(i+1),f=a===2?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,p=t.normalAngle(u);setPoint(n,t.point(u),p,o,e,f/(2*(i+1)),f/(2*(i+1))),o=-o}return o}function linearOffset(n,t,e){var i=Math.atan2(t[0]-n[0],t[1]-n[1]);return[polarOffset(n,i,e),polarOffset(t,i,e)]}function offsetSegment(n,t){var e,i,a,o,c,u,f;e=(f=linearOffset(n.points[0],n.points[1],t))[0],i=f[1],a=(f=linearOffset(n.points[1],n.points[2],t))[0],o=f[1],c=(f=linearOffset(n.points[2],n.points[3],t))[0],u=f[1];var p=lineIntersection(e,i,a,o);p===null&&(p=i);var m=lineIntersection(c,u,a,o);return m===null&&(m=c),new PolynomialBezier(e,p,m,u)}function joinLines(n,t,e,i,a){var o=t.points[3],c=e.points[0];if(i===3||pointEqual(o,c))return o;if(i===2){var u=-t.tangentAngle(1),f=-e.tangentAngle(0)+Math.PI,p=lineIntersection(o,polarOffset(o,u+Math.PI/2,100),c,polarOffset(c,u+Math.PI/2,100)),m=p?pointDistance(p,o):pointDistance(o,c)/2,y=polarOffset(o,u,2*m*roundCorner);return n.setXYAt(y[0],y[1],"o",n.length()-1),y=polarOffset(c,f,2*m*roundCorner),n.setTripleAt(c[0],c[1],c[0],c[1],y[0],y[1],n.length()),c}var b=lineIntersection(pointEqual(o,t.points[2])?t.points[0]:t.points[2],o,c,pointEqual(c,e.points[1])?e.points[3]:e.points[1]);return b&&pointDistance(b,o)<a?(n.setTripleAt(b[0],b[1],b[0],b[1],b[0],b[1],n.length()),b):o}function getIntersection(n,t){var e=n.intersections(t);return e.length&&floatEqual(e[0][0],1)&&e.shift(),e.length?e[0]:null}function pruneSegmentIntersection(n,t){var e=n.slice(),i=t.slice(),a=getIntersection(n[n.length-1],t[0]);return a&&(e[n.length-1]=n[n.length-1].split(a[0])[0],i[0]=t[0].split(a[1])[1]),n.length>1&&t.length>1&&(a=getIntersection(n[0],t[t.length-1]))?[[n[0].split(a[0])[0]],[t[t.length-1].split(a[1])[1]]]:[e,i]}function pruneIntersections(n){for(var t,e=1;e<n.length;e+=1)t=pruneSegmentIntersection(n[e-1],n[e]),n[e-1]=t[0],n[e]=t[1];return n.length>1&&(t=pruneSegmentIntersection(n[n.length-1],n[0]),n[n.length-1]=t[0],n[0]=t[1]),n}function offsetSegmentSplit(n,t){var e,i,a,o,c=n.inflectionPoints();if(c.length===0)return[offsetSegment(n,t)];if(c.length===1||floatEqual(c[1],1))return e=(a=n.split(c[0]))[0],i=a[1],[offsetSegment(e,t),offsetSegment(i,t)];e=(a=n.split(c[0]))[0];var u=(c[1]-c[0])/(1-c[0]);return o=(a=a[1].split(u))[0],i=a[1],[offsetSegment(e,t),offsetSegment(o,t),offsetSegment(i,t)]}function OffsetPathModifier(){}function getFontProperties(n){for(var t=n.fStyle?n.fStyle.split(" "):[],e="normal",i="normal",a=t.length,o=0;o<a;o+=1)switch(t[o].toLowerCase()){case"italic":i="italic";break;case"bold":e="700";break;case"black":e="900";break;case"medium":e="500";break;case"regular":case"normal":e="400";break;case"light":case"thin":e="200"}return{style:i,weight:n.fWeight||e}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(n,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(n,t.c,0,null,this),this.o=PropertyFactory.getProp(n,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(n,t.tr,this),this.so=PropertyFactory.getProp(n,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(n,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(n,t,e,i,a,o){var c=o?-1:1,u=i.s.v[0]+(1-i.s.v[0])*(1-a),f=i.s.v[1]+(1-i.s.v[1])*(1-a);n.translate(i.p.v[0]*c*a,i.p.v[1]*c*a,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*c*a),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.scale(o?1/u:u,o?1/f:f),e.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(n,t,e,i){for(this.elem=n,this.arr=t,this.pos=e,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(n),this.initModifierProperties(n,t[e]);e>0;)e-=1,this._elements.unshift(t[e]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(n){var t,e=n.length;for(t=0;t<e;t+=1)n[t]._processed=!1,n[t].ty==="gr"&&this.resetElements(n[t].it)},RepeaterModifier.prototype.cloneElements=function(n){var t=JSON.parse(JSON.stringify(n));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(n,t){var e,i=n.length;for(e=0;e<i;e+=1)n[e]._render=t,n[e].ty==="gr"&&this.changeGroupRender(n[e].it,t)},RepeaterModifier.prototype.processShapes=function(n){var t,e,i,a,o,c=!1;if(this._mdf||n){var u,f=Math.ceil(this.c.v);if(this._groups.length<f){for(;this._groups.length<f;){var p={it:this.cloneElements(this._elements),ty:"gr"};p.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,p),this._groups.splice(0,0,p),this._currentCopies+=1}this.elem.reloadShapes(),c=!0}for(o=0,i=0;i<=this._groups.length-1;i+=1){if(u=o<f,this._groups[i]._render=u,this.changeGroupRender(this._groups[i].it,u),!u){var m=this.elemsData[i].it,y=m[m.length-1];y.transform.op.v!==0?(y.transform.op._mdf=!0,y.transform.op.v=0):y.transform.op._mdf=!1}o+=1}this._currentCopies=f;var b=this.o.v,x=b%1,E=b>0?Math.floor(b):Math.ceil(b),A=this.pMatrix.props,S=this.rMatrix.props,T=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var D,R,F=0;if(b>0){for(;F<E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),F+=1;x&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,x,!1),F+=x)}else if(b<0){for(;F>E;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),F-=1;x&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-x,!0),F-=x)}for(i=this.data.m===1?0:this._currentCopies-1,a=this.data.m===1?1:-1,o=this._currentCopies;o;){if(R=(e=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1)),F!==0){for((i!==0&&a===1||i!==this._currentCopies-1&&a===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15]),this.matrix.transform(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15]),this.matrix.transform(A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15]),D=0;D<R;D+=1)e[D]=this.matrix.props[D];this.matrix.reset()}else for(this.matrix.reset(),D=0;D<R;D+=1)e[D]=this.matrix.props[D];F+=1,o-=1,i+=a}}else for(o=this._currentCopies,i=0,a=1;o;)e=(t=this.elemsData[i].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,o-=1,i+=a;return c},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(n,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(n,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(n,t){var e,i=shapePool.newElement();i.c=n.c;var a,o,c,u,f,p,m,y,b,x,E,A,S=n._length,T=0;for(e=0;e<S;e+=1)a=n.v[e],c=n.o[e],o=n.i[e],a[0]===c[0]&&a[1]===c[1]&&a[0]===o[0]&&a[1]===o[1]?e!==0&&e!==S-1||n.c?(u=e===0?n.v[S-1]:n.v[e-1],p=(f=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)))?Math.min(f/2,t)/f:0,m=E=a[0]+(u[0]-a[0])*p,y=A=a[1]-(a[1]-u[1])*p,b=m-(m-a[0])*roundCorner,x=y-(y-a[1])*roundCorner,i.setTripleAt(m,y,b,x,E,A,T),T+=1,u=e===S-1?n.v[0]:n.v[e+1],p=(f=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)))?Math.min(f/2,t)/f:0,m=b=a[0]+(u[0]-a[0])*p,y=x=a[1]+(u[1]-a[1])*p,E=m-(m-a[0])*roundCorner,A=y-(y-a[1])*roundCorner,i.setTripleAt(m,y,b,x,E,A,T),T+=1):(i.setTripleAt(a[0],a[1],c[0],c[1],o[0],o[1],T),T+=1):(i.setTripleAt(n.v[e][0],n.v[e][1],n.o[e][0],n.o[e][1],n.i[e][0],n.i[e][1],T),T+=1);return i},RoundCornersModifier.prototype.processShapes=function(n){var t,e,i,a,o,c,u=this.shapes.length,f=this.rd.v;if(f!==0)for(e=0;e<u;e+=1){if(c=(o=this.shapes[e]).localShapeCollection,o.shape._mdf||this._mdf||n)for(c.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,a=o.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(t[i],f));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(n){return[((this.a[0]*n+this.b[0])*n+this.c[0])*n+this.d[0],((this.a[1]*n+this.b[1])*n+this.c[1])*n+this.d[1]]},PolynomialBezier.prototype.derivative=function(n){return[(3*n*this.a[0]+2*this.b[0])*n+this.c[0],(3*n*this.a[1]+2*this.b[1])*n+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(n){var t=this.derivative(n);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(n){var t=this.derivative(n);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var n=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(n))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/n,e=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/n;if(e<0)return[];var i=Math.sqrt(e);return floatZero(i)?i>0&&i<1?[t]:[]:[t-i,t+i].filter((function(a){return a>0&&a<1}))},PolynomialBezier.prototype.split=function(n){if(n<=0)return[singlePoint(this.points[0]),this];if(n>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],n),e=lerpPoint(this.points[1],this.points[2],n),i=lerpPoint(this.points[2],this.points[3],n),a=lerpPoint(t,e,n),o=lerpPoint(e,i,n),c=lerpPoint(a,o,n);return[new PolynomialBezier(this.points[0],t,a,c,!0),new PolynomialBezier(c,o,i,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var n=this.bounds();return{left:n.x.min,right:n.x.max,top:n.y.min,bottom:n.y.max,width:n.x.max-n.x.min,height:n.y.max-n.y.min,cx:(n.x.max+n.x.min)/2,cy:(n.y.max+n.y.min)/2}},PolynomialBezier.prototype.intersections=function(n,t,e){t===void 0&&(t=2),e===void 0&&(e=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(n,0,1),0,t,i,e),i},PolynomialBezier.shapeSegment=function(n,t){var e=(t+1)%n.length();return new PolynomialBezier(n.v[t],n.o[t],n.i[e],n.v[e],!0)},PolynomialBezier.shapeSegmentInverted=function(n,t){var e=(t+1)%n.length();return new PolynomialBezier(n.v[e],n.i[e],n.o[t],n.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(n,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(n,t.s,0,null,this),this.frequency=PropertyFactory.getProp(n,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(n,t.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0},ZigZagModifier.prototype.processPath=function(n,t,e,i){var a=n._length,o=shapePool.newElement();if(o.c=n.c,n.c||(a-=1),a===0)return o;var c=-1,u=PolynomialBezier.shapeSegment(n,0);zigZagCorner(o,n,0,t,e,i,c);for(var f=0;f<a;f+=1)c=zigZagSegment(o,u,t,e,i,-c),u=f!==a-1||n.c?PolynomialBezier.shapeSegment(n,(f+1)%a):null,zigZagCorner(o,n,f+1,t,e,i,c);return o},ZigZagModifier.prototype.processShapes=function(n){var t,e,i,a,o,c,u=this.shapes.length,f=this.amplitude.v,p=Math.max(0,Math.round(this.frequency.v)),m=this.pointsType.v;if(f!==0)for(e=0;e<u;e+=1){if(c=(o=this.shapes[e]).localShapeCollection,o.shape._mdf||this._mdf||n)for(c.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,a=o.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(t[i],f,p,m));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(n,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(n,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(n,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(n,t,e,i){var a=shapePool.newElement();a.c=n.c;var o,c,u,f=n.length();n.c||(f-=1);var p=[];for(o=0;o<f;o+=1)u=PolynomialBezier.shapeSegment(n,o),p.push(offsetSegmentSplit(u,t));if(!n.c)for(o=f-1;o>=0;o-=1)u=PolynomialBezier.shapeSegmentInverted(n,o),p.push(offsetSegmentSplit(u,t));p=pruneIntersections(p);var m=null,y=null;for(o=0;o<p.length;o+=1){var b=p[o];for(y&&(m=joinLines(a,y,b[0],e,i)),y=b[b.length-1],c=0;c<b.length;c+=1)u=b[c],m&&pointEqual(u.points[0],m)?a.setXYAt(u.points[1][0],u.points[1][1],"o",a.length()-1):a.setTripleAt(u.points[0][0],u.points[0][1],u.points[1][0],u.points[1][1],u.points[0][0],u.points[0][1],a.length()),a.setTripleAt(u.points[3][0],u.points[3][1],u.points[3][0],u.points[3][1],u.points[2][0],u.points[2][1],a.length()),m=u.points[3]}return p.length&&joinLines(a,y,p[0][0],e,i),a},OffsetPathModifier.prototype.processShapes=function(n){var t,e,i,a,o,c,u=this.shapes.length,f=this.amount.v,p=this.miterLimit.v,m=this.lineJoin;if(f!==0)for(e=0;e<u;e+=1){if(c=(o=this.shapes[e]).localShapeCollection,o.shape._mdf||this._mdf||n)for(c.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,a=o.shape.paths._length,i=0;i<a;i+=1)c.addShape(this.processPath(t[i],f,m,p));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=(function(){var n={w:0,size:0,shapes:[],data:{shapes:[]}},t=[];t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var e=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function i(f,p){var m=createTag("span");m.setAttribute("aria-hidden",!0),m.style.fontFamily=p;var y=createTag("span");y.innerText="giItT1WQy@!-/#",m.style.position="absolute",m.style.left="-10000px",m.style.top="-10000px",m.style.fontSize="300px",m.style.fontVariant="normal",m.style.fontStyle="normal",m.style.fontWeight="normal",m.style.letterSpacing="0",m.appendChild(y),document.body.appendChild(m);var b=y.offsetWidth;return y.style.fontFamily=(function(x){var E,A=x.split(","),S=A.length,T=[];for(E=0;E<S;E+=1)A[E]!=="sans-serif"&&A[E]!=="monospace"&&T.push(A[E]);return T.join(",")})(f)+", "+p,{node:y,w:b,parent:m}}function a(f,p){var m,y=document.body&&p?"svg":"canvas",b=getFontProperties(f);if(y==="svg"){var x=createNS("text");x.style.fontSize="100px",x.setAttribute("font-family",f.fFamily),x.setAttribute("font-style",b.style),x.setAttribute("font-weight",b.weight),x.textContent="1",f.fClass?(x.style.fontFamily="inherit",x.setAttribute("class",f.fClass)):x.style.fontFamily=f.fFamily,p.appendChild(x),m=x}else{var E=new OffscreenCanvas(500,500).getContext("2d");E.font=b.style+" "+b.weight+" 100px "+f.fFamily,m=E}return{measureText:function(A){return y==="svg"?(m.textContent=A,m.getComputedTextLength()):m.measureText(A).width}}}function o(f){var p=0,m=f.charCodeAt(0);if(m>=55296&&m<=56319){var y=f.charCodeAt(1);y>=56320&&y<=57343&&(p=1024*(m-55296)+y-56320+65536)}return p}function c(f){var p=o(f);return p>=127462&&p<=127487}var u=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return u.isModifier=function(f,p){var m=f.toString(16)+p.toString(16);return e.indexOf(m)!==-1},u.isZeroWidthJoiner=function(f){return f===8205},u.isFlagEmoji=function(f){return c(f.substr(0,2))&&c(f.substr(2,2))},u.isRegionalCode=c,u.isCombinedCharacter=function(f){return t.indexOf(f)!==-1},u.isRegionalFlag=function(f,p){var m=o(f.substr(p,2));if(m!==127988)return!1;var y=0;for(p+=2;y<5;){if((m=o(f.substr(p,2)))<917601||m>917626)return!1;y+=1,p+=2}return o(f.substr(p,2))===917631},u.isVariationSelector=function(f){return f===65039},u.BLACK_FLAG_CODE_POINT=127988,u.prototype={addChars:function(f){if(f){var p;this.chars||(this.chars=[]);var m,y,b=f.length,x=this.chars.length;for(p=0;p<b;p+=1){for(m=0,y=!1;m<x;)this.chars[m].style===f[p].style&&this.chars[m].fFamily===f[p].fFamily&&this.chars[m].ch===f[p].ch&&(y=!0),m+=1;y||(this.chars.push(f[p]),x+=1)}}},addFonts:function(f,p){if(f){if(this.chars)return this.isLoaded=!0,void(this.fonts=f.list);if(!document.body)return this.isLoaded=!0,f.list.forEach((function(F){F.helper=a(F),F.cache={}})),void(this.fonts=f.list);var m,y=f.list,b=y.length,x=b;for(m=0;m<b;m+=1){var E,A,S=!0;if(y[m].loaded=!1,y[m].monoCase=i(y[m].fFamily,"monospace"),y[m].sansCase=i(y[m].fFamily,"sans-serif"),y[m].fPath){if(y[m].fOrigin==="p"||y[m].origin===3){if((E=document.querySelectorAll('style[f-forigin="p"][f-family="'+y[m].fFamily+'"], style[f-origin="3"][f-family="'+y[m].fFamily+'"]')).length>0&&(S=!1),S){var T=createTag("style");T.setAttribute("f-forigin",y[m].fOrigin),T.setAttribute("f-origin",y[m].origin),T.setAttribute("f-family",y[m].fFamily),T.type="text/css",T.innerText="@font-face {font-family: "+y[m].fFamily+"; font-style: normal; src: url('"+y[m].fPath+"');}",p.appendChild(T)}}else if(y[m].fOrigin==="g"||y[m].origin===1){for(E=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),A=0;A<E.length;A+=1)E[A].href.indexOf(y[m].fPath)!==-1&&(S=!1);if(S){var D=createTag("link");D.setAttribute("f-forigin",y[m].fOrigin),D.setAttribute("f-origin",y[m].origin),D.type="text/css",D.rel="stylesheet",D.href=y[m].fPath,document.body.appendChild(D)}}else if(y[m].fOrigin==="t"||y[m].origin===2){for(E=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),A=0;A<E.length;A+=1)y[m].fPath===E[A].src&&(S=!1);if(S){var R=createTag("link");R.setAttribute("f-forigin",y[m].fOrigin),R.setAttribute("f-origin",y[m].origin),R.setAttribute("rel","stylesheet"),R.setAttribute("href",y[m].fPath),p.appendChild(R)}}}else y[m].loaded=!0,x-=1;y[m].helper=a(y[m],p),y[m].cache={},this.fonts.push(y[m])}x===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(f,p,m){for(var y=0,b=this.chars.length;y<b;){if(this.chars[y].ch===f&&this.chars[y].style===p&&this.chars[y].fFamily===m)return this.chars[y];y+=1}return(typeof f=="string"&&f.charCodeAt(0)!==13||!f)&&console&&console.warn&&!this._warned&&(this._warned=!0),n},getFontByName:function(f){for(var p=0,m=this.fonts.length;p<m;){if(this.fonts[p].fName===f)return this.fonts[p];p+=1}return this.fonts[0]},measureText:function(f,p,m){var y=this.getFontByName(p),b=f;if(!y.cache[b]){var x=y.helper;if(f===" "){var E=x.measureText("|"+f+"|"),A=x.measureText("||");y.cache[b]=(E-A)/100}else y.cache[b]=x.measureText(f)/100}return y.cache[b]*m},checkLoadedFonts:function(){var f,p,m,y=this.fonts.length,b=y;for(f=0;f<y;f+=1)this.fonts[f].loaded?b-=1:this.fonts[f].fOrigin==="n"||this.fonts[f].origin===0?this.fonts[f].loaded=!0:(p=this.fonts[f].monoCase.node,m=this.fonts[f].monoCase.w,p.offsetWidth!==m?(b-=1,this.fonts[f].loaded=!0):(p=this.fonts[f].sansCase.node,m=this.fonts[f].sansCase.w,p.offsetWidth!==m&&(b-=1,this.fonts[f].loaded=!0)),this.fonts[f].loaded&&(this.fonts[f].sansCase.parent.parentNode.removeChild(this.fonts[f].sansCase.parent),this.fonts[f].monoCase.parent.parentNode.removeChild(this.fonts[f].monoCase.parent)));b!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},u})();function SlotManager(n){this.animationData=n}function slotFactory(n){return new SlotManager(n)}function RenderableElement(){}SlotManager.prototype.getProp=function(n){return this.animationData.slots&&this.animationData.slots[n.sid]?Object.assign(n,this.animationData.slots[n.sid].p):n},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(n){this.renderableComponents.indexOf(n)===-1&&this.renderableComponents.push(n)},removeRenderableComponent:function(n){this.renderableComponents.indexOf(n)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(n),1)},prepareRenderableFrame:function(n){this.checkLayerLimits(n)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(n){this.data.ip-this.data.st<=n&&this.data.op-this.data.st>n?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var n,t=this.renderableComponents.length;for(n=0;n<t;n+=1)this.renderableComponents[n].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(n){return blendModeEnums[n]||""}),blendModeEnums;function SliderEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,0,0,e)}function AngleEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,0,0,e)}function ColorEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,1,0,e)}function PointEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,1,0,e)}function LayerIndexEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,0,0,e)}function MaskIndexEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,0,0,e)}function CheckboxEffect(n,t,e){this.p=PropertyFactory.getProp(t,n.v,0,0,e)}function NoValueEffect(){this.p={}}function EffectsManager(n,t){var e,i=n.ef||[];this.effectElements=[];var a,o=i.length;for(e=0;e<o;e+=1)a=new GroupEffect(i[e],t),this.effectElements.push(a)}function GroupEffect(n,t){this.init(n,t)}function BaseElement(){}function FrameElement(){}function FootageElement(n,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(n.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(n,t,e)}function AudioElement(n,t,e){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(n.refId),this.initBaseData(n,t,e),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=n.tm?PropertyFactory.getProp(this,n.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,n.au&&n.au.lv?n.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(n,t){var e;this.data=n,this.effectElements=[],this.initDynamicPropertyContainer(t);var i,a=this.data.ef.length,o=this.data.ef;for(e=0;e<a;e+=1){switch(i=null,o[e].ty){case 0:i=new SliderEffect(o[e],t,this);break;case 1:i=new AngleEffect(o[e],t,this);break;case 2:i=new ColorEffect(o[e],t,this);break;case 3:i=new PointEffect(o[e],t,this);break;case 4:case 7:i=new CheckboxEffect(o[e],t,this);break;case 10:i=new LayerIndexEffect(o[e],t,this);break;case 11:i=new MaskIndexEffect(o[e],t,this);break;case 5:i=new EffectsManager(o[e],t);break;default:i=new NoValueEffect(o[e])}i&&this.effectElements.push(i)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var n=0,t=this.data.masksProperties.length;n<t;){if(this.data.masksProperties[n].mode!=="n"&&this.data.masksProperties[n].cl!==!1)return!0;n+=1}return!1},initExpressions:function(){var n=getExpressionInterfaces();if(n){var t=n("layer"),e=n("effects"),i=n("shape"),a=n("text"),o=n("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var c=e.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(c),this.data.ty===0||this.data.xt?this.compInterface=o(this):this.data.ty===4?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=a(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var n=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=n},initBaseData:function(n,t,e){this.globalData=t,this.comp=e,this.data=n,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(n,t){var e,i=this.dynamicProperties.length;for(e=0;e<i;e+=1)(t||this._isParent&&this.dynamicProperties[e].propType==="transform")&&(this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(n){this.dynamicProperties.indexOf(n)===-1&&this.dynamicProperties.push(n)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var n=getExpressionInterfaces();if(n){var t=n("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(n){if(this.prepareRenderableFrame(n,!0),this.prepareProperties(n,!0),this.tm._placeholder)this._currentTime=n/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var e=this._volume*this._volumeMultiplier;this._previousVolume!==e&&(this._previousVolume=e,this.audio.volume(e))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(n){this.audio.rate(n)},AudioElement.prototype.volume=function(n){this._volumeMultiplier=n,this._previousVolume=n*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(n){var t,e,i=this.layers.length;for(this.completeLayers=!0,t=i-1;t>=0;t-=1)this.elements[t]||(e=this.layers[t]).ip-e.st<=n-this.layers[t].st&&e.op-e.st>n-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(n){switch(n.ty){case 2:return this.createImage(n);case 0:return this.createComp(n);case 1:return this.createSolid(n);case 3:return this.createNull(n);case 4:return this.createShape(n);case 5:return this.createText(n);case 6:return this.createAudio(n);case 13:return this.createCamera(n);case 15:return this.createFootage(n);default:return this.createNull(n)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(n){return new AudioElement(n,this.globalData,this)},BaseRenderer.prototype.createFootage=function(n){return new FootageElement(n,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var n,t=this.layers.length;for(n=0;n<t;n+=1)this.buildItem(n);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(n){var t;this.completeLayers=!1;var e,i=n.length,a=this.layers.length;for(t=0;t<i;t+=1)for(e=0;e<a;){if(this.layers[e].id===n[t].id){this.layers[e]=n[t];break}e+=1}},BaseRenderer.prototype.setProjectInterface=function(n){this.globalData.projectInterface=n},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(n,t,e){for(var i=this.elements,a=this.layers,o=0,c=a.length;o<c;)a[o].ind==t&&(i[o]&&i[o]!==!0?(e.push(i[o]),i[o].setAsParent(),a[o].parent!==void 0?this.buildElementParenting(n,a[o].parent,e):n.setHierarchy(e)):(this.buildItem(o),this.addPendingElement(n))),o+=1},BaseRenderer.prototype.addPendingElement=function(n){this.pendingElements.push(n)},BaseRenderer.prototype.searchExtraCompositions=function(n){var t,e=n.length;for(t=0;t<e;t+=1)if(n[t].xt){var i=this.createComp(n[t]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(n){var t,e=this.elements.length;for(t=0;t<e;t+=1)if(this.elements[t].data.ind===n)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(n){var t,e=n.shift();if(typeof e=="number")t=this.elements[e];else{var i,a=this.elements.length;for(i=0;i<a;i+=1)if(this.elements[i].data.nm===e){t=this.elements[i];break}}return n.length===0?t:t.getElementByPath(n)},BaseRenderer.prototype.setupGlobalData=function(n,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(n),this.globalData.fontManager.addChars(n.chars),this.globalData.fontManager.addFonts(n.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=n.fr,this.globalData.nm=n.nm,this.globalData.compSize={w:n.w,h:n.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(n,t,e){this.data=n,this.element=t,this.globalData=e,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i,a,o=this.globalData.defs,c=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(c),this.solidPath="";var u,f,p,m,y,b,x=this.masksProperties,E=0,A=[],S=createElementID(),T="clipPath",D="clip-path";for(i=0;i<c;i+=1)if((x[i].mode!=="a"&&x[i].mode!=="n"||x[i].inv||x[i].o.k!==100||x[i].o.x)&&(T="mask",D="mask"),x[i].mode!=="s"&&x[i].mode!=="i"||E!==0?p=null:((p=createNS("rect")).setAttribute("fill","#ffffff"),p.setAttribute("width",this.element.comp.data.w||0),p.setAttribute("height",this.element.comp.data.h||0),A.push(p)),a=createNS("path"),x[i].mode==="n")this.viewData[i]={op:PropertyFactory.getProp(this.element,x[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,x[i],3),elem:a,lastPath:""},o.appendChild(a);else{var R;if(E+=1,a.setAttribute("fill",x[i].mode==="s"?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),x[i].x.k!==0?(T="mask",D="mask",b=PropertyFactory.getProp(this.element,x[i].x,0,null,this.element),R=createElementID(),(m=createNS("filter")).setAttribute("id",R),(y=createNS("feMorphology")).setAttribute("operator","erode"),y.setAttribute("in","SourceGraphic"),y.setAttribute("radius","0"),m.appendChild(y),o.appendChild(m),a.setAttribute("stroke",x[i].mode==="s"?"#000000":"#ffffff")):(y=null,b=null),this.storedData[i]={elem:a,x:b,expan:y,lastPath:"",lastOperator:"",filterId:R,lastRadius:0},x[i].mode==="i"){f=A.length;var F=createNS("g");for(u=0;u<f;u+=1)F.appendChild(A[u]);var k=createNS("mask");k.setAttribute("mask-type","alpha"),k.setAttribute("id",S+"_"+E),k.appendChild(a),o.appendChild(k),F.setAttribute("mask","url("+getLocationHref()+"#"+S+"_"+E+")"),A.length=0,A.push(F)}else A.push(a);x[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,x[i].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,x[i],3),invRect:p},this.viewData[i].prop.k||this.drawPath(x[i],this.viewData[i].prop.v,this.viewData[i])}for(this.maskElement=createNS(T),c=A.length,i=0;i<c;i+=1)this.maskElement.appendChild(A[i]);E>0&&(this.maskElement.setAttribute("id",S),this.element.maskedElement.setAttribute(D,"url("+getLocationHref()+"#"+S+")"),o.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var n=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:n,localMat:n,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var n,t=this.finalTransform.mat,e=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;e<i;){if(this.hierarchy[e].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}e+=1}if(this.finalTransform._matMdf)for(n=this.finalTransform.mProp.v.props,t.cloneFromProps(n),e=0;e<i;e+=1)t.multiply(this.hierarchy[e].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var n=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;n<t;)this.localTransforms[n]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[n]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),n+=1;if(this.finalTransform._localMatMdf){var e=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(e),n=1;n<t;n+=1){var i=this.localTransforms[n].matrix;e.multiply(i)}e.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var a=this.finalTransform.localOpacity;for(n=0;n<t;n+=1)a*=.01*this.localTransforms[n].opacity;this.finalTransform.localOpacity=a}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var n=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(n.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,e=n.length;for(t=0;t<e;t+=1)this.localTransforms.push(n[t])}}},globalToLocal:function(n){var t=[];t.push(this.finalTransform);for(var e,i=!0,a=this.comp;i;)a.finalTransform?(a.data.hasMask&&t.splice(0,0,a.finalTransform),a=a.comp):i=!1;var o,c=t.length;for(e=0;e<c;e+=1)o=t[e].mat.applyToPointArray(0,0,0),n=[n[0]-o[0],n[1]-o[1],0];return n},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(n){return this.viewData[n].prop},MaskElement.prototype.renderFrame=function(n){var t,e=this.element.finalTransform.mat,i=this.masksProperties.length;for(t=0;t<i;t+=1)if((this.viewData[t].prop._mdf||n)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||n)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),this.masksProperties[t].mode!=="n"&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||n)&&this.viewData[t].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||n))){var a=this.storedData[t].expan;this.storedData[t].x.v<0?(this.storedData[t].lastOperator!=="erode"&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),a.setAttribute("radius",-this.storedData[t].x.v)):(this.storedData[t].lastOperator!=="dilate"&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var n="M0,0 ";return n+=" h"+this.globalData.compSize.w,n+=" v"+this.globalData.compSize.h,n+=" h-"+this.globalData.compSize.w,n+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(n,t,e){var i,a,o=" M"+t.v[0][0]+","+t.v[0][1];for(a=t._length,i=1;i<a;i+=1)o+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[i][0]+","+t.i[i][1]+" "+t.v[i][0]+","+t.v[i][1];if(t.c&&a>1&&(o+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),e.lastPath!==o){var c="";e.elem&&(t.c&&(c=n.inv?this.solidPath+o:o),e.elem.setAttribute("d",c)),e.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=(function(){var n={};return n.createFilter=function(t,e){var i=createNS("filter");return i.setAttribute("id",t),e!==!0&&(i.setAttribute("filterUnits","objectBoundingBox"),i.setAttribute("x","0%"),i.setAttribute("y","0%"),i.setAttribute("width","100%"),i.setAttribute("height","100%")),i},n.createAlphaToLuminanceFilter=function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t},n})(),featureSupport=(function(){var n={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(n.maskType=!1),/firefox/i.test(navigator.userAgent)&&(n.svgLumaHidden=!1),n})(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(n){var t,e,i="SourceGraphic",a=n.data.ef?n.data.ef.length:0,o=createElementID(),c=filtersFactory.createFilter(o,!0),u=0;for(this.filters=[],t=0;t<a;t+=1){e=null;var f=n.data.ef[t].ty;registeredEffects$1[f]&&(e=new registeredEffects$1[f].effect(c,n.effectsManager.effectElements[t],n,idPrefix+u,i),i=idPrefix+u,registeredEffects$1[f].countsAsEffect&&(u+=1)),e&&this.filters.push(e)}u&&(n.globalData.defs.appendChild(c),n.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+o+")")),this.filters.length&&n.addRenderableComponent(this)}function registerEffect$1(n,t,e){registeredEffects$1[n]={effect:t,countsAsEffect:e}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(n,t,e){this.assetData=t.getAssetData(n.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(n,t,e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(n,t){this.elem=n,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(n){var t,e=this.filters.length;for(t=0;t<e;t+=1)this.filters[t].renderFrame(n)},SVGEffects.prototype.getEffects=function(n){var t,e=this.filters.length,i=[];for(t=0;t<e;t+=1)this.filters[t].type===n&&i.push(this.filters[t]);return i},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var n=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),n=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),n=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var e=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var a=createElementID();if(e.setAttribute("id",a),e.appendChild(i),this.globalData.defs.appendChild(e),this.checkMasks()){var o=createNS("g");o.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),o.appendChild(this.layerElement),this.transformedElement=o,n?n.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(n){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[n]){var t,e,i,a,o=this.layerId+"_"+n;if(n===1||n===3){var c=createNS("mask");c.setAttribute("id",o),c.setAttribute("mask-type",n===3?"luminance":"alpha"),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),c.appendChild(i),this.globalData.defs.appendChild(c),featureSupport.maskType||n!==1||(c.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(a=createNS("g")).appendChild(i),c.appendChild(a),a.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(n===2){var u=createNS("mask");u.setAttribute("id",o),u.setAttribute("mask-type","alpha");var f=createNS("g");u.appendChild(f),t=createElementID(),e=filtersFactory.createFilter(t);var p=createNS("feComponentTransfer");p.setAttribute("in","SourceGraphic"),e.appendChild(p);var m=createNS("feFuncA");m.setAttribute("type","table"),m.setAttribute("tableValues","1.0 0.0"),p.appendChild(m),this.globalData.defs.appendChild(e);var y=createNS("rect");y.setAttribute("width",this.comp.data.w),y.setAttribute("height",this.comp.data.h),y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("fill","#ffffff"),y.setAttribute("opacity","0"),f.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),f.appendChild(y),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),f.appendChild(i),featureSupport.maskType||(u.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),a=createNS("g"),f.appendChild(y),a.appendChild(this.layerElement),f.appendChild(a)),this.globalData.defs.appendChild(u)}this.matteMasks[n]=o}return this.matteMasks[n]},setMatte:function(n){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+n+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(n){this.hierarchy=n},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(n,t,e){this.initFrame(),this.initBaseData(n,t,e),this.initTransform(n,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var n=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(n){var t,e=this.shapeModifiers.length;for(t=0;t<e;t+=1)this.shapeModifiers[t].addShape(n)},isShapeInAnimatedModifiers:function(n){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(n))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var n,t=this.shapes.length;for(n=0;n<t;n+=1)this.shapes[n].sh.reset();for(n=(t=this.shapeModifiers.length)-1;n>=0&&!this.shapeModifiers[n].processShapes(this._isFirstFrame);n-=1);}},searchProcessedElement:function(n){for(var t=this.processedElements,e=0,i=t.length;e<i;){if(t[e].elem===n)return t[e].pos;e+=1}return 0},addProcessedElement:function(n,t){for(var e=this.processedElements,i=e.length;i;)if(e[i-=1].elem===n)return void(e[i].pos=t);e.push(new ProcessedElement(n,t))},prepareFrame:function(n){this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(n,t,e){this.caches=[],this.styles=[],this.transformers=n,this.lStr="",this.sh=e,this.lvl=t,this._isAnimated=!!e.k;for(var i=0,a=n.length;i<a;){if(n[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(n,t){this.data=n,this.type=n.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=n.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(n,t,e,i){var a;this.elem=n,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var o,c=t.length||0;for(a=0;a<c;a+=1)o=PropertyFactory.getProp(n,t[a].v,0,0,this),this.k=o.k||this.k,this.dataProps[a]={n:t[a].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(n,t,e){this.initDynamicPropertyContainer(n),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(n,t.o,0,.01,this),this.w=PropertyFactory.getProp(n,t.w,0,null,this),this.d=new DashProperty(n,t.d||{},"svg",this),this.c=PropertyFactory.getProp(n,t.c,1,255,this),this.style=e,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(n,t,e){this.initDynamicPropertyContainer(n),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(n,t.o,0,.01,this),this.c=PropertyFactory.getProp(n,t.c,1,255,this),this.style=e}function SVGNoStyleData(n,t,e){this.initDynamicPropertyContainer(n),this.getValue=this.iterateDynamicProperties,this.style=e}function GradientProperty(n,t,e){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var i=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(e),this.prop=PropertyFactory.getProp(n,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(n,t,e){this.initDynamicPropertyContainer(n),this.getValue=this.iterateDynamicProperties,this.initGradientData(n,t,e)}function SVGGradientStrokeStyleData(n,t,e){this.initDynamicPropertyContainer(n),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(n,t.w,0,null,this),this.d=new DashProperty(n,t.d||{},"svg",this),this.initGradientData(n,t,e),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(n,t,e){this.transform={mProps:n,op:t,container:e},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(n){if((this.elem.globalData.frameId!==this.frameId||n)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||n,this._mdf)){var t=0,e=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),t=0;t<e;t+=1)this.dataProps[t].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(n,t){for(var e=0,i=this.o.length/2;e<i;){if(Math.abs(n[4*e]-n[4*t+2*e])>.01)return!1;e+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var n=0,t=this.data.k.k.length;n<t;){if(!this.comparePoints(this.data.k.k[n].s,this.data.p))return!1;n+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(n){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||n){var t,e,i,a=4*this.data.p;for(t=0;t<a;t+=1)e=t%4==0?100:255,i=Math.round(this.prop.v[t]*e),this.c[t]!==i&&(this.c[t]=i,this._cmdf=!n);if(this.o.length)for(a=this.prop.v.length,t=4*this.data.p;t<a;t+=1)e=t%2==0?100:1,i=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==i&&(this.o[t-4*this.data.p]=i,this._omdf=!n);this._mdf=!n}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(n,t,e){this.o=PropertyFactory.getProp(n,t.o,0,.01,this),this.s=PropertyFactory.getProp(n,t.s,1,null,this),this.e=PropertyFactory.getProp(n,t.e,1,null,this),this.h=PropertyFactory.getProp(n,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(n,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(n,t.g,this),this.style=e,this.stops=[],this.setGradientData(e.pElem,t),this.setGradientOpacity(t,e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(n,t){var e=createElementID(),i=createNS(t.t===1?"linearGradient":"radialGradient");i.setAttribute("id",e),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var a,o,c,u=[];for(c=4*t.g.p,o=0;o<c;o+=4)a=createNS("stop"),i.appendChild(a),u.push(a);n.setAttribute(t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+e+")"),this.gf=i,this.cst=u},SVGGradientFillStyleData.prototype.setGradientOpacity=function(n,t){if(this.g._hasOpacity&&!this.g._collapsable){var e,i,a,o=createNS("mask"),c=createNS("path");o.appendChild(c);var u=createElementID(),f=createElementID();o.setAttribute("id",f);var p=createNS(n.t===1?"linearGradient":"radialGradient");p.setAttribute("id",u),p.setAttribute("spreadMethod","pad"),p.setAttribute("gradientUnits","userSpaceOnUse"),a=n.g.k.k[0].s?n.g.k.k[0].s.length:n.g.k.k.length;var m=this.stops;for(i=4*n.g.p;i<a;i+=2)(e=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),p.appendChild(e),m.push(e);c.setAttribute(n.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+u+")"),n.ty==="gs"&&(c.setAttribute("stroke-linecap",lineCapEnum[n.lc||2]),c.setAttribute("stroke-linejoin",lineJoinEnum[n.lj||2]),n.lj===1&&c.setAttribute("stroke-miterlimit",n.ml)),this.of=p,this.ms=o,this.ost=m,this.maskId=f,t.msElem=c}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(n,t,e,i){if(t===0)return"";var a,o=n.o,c=n.i,u=n.v,f=" M"+i.applyToPointStringified(u[0][0],u[0][1]);for(a=1;a<t;a+=1)f+=" C"+i.applyToPointStringified(o[a-1][0],o[a-1][1])+" "+i.applyToPointStringified(c[a][0],c[a][1])+" "+i.applyToPointStringified(u[a][0],u[a][1]);return e&&t&&(f+=" C"+i.applyToPointStringified(o[a-1][0],o[a-1][1])+" "+i.applyToPointStringified(c[0][0],c[0][1])+" "+i.applyToPointStringified(u[0][0],u[0][1]),f+="z"),f},SVGElementsRenderer=(function(){var n=new Matrix,t=new Matrix;function e(p,m,y){(y||m.transform.op._mdf)&&m.transform.container.setAttribute("opacity",m.transform.op.v),(y||m.transform.mProps._mdf)&&m.transform.container.setAttribute("transform",m.transform.mProps.v.to2dCSS())}function i(){}function a(p,m,y){var b,x,E,A,S,T,D,R,F,k,P=m.styles.length,L=m.lvl;for(T=0;T<P;T+=1){if(A=m.sh._mdf||y,m.styles[T].lvl<L){for(R=t.reset(),F=L-m.styles[T].lvl,k=m.transformers.length-1;!A&&F>0;)A=m.transformers[k].mProps._mdf||A,F-=1,k-=1;if(A)for(F=L-m.styles[T].lvl,k=m.transformers.length-1;F>0;)R.multiply(m.transformers[k].mProps.v),F-=1,k-=1}else R=n;if(x=(D=m.sh.paths)._length,A){for(E="",b=0;b<x;b+=1)(S=D.shapes[b])&&S._length&&(E+=buildShapeString(S,S._length,S.c,R));m.caches[T]=E}else E=m.caches[T];m.styles[T].d+=p.hd===!0?"":E,m.styles[T]._mdf=A||m.styles[T]._mdf}}function o(p,m,y){var b=m.style;(m.c._mdf||y)&&b.pElem.setAttribute("fill","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||y)&&b.pElem.setAttribute("fill-opacity",m.o.v)}function c(p,m,y){u(p,m,y),f(p,m,y)}function u(p,m,y){var b,x,E,A,S,T=m.gf,D=m.g._hasOpacity,R=m.s.v,F=m.e.v;if(m.o._mdf||y){var k=p.ty==="gf"?"fill-opacity":"stroke-opacity";m.style.pElem.setAttribute(k,m.o.v)}if(m.s._mdf||y){var P=p.t===1?"x1":"cx",L=P==="x1"?"y1":"cy";T.setAttribute(P,R[0]),T.setAttribute(L,R[1]),D&&!m.g._collapsable&&(m.of.setAttribute(P,R[0]),m.of.setAttribute(L,R[1]))}if(m.g._cmdf||y){b=m.cst;var B=m.g.c;for(E=b.length,x=0;x<E;x+=1)(A=b[x]).setAttribute("offset",B[4*x]+"%"),A.setAttribute("stop-color","rgb("+B[4*x+1]+","+B[4*x+2]+","+B[4*x+3]+")")}if(D&&(m.g._omdf||y)){var V=m.g.o;for(E=(b=m.g._collapsable?m.cst:m.ost).length,x=0;x<E;x+=1)A=b[x],m.g._collapsable||A.setAttribute("offset",V[2*x]+"%"),A.setAttribute("stop-opacity",V[2*x+1])}if(p.t===1)(m.e._mdf||y)&&(T.setAttribute("x2",F[0]),T.setAttribute("y2",F[1]),D&&!m.g._collapsable&&(m.of.setAttribute("x2",F[0]),m.of.setAttribute("y2",F[1])));else if((m.s._mdf||m.e._mdf||y)&&(S=Math.sqrt(Math.pow(R[0]-F[0],2)+Math.pow(R[1]-F[1],2)),T.setAttribute("r",S),D&&!m.g._collapsable&&m.of.setAttribute("r",S)),m.e._mdf||m.h._mdf||m.a._mdf||y){S||(S=Math.sqrt(Math.pow(R[0]-F[0],2)+Math.pow(R[1]-F[1],2)));var z=Math.atan2(F[1]-R[1],F[0]-R[0]),j=m.h.v;j>=1?j=.99:j<=-1&&(j=-.99);var J=S*j,W=Math.cos(z+m.a.v)*J+R[0],K=Math.sin(z+m.a.v)*J+R[1];T.setAttribute("fx",W),T.setAttribute("fy",K),D&&!m.g._collapsable&&(m.of.setAttribute("fx",W),m.of.setAttribute("fy",K))}}function f(p,m,y){var b=m.style,x=m.d;x&&(x._mdf||y)&&x.dashStr&&(b.pElem.setAttribute("stroke-dasharray",x.dashStr),b.pElem.setAttribute("stroke-dashoffset",x.dashoffset[0])),m.c&&(m.c._mdf||y)&&b.pElem.setAttribute("stroke","rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||y)&&b.pElem.setAttribute("stroke-opacity",m.o.v),(m.w._mdf||y)&&(b.pElem.setAttribute("stroke-width",m.w.v),b.msElem&&b.msElem.setAttribute("stroke-width",m.w.v))}return{createRenderFunction:function(p){switch(p.ty){case"fl":return o;case"gf":return u;case"gs":return c;case"st":return f;case"sh":case"el":case"rc":case"sr":return a;case"tr":return e;case"no":return i;default:return null}}}})();function SVGShapeElement(n,t,e){this.shapes=[],this.shapesData=n.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(n,t,e),this.prevViewData=[]}function LetterProps(n,t,e,i,a,o){this.o=n,this.sw=t,this.sc=e,this.fc=i,this.m=a,this.p=o,this._mdf={o:!0,sw:!!t,sc:!!e,fc:!!i,m:!0,p:!0}}function TextProperty(n,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=n.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=n,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var n,t,e,i,a=this.shapes.length,o=this.stylesList.length,c=[],u=!1;for(e=0;e<o;e+=1){for(i=this.stylesList[e],u=!1,c.length=0,n=0;n<a;n+=1)(t=this.shapes[n]).styles.indexOf(i)!==-1&&(c.push(t),u=t._isAnimated||u);c.length>1&&u&&this.setShapesAsAnimated(c)}},SVGShapeElement.prototype.setShapesAsAnimated=function(n){var t,e=n.length;for(t=0;t<e;t+=1)n[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(n,t){var e,i=new SVGStyleData(n,t),a=i.pElem;return n.ty==="st"?e=new SVGStrokeStyleData(this,n,i):n.ty==="fl"?e=new SVGFillStyleData(this,n,i):n.ty==="gf"||n.ty==="gs"?(e=new(n.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,n,i),this.globalData.defs.appendChild(e.gf),e.maskId&&(this.globalData.defs.appendChild(e.ms),this.globalData.defs.appendChild(e.of),a.setAttribute("mask","url("+getLocationHref()+"#"+e.maskId+")"))):n.ty==="no"&&(e=new SVGNoStyleData(this,n,i)),n.ty!=="st"&&n.ty!=="gs"||(a.setAttribute("stroke-linecap",lineCapEnum[n.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[n.lj||2]),a.setAttribute("fill-opacity","0"),n.lj===1&&a.setAttribute("stroke-miterlimit",n.ml)),n.r===2&&a.setAttribute("fill-rule","evenodd"),n.ln&&a.setAttribute("id",n.ln),n.cl&&a.setAttribute("class",n.cl),n.bm&&(a.style["mix-blend-mode"]=getBlendMode(n.bm)),this.stylesList.push(i),this.addToAnimatedContents(n,e),e},SVGShapeElement.prototype.createGroupElement=function(n){var t=new ShapeGroupData;return n.ln&&t.gr.setAttribute("id",n.ln),n.cl&&t.gr.setAttribute("class",n.cl),n.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(n.bm)),t},SVGShapeElement.prototype.createTransformElement=function(n,t){var e=TransformPropertyFactory.getTransformProperty(this,n,this),i=new SVGTransformData(e,e.o,t);return this.addToAnimatedContents(n,i),i},SVGShapeElement.prototype.createShapeElement=function(n,t,e){var i=4;n.ty==="rc"?i=5:n.ty==="el"?i=6:n.ty==="sr"&&(i=7);var a=new SVGShapeData(t,e,ShapePropertyFactory.getShapeProp(this,n,i,this));return this.shapes.push(a),this.addShapeToModifiers(a),this.addToAnimatedContents(n,a),a},SVGShapeElement.prototype.addToAnimatedContents=function(n,t){for(var e=0,i=this.animatedContents.length;e<i;){if(this.animatedContents[e].element===t)return;e+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(n),element:t,data:n})},SVGShapeElement.prototype.setElementStyles=function(n){var t,e=n.styles,i=this.stylesList.length;for(t=0;t<i;t+=1)this.stylesList[t].closed||e.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){var n;this._isFirstFrame=!0;var t=this.itemsData.length;for(n=0;n<t;n+=1)this.prevViewData[n]=this.itemsData[n];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,n=0;n<t;n+=1)this.dynamicProperties[n].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(n,t,e,i,a,o,c){var u,f,p,m,y,b,x=[].concat(o),E=n.length-1,A=[],S=[];for(u=E;u>=0;u-=1){if((b=this.searchProcessedElement(n[u]))?t[u]=e[b-1]:n[u]._render=c,n[u].ty==="fl"||n[u].ty==="st"||n[u].ty==="gf"||n[u].ty==="gs"||n[u].ty==="no")b?t[u].style.closed=!1:t[u]=this.createStyleElement(n[u],a),n[u]._render&&t[u].style.pElem.parentNode!==i&&i.appendChild(t[u].style.pElem),A.push(t[u].style);else if(n[u].ty==="gr"){if(b)for(p=t[u].it.length,f=0;f<p;f+=1)t[u].prevViewData[f]=t[u].it[f];else t[u]=this.createGroupElement(n[u]);this.searchShapes(n[u].it,t[u].it,t[u].prevViewData,t[u].gr,a+1,x,c),n[u]._render&&t[u].gr.parentNode!==i&&i.appendChild(t[u].gr)}else n[u].ty==="tr"?(b||(t[u]=this.createTransformElement(n[u],i)),m=t[u].transform,x.push(m)):n[u].ty==="sh"||n[u].ty==="rc"||n[u].ty==="el"||n[u].ty==="sr"?(b||(t[u]=this.createShapeElement(n[u],x,a)),this.setElementStyles(t[u])):n[u].ty==="tm"||n[u].ty==="rd"||n[u].ty==="ms"||n[u].ty==="pb"||n[u].ty==="zz"||n[u].ty==="op"?(b?(y=t[u]).closed=!1:((y=ShapeModifiers.getModifier(n[u].ty)).init(this,n[u]),t[u]=y,this.shapeModifiers.push(y)),S.push(y)):n[u].ty==="rp"&&(b?(y=t[u]).closed=!0:(y=ShapeModifiers.getModifier(n[u].ty),t[u]=y,y.init(this,n,u,t),this.shapeModifiers.push(y),c=!1),S.push(y));this.addProcessedElement(n[u],u+1)}for(E=A.length,u=0;u<E;u+=1)A[u].closed=!0;for(E=S.length,u=0;u<E;u+=1)S[u].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var n;this.renderModifiers();var t=this.stylesList.length;for(n=0;n<t;n+=1)this.stylesList[n].reset();for(this.renderShape(),n=0;n<t;n+=1)(this.stylesList[n]._mdf||this._isFirstFrame)&&(this.stylesList[n].msElem&&(this.stylesList[n].msElem.setAttribute("d",this.stylesList[n].d),this.stylesList[n].d="M0 0"+this.stylesList[n].d),this.stylesList[n].pElem.setAttribute("d",this.stylesList[n].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var n,t,e=this.animatedContents.length;for(n=0;n<e;n+=1)t=this.animatedContents[n],(this._isFirstFrame||t.element._isAnimated)&&t.data!==!0&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(n,t,e,i,a,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var c=!1;return this.o!==n&&(this.o=n,this._mdf.o=!0,c=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,c=!0),this.sc!==e&&(this.sc=e,this._mdf.sc=!0,c=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,c=!0),this.m!==a&&(this.m=a,this._mdf.m=!0,c=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this._mdf.p=!0,c=!0),c},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n},TextProperty.prototype.setCurrentData=function(n){n.__complete||this.completeTextData(n),this.currentData=n,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(n){this.effectsSequence.push(n),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(n){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||n){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,e=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var i;this.lock=!0,this._mdf=!1;var a=this.effectsSequence.length,o=n||this.data.d.k[this.keysIndex].s;for(i=0;i<a;i+=1)o=e!==this.keysIndex?this.effectsSequence[i](o,o.t):this.effectsSequence[i](this.currentData,o.t);t!==o&&this.setCurrentData(o),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var n=this.data.d.k,t=this.elem.comp.renderedFrame,e=0,i=n.length;e<=i-1&&!(e===i-1||n[e+1].t>t);)e+=1;return this.keysIndex!==e&&(this.keysIndex=e),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(n){for(var t,e,i=[],a=0,o=n.length,c=!1,u=!1,f="";a<o;)c=u,u=!1,t=n.charCodeAt(a),f=n.charAt(a),FontManager.isCombinedCharacter(t)?c=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(n,a)?f=n.substr(a,14):(e=n.charCodeAt(a+1))>=56320&&e<=57343&&(FontManager.isModifier(t,e)?(f=n.substr(a,2),c=!0):f=FontManager.isFlagEmoji(n.substr(a,4))?n.substr(a,4):n.substr(a,2)):t>56319?(e=n.charCodeAt(a+1),FontManager.isVariationSelector(t)&&(c=!0)):FontManager.isZeroWidthJoiner(t)&&(c=!0,u=!0),c?(i[i.length-1]+=f,c=!1):i.push(f),a+=f.length;return i},TextProperty.prototype.completeTextData=function(n){n.__complete=!0;var t,e,i,a,o,c,u,f=this.elem.globalData.fontManager,p=this.data,m=[],y=0,b=p.m.g,x=0,E=0,A=0,S=[],T=0,D=0,R=f.getFontByName(n.f),F=0,k=getFontProperties(R);n.fWeight=k.weight,n.fStyle=k.style,n.finalSize=n.s,n.finalText=this.buildFinalText(n.t),e=n.finalText.length,n.finalLineHeight=n.lh;var P,L=n.tr/1e3*n.finalSize;if(n.sz)for(var B,V,z=!0,j=n.sz[0],J=n.sz[1];z;){B=0,T=0,e=(V=this.buildFinalText(n.t)).length,L=n.tr/1e3*n.finalSize;var W=-1;for(t=0;t<e;t+=1)P=V[t].charCodeAt(0),i=!1,V[t]===" "?W=t:P!==13&&P!==3||(T=0,i=!0,B+=n.finalLineHeight||1.2*n.finalSize),f.chars?(u=f.getCharData(V[t],R.fStyle,R.fFamily),F=i?0:u.w*n.finalSize/100):F=f.measureText(V[t],n.f,n.finalSize),T+F>j&&V[t]!==" "?(W===-1?e+=1:t=W,B+=n.finalLineHeight||1.2*n.finalSize,V.splice(t,W===t?1:0,"\r"),W=-1,T=0):(T+=F,T+=L);B+=R.ascent*n.finalSize/100,this.canResize&&n.finalSize>this.minimumFontSize&&J<B?(n.finalSize-=1,n.finalLineHeight=n.finalSize*n.lh/n.s):(n.finalText=V,e=n.finalText.length,z=!1)}T=-L,F=0;var K,$=0;for(t=0;t<e;t+=1)if(i=!1,(P=(K=n.finalText[t]).charCodeAt(0))===13||P===3?($=0,S.push(T),D=T>D?T:D,T=-2*L,a="",i=!0,A+=1):a=K,f.chars?(u=f.getCharData(K,R.fStyle,f.getFontByName(n.f).fFamily),F=i?0:u.w*n.finalSize/100):F=f.measureText(a,n.f,n.finalSize),K===" "?$+=F+L:(T+=F+L+$,$=0),m.push({l:F,an:F,add:x,n:i,anIndexes:[],val:a,line:A,animatorJustifyOffset:0}),b==2){if(x+=F,a===""||a===" "||t===e-1){for(a!==""&&a!==" "||(x-=F);E<=t;)m[E].an=x,m[E].ind=y,m[E].extra=F,E+=1;y+=1,x=0}}else if(b==3){if(x+=F,a===""||t===e-1){for(a===""&&(x-=F);E<=t;)m[E].an=x,m[E].ind=y,m[E].extra=F,E+=1;x=0,y+=1}}else m[y].ind=y,m[y].extra=0,y+=1;if(n.l=m,D=T>D?T:D,S.push(T),n.sz)n.boxWidth=n.sz[0],n.justifyOffset=0;else switch(n.boxWidth=D,n.j){case 1:n.justifyOffset=-n.boxWidth;break;case 2:n.justifyOffset=-n.boxWidth/2;break;default:n.justifyOffset=0}n.lineWidths=S;var N,G,I,X,et=p.a;c=et.length;var H=[];for(o=0;o<c;o+=1){for((N=et[o]).a.sc&&(n.strokeColorAnim=!0),N.a.sw&&(n.strokeWidthAnim=!0),(N.a.fc||N.a.fh||N.a.fs||N.a.fb)&&(n.fillColorAnim=!0),X=0,I=N.s.b,t=0;t<e;t+=1)(G=m[t]).anIndexes[o]=X,(I==1&&G.val!==""||I==2&&G.val!==""&&G.val!==" "||I==3&&(G.n||G.val==" "||t==e-1)||I==4&&(G.n||t==e-1))&&(N.s.rn===1&&H.push(X),X+=1);p.a[o].s.totalChars=X;var Q,st=-1;if(N.s.rn===1)for(t=0;t<e;t+=1)st!=(G=m[t]).anIndexes[o]&&(st=G.anIndexes[o],Q=H.splice(Math.floor(Math.random()*H.length),1)[0]),G.anIndexes[o]=Q}n.yOffset=n.finalLineHeight||1.2*n.finalSize,n.ls=n.ls||0,n.ascent=R.ascent*n.finalSize/100},TextProperty.prototype.updateDocumentData=function(n,t){t=t===void 0?this.keysIndex:t;var e=this.copyData({},this.data.d.k[t].s);e=this.copyData(e,n),this.data.d.k[t].s=e,this.recalculate(t),this.setCurrentData(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(n){var t=this.data.d.k[n].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(n){this.canResize=n,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(n){this.minimumFontSize=Math.floor(n)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(function(){var n=Math.max,t=Math.min,e=Math.floor;function i(a,o){this._currentTextLength=-1,this.k=!1,this.data=o,this.elem=a,this.comp=a.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(a),this.s=PropertyFactory.getProp(a,o.s||{k:0},0,0,this),this.e="e"in o?PropertyFactory.getProp(a,o.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(a,o.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(a,o.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(a,o.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(a,o.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(a,o.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return i.prototype={getMult:function(a){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var o=0,c=0,u=1,f=1;this.ne.v>0?o=this.ne.v/100:c=-this.ne.v/100,this.xe.v>0?u=1-this.xe.v/100:f=1+this.xe.v/100;var p=BezierFactory.getBezierEasing(o,c,u,f).get,m=0,y=this.finalS,b=this.finalE,x=this.data.sh;if(x===2)m=p(m=b===y?a>=b?1:0:n(0,t(.5/(b-y)+(a-y)/(b-y),1)));else if(x===3)m=p(m=b===y?a>=b?0:1:1-n(0,t(.5/(b-y)+(a-y)/(b-y),1)));else if(x===4)b===y?m=0:(m=n(0,t(.5/(b-y)+(a-y)/(b-y),1)))<.5?m*=2:m=1-2*(m-.5),m=p(m);else if(x===5){if(b===y)m=0;else{var E=b-y,A=-E/2+(a=t(n(0,a+.5-y),b-y)),S=E/2;m=Math.sqrt(1-A*A/(S*S))}m=p(m)}else x===6?(b===y?m=0:(a=t(n(0,a+.5-y),b-y),m=(1+Math.cos(Math.PI+2*Math.PI*a/(b-y)))/2),m=p(m)):(a>=e(y)&&(m=n(0,t(a-y<0?t(b,1)-(y-a):b-a,1))),m=p(m));if(this.sm.v!==100){var T=.01*this.sm.v;T===0&&(T=1e-8);var D=.5-.5*T;m<D?m=0:(m=(m-D)/T)>1&&(m=1)}return m*this.a.v},getValue:function(a){this.iterateDynamicProperties(),this._mdf=a||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,a&&this.data.r===2&&(this.e.v=this._currentTextLength);var o=this.data.r===2?1:100/this.data.totalChars,c=this.o.v/o,u=this.s.v/o+c,f=this.e.v/o+c;if(u>f){var p=u;u=f,f=p}this.finalS=u,this.finalE=f}},extendPrototype([DynamicPropertyContainer],i),{getTextSelectorProp:function(a,o,c){return new i(a,o)}}})();function TextAnimatorDataProperty(n,t,e){var i={propType:!1},a=PropertyFactory.getProp,o=t.a;this.a={r:o.r?a(n,o.r,0,degToRads,e):i,rx:o.rx?a(n,o.rx,0,degToRads,e):i,ry:o.ry?a(n,o.ry,0,degToRads,e):i,sk:o.sk?a(n,o.sk,0,degToRads,e):i,sa:o.sa?a(n,o.sa,0,degToRads,e):i,s:o.s?a(n,o.s,1,.01,e):i,a:o.a?a(n,o.a,1,0,e):i,o:o.o?a(n,o.o,0,.01,e):i,p:o.p?a(n,o.p,1,0,e):i,sw:o.sw?a(n,o.sw,0,0,e):i,sc:o.sc?a(n,o.sc,1,0,e):i,fc:o.fc?a(n,o.fc,1,0,e):i,fh:o.fh?a(n,o.fh,0,0,e):i,fs:o.fs?a(n,o.fs,0,.01,e):i,fb:o.fb?a(n,o.fb,0,.01,e):i,t:o.t?a(n,o.t,0,0,e):i},this.s=TextSelectorProp.getTextSelectorProp(n,t.s,e),this.s.t=t.s.t}function TextAnimatorProperty(n,t,e){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=n,this._renderType=t,this._elem=e,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(e)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var n,t,e=this._textData.a.length,i=PropertyFactory.getProp;for(n=0;n<e;n+=1)t=this._textData.a[n],this._animatorsData[n]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(n,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var e,i,a,o,c,u,f,p,m,y,b,x,E,A,S,T,D,R,F,k=this._moreOptions.alignment.v,P=this._animatorsData,L=this._textData,B=this.mHelper,V=this._renderType,z=this.renderedLetters.length,j=n.l;if(this._hasMaskedPath){if(F=this._pathData.m,!this._pathData.n||this._pathData._mdf){var J,W=F.v;for(this._pathData.r.v&&(W=W.reverse()),c={tLength:0,segments:[]},o=W._length-1,T=0,a=0;a<o;a+=1)J=bez.buildBezierData(W.v[a],W.v[a+1],[W.o[a][0]-W.v[a][0],W.o[a][1]-W.v[a][1]],[W.i[a+1][0]-W.v[a+1][0],W.i[a+1][1]-W.v[a+1][1]]),c.tLength+=J.segmentLength,c.segments.push(J),T+=J.segmentLength;a=o,F.v.c&&(J=bez.buildBezierData(W.v[a],W.v[0],[W.o[a][0]-W.v[a][0],W.o[a][1]-W.v[a][1]],[W.i[0][0]-W.v[0][0],W.i[0][1]-W.v[0][1]]),c.tLength+=J.segmentLength,c.segments.push(J),T+=J.segmentLength),this._pathData.pi=c}if(c=this._pathData.pi,u=this._pathData.f.v,b=0,y=1,p=0,m=!0,A=c.segments,u<0&&F.v.c)for(c.tLength<Math.abs(u)&&(u=-Math.abs(u)%c.tLength),y=(E=A[b=A.length-1].points).length-1;u<0;)u+=E[y].partialLength,(y-=1)<0&&(y=(E=A[b-=1].points).length-1);x=(E=A[b].points)[y-1],S=(f=E[y]).partialLength}o=j.length,e=0,i=0;var K,$,N,G,I,X=1.2*n.finalSize*.714,et=!0;N=P.length;var H,Q,st,dt,ft,bt,mt,Mt,Ot,wt,$t,te,It=-1,yt=u,Wt=b,Zt=y,Ae=-1,be="",xe=this.defaultPropsArray;if(n.j===2||n.j===1){var pe=0,_e=0,it=n.j===2?-.5:-1,gt=0,vt=!0;for(a=0;a<o;a+=1)if(j[a].n){for(pe&&(pe+=_e);gt<a;)j[gt].animatorJustifyOffset=pe,gt+=1;pe=0,vt=!0}else{for($=0;$<N;$+=1)(K=P[$].a).t.propType&&(vt&&n.j===2&&(_e+=K.t.v*it),(I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars)).length?pe+=K.t.v*I[0]*it:pe+=K.t.v*I*it);vt=!1}for(pe&&(pe+=_e);gt<a;)j[gt].animatorJustifyOffset=pe,gt+=1}for(a=0;a<o;a+=1){if(B.reset(),dt=1,j[a].n)e=0,i+=n.yOffset,i+=et?1:0,u=yt,et=!1,this._hasMaskedPath&&(y=Zt,x=(E=A[b=Wt].points)[y-1],S=(f=E[y]).partialLength,p=0),be="",$t="",Ot="",te="",xe=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Ae!==j[a].line){switch(n.j){case 1:u+=T-n.lineWidths[j[a].line];break;case 2:u+=(T-n.lineWidths[j[a].line])/2}Ae=j[a].line}It!==j[a].ind&&(j[It]&&(u+=j[It].extra),u+=j[a].an/2,It=j[a].ind),u+=k[0]*j[a].an*.005;var St=0;for($=0;$<N;$+=1)(K=P[$].a).p.propType&&((I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars)).length?St+=K.p.v[0]*I[0]:St+=K.p.v[0]*I),K.a.propType&&((I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars)).length?St+=K.a.v[0]*I[0]:St+=K.a.v[0]*I);for(m=!0,this._pathData.a.v&&(u=.5*j[0].an+(T-this._pathData.f.v-.5*j[0].an-.5*j[j.length-1].an)*It/(o-1),u+=this._pathData.f.v);m;)p+S>=u+St||!E?(D=(u+St-p)/f.partialLength,Q=x.point[0]+(f.point[0]-x.point[0])*D,st=x.point[1]+(f.point[1]-x.point[1])*D,B.translate(-k[0]*j[a].an*.005,-k[1]*X*.01),m=!1):E&&(p+=f.partialLength,(y+=1)>=E.length&&(y=0,A[b+=1]?E=A[b].points:F.v.c?(y=0,E=A[b=0].points):(p-=f.partialLength,E=null)),E&&(x=f,S=(f=E[y]).partialLength));H=j[a].an/2-j[a].add,B.translate(-H,0,0)}else H=j[a].an/2-j[a].add,B.translate(-H,0,0),B.translate(-k[0]*j[a].an*.005,-k[1]*X*.01,0);for($=0;$<N;$+=1)(K=P[$].a).t.propType&&(I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars),e===0&&n.j===0||(this._hasMaskedPath?I.length?u+=K.t.v*I[0]:u+=K.t.v*I:I.length?e+=K.t.v*I[0]:e+=K.t.v*I));for(n.strokeWidthAnim&&(bt=n.sw||0),n.strokeColorAnim&&(ft=n.sc?[n.sc[0],n.sc[1],n.sc[2]]:[0,0,0]),n.fillColorAnim&&n.fc&&(mt=[n.fc[0],n.fc[1],n.fc[2]]),$=0;$<N;$+=1)(K=P[$].a).a.propType&&((I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars)).length?B.translate(-K.a.v[0]*I[0],-K.a.v[1]*I[1],K.a.v[2]*I[2]):B.translate(-K.a.v[0]*I,-K.a.v[1]*I,K.a.v[2]*I));for($=0;$<N;$+=1)(K=P[$].a).s.propType&&((I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars)).length?B.scale(1+(K.s.v[0]-1)*I[0],1+(K.s.v[1]-1)*I[1],1):B.scale(1+(K.s.v[0]-1)*I,1+(K.s.v[1]-1)*I,1));for($=0;$<N;$+=1){if(K=P[$].a,I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars),K.sk.propType&&(I.length?B.skewFromAxis(-K.sk.v*I[0],K.sa.v*I[1]):B.skewFromAxis(-K.sk.v*I,K.sa.v*I)),K.r.propType&&(I.length?B.rotateZ(-K.r.v*I[2]):B.rotateZ(-K.r.v*I)),K.ry.propType&&(I.length?B.rotateY(K.ry.v*I[1]):B.rotateY(K.ry.v*I)),K.rx.propType&&(I.length?B.rotateX(K.rx.v*I[0]):B.rotateX(K.rx.v*I)),K.o.propType&&(I.length?dt+=(K.o.v*I[0]-dt)*I[0]:dt+=(K.o.v*I-dt)*I),n.strokeWidthAnim&&K.sw.propType&&(I.length?bt+=K.sw.v*I[0]:bt+=K.sw.v*I),n.strokeColorAnim&&K.sc.propType)for(Mt=0;Mt<3;Mt+=1)I.length?ft[Mt]+=(K.sc.v[Mt]-ft[Mt])*I[0]:ft[Mt]+=(K.sc.v[Mt]-ft[Mt])*I;if(n.fillColorAnim&&n.fc){if(K.fc.propType)for(Mt=0;Mt<3;Mt+=1)I.length?mt[Mt]+=(K.fc.v[Mt]-mt[Mt])*I[0]:mt[Mt]+=(K.fc.v[Mt]-mt[Mt])*I;K.fh.propType&&(mt=I.length?addHueToRGB(mt,K.fh.v*I[0]):addHueToRGB(mt,K.fh.v*I)),K.fs.propType&&(mt=I.length?addSaturationToRGB(mt,K.fs.v*I[0]):addSaturationToRGB(mt,K.fs.v*I)),K.fb.propType&&(mt=I.length?addBrightnessToRGB(mt,K.fb.v*I[0]):addBrightnessToRGB(mt,K.fb.v*I))}}for($=0;$<N;$+=1)(K=P[$].a).p.propType&&(I=P[$].s.getMult(j[a].anIndexes[$],L.a[$].s.totalChars),this._hasMaskedPath?I.length?B.translate(0,K.p.v[1]*I[0],-K.p.v[2]*I[1]):B.translate(0,K.p.v[1]*I,-K.p.v[2]*I):I.length?B.translate(K.p.v[0]*I[0],K.p.v[1]*I[1],-K.p.v[2]*I[2]):B.translate(K.p.v[0]*I,K.p.v[1]*I,-K.p.v[2]*I));if(n.strokeWidthAnim&&(Ot=bt<0?0:bt),n.strokeColorAnim&&(wt="rgb("+Math.round(255*ft[0])+","+Math.round(255*ft[1])+","+Math.round(255*ft[2])+")"),n.fillColorAnim&&n.fc&&($t="rgb("+Math.round(255*mt[0])+","+Math.round(255*mt[1])+","+Math.round(255*mt[2])+")"),this._hasMaskedPath){if(B.translate(0,-n.ls),B.translate(0,k[1]*X*.01+i,0),this._pathData.p.v){R=(f.point[1]-x.point[1])/(f.point[0]-x.point[0]);var Ct=180*Math.atan(R)/Math.PI;f.point[0]<x.point[0]&&(Ct+=180),B.rotate(-Ct*Math.PI/180)}B.translate(Q,st,0),u-=k[0]*j[a].an*.005,j[a+1]&&It!==j[a+1].ind&&(u+=j[a].an/2,u+=.001*n.tr*n.finalSize)}else{switch(B.translate(e,i,0),n.ps&&B.translate(n.ps[0],n.ps[1]+n.ascent,0),n.j){case 1:B.translate(j[a].animatorJustifyOffset+n.justifyOffset+(n.boxWidth-n.lineWidths[j[a].line]),0,0);break;case 2:B.translate(j[a].animatorJustifyOffset+n.justifyOffset+(n.boxWidth-n.lineWidths[j[a].line])/2,0,0)}B.translate(0,-n.ls),B.translate(H,0,0),B.translate(k[0]*j[a].an*.005,k[1]*X*.01,0),e+=j[a].l+.001*n.tr*n.finalSize}V==="html"?be=B.toCSS():V==="svg"?be=B.to2dCSS():xe=[B.props[0],B.props[1],B.props[2],B.props[3],B.props[4],B.props[5],B.props[6],B.props[7],B.props[8],B.props[9],B.props[10],B.props[11],B.props[12],B.props[13],B.props[14],B.props[15]],te=dt}z<=a?(G=new LetterProps(te,Ot,wt,$t,be,xe),this.renderedLetters.push(G),z+=1,this.lettersChangedFlag=!0):(G=this.renderedLetters[a],this.lettersChangedFlag=G.update(te,Ot,wt,$t,be,xe)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(n,t,e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(n,t,e),this.textProperty=new TextProperty(this,n.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(n.t,this.renderType,this),this.initTransform(n,t,e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(n){this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange)},ITextElement.prototype.createPathShape=function(n,t){var e,i,a=t.length,o="";for(e=0;e<a;e+=1)t[e].ty==="sh"&&(i=t[e].ks.k,o+=buildShapeString(i,i.i.length,!0,n));return o},ITextElement.prototype.updateDocumentData=function(n,t){this.textProperty.updateDocumentData(n,t)},ITextElement.prototype.canResizeFont=function(n){this.textProperty.canResizeFont(n)},ITextElement.prototype.setMinimumFontSize=function(n){this.textProperty.setMinimumFontSize(n)},ITextElement.prototype.applyTextPropertiesToMatrix=function(n,t,e,i,a){switch(n.ps&&t.translate(n.ps[0],n.ps[1]+n.ascent,0),t.translate(0,-n.ls,0),n.j){case 1:t.translate(n.justifyOffset+(n.boxWidth-n.lineWidths[e]),0,0);break;case 2:t.translate(n.justifyOffset+(n.boxWidth-n.lineWidths[e])/2,0,0)}t.translate(i,a,0)},ITextElement.prototype.buildColor=function(n){return"rgb("+Math.round(255*n[0])+","+Math.round(255*n[1])+","+Math.round(255*n[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(n,t,e){this.textSpans=[],this.renderType="svg",this.initElement(n,t,e)}function ISolidElement(n,t,e){this.initElement(n,t,e)}function NullElement(n,t,e){this.initFrame(),this.initBaseData(n,t,e),this.initFrame(),this.initTransform(n,t,e),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(n,t,e){this.layers=n.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(n,t,e),this.tm=n.tm?PropertyFactory.getProp(this,n.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(n,t){this.animationItem=n,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var e="";if(t&&t.title){var i=createNS("title"),a=createElementID();i.setAttribute("id",a),i.textContent=t.title,this.svgElement.appendChild(i),e+=a}if(t&&t.description){var o=createNS("desc"),c=createElementID();o.setAttribute("id",c),o.textContent=t.description,this.svgElement.appendChild(o),e+=" "+c}e&&this.svgElement.setAttribute("aria-labelledby",e);var u=createNS("defs");this.svgElement.appendChild(u);var f=createNS("g");this.svgElement.appendChild(f),this.layerElement=f,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&t.hideOnTransparent===!1),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:u,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(n){for(var t=0,e=n.length,i=[],a="";t<e;)n[t]==="\r"||n[t]===""?(i.push(a),a=""):a+=n[t],t+=1;return i.push(a),i},SVGTextLottieElement.prototype.buildShapeData=function(n,t){if(n.shapes&&n.shapes.length){var e=n.shapes[0];if(e.it){var i=e.it[e.it.length-1];i.s&&(i.s.k[0]=t,i.s.k[1]=t)}}return n},SVGTextLottieElement.prototype.buildNewText=function(){var n,t;this.addDynamicProperty(this);var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var i=this.globalData.fontManager.getFontByName(e.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var a=e.fWeight,o=e.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",a)}this.layerElement.setAttribute("aria-label",e.t);var c,u=e.l||[],f=!!this.globalData.fontManager.chars;t=u.length;var p=this.mHelper,m=this.data.singleShape,y=0,b=0,x=!0,E=.001*e.tr*e.finalSize;if(!m||f||e.sz){var A,S=this.textSpans.length;for(n=0;n<t;n+=1){if(this.textSpans[n]||(this.textSpans[n]={span:null,childSpan:null,glyph:null}),!f||!m||n===0){if(c=S>n?this.textSpans[n].span:createNS(f?"g":"text"),S<=n){if(c.setAttribute("stroke-linecap","butt"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit","4"),this.textSpans[n].span=c,f){var T=createNS("g");c.appendChild(T),this.textSpans[n].childSpan=T}this.textSpans[n].span=c,this.layerElement.appendChild(c)}c.style.display="inherit"}if(p.reset(),m&&(u[n].n&&(y=-E,b+=e.yOffset,b+=x?1:0,x=!1),this.applyTextPropertiesToMatrix(e,p,u[n].line,y,b),y+=u[n].l||0,y+=E),f){var D;if((A=this.globalData.fontManager.getCharData(e.finalText[n],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily)).t===1)D=new SVGCompElement(A.data,this.globalData,this);else{var R=emptyShapeData;A.data&&A.data.shapes&&(R=this.buildShapeData(A.data,e.finalSize)),D=new SVGShapeElement(R,this.globalData,this)}if(this.textSpans[n].glyph){var F=this.textSpans[n].glyph;this.textSpans[n].childSpan.removeChild(F.layerElement),F.destroy()}this.textSpans[n].glyph=D,D._debug=!0,D.prepareFrame(0),D.renderFrame(),this.textSpans[n].childSpan.appendChild(D.layerElement),A.t===1&&this.textSpans[n].childSpan.setAttribute("transform","scale("+e.finalSize/100+","+e.finalSize/100+")")}else m&&c.setAttribute("transform","translate("+p.props[12]+","+p.props[13]+")"),c.textContent=u[n].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}m&&c&&c.setAttribute("d","")}else{var k=this.textContainer,P="start";switch(e.j){case 1:P="end";break;case 2:P="middle";break;default:P="start"}k.setAttribute("text-anchor",P),k.setAttribute("letter-spacing",E);var L=this.buildTextContents(e.finalText);for(t=L.length,b=e.ps?e.ps[1]+e.ascent:0,n=0;n<t;n+=1)(c=this.textSpans[n].span||createNS("tspan")).textContent=L[n],c.setAttribute("x",0),c.setAttribute("y",b),c.style.display="inherit",k.appendChild(c),this.textSpans[n]||(this.textSpans[n]={span:null,glyph:null}),this.textSpans[n].span=c,b+=e.finalLineHeight;this.layerElement.appendChild(k)}for(;n<this.textSpans.length;)this.textSpans[n].span.style.display="none",n+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var n=this.layerElement.getBBox();this.bbox={top:n.y,left:n.x,width:n.width,height:n.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var n,t,e=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,n=0;n<e;n+=1)(t=this.textSpans[n].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var n,t;this._sizeChanged=!0;var e,i,a,o=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;for(t=c.length,n=0;n<t;n+=1)c[n].n||(e=o[n],i=this.textSpans[n].span,(a=this.textSpans[n].glyph)&&a.renderFrame(),e._mdf.m&&i.setAttribute("transform",e.m),e._mdf.o&&i.setAttribute("opacity",e.o),e._mdf.sw&&i.setAttribute("stroke-width",e.sw),e._mdf.sc&&i.setAttribute("stroke",e.sc),e._mdf.fc&&i.setAttribute("fill",e.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var n=createNS("rect");n.setAttribute("width",this.data.sw),n.setAttribute("height",this.data.sh),n.setAttribute("fill",this.data.sc),this.layerElement.appendChild(n)},NullElement.prototype.prepareFrame=function(n){this.prepareProperties(n,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(n){return new NullElement(n,this.globalData,this)},SVGRendererBase.prototype.createShape=function(n){return new SVGShapeElement(n,this.globalData,this)},SVGRendererBase.prototype.createText=function(n){return new SVGTextLottieElement(n,this.globalData,this)},SVGRendererBase.prototype.createImage=function(n){return new IImageElement(n,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(n){return new ISolidElement(n,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(n){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+n.w+" "+n.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",n.w),this.svgElement.setAttribute("height",n.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(n,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=n;var e=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",n.w),i.setAttribute("height",n.h),i.setAttribute("x",0),i.setAttribute("y",0);var a=createElementID();e.setAttribute("id",a),e.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+a+")"),t.appendChild(e),this.layers=n.layers,this.elements=createSizedArray(n.layers.length)},SVGRendererBase.prototype.destroy=function(){var n;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(n=0;n<t;n+=1)this.elements[n]&&this.elements[n].destroy&&this.elements[n].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(n){var t=0,e=this.layers.length;for(t=0;t<e;t+=1)if(this.layers[t].ind===n)return t;return-1},SVGRendererBase.prototype.buildItem=function(n){var t=this.elements;if(!t[n]&&this.layers[n].ty!==99){t[n]=!0;var e=this.createItem(this.layers[n]);if(t[n]=e,getExpressionsPlugin()&&(this.layers[n].ty===0&&this.globalData.projectInterface.registerComposition(e),e.initExpressions()),this.appendElementInPos(e,n),this.layers[n].tt){var i="tp"in this.layers[n]?this.findIndexByInd(this.layers[n].tp):n-1;if(i===-1)return;if(this.elements[i]&&this.elements[i]!==!0){var a=t[i].getMatte(this.layers[n].tt);e.setMatte(a)}else this.buildItem(i),this.addPendingElement(e)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var n=this.pendingElements.pop();if(n.checkParenting(),n.data.tt)for(var t=0,e=this.elements.length;t<e;){if(this.elements[t]===n){var i="tp"in n.data?this.findIndexByInd(n.data.tp):t-1,a=this.elements[i].getMatte(this.layers[t].tt);n.setMatte(a);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(n){if(this.renderedFrame!==n&&!this.destroyed){var t;n===null?n=this.renderedFrame:this.renderedFrame=n,this.globalData.frameNum=n,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=n,this.globalData._mdf=!1;var e=this.layers.length;for(this.completeLayers||this.checkLayers(n),t=e-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(n-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(n,t){var e=n.getBaseElement();if(e){for(var i,a=0;a<t;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement()&&(i=this.elements[a].getBaseElement()),a+=1;i?this.layerElement.insertBefore(e,i):this.layerElement.appendChild(e)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(n,t,e){this.initFrame(),this.initBaseData(n,t,e),this.initTransform(n,t,e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(n){if(this._mdf=!1,this.prepareRenderableFrame(n),this.prepareProperties(n,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=n/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var e,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&(this.elements[e].prepareFrame(this.renderedFrame-this.layers[e].st),this.elements[e]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var n,t=this.layers.length;for(n=0;n<t;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame()},ICompElement.prototype.setElements=function(n){this.elements=n},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var n,t=this.layers.length;for(n=0;n<t;n+=1)this.elements[n]&&this.elements[n].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(n){return new SVGCompElement(n,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(n){return new SVGCompElement(n,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(n){var t,e=n.length,i="_";for(t=0;t<e;t+=1)i+=n[t].transform.key+"_";var a=this.sequences[i];return a||(a={transforms:[].concat(n),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=a,this.sequenceList.push(a)),a},processSequence:function(n,t){for(var e=0,i=n.transforms.length,a=t;e<i&&!t;){if(n.transforms[e].transform.mProps._mdf){a=!0;break}e+=1}if(a)for(n.finalTransform.reset(),e=i-1;e>=0;e-=1)n.finalTransform.multiply(n.transforms[e].transform.mProps.v);n._mdf=a},processSequences:function(n){var t,e=this.sequenceList.length;for(t=0;t<e;t+=1)this.processSequence(this.sequenceList[t],n)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var n="__lottie_element_luma_buffer",t=null,e=null,i=null;function a(){var o,c,u;t||(o=createNS("svg"),c=createNS("filter"),u=createNS("feColorMatrix"),c.setAttribute("id",n),u.setAttribute("type","matrix"),u.setAttribute("color-interpolation-filters","sRGB"),u.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),c.appendChild(u),o.appendChild(c),o.setAttribute("id",n+"_svg"),featureSupport.svgLumaHidden&&(o.style.display="none"),i=o,document.body.appendChild(i),t=createTag("canvas"),(e=t.getContext("2d")).filter="url(#"+n+")",e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1))}return{load:a,get:function(o){return t||a(),t.width=o.width,t.height=o.height,e.filter="url(#"+n+")",t}}};function createCanvas(n,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(n,t);var e=createTag("canvas");return e.width=n,e.height=t,e}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(n){var t,e,i=n.data.ef?n.data.ef.length:0;for(this.filters=[],t=0;t<i;t+=1){e=null;var a=n.data.ef[t].ty;registeredEffects[a]&&(e=new registeredEffects[a].effect(n.effectsManager.effectElements[t],n)),e&&this.filters.push(e)}this.filters.length&&n.addRenderableComponent(this)}function registerEffect(n,t){registeredEffects[n]={effect:t}}function CVMaskElement(n,t){var e;this.data=n,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i=this.masksProperties.length,a=!1;for(e=0;e<i;e+=1)this.masksProperties[e].mode!=="n"&&(a=!0),this.viewData[e]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[e],3);this.hasMasks=a,a&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(n){var t,e=this.filters.length;for(t=0;t<e;t+=1)this.filters[t].renderFrame(n)},CVEffects.prototype.getEffects=function(n){var t,e=this.filters.length,i=[];for(t=0;t<e;t+=1)this.filters[t].type===n&&i.push(this.filters[t]);return i},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var n,t,e,i,a=this.element.finalTransform.mat,o=this.element.canvasContext,c=this.masksProperties.length;for(o.beginPath(),n=0;n<c;n+=1)if(this.masksProperties[n].mode!=="n"){var u;this.masksProperties[n].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),i=this.viewData[n].v,t=a.applyToPointArray(i.v[0][0],i.v[0][1],0),o.moveTo(t[0],t[1]);var f=i._length;for(u=1;u<f;u+=1)e=a.applyToTriplePoints(i.o[u-1],i.i[u],i.v[u]),o.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);e=a.applyToTriplePoints(i.o[u-1],i.i[0],i.v[0]),o.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(n,t,e,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var a,o=4;t.ty==="rc"?o=5:t.ty==="el"?o=6:t.ty==="sr"&&(o=7),this.sh=ShapePropertyFactory.getShapeProp(n,t,o,n);var c,u=e.length;for(a=0;a<u;a+=1)e[a].closed||(c={transforms:i.addTransformSequence(e[a].transforms),trNodes:[]},this.styledShapes.push(c),e[a].elements.push(c))}function CVShapeElement(n,t,e){this.shapes=[],this.shapesData=n.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(n,t,e)}function CVTextElement(n,t,e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(n,t,e)}function CVImageElement(n,t,e){this.assetData=t.getAssetData(n.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(n,t,e)}function CVSolidElement(n,t,e){this.initElement(n,t,e)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var n;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,n=0;n<15;n+=1){var t=new CanvasContext;this.stack[n]=t}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(n,t,e){this.completeLayers=!1,this.layers=n.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(n,t,e),this.tm=n.tm?PropertyFactory.getProp(this,n.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(n,t){this.animationItem=n,this.renderConfig={clearCanvas:!t||t.clearCanvas===void 0||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(n,t,e){this.initElement(n,t,e)}function HShapeElement(n,t,e){this.shapes=[],this.shapesData=n.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(n,t,e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(n,t,e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(n,t,e)}function HCameraElement(n,t,e){this.initFrame(),this.initBaseData(n,t,e),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,n.pe,0,0,this),n.ks.p.s?(this.px=i(this,n.ks.p.x,1,0,this),this.py=i(this,n.ks.p.y,1,0,this),this.pz=i(this,n.ks.p.z,1,0,this)):this.p=i(this,n.ks.p,1,0,this),n.ks.a&&(this.a=i(this,n.ks.a,1,0,this)),n.ks.or.k.length&&n.ks.or.k[0].to){var a,o=n.ks.or.k.length;for(a=0;a<o;a+=1)n.ks.or.k[a].to=null,n.ks.or.k[a].ti=null}this.or=i(this,n.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,n.ks.rx,0,degToRads,this),this.ry=i(this,n.ks.ry,0,degToRads,this),this.rz=i(this,n.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(n,t,e){this.assetData=t.getAssetData(n.refId),this.initElement(n,t,e)}function HybridRendererBase(n,t){this.animationItem=n,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(n,t,e){this.layers=n.layers,this.supports3d=!n.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(n,t,e),this.tm=n.tm?PropertyFactory.getProp(this,n.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(n,t){this.animationItem=n,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&t.hideOnTransparent===!1),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||t.runExpressions===void 0||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var n=this.globalData.canvasContext,t=assetLoader.createCanvas(n.canvas.width,n.canvas.height);this.buffers.push(t);var e=assetLoader.createCanvas(n.canvas.width,n.canvas.height);this.buffers.push(e),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var n=this.globalData;if(n.blendMode!==this.data.bm){n.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);n.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(n){n.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var n=this.buffers[0].getContext("2d");this.clearCanvas(n),n.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var n=this.buffers[1],t=n.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var e=assetLoader.getLumaCanvas(this.canvasContext.canvas);e.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(e,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(n,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(n){if(!this.hidden&&!this.data.hd&&(this.data.td!==1||n)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(n,t){var e={data:n,type:n.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:n.hd===!0},i={};if(n.ty==="fl"||n.ty==="st"?(i.c=PropertyFactory.getProp(this,n.c,1,255,this),i.c.k||(e.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):n.ty!=="gf"&&n.ty!=="gs"||(i.s=PropertyFactory.getProp(this,n.s,1,null,this),i.e=PropertyFactory.getProp(this,n.e,1,null,this),i.h=PropertyFactory.getProp(this,n.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,n.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,n.g,this)),i.o=PropertyFactory.getProp(this,n.o,0,.01,this),n.ty==="st"||n.ty==="gs"){if(e.lc=lineCapEnum[n.lc||2],e.lj=lineJoinEnum[n.lj||2],n.lj==1&&(e.ml=n.ml),i.w=PropertyFactory.getProp(this,n.w,0,null,this),i.w.k||(e.wi=i.w.v),n.d){var a=new DashProperty(this,n.d,"canvas",this);i.d=a,i.d.k||(e.da=i.d.dashArray,e.do=i.d.dashoffset[0])}}else e.r=n.r===2?"evenodd":"nonzero";return this.stylesList.push(e),i.style=e,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(n){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,n.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,n,this)}}},CVShapeElement.prototype.createShapeElement=function(n){var t=new CVShapeData(this,n,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){var n;this._isFirstFrame=!0;var t=this.itemsData.length;for(n=0;n<t;n+=1)this.prevViewData[n]=this.itemsData[n];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,n=0;n<t;n+=1)this.dynamicProperties[n].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(n){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(n)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var n,t=this.stylesList.length;for(n=0;n<t;n+=1)this.stylesList[n].closed||this.stylesList[n].transforms.pop()},CVShapeElement.prototype.closeStyles=function(n){var t,e=n.length;for(t=0;t<e;t+=1)n[t].closed=!0},CVShapeElement.prototype.searchShapes=function(n,t,e,i,a){var o,c,u,f,p,m,y=n.length-1,b=[],x=[],E=[].concat(a);for(o=y;o>=0;o-=1){if((f=this.searchProcessedElement(n[o]))?t[o]=e[f-1]:n[o]._shouldRender=i,n[o].ty==="fl"||n[o].ty==="st"||n[o].ty==="gf"||n[o].ty==="gs")f?t[o].style.closed=!1:t[o]=this.createStyleElement(n[o],E),b.push(t[o].style);else if(n[o].ty==="gr"){if(f)for(u=t[o].it.length,c=0;c<u;c+=1)t[o].prevViewData[c]=t[o].it[c];else t[o]=this.createGroupElement(n[o]);this.searchShapes(n[o].it,t[o].it,t[o].prevViewData,i,E)}else n[o].ty==="tr"?(f||(m=this.createTransformElement(n[o]),t[o]=m),E.push(t[o]),this.addTransformToStyleList(t[o])):n[o].ty==="sh"||n[o].ty==="rc"||n[o].ty==="el"||n[o].ty==="sr"?f||(t[o]=this.createShapeElement(n[o])):n[o].ty==="tm"||n[o].ty==="rd"||n[o].ty==="pb"||n[o].ty==="zz"||n[o].ty==="op"?(f?(p=t[o]).closed=!1:((p=ShapeModifiers.getModifier(n[o].ty)).init(this,n[o]),t[o]=p,this.shapeModifiers.push(p)),x.push(p)):n[o].ty==="rp"&&(f?(p=t[o]).closed=!0:(p=ShapeModifiers.getModifier(n[o].ty),t[o]=p,p.init(this,n,o,t),this.shapeModifiers.push(p),i=!1),x.push(p));this.addProcessedElement(n[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(b),y=x.length,o=0;o<y;o+=1)x[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(n,t){(n._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=n.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var n,t,e,i,a,o,c,u,f,p=this.stylesList.length,m=this.globalData.renderer,y=this.globalData.canvasContext;for(n=0;n<p;n+=1)if(((u=(f=this.stylesList[n]).type)!=="st"&&u!=="gs"||f.wi!==0)&&f.data._shouldRender&&f.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(m.save(),o=f.elements,u==="st"||u==="gs"?(m.ctxStrokeStyle(u==="st"?f.co:f.grd),m.ctxLineWidth(f.wi),m.ctxLineCap(f.lc),m.ctxLineJoin(f.lj),m.ctxMiterLimit(f.ml||0)):m.ctxFillStyle(u==="fl"?f.co:f.grd),m.ctxOpacity(f.coOp),u!=="st"&&u!=="gs"&&y.beginPath(),m.ctxTransform(f.preTransforms.finalTransform.props),e=o.length,t=0;t<e;t+=1){for(u!=="st"&&u!=="gs"||(y.beginPath(),f.da&&(y.setLineDash(f.da),y.lineDashOffset=f.do)),a=(c=o[t].trNodes).length,i=0;i<a;i+=1)c[i].t==="m"?y.moveTo(c[i].p[0],c[i].p[1]):c[i].t==="c"?y.bezierCurveTo(c[i].pts[0],c[i].pts[1],c[i].pts[2],c[i].pts[3],c[i].pts[4],c[i].pts[5]):y.closePath();u!=="st"&&u!=="gs"||(m.ctxStroke(),f.da&&y.setLineDash(this.dashResetter))}u!=="st"&&u!=="gs"&&this.globalData.renderer.ctxFill(f.r),m.restore()}},CVShapeElement.prototype.renderShape=function(n,t,e,i){var a,o;for(o=n,a=t.length-1;a>=0;a-=1)t[a].ty==="tr"?(o=e[a].transform,this.renderShapeTransform(n,o)):t[a].ty==="sh"||t[a].ty==="el"||t[a].ty==="rc"||t[a].ty==="sr"?this.renderPath(t[a],e[a]):t[a].ty==="fl"?this.renderFill(t[a],e[a],o):t[a].ty==="st"?this.renderStroke(t[a],e[a],o):t[a].ty==="gf"||t[a].ty==="gs"?this.renderGradientFill(t[a],e[a],o):t[a].ty==="gr"?this.renderShape(o,t[a].it,e[a].it):t[a].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(n,t){if(this._isFirstFrame||t._mdf||n.transforms._mdf){var e,i,a,o=n.trNodes,c=t.paths,u=c._length;o.length=0;var f=n.transforms.finalTransform;for(a=0;a<u;a+=1){var p=c.shapes[a];if(p&&p.v){for(i=p._length,e=1;e<i;e+=1)e===1&&o.push({t:"m",p:f.applyToPointArray(p.v[0][0],p.v[0][1],0)}),o.push({t:"c",pts:f.applyToTriplePoints(p.o[e-1],p.i[e],p.v[e])});i===1&&o.push({t:"m",p:f.applyToPointArray(p.v[0][0],p.v[0][1],0)}),p.c&&i&&(o.push({t:"c",pts:f.applyToTriplePoints(p.o[e-1],p.i[0],p.v[0])}),o.push({t:"z"}))}}n.trNodes=o}},CVShapeElement.prototype.renderPath=function(n,t){if(n.hd!==!0&&n._shouldRender){var e,i=t.styledShapes.length;for(e=0;e<i;e+=1)this.renderStyledShape(t.styledShapes[e],t.sh)}},CVShapeElement.prototype.renderFill=function(n,t,e){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*e.opacity)},CVShapeElement.prototype.renderGradientFill=function(n,t,e){var i,a=t.style;if(!a.grd||t.g._mdf||t.s._mdf||t.e._mdf||n.t!==1&&(t.h._mdf||t.a._mdf)){var o,c=this.globalData.canvasContext,u=t.s.v,f=t.e.v;if(n.t===1)i=c.createLinearGradient(u[0],u[1],f[0],f[1]);else{var p=Math.sqrt(Math.pow(u[0]-f[0],2)+Math.pow(u[1]-f[1],2)),m=Math.atan2(f[1]-u[1],f[0]-u[0]),y=t.h.v;y>=1?y=.99:y<=-1&&(y=-.99);var b=p*y,x=Math.cos(m+t.a.v)*b+u[0],E=Math.sin(m+t.a.v)*b+u[1];i=c.createRadialGradient(x,E,0,u[0],u[1],p)}var A=n.g.p,S=t.g.c,T=1;for(o=0;o<A;o+=1)t.g._hasOpacity&&t.g._collapsable&&(T=t.g.o[2*o+1]),i.addColorStop(S[4*o]/100,"rgba("+S[4*o+1]+","+S[4*o+2]+","+S[4*o+3]+","+T+")");a.grd=i}a.coOp=t.o.v*e.opacity},CVShapeElement.prototype.renderStroke=function(n,t,e){var i=t.style,a=t.d;a&&(a._mdf||this._isFirstFrame)&&(i.da=a.dashArray,i.do=a.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||e._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*e.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n.l?n.l.length:0);var t=!1;n.fc?(t=!0,this.values.fill=this.buildColor(n.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var e=!1;n.sc&&(e=!0,this.values.stroke=this.buildColor(n.sc),this.values.sWidth=n.sw);var i,a,o,c,u,f,p,m,y,b,x,E,A=this.globalData.fontManager.getFontByName(n.f),S=n.l,T=this.mHelper;this.stroke=e,this.values.fValue=n.finalSize+"px "+this.globalData.fontManager.getFontByName(n.f).fFamily,a=n.finalText.length;var D=this.data.singleShape,R=.001*n.tr*n.finalSize,F=0,k=0,P=!0,L=0;for(i=0;i<a;i+=1){c=(o=this.globalData.fontManager.getCharData(n.finalText[i],A.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&o.data||{},T.reset(),D&&S[i].n&&(F=-R,k+=n.yOffset,k+=P?1:0,P=!1),y=(p=c.shapes?c.shapes[0].it:[]).length,T.scale(n.finalSize/100,n.finalSize/100),D&&this.applyTextPropertiesToMatrix(n,T,S[i].line,F,k),x=createSizedArray(y-1);var B=0;for(m=0;m<y;m+=1)if(p[m].ty==="sh"){for(f=p[m].ks.k.i.length,b=p[m].ks.k,E=[],u=1;u<f;u+=1)u===1&&E.push(T.applyToX(b.v[0][0],b.v[0][1],0),T.applyToY(b.v[0][0],b.v[0][1],0)),E.push(T.applyToX(b.o[u-1][0],b.o[u-1][1],0),T.applyToY(b.o[u-1][0],b.o[u-1][1],0),T.applyToX(b.i[u][0],b.i[u][1],0),T.applyToY(b.i[u][0],b.i[u][1],0),T.applyToX(b.v[u][0],b.v[u][1],0),T.applyToY(b.v[u][0],b.v[u][1],0));E.push(T.applyToX(b.o[u-1][0],b.o[u-1][1],0),T.applyToY(b.o[u-1][0],b.o[u-1][1],0),T.applyToX(b.i[0][0],b.i[0][1],0),T.applyToY(b.i[0][0],b.i[0][1],0),T.applyToX(b.v[0][0],b.v[0][1],0),T.applyToY(b.v[0][0],b.v[0][1],0)),x[B]=E,B+=1}D&&(F+=S[i].l,F+=R),this.textSpans[L]?this.textSpans[L].elem=x:this.textSpans[L]={elem:x},L+=1}},CVTextElement.prototype.renderInnerContent=function(){var n,t,e,i,a,o;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var c,u=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;t=f.length;var p,m,y=null,b=null,x=null,E=this.globalData.renderer;for(n=0;n<t;n+=1)if(!f[n].n){if((c=u[n])&&(E.save(),E.ctxTransform(c.p),E.ctxOpacity(c.o)),this.fill){for(c&&c.fc?y!==c.fc&&(E.ctxFillStyle(c.fc),y=c.fc):y!==this.values.fill&&(y=this.values.fill,E.ctxFillStyle(this.values.fill)),i=(p=this.textSpans[n].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<i;e+=1)for(o=(m=p[e]).length,this.globalData.canvasContext.moveTo(m[0],m[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(m[a],m[a+1],m[a+2],m[a+3],m[a+4],m[a+5]);this.globalData.canvasContext.closePath(),E.ctxFill()}if(this.stroke){for(c&&c.sw?x!==c.sw&&(x=c.sw,E.ctxLineWidth(c.sw)):x!==this.values.sWidth&&(x=this.values.sWidth,E.ctxLineWidth(this.values.sWidth)),c&&c.sc?b!==c.sc&&(b=c.sc,E.ctxStrokeStyle(c.sc)):b!==this.values.stroke&&(b=this.values.stroke,E.ctxStrokeStyle(this.values.stroke)),i=(p=this.textSpans[n].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<i;e+=1)for(o=(m=p[e]).length,this.globalData.canvasContext.moveTo(m[0],m[1]),a=2;a<o;a+=6)this.globalData.canvasContext.bezierCurveTo(m[a],m[a+1],m[a+2],m[a+3],m[a+4],m[a+5]);this.globalData.canvasContext.closePath(),E.ctxStroke()}c&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var n=createTag("canvas");n.width=this.assetData.w,n.height=this.assetData.h;var t,e,i=n.getContext("2d"),a=this.img.width,o=this.img.height,c=a/o,u=this.assetData.w/this.assetData.h,f=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;c>u&&f==="xMidYMid slice"||c<u&&f!=="xMidYMid slice"?t=(e=o)*u:e=(t=a)/u,i.drawImage(this.img,(a-t)/2,(o-e)/2,t,e,0,0,this.assetData.w,this.assetData.h),this.img=n}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(n){return new CVShapeElement(n,this.globalData,this)},CanvasRendererBase.prototype.createText=function(n){return new CVTextElement(n,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(n){return new CVImageElement(n,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(n){return new CVSolidElement(n,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(n){n[0]===1&&n[1]===0&&n[4]===0&&n[5]===1&&n[12]===0&&n[13]===0||this.canvasContext.transform(n[0],n[1],n[4],n[5],n[12],n[13])},CanvasRendererBase.prototype.ctxOpacity=function(n){this.canvasContext.globalAlpha*=n<0?0:n},CanvasRendererBase.prototype.ctxFillStyle=function(n){this.canvasContext.fillStyle=n},CanvasRendererBase.prototype.ctxStrokeStyle=function(n){this.canvasContext.strokeStyle=n},CanvasRendererBase.prototype.ctxLineWidth=function(n){this.canvasContext.lineWidth=n},CanvasRendererBase.prototype.ctxLineCap=function(n){this.canvasContext.lineCap=n},CanvasRendererBase.prototype.ctxLineJoin=function(n){this.canvasContext.lineJoin=n},CanvasRendererBase.prototype.ctxMiterLimit=function(n){this.canvasContext.miterLimit=n},CanvasRendererBase.prototype.ctxFill=function(n){this.canvasContext.fill(n)},CanvasRendererBase.prototype.ctxFillRect=function(n,t,e,i){this.canvasContext.fillRect(n,t,e,i)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(n){this.renderConfig.clearCanvas?(n&&(this.globalData.blendMode="source-over"),this.contextData.restore(n)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(n){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var e="0px 0px 0px";t.transformOrigin=e,t.mozTransformOrigin=e,t.webkitTransformOrigin=e,t["-webkit-transform"]=e,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=n,this.layers=n.layers,this.transformCanvas={w:n.w,h:n.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(n,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(n.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(n,t){var e,i,a,o;if(this.reset(),n?(e=n,i=t,this.canvasContext.canvas.width=e,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(e=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=e*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var c=this.renderConfig.preserveAspectRatio.split(" "),u=c[1]||"meet",f=c[0]||"xMidYMid",p=f.substr(0,4),m=f.substr(4);a=e/i,(o=this.transformCanvas.w/this.transformCanvas.h)>a&&u==="meet"||o<a&&u==="slice"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=p==="xMid"&&(o<a&&u==="meet"||o>a&&u==="slice")?(e-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:p==="xMax"&&(o<a&&u==="meet"||o>a&&u==="slice")?(e-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=m==="YMid"&&(o>a&&u==="meet"||o<a&&u==="slice")?(i-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:m==="YMax"&&(o>a&&u==="meet"||o<a&&u==="slice")?(i-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var n;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),n=(this.layers?this.layers.length:0)-1;n>=0;n-=1)this.elements[n]&&this.elements[n].destroy&&this.elements[n].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(n,t){if((this.renderedFrame!==n||this.renderConfig.clearCanvas!==!0||t)&&!this.destroyed&&n!==-1){var e;this.renderedFrame=n,this.globalData.frameNum=n-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=n;var i=this.layers.length;for(this.completeLayers||this.checkLayers(n),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(n-this.layers[e].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(n){var t=this.elements;if(!t[n]&&this.layers[n].ty!==99){var e=this.createItem(this.layers[n],this,this.globalData);t[n]=e,e.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var n=2*this._length,t=0;for(t=this._length;t<n;t+=1)this.stack[t]=new CanvasContext;this._length=n},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(n){this.cArrPos-=1;var t,e=this.stack[this.cArrPos],i=e.transform,a=this.cTr.props;for(t=0;t<16;t+=1)a[t]=i[t];if(n){this.nativeContext.restore();var o=this.stack[this.cArrPos+1];this.appliedFillStyle=o.fillStyle,this.appliedStrokeStyle=o.strokeStyle,this.appliedLineWidth=o.lineWidth,this.appliedLineCap=o.lineCap,this.appliedLineJoin=o.lineJoin,this.appliedMiterLimit=o.miterLimit}this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),(n||e.opacity!==-1&&this.currentOpacity!==e.opacity)&&(this.nativeContext.globalAlpha=e.opacity,this.currentOpacity=e.opacity),this.currentFillStyle=e.fillStyle,this.currentStrokeStyle=e.strokeStyle,this.currentLineWidth=e.lineWidth,this.currentLineCap=e.lineCap,this.currentLineJoin=e.lineJoin,this.currentMiterLimit=e.miterLimit},CVContextData.prototype.save=function(n){n&&this.nativeContext.save();var t=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var e,i=this.stack[this.cArrPos];for(e=0;e<16;e+=1)i.transform[e]=t[e];this.cArrPos+=1;var a=this.stack[this.cArrPos];a.opacity=i.opacity,a.fillStyle=i.fillStyle,a.strokeStyle=i.strokeStyle,a.lineWidth=i.lineWidth,a.lineCap=i.lineCap,a.lineJoin=i.lineJoin,a.miterLimit=i.miterLimit},CVContextData.prototype.setOpacity=function(n){this.stack[this.cArrPos].opacity=n},CVContextData.prototype.setContext=function(n){this.nativeContext=n},CVContextData.prototype.fillStyle=function(n){this.stack[this.cArrPos].fillStyle!==n&&(this.currentFillStyle=n,this.stack[this.cArrPos].fillStyle=n)},CVContextData.prototype.strokeStyle=function(n){this.stack[this.cArrPos].strokeStyle!==n&&(this.currentStrokeStyle=n,this.stack[this.cArrPos].strokeStyle=n)},CVContextData.prototype.lineWidth=function(n){this.stack[this.cArrPos].lineWidth!==n&&(this.currentLineWidth=n,this.stack[this.cArrPos].lineWidth=n)},CVContextData.prototype.lineCap=function(n){this.stack[this.cArrPos].lineCap!==n&&(this.currentLineCap=n,this.stack[this.cArrPos].lineCap=n)},CVContextData.prototype.lineJoin=function(n){this.stack[this.cArrPos].lineJoin!==n&&(this.currentLineJoin=n,this.stack[this.cArrPos].lineJoin=n)},CVContextData.prototype.miterLimit=function(n){this.stack[this.cArrPos].miterLimit!==n&&(this.currentMiterLimit=n,this.stack[this.cArrPos].miterLimit=n)},CVContextData.prototype.transform=function(n){this.transformMat.cloneFromProps(n);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var e=t.props;this.nativeContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])},CVContextData.prototype.opacity=function(n){var t=this.stack[this.cArrPos].opacity;t*=n<0?0:n,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==n&&(this.nativeContext.globalAlpha=n,this.currentOpacity=n),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(n){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(n)},CVContextData.prototype.fillRect=function(n,t,e,i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(n,t,e,i)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var n,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),n=this.layers.length-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame()},CVCompElement.prototype.destroy=function(){var n;for(n=this.layers.length-1;n>=0;n-=1)this.elements[n]&&this.elements[n].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(n){return new CVCompElement(n,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(n){return new CVCompElement(n,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var n=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();n.transform=t,n.webkitTransform=t}this.finalTransform._opMdf&&(n.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var n;this.data.hasMask?((n=createNS("rect")).setAttribute("width",this.data.sw),n.setAttribute("height",this.data.sh),n.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((n=createTag("div")).style.width=this.data.sw+"px",n.style.height=this.data.sh+"px",n.style.backgroundColor=this.data.sc),this.layerElement.appendChild(n)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var n;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),n=this.svgElement;else{n=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.appendChild(this.shapesContainer),this.layerElement.appendChild(n)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=n},HShapeElement.prototype.getTransformedPoint=function(n,t){var e,i=n.length;for(e=0;e<i;e+=1)t=n[e].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(n,t){var e,i,a,o,c,u=n.sh.v,f=n.transformers,p=u._length;if(!(p<=1)){for(e=0;e<p-1;e+=1)i=this.getTransformedPoint(f,u.v[e]),a=this.getTransformedPoint(f,u.o[e]),o=this.getTransformedPoint(f,u.i[e+1]),c=this.getTransformedPoint(f,u.v[e+1]),this.checkBounds(i,a,o,c,t);u.c&&(i=this.getTransformedPoint(f,u.v[e]),a=this.getTransformedPoint(f,u.o[e]),o=this.getTransformedPoint(f,u.i[0]),c=this.getTransformedPoint(f,u.v[0]),this.checkBounds(i,a,o,c,t))}},HShapeElement.prototype.checkBounds=function(n,t,e,i,a){this.getBoundsOfCurve(n,t,e,i);var o=this.shapeBoundingBox;a.x=bmMin(o.left,a.x),a.xMax=bmMax(o.right,a.xMax),a.y=bmMin(o.top,a.y),a.yMax=bmMax(o.bottom,a.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(n,t,e,i){for(var a,o,c,u,f,p,m,y=[[n[0],i[0]],[n[1],i[1]]],b=0;b<2;++b)o=6*n[b]-12*t[b]+6*e[b],a=-3*n[b]+9*t[b]-9*e[b]+3*i[b],c=3*t[b]-3*n[b],o|=0,c|=0,(a|=0)===0&&o===0||(a===0?(u=-c/o)>0&&u<1&&y[b].push(this.calculateF(u,n,t,e,i,b)):(f=o*o-4*c*a)>=0&&((p=(-o+bmSqrt(f))/(2*a))>0&&p<1&&y[b].push(this.calculateF(p,n,t,e,i,b)),(m=(-o-bmSqrt(f))/(2*a))>0&&m<1&&y[b].push(this.calculateF(m,n,t,e,i,b))));this.shapeBoundingBox.left=bmMin.apply(null,y[0]),this.shapeBoundingBox.top=bmMin.apply(null,y[1]),this.shapeBoundingBox.right=bmMax.apply(null,y[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,y[1])},HShapeElement.prototype.calculateF=function(n,t,e,i,a,o){return bmPow(1-n,3)*t[o]+3*bmPow(1-n,2)*n*e[o]+3*(1-n)*bmPow(n,2)*i[o]+bmPow(n,3)*a[o]},HShapeElement.prototype.calculateBoundingBox=function(n,t){var e,i=n.length;for(e=0;e<i;e+=1)n[e]&&n[e].sh?this.calculateShapeBoundingBox(n[e],t):n[e]&&n[e].it?this.calculateBoundingBox(n[e].it,t):n[e]&&n[e].style&&n[e].w&&this.expandStrokeBoundingBox(n[e].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(n,t){var e=0;if(n.keyframes){for(var i=0;i<n.keyframes.length;i+=1){var a=n.keyframes[i].s;a>e&&(e=a)}e*=n.mult}else e=n.v*n.mult;t.x-=e,t.xMax+=e,t.y-=e,t.yMax+=e},HShapeElement.prototype.currentBoxContains=function(n){return this.currentBBox.x<=n.x&&this.currentBBox.y<=n.y&&this.currentBBox.width+this.currentBBox.x>=n.x+n.width&&this.currentBBox.height+this.currentBBox.y>=n.y+n.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var n=this.tempBoundingBox,t=999999;if(n.x=t,n.xMax=-t,n.y=t,n.yMax=-t,this.calculateBoundingBox(this.itemsData,n),n.width=n.xMax<n.x?0:n.xMax-n.x,n.height=n.yMax<n.y?0:n.yMax-n.y,this.currentBoxContains(n))return;var e=!1;if(this.currentBBox.w!==n.width&&(this.currentBBox.w=n.width,this.shapeCont.setAttribute("width",n.width),e=!0),this.currentBBox.h!==n.height&&(this.currentBBox.h=n.height,this.shapeCont.setAttribute("height",n.height),e=!0),e||this.currentBBox.x!==n.x||this.currentBBox.y!==n.y){this.currentBBox.w=n.width,this.currentBBox.h=n.height,this.currentBBox.x=n.x,this.currentBBox.y=n.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,a="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=a,i.webkitTransform=a}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var n=createNS("g");this.maskedElement.appendChild(n),this.innerElem=n}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n.l?n.l.length:0);var t=this.innerElem.style,e=n.fc?this.buildColor(n.fc):"rgba(0,0,0,0)";t.fill=e,t.color=e,n.sc&&(t.stroke=this.buildColor(n.sc),t.strokeWidth=n.sw+"px");var i,a,o=this.globalData.fontManager.getFontByName(n.f);if(!this.globalData.fontManager.chars)if(t.fontSize=n.finalSize+"px",t.lineHeight=n.finalSize+"px",o.fClass)this.innerElem.className=o.fClass;else{t.fontFamily=o.fFamily;var c=n.fWeight,u=n.fStyle;t.fontStyle=u,t.fontWeight=c}var f,p,m,y=n.l;a=y.length;var b,x=this.mHelper,E="",A=0;for(i=0;i<a;i+=1){if(this.globalData.fontManager.chars?(this.textPaths[A]?f=this.textPaths[A]:((f=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),f.setAttribute("stroke-linejoin",lineJoinEnum[2]),f.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[A]?m=(p=this.textSpans[A]).children[0]:((p=createTag("div")).style.lineHeight=0,(m=createNS("svg")).appendChild(f),styleDiv(p)))):this.isMasked?f=this.textPaths[A]?this.textPaths[A]:createNS("text"):this.textSpans[A]?(p=this.textSpans[A],f=this.textPaths[A]):(styleDiv(p=createTag("span")),styleDiv(f=createTag("span")),p.appendChild(f)),this.globalData.fontManager.chars){var S,T=this.globalData.fontManager.getCharData(n.finalText[i],o.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily);if(S=T?T.data:null,x.reset(),S&&S.shapes&&S.shapes.length&&(b=S.shapes[0].it,x.scale(n.finalSize/100,n.finalSize/100),E=this.createPathShape(x,b),f.setAttribute("d",E)),this.isMasked)this.innerElem.appendChild(f);else{if(this.innerElem.appendChild(p),S&&S.shapes){document.body.appendChild(m);var D=m.getBBox();m.setAttribute("width",D.width+2),m.setAttribute("height",D.height+2),m.setAttribute("viewBox",D.x-1+" "+(D.y-1)+" "+(D.width+2)+" "+(D.height+2));var R=m.style,F="translate("+(D.x-1)+"px,"+(D.y-1)+"px)";R.transform=F,R.webkitTransform=F,y[i].yOffset=D.y-1}else m.setAttribute("width",1),m.setAttribute("height",1);p.appendChild(m)}}else if(f.textContent=y[i].val,f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(f);else{this.innerElem.appendChild(p);var k=f.style,P="translate3d(0,"+-n.finalSize/1.2+"px,0)";k.transform=P,k.webkitTransform=P}this.isMasked?this.textSpans[A]=f:this.textSpans[A]=p,this.textSpans[A].style.display="block",this.textPaths[A]=f,A+=1}for(;A<this.textSpans.length;)this.textSpans[A].style.display="none",A+=1},HTextElement.prototype.renderInnerContent=function(){var n;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),n=this.svgElement.style;var t="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";n.transform=t,n.webkitTransform=t}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var e,i,a,o,c,u=0,f=this.textAnimator.renderedLetters,p=this.textProperty.currentData.l;for(i=p.length,e=0;e<i;e+=1)p[e].n?u+=1:(o=this.textSpans[e],c=this.textPaths[e],a=f[u],u+=1,a._mdf.m&&(this.isMasked?o.setAttribute("transform",a.m):(o.style.webkitTransform=a.m,o.style.transform=a.m)),o.style.opacity=a.o,a.sw&&a._mdf.sw&&c.setAttribute("stroke-width",a.sw),a.sc&&a._mdf.sc&&c.setAttribute("stroke",a.sc),a.fc&&a._mdf.fc&&(c.setAttribute("fill",a.fc),c.style.color=a.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var m=this.innerElem.getBBox();if(this.currentBBox.w!==m.width&&(this.currentBBox.w=m.width,this.svgElement.setAttribute("width",m.width)),this.currentBBox.h!==m.height&&(this.currentBBox.h=m.height,this.svgElement.setAttribute("height",m.height)),this.currentBBox.w!==m.width+2||this.currentBBox.h!==m.height+2||this.currentBBox.x!==m.x-1||this.currentBBox.y!==m.y-1){this.currentBBox.w=m.width+2,this.currentBBox.h=m.height+2,this.currentBBox.x=m.x-1,this.currentBBox.y=m.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),n=this.svgElement.style;var y="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";n.transform=y,n.webkitTransform=y}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var n,t,e,i,a=this.comp.threeDElements.length;for(n=0;n<a;n+=1)if((t=this.comp.threeDElements[n]).type==="3d"){e=t.perspectiveElem.style,i=t.container.style;var o=this.pe.v+"px",c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";e.perspective=o,e.webkitPerspective=o,i.transformOrigin="0px 0px 0px",i.mozTransformOrigin="0px 0px 0px",i.webkitTransformOrigin="0px 0px 0px",e.transform=c,e.webkitTransform=c}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var n,t,e=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,n=0;n<t;n+=1)e=this.hierarchy[n].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(n=t=this.hierarchy.length-1;n>=0;n-=1){var i=this.hierarchy[n].finalTransform.mProp;this.mat.translate(-i.p.v[0],-i.p.v[1],i.p.v[2]),this.mat.rotateX(-i.or.v[0]).rotateY(-i.or.v[1]).rotateZ(i.or.v[2]),this.mat.rotateX(-i.rx.v).rotateY(-i.ry.v).rotateZ(i.rz.v),this.mat.scale(1/i.s.v[0],1/i.s.v[1],1/i.s.v[2]),this.mat.translate(i.a.v[0],i.a.v[1],i.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a;a=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var o=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),c=[a[0]/o,a[1]/o,a[2]/o],u=Math.sqrt(c[2]*c[2]+c[0]*c[0]),f=Math.atan2(c[1],u),p=Math.atan2(c[0],-c[2]);this.mat.rotateY(p).rotateX(-f)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var m=!this._prevMat.equals(this.mat);if((m||this.pe._mdf)&&this.comp.threeDElements){var y,b,x;for(t=this.comp.threeDElements.length,n=0;n<t;n+=1)if((y=this.comp.threeDElements[n]).type==="3d"){if(m){var E=this.mat.toCSS();(x=y.container.style).transform=E,x.webkitTransform=E}this.pe._mdf&&((b=y.perspectiveElem.style).perspective=this.pe.v+"px",b.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(n){this.prepareProperties(n,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var n=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=n,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(n,t){var e=n.getBaseElement();if(e){var i=this.layers[t];if(i.ddd&&this.supports3d)this.addTo3dContainer(e,t);else if(this.threeDElements)this.addTo3dContainer(e,t);else{for(var a,o,c=0;c<t;)this.elements[c]&&this.elements[c]!==!0&&this.elements[c].getBaseElement&&(o=this.elements[c],a=(this.layers[c].ddd?this.getThreeDContainerByPos(c):o.getBaseElement())||a),c+=1;a?i.ddd&&this.supports3d||this.layerElement.insertBefore(e,a):i.ddd&&this.supports3d||this.layerElement.appendChild(e)}}},HybridRendererBase.prototype.createShape=function(n){return this.supports3d?new HShapeElement(n,this.globalData,this):new SVGShapeElement(n,this.globalData,this)},HybridRendererBase.prototype.createText=function(n){return this.supports3d?new HTextElement(n,this.globalData,this):new SVGTextLottieElement(n,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(n){return this.camera=new HCameraElement(n,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(n){return this.supports3d?new HImageElement(n,this.globalData,this):new IImageElement(n,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(n){return this.supports3d?new HSolidElement(n,this.globalData,this):new ISolidElement(n,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(n){for(var t=0,e=this.threeDElements.length;t<e;){if(this.threeDElements[t].startPos<=n&&this.threeDElements[t].endPos>=n)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(n,t){var e,i,a=createTag("div");styleDiv(a);var o=createTag("div");if(styleDiv(o),t==="3d"){(e=a.style).width=this.globalData.compSize.w+"px",e.height=this.globalData.compSize.h+"px",e.webkitTransformOrigin="50% 50%",e.mozTransformOrigin="50% 50%",e.transformOrigin="50% 50%";var c="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(i=o.style).transform=c,i.webkitTransform=c}a.appendChild(o);var u={container:o,perspectiveElem:a,startPos:n,endPos:n,type:t};return this.threeDElements.push(u),u},HybridRendererBase.prototype.build3dContainers=function(){var n,t,e=this.layers.length,i="";for(n=0;n<e;n+=1)this.layers[n].ddd&&this.layers[n].ty!==3?(i!=="3d"&&(i="3d",t=this.createThreeDContainer(n,"3d")),t.endPos=Math.max(t.endPos,n)):(i!=="2d"&&(i="2d",t=this.createThreeDContainer(n,"2d")),t.endPos=Math.max(t.endPos,n));for(n=(e=this.threeDElements.length)-1;n>=0;n-=1)this.resizerElem.appendChild(this.threeDElements[n].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(n,t){for(var e=0,i=this.threeDElements.length;e<i;){if(t<=this.threeDElements[e].endPos){for(var a,o=this.threeDElements[e].startPos;o<t;)this.elements[o]&&this.elements[o].getBaseElement&&(a=this.elements[o].getBaseElement()),o+=1;a?this.threeDElements[e].container.insertBefore(n,a):this.threeDElements[e].container.appendChild(n);break}e+=1}},HybridRendererBase.prototype.configAnimation=function(n){var t=createTag("div"),e=this.animationItem.wrapper,i=t.style;i.width=n.w+"px",i.height=n.h+"px",this.resizerElem=t,styleDiv(t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),e.appendChild(t),i.overflow="hidden";var a=createNS("svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var o=createNS("defs");a.appendChild(o),this.data=n,this.setupGlobalData(n,a),this.globalData.defs=o,this.layers=n.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var n;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var t=this.layers?this.layers.length:0;for(n=0;n<t;n+=1)this.elements[n]&&this.elements[n].destroy&&this.elements[n].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var n,t,e,i,a=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,c=a/o;this.globalData.compSize.w/this.globalData.compSize.h>c?(n=a/this.globalData.compSize.w,t=a/this.globalData.compSize.w,e=0,i=(o-this.globalData.compSize.h*(a/this.globalData.compSize.w))/2):(n=o/this.globalData.compSize.h,t=o/this.globalData.compSize.h,e=(a-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,i=0);var u=this.resizerElem.style;u.webkitTransform="matrix3d("+n+",0,0,0,0,"+t+",0,0,0,0,1,0,"+e+","+i+",0,1)",u.transform=u.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var n,t=this.globalData.compSize.w,e=this.globalData.compSize.h,i=this.threeDElements.length;for(n=0;n<i;n+=1){var a=this.threeDElements[n].perspectiveElem.style;a.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",a.perspective=a.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(n){var t,e=n.length,i=createTag("div");for(t=0;t<e;t+=1)if(n[t].xt){var a=this.createComp(n[t],i,this.globalData.comp,null);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(n,t){for(var e,i=0;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(e=this.elements[i].getBaseElement()),i+=1;e?this.layerElement.insertBefore(n,e):this.layerElement.appendChild(n)},HCompElement.prototype.createComp=function(n){return this.supports3d?new HCompElement(n,this.globalData,this):new SVGCompElement(n,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(n){return this.supports3d?new HCompElement(n,this.globalData,this):new SVGCompElement(n,this.globalData,this)};var CompExpressionInterface=function(n){function t(e){for(var i=0,a=n.layers.length;i<a;){if(n.layers[i].nm===e||n.layers[i].ind===e)return n.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(t,"_name",{value:n.data.nm}),t.layer=t,t.pixelAspect=1,t.height=n.data.h||n.globalData.compSize.h,t.width=n.data.w||n.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/n.globalData.frameRate,t.displayStartTime=0,t.numLayers=n.layers.length,t};function _typeof$2(n){return(_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function seedRandom(n,t){var e=this,i=t.pow(256,6),a=t.pow(2,52),o=2*a;function c(m){var y,b=m.length,x=this,E=0,A=x.i=x.j=0,S=x.S=[];for(b||(m=[b++]);E<256;)S[E]=E++;for(E=0;E<256;E++)S[E]=S[A=255&A+m[E%b]+(y=S[E])],S[A]=y;x.g=function(T){for(var D,R=0,F=x.i,k=x.j,P=x.S;T--;)D=P[F=255&F+1],R=256*R+P[255&(P[F]=P[k=255&k+D])+(P[k]=D)];return x.i=F,x.j=k,R}}function u(m,y){return y.i=m.i,y.j=m.j,y.S=m.S.slice(),y}function f(m,y){for(var b,x=m+"",E=0;E<x.length;)y[255&E]=255&(b^=19*y[255&E])+x.charCodeAt(E++);return p(y)}function p(m){return String.fromCharCode.apply(0,m)}t.seedrandom=function(m,y,b){var x=[],E=f((function T(D,R){var F,k=[],P=_typeof$2(D);if(R&&P=="object")for(F in D)try{k.push(T(D[F],R-1))}catch{}return k.length?k:P=="string"?D:D+"\0"})((y=y===!0?{entropy:!0}:y||{}).entropy?[m,p(n)]:m===null?(function(){try{var T=new Uint8Array(256);return(e.crypto||e.msCrypto).getRandomValues(T),p(T)}catch{var D=e.navigator,R=D&&D.plugins;return[+new Date,e,R,e.screen,p(n)]}})():m,3),x),A=new c(x),S=function(){for(var T=A.g(6),D=i,R=0;T<a;)T=256*(T+R),D*=256,R=A.g(1);for(;T>=o;)T/=2,D/=2,R>>>=1;return(T+R)/D};return S.int32=function(){return 0|A.g(4)},S.quick=function(){return A.g(4)/4294967296},S.double=S,f(p(A.S),n),(y.pass||b||function(T,D,R,F){return F&&(F.S&&u(F,A),T.state=function(){return u(A,{})}),R?(t.random=T,D):T})(S,E,"global"in y?y.global:this==t,y.state)},f(t.random(),n)}function initialize$2(n){seedRandom([],n)}var propTypes={SHAPE:"shape"};function _typeof$1(n){return(_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var ExpressionManager=(function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(n){return n.constructor===Array||n.constructor===Float32Array}function isNumerable(n,t){return n==="number"||t instanceof Number||n==="boolean"||n==="string"}function $bm_neg(n){var t=_typeof$1(n);if(t==="number"||n instanceof Number||t==="boolean")return-n;if($bm_isInstanceOfArray(n)){var e,i=n.length,a=[];for(e=0;e<i;e+=1)a[e]=-n[e];return a}return n.propType?n.v:-n}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(n,t){var e=_typeof$1(n),i=_typeof$1(t);if(isNumerable(e,n)&&isNumerable(i,t)||e==="string"||i==="string")return n+t;if($bm_isInstanceOfArray(n)&&isNumerable(i,t))return(n=n.slice(0))[0]+=t,n;if(isNumerable(e,n)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=n+t[0],t;if($bm_isInstanceOfArray(n)&&$bm_isInstanceOfArray(t)){for(var a=0,o=n.length,c=t.length,u=[];a<o||a<c;)(typeof n[a]=="number"||n[a]instanceof Number)&&(typeof t[a]=="number"||t[a]instanceof Number)?u[a]=n[a]+t[a]:u[a]=t[a]===void 0?n[a]:n[a]||t[a],a+=1;return u}return 0}var add=sum;function sub(n,t){var e=_typeof$1(n),i=_typeof$1(t);if(isNumerable(e,n)&&isNumerable(i,t))return e==="string"&&(n=parseInt(n,10)),i==="string"&&(t=parseInt(t,10)),n-t;if($bm_isInstanceOfArray(n)&&isNumerable(i,t))return(n=n.slice(0))[0]-=t,n;if(isNumerable(e,n)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=n-t[0],t;if($bm_isInstanceOfArray(n)&&$bm_isInstanceOfArray(t)){for(var a=0,o=n.length,c=t.length,u=[];a<o||a<c;)(typeof n[a]=="number"||n[a]instanceof Number)&&(typeof t[a]=="number"||t[a]instanceof Number)?u[a]=n[a]-t[a]:u[a]=t[a]===void 0?n[a]:n[a]||t[a],a+=1;return u}return 0}function mul(n,t){var e,i,a,o=_typeof$1(n),c=_typeof$1(t);if(isNumerable(o,n)&&isNumerable(c,t))return n*t;if($bm_isInstanceOfArray(n)&&isNumerable(c,t)){for(a=n.length,e=createTypedArray("float32",a),i=0;i<a;i+=1)e[i]=n[i]*t;return e}if(isNumerable(o,n)&&$bm_isInstanceOfArray(t)){for(a=t.length,e=createTypedArray("float32",a),i=0;i<a;i+=1)e[i]=n*t[i];return e}return 0}function div(n,t){var e,i,a,o=_typeof$1(n),c=_typeof$1(t);if(isNumerable(o,n)&&isNumerable(c,t))return n/t;if($bm_isInstanceOfArray(n)&&isNumerable(c,t)){for(a=n.length,e=createTypedArray("float32",a),i=0;i<a;i+=1)e[i]=n[i]/t;return e}if(isNumerable(o,n)&&$bm_isInstanceOfArray(t)){for(a=t.length,e=createTypedArray("float32",a),i=0;i<a;i+=1)e[i]=n/t[i];return e}return 0}function mod(n,t){return typeof n=="string"&&(n=parseInt(n,10)),typeof t=="string"&&(t=parseInt(t,10)),n%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(n,t,e){if(t>e){var i=e;e=t,t=i}return Math.min(Math.max(n,t),e)}function radiansToDegrees(n){return n/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(n){return n*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(n,t){if(typeof n=="number"||n instanceof Number)return t=t||0,Math.abs(n-t);var e;t||(t=helperLengthArray);var i=Math.min(n.length,t.length),a=0;for(e=0;e<i;e+=1)a+=Math.pow(t[e]-n[e],2);return Math.sqrt(a)}function normalize(n){return div(n,length(n))}function rgbToHsl(n){var t,e,i=n[0],a=n[1],o=n[2],c=Math.max(i,a,o),u=Math.min(i,a,o),f=(c+u)/2;if(c===u)t=0,e=0;else{var p=c-u;switch(e=f>.5?p/(2-c-u):p/(c+u),c){case i:t=(a-o)/p+(a<o?6:0);break;case a:t=(o-i)/p+2;break;case o:t=(i-a)/p+4}t/=6}return[t,e,f,n[3]]}function hue2rgb(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function hslToRgb(n){var t,e,i,a=n[0],o=n[1],c=n[2];if(o===0)t=c,i=c,e=c;else{var u=c<.5?c*(1+o):c+o-c*o,f=2*c-u;t=hue2rgb(f,u,a+1/3),e=hue2rgb(f,u,a),i=hue2rgb(f,u,a-1/3)}return[t,e,i,n[3]]}function linear(n,t,e,i,a){if(i!==void 0&&a!==void 0||(i=t,a=e,t=0,e=1),e<t){var o=e;e=t,t=o}if(n<=t)return i;if(n>=e)return a;var c,u=e===t?0:(n-t)/(e-t);if(!i.length)return i+(a-i)*u;var f=i.length,p=createTypedArray("float32",f);for(c=0;c<f;c+=1)p[c]=i[c]+(a[c]-i[c])*u;return p}function random(n,t){if(t===void 0&&(n===void 0?(n=0,t=1):(t=n,n=void 0)),t.length){var e,i=t.length;n||(n=createTypedArray("float32",i));var a=createTypedArray("float32",i),o=BMMath.random();for(e=0;e<i;e+=1)a[e]=n[e]+o*(t[e]-n[e]);return a}return n===void 0&&(n=0),n+BMMath.random()*(t-n)}function createPath(n,t,e,i){var a,o=n.length,c=shapePool.newElement();c.setPathData(!!i,o);var u,f,p=[0,0];for(a=0;a<o;a+=1)u=t&&t[a]?t[a]:p,f=e&&e[a]?e[a]:p,c.setTripleAt(n[a][0],n[a][1],f[0]+n[a][0],f[1]+n[a][1],u[0]+n[a][0],u[1]+n[a][1],a,!0);return c}function initiateExpression(elem,data,property){function noOp(n){return n}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function(n,t){var e,i,a=this.pv.length?this.pv.length:1,o=createTypedArray("float32",a),c=Math.floor(5*time);for(e=0,i=0;e<c;){for(i=0;i<a;i+=1)o[i]+=-t+2*t*BMMath.random();e+=1}var u=5*time,f=u-Math.floor(u),p=createTypedArray("float32",a);if(a>1){for(i=0;i<a;i+=1)p[i]=this.pv[i]+o[i]+(-t+2*t*BMMath.random())*f;return p}return this.pv+o[0]+(-t+2*t*BMMath.random())*f}).bind(this);function loopInDuration(n,t){return loopIn(n,t,!0)}function loopOutDuration(n,t){return loopOut(n,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(n,t){var e=[t[0]-n[0],t[1]-n[1],t[2]-n[2]],i=Math.atan2(e[0],Math.sqrt(e[1]*e[1]+e[2]*e[2]))/degToRads;return[-Math.atan2(e[1],e[2])/degToRads,i,0]}function easeOut(n,t,e,i,a){return applyEase(easeOutBez,n,t,e,i,a)}function easeIn(n,t,e,i,a){return applyEase(easeInBez,n,t,e,i,a)}function ease(n,t,e,i,a){return applyEase(easeInOutBez,n,t,e,i,a)}function applyEase(n,t,e,i,a,o){a===void 0?(a=e,o=i):t=(t-e)/(i-e),t>1?t=1:t<0&&(t=0);var c=n(t);if($bm_isInstanceOfArray(a)){var u,f=a.length,p=createTypedArray("float32",f);for(u=0;u<f;u+=1)p[u]=(o[u]-a[u])*c+a[u];return p}return(o-a)*c+a}function nearestKey(n){var t,e,i,a=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(e=-1,(n*=elem.comp.globalData.frameRate)<data.k[0].t)e=1,i=data.k[0].t;else{for(t=0;t<a-1;t+=1){if(n===data.k[t].t){e=t+1,i=data.k[t].t;break}if(n>data.k[t].t&&n<data.k[t+1].t){n-data.k[t].t>data.k[t+1].t-n?(e=t+2,i=data.k[t+1].t):(e=t+1,i=data.k[t].t);break}}e===-1&&(e=t+1,i=data.k[t].t)}else e=0,i=0;var o={};return o.index=e,o.time=i/elem.comp.globalData.frameRate,o}function key(n){var t,e,i;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+n);n-=1,t={time:data.k[n].t/elem.comp.globalData.frameRate,value:[]};var a=Object.prototype.hasOwnProperty.call(data.k[n],"s")?data.k[n].s:data.k[n-1].e;for(i=a.length,e=0;e<i;e+=1)t[e]=a[e],t.value[e]=a[e];return t}function framesToTime(n,t){return t||(t=elem.comp.globalData.frameRate),n/t}function timeToFrames(n,t){return n||n===0||(n=time),t||(t=elem.comp.globalData.frameRate),n*t}function seedRandom(n){BMMath.seedrandom(randSeed+n)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(n,t){return typeof value=="string"?t===void 0?value.substring(n):value.substring(n,t):""}function substr(n,t){return typeof value=="string"?t===void 0?value.substr(n):value.substr(n,t):""}function posterizeTime(n){time=n===0?0:Math.floor(time*n)/n,value=valueAtTime(time)}var index=elem.data.ind;!elem.hierarchy||elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(n){return value=n,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob})(),Expressions=(function(){var n={};return n.initExpressions=function(t){var e=0,i=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){(e-=1)===0&&(function(){var a,o=i.length;for(a=0;a<o;a+=1)i[a].release();i.length=0})()},t.renderer.globalData.registerExpressionProperty=function(a){i.indexOf(a)===-1&&i.push(a)}},n.resetFrame=ExpressionManager.resetFrame,n})(),MaskManagerInterface=(function(){function n(t,e){this._mask=t,this._data=e}return Object.defineProperty(n.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(n.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var e,i=createSizedArray(t.viewData.length),a=t.viewData.length;for(e=0;e<a;e+=1)i[e]=new n(t.viewData[e],t.masksProperties[e]);return function(o){for(e=0;e<a;){if(t.masksProperties[e].nm===o)return i[e];e+=1}return null}}})(),ExpressionPropertyInterface=(function(){var n={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function e(a,o,c){Object.defineProperty(a,"velocity",{get:function(){return o.getVelocityAtTime(o.comp.currentFrame)}}),a.numKeys=o.keyframes?o.keyframes.length:0,a.key=function(u){if(!a.numKeys)return 0;var f="";f="s"in o.keyframes[u-1]?o.keyframes[u-1].s:"e"in o.keyframes[u-2]?o.keyframes[u-2].e:o.keyframes[u-2].s;var p=c==="unidimensional"?new Number(f):Object.assign({},f);return p.time=o.keyframes[u-1].t/o.elem.comp.globalData.frameRate,p.value=c==="unidimensional"?f[0]:f,p},a.valueAtTime=o.getValueAtTime,a.speedAtTime=o.getSpeedAtTime,a.velocityAtTime=o.getVelocityAtTime,a.propertyGroup=o.propertyGroup}function i(){return n}return function(a){return a?a.propType==="unidimensional"?(function(o){o&&"pv"in o||(o=n);var c=1/o.mult,u=o.pv*c,f=new Number(u);return f.value=u,e(f,o,"unidimensional"),function(){return o.k&&o.getValue(),u=o.v*c,f.value!==u&&((f=new Number(u)).value=u,e(f,o,"unidimensional")),f}})(a):(function(o){o&&"pv"in o||(o=t);var c=1/o.mult,u=o.data&&o.data.l||o.pv.length,f=createTypedArray("float32",u),p=createTypedArray("float32",u);return f.value=p,e(f,o,"multidimensional"),function(){o.k&&o.getValue();for(var m=0;m<u;m+=1)p[m]=o.v[m]*c,f[m]=p[m];return f}})(a):i}})(),TransformExpressionInterface=function(n){function t(c){switch(c){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity;default:return null}}var e,i,a,o;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(n.r||n.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(n.rz||n.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(n.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(n.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(n.s)}),n.p?o=ExpressionPropertyInterface(n.p):(e=ExpressionPropertyInterface(n.px),i=ExpressionPropertyInterface(n.py),n.pz&&(a=ExpressionPropertyInterface(n.pz))),Object.defineProperty(t,"position",{get:function(){return n.p?o():[e(),i(),a?a():0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(n.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(n.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(n.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(n.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(n.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(n.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(n.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(n.or)}),t},LayerExpressionInterface=(function(){function n(p){var m=new Matrix;return p!==void 0?this._elem.finalTransform.mProp.getValueAtTime(p).clone(m):this._elem.finalTransform.mProp.applyToMatrix(m),m}function t(p,m){var y=this.getMatrix(m);return y.props[12]=0,y.props[13]=0,y.props[14]=0,this.applyPoint(y,p)}function e(p,m){var y=this.getMatrix(m);return this.applyPoint(y,p)}function i(p,m){var y=this.getMatrix(m);return y.props[12]=0,y.props[13]=0,y.props[14]=0,this.invertPoint(y,p)}function a(p,m){var y=this.getMatrix(m);return this.invertPoint(y,p)}function o(p,m){if(this._elem.hierarchy&&this._elem.hierarchy.length){var y,b=this._elem.hierarchy.length;for(y=0;y<b;y+=1)this._elem.hierarchy[y].finalTransform.mProp.applyToMatrix(p)}return p.applyToPointArray(m[0],m[1],m[2]||0)}function c(p,m){if(this._elem.hierarchy&&this._elem.hierarchy.length){var y,b=this._elem.hierarchy.length;for(y=0;y<b;y+=1)this._elem.hierarchy[y].finalTransform.mProp.applyToMatrix(p)}return p.inversePoint(m)}function u(p){var m=new Matrix;if(m.reset(),this._elem.finalTransform.mProp.applyToMatrix(m),this._elem.hierarchy&&this._elem.hierarchy.length){var y,b=this._elem.hierarchy.length;for(y=0;y<b;y+=1)this._elem.hierarchy[y].finalTransform.mProp.applyToMatrix(m);return m.inversePoint(p)}return m.inversePoint(p)}function f(){return[1,1,1,1]}return function(p){var m;function y(x){switch(x){case"ADBE Root Vectors Group":case"Contents":case 2:return y.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return m;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return y.effect;case"ADBE Text Properties":return y.textInterface;default:return null}}y.getMatrix=n,y.invertPoint=c,y.applyPoint=o,y.toWorld=e,y.toWorldVec=t,y.fromWorld=a,y.fromWorldVec=i,y.toComp=e,y.fromComp=u,y.sampleImage=f,y.sourceRectAtTime=p.sourceRectAtTime.bind(p),y._elem=p;var b=getDescriptor(m=TransformExpressionInterface(p.finalTransform.mProp),"anchorPoint");return Object.defineProperties(y,{hasParent:{get:function(){return p.hierarchy.length}},parent:{get:function(){return p.hierarchy[0].layerInterface}},rotation:getDescriptor(m,"rotation"),scale:getDescriptor(m,"scale"),position:getDescriptor(m,"position"),opacity:getDescriptor(m,"opacity"),anchorPoint:b,anchor_point:b,transform:{get:function(){return m}},active:{get:function(){return p.isInRange}}}),y.startTime=p.data.st,y.index=p.data.ind,y.source=p.data.refId,y.height=p.data.ty===0?p.data.h:100,y.width=p.data.ty===0?p.data.w:100,y.inPoint=p.data.ip/p.comp.globalData.frameRate,y.outPoint=p.data.op/p.comp.globalData.frameRate,y._name=p.data.nm,y.registerMaskInterface=function(x){y.mask=new MaskManagerInterface(x,p)},y.registerEffectsInterface=function(x){y.effect=x},y}})(),propertyGroupFactory=function(n,t){return function(e){return(e=e===void 0?1:e)<=0?n:t(e-1)}},PropertyInterface=function(n,t){var e={_name:n};return function(i){return(i=i===void 0?1:i)<=0?e:t(i-1)}},EffectsExpressionInterface=(function(){function n(e,i,a,o){function c(y){for(var b=e.ef,x=0,E=b.length;x<E;){if(y===b[x].nm||y===b[x].mn||y===b[x].ix)return b[x].ty===5?p[x]:p[x]();x+=1}throw new Error}var u,f=propertyGroupFactory(c,a),p=[],m=e.ef.length;for(u=0;u<m;u+=1)e.ef[u].ty===5?p.push(n(e.ef[u],i.effectElements[u],i.effectElements[u].propertyGroup,o)):p.push(t(i.effectElements[u],e.ef[u].ty,o,f));return e.mn==="ADBE Color Control"&&Object.defineProperty(c,"color",{get:function(){return p[0]()}}),Object.defineProperties(c,{numProperties:{get:function(){return e.np}},_name:{value:e.nm},propertyGroup:{value:f}}),c.enabled=e.en!==0,c.active=c.enabled,c}function t(e,i,a,o){var c=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",o)),function(){return i===10?a.comp.compInterface(e.p.v):c()}}return{createEffectsInterface:function(e,i){if(e.effectsManager){var a,o=[],c=e.data.ef,u=e.effectsManager.effectElements.length;for(a=0;a<u;a+=1)o.push(n(c[a],e.effectsManager.effectElements[a],i,e));var f=e.data.ef||[],p=function(m){for(a=0,u=f.length;a<u;){if(m===f[a].nm||m===f[a].mn||m===f[a].ix)return o[a];a+=1}return null};return Object.defineProperty(p,"numProperties",{get:function(){return f.length}}),p}return null}}})(),ShapePathInterface=function(n,t,e){var i=t.sh;function a(c){return c==="Shape"||c==="shape"||c==="Path"||c==="path"||c==="ADBE Vector Shape"||c===2?a.path:null}var o=propertyGroupFactory(a,e);return i.setGroupProperty(PropertyInterface("Path",o)),Object.defineProperties(a,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:n.nm},ix:{value:n.ix},propertyIndex:{value:n.ix},mn:{value:n.mn},propertyGroup:{value:e}}),a},ShapeExpressionInterface=(function(){function n(x,E,A){var S,T=[],D=x?x.length:0;for(S=0;S<D;S+=1)x[S].ty==="gr"?T.push(t(x[S],E[S],A)):x[S].ty==="fl"?T.push(e(x[S],E[S],A)):x[S].ty==="st"?T.push(o(x[S],E[S],A)):x[S].ty==="tm"?T.push(c(x[S],E[S],A)):x[S].ty==="tr"||(x[S].ty==="el"?T.push(f(x[S],E[S],A)):x[S].ty==="sr"?T.push(p(x[S],E[S],A)):x[S].ty==="sh"?T.push(ShapePathInterface(x[S],E[S],A)):x[S].ty==="rc"?T.push(m(x[S],E[S],A)):x[S].ty==="rd"?T.push(y(x[S],E[S],A)):x[S].ty==="rp"?T.push(b(x[S],E[S],A)):x[S].ty==="gf"?T.push(i(x[S],E[S],A)):T.push(a(x[S],E[S])));return T}function t(x,E,A){var S=function(R){switch(R){case"ADBE Vectors Group":case"Contents":case 2:return S.content;default:return S.transform}};S.propertyGroup=propertyGroupFactory(S,A);var T=(function(R,F,k){var P,L=function(V){for(var z=0,j=P.length;z<j;){if(P[z]._name===V||P[z].mn===V||P[z].propertyIndex===V||P[z].ix===V||P[z].ind===V)return P[z];z+=1}return typeof V=="number"?P[V-1]:null};L.propertyGroup=propertyGroupFactory(L,k),P=n(R.it,F.it,L.propertyGroup),L.numProperties=P.length;var B=u(R.it[R.it.length-1],F.it[F.it.length-1],L.propertyGroup);return L.transform=B,L.propertyIndex=R.cix,L._name=R.nm,L})(x,E,S.propertyGroup),D=u(x.it[x.it.length-1],E.it[E.it.length-1],S.propertyGroup);return S.content=T,S.transform=D,Object.defineProperty(S,"_name",{get:function(){return x.nm}}),S.numProperties=x.np,S.propertyIndex=x.ix,S.nm=x.nm,S.mn=x.mn,S}function e(x,E,A){function S(T){return T==="Color"||T==="color"?S.color:T==="Opacity"||T==="opacity"?S.opacity:null}return Object.defineProperties(S,{color:{get:ExpressionPropertyInterface(E.c)},opacity:{get:ExpressionPropertyInterface(E.o)},_name:{value:x.nm},mn:{value:x.mn}}),E.c.setGroupProperty(PropertyInterface("Color",A)),E.o.setGroupProperty(PropertyInterface("Opacity",A)),S}function i(x,E,A){function S(T){return T==="Start Point"||T==="start point"?S.startPoint:T==="End Point"||T==="end point"?S.endPoint:T==="Opacity"||T==="opacity"?S.opacity:null}return Object.defineProperties(S,{startPoint:{get:ExpressionPropertyInterface(E.s)},endPoint:{get:ExpressionPropertyInterface(E.e)},opacity:{get:ExpressionPropertyInterface(E.o)},type:{get:function(){return"a"}},_name:{value:x.nm},mn:{value:x.mn}}),E.s.setGroupProperty(PropertyInterface("Start Point",A)),E.e.setGroupProperty(PropertyInterface("End Point",A)),E.o.setGroupProperty(PropertyInterface("Opacity",A)),S}function a(){return function(){return null}}function o(x,E,A){var S,T=propertyGroupFactory(P,A),D=propertyGroupFactory(k,T);function R(L){Object.defineProperty(k,x.d[L].nm,{get:ExpressionPropertyInterface(E.d.dataProps[L].p)})}var F=x.d?x.d.length:0,k={};for(S=0;S<F;S+=1)R(S),E.d.dataProps[S].p.setGroupProperty(D);function P(L){return L==="Color"||L==="color"?P.color:L==="Opacity"||L==="opacity"?P.opacity:L==="Stroke Width"||L==="stroke width"?P.strokeWidth:null}return Object.defineProperties(P,{color:{get:ExpressionPropertyInterface(E.c)},opacity:{get:ExpressionPropertyInterface(E.o)},strokeWidth:{get:ExpressionPropertyInterface(E.w)},dash:{get:function(){return k}},_name:{value:x.nm},mn:{value:x.mn}}),E.c.setGroupProperty(PropertyInterface("Color",T)),E.o.setGroupProperty(PropertyInterface("Opacity",T)),E.w.setGroupProperty(PropertyInterface("Stroke Width",T)),P}function c(x,E,A){function S(D){return D===x.e.ix||D==="End"||D==="end"?S.end:D===x.s.ix?S.start:D===x.o.ix?S.offset:null}var T=propertyGroupFactory(S,A);return S.propertyIndex=x.ix,E.s.setGroupProperty(PropertyInterface("Start",T)),E.e.setGroupProperty(PropertyInterface("End",T)),E.o.setGroupProperty(PropertyInterface("Offset",T)),S.propertyIndex=x.ix,S.propertyGroup=A,Object.defineProperties(S,{start:{get:ExpressionPropertyInterface(E.s)},end:{get:ExpressionPropertyInterface(E.e)},offset:{get:ExpressionPropertyInterface(E.o)},_name:{value:x.nm}}),S.mn=x.mn,S}function u(x,E,A){function S(D){return x.a.ix===D||D==="Anchor Point"?S.anchorPoint:x.o.ix===D||D==="Opacity"?S.opacity:x.p.ix===D||D==="Position"?S.position:x.r.ix===D||D==="Rotation"||D==="ADBE Vector Rotation"?S.rotation:x.s.ix===D||D==="Scale"?S.scale:x.sk&&x.sk.ix===D||D==="Skew"?S.skew:x.sa&&x.sa.ix===D||D==="Skew Axis"?S.skewAxis:null}var T=propertyGroupFactory(S,A);return E.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",T)),E.transform.mProps.p.setGroupProperty(PropertyInterface("Position",T)),E.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",T)),E.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",T)),E.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",T)),E.transform.mProps.sk&&(E.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",T)),E.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",T))),E.transform.op.setGroupProperty(PropertyInterface("Opacity",T)),Object.defineProperties(S,{opacity:{get:ExpressionPropertyInterface(E.transform.mProps.o)},position:{get:ExpressionPropertyInterface(E.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(E.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(E.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(E.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(E.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(E.transform.mProps.sa)},_name:{value:x.nm}}),S.ty="tr",S.mn=x.mn,S.propertyGroup=A,S}function f(x,E,A){function S(R){return x.p.ix===R?S.position:x.s.ix===R?S.size:null}var T=propertyGroupFactory(S,A);S.propertyIndex=x.ix;var D=E.sh.ty==="tm"?E.sh.prop:E.sh;return D.s.setGroupProperty(PropertyInterface("Size",T)),D.p.setGroupProperty(PropertyInterface("Position",T)),Object.defineProperties(S,{size:{get:ExpressionPropertyInterface(D.s)},position:{get:ExpressionPropertyInterface(D.p)},_name:{value:x.nm}}),S.mn=x.mn,S}function p(x,E,A){function S(R){return x.p.ix===R?S.position:x.r.ix===R?S.rotation:x.pt.ix===R?S.points:x.or.ix===R||R==="ADBE Vector Star Outer Radius"?S.outerRadius:x.os.ix===R?S.outerRoundness:!x.ir||x.ir.ix!==R&&R!=="ADBE Vector Star Inner Radius"?x.is&&x.is.ix===R?S.innerRoundness:null:S.innerRadius}var T=propertyGroupFactory(S,A),D=E.sh.ty==="tm"?E.sh.prop:E.sh;return S.propertyIndex=x.ix,D.or.setGroupProperty(PropertyInterface("Outer Radius",T)),D.os.setGroupProperty(PropertyInterface("Outer Roundness",T)),D.pt.setGroupProperty(PropertyInterface("Points",T)),D.p.setGroupProperty(PropertyInterface("Position",T)),D.r.setGroupProperty(PropertyInterface("Rotation",T)),x.ir&&(D.ir.setGroupProperty(PropertyInterface("Inner Radius",T)),D.is.setGroupProperty(PropertyInterface("Inner Roundness",T))),Object.defineProperties(S,{position:{get:ExpressionPropertyInterface(D.p)},rotation:{get:ExpressionPropertyInterface(D.r)},points:{get:ExpressionPropertyInterface(D.pt)},outerRadius:{get:ExpressionPropertyInterface(D.or)},outerRoundness:{get:ExpressionPropertyInterface(D.os)},innerRadius:{get:ExpressionPropertyInterface(D.ir)},innerRoundness:{get:ExpressionPropertyInterface(D.is)},_name:{value:x.nm}}),S.mn=x.mn,S}function m(x,E,A){function S(R){return x.p.ix===R?S.position:x.r.ix===R?S.roundness:x.s.ix===R||R==="Size"||R==="ADBE Vector Rect Size"?S.size:null}var T=propertyGroupFactory(S,A),D=E.sh.ty==="tm"?E.sh.prop:E.sh;return S.propertyIndex=x.ix,D.p.setGroupProperty(PropertyInterface("Position",T)),D.s.setGroupProperty(PropertyInterface("Size",T)),D.r.setGroupProperty(PropertyInterface("Rotation",T)),Object.defineProperties(S,{position:{get:ExpressionPropertyInterface(D.p)},roundness:{get:ExpressionPropertyInterface(D.r)},size:{get:ExpressionPropertyInterface(D.s)},_name:{value:x.nm}}),S.mn=x.mn,S}function y(x,E,A){function S(R){return x.r.ix===R||R==="Round Corners 1"?S.radius:null}var T=propertyGroupFactory(S,A),D=E;return S.propertyIndex=x.ix,D.rd.setGroupProperty(PropertyInterface("Radius",T)),Object.defineProperties(S,{radius:{get:ExpressionPropertyInterface(D.rd)},_name:{value:x.nm}}),S.mn=x.mn,S}function b(x,E,A){function S(R){return x.c.ix===R||R==="Copies"?S.copies:x.o.ix===R||R==="Offset"?S.offset:null}var T=propertyGroupFactory(S,A),D=E;return S.propertyIndex=x.ix,D.c.setGroupProperty(PropertyInterface("Copies",T)),D.o.setGroupProperty(PropertyInterface("Offset",T)),Object.defineProperties(S,{copies:{get:ExpressionPropertyInterface(D.c)},offset:{get:ExpressionPropertyInterface(D.o)},_name:{value:x.nm}}),S.mn=x.mn,S}return function(x,E,A){var S;function T(D){if(typeof D=="number")return(D=D===void 0?1:D)===0?A:S[D-1];for(var R=0,F=S.length;R<F;){if(S[R]._name===D)return S[R];R+=1}return null}return T.propertyGroup=propertyGroupFactory(T,(function(){return A})),S=n(x,E,T.propertyGroup),T.numProperties=S.length,T._name="Contents",T}})(),TextExpressionInterface=function(n){var t;function e(i){switch(i){case"ADBE Text Document":return e.sourceText;default:return null}}return Object.defineProperty(e,"sourceText",{get:function(){n.textProperty.getValue();var i=n.textProperty.currentData.t;return t&&i===t.value||((t=new String(i)).value=i||new String(i),Object.defineProperty(t,"style",{get:function(){return{fillColor:n.textProperty.currentData.fc}}})),t}}),e};function _typeof(n){return(_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var FootageInterface=(dataInterfaceFactory=function(n){function t(e){return e==="Outline"?t.outlineInterface():null}return t._name="Outline",t.outlineInterface=(function(e){var i="",a=e.getFootageData();function o(c){if(a[c])return i=c,_typeof(a=a[c])==="object"?o:a;var u=c.indexOf(i);if(u!==-1){var f=parseInt(c.substr(u+i.length),10);return _typeof(a=a[f])==="object"?o:a}return""}return function(){return i="",a=e.getFootageData(),o}})(n),t},function(n){function t(e){return e==="Data"?t.dataInterface:null}return t._name="Data",t.dataInterface=dataInterfaceFactory(n),t}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(n){return interfaces[n]||null}var expressionHelpers={searchExpressions:function(n,t,e){t.x&&(e.k=!0,e.x=!0,e.initiateExpression=ExpressionManager.initiateExpression,e.effectsSequence.push(e.initiateExpression(n,t,e).bind(e)))},getSpeedAtTime:function(n){var t=this.getValueAtTime(n),e=this.getValueAtTime(n+-.01),i=0;if(t.length){var a;for(a=0;a<t.length;a+=1)i+=Math.pow(e[a]-t[a],2);i=100*Math.sqrt(i)}else i=0;return i},getVelocityAtTime:function(n){if(this.vel!==void 0)return this.vel;var t,e,i=this.getValueAtTime(n),a=this.getValueAtTime(n+-.001);if(i.length)for(t=createTypedArray("float32",i.length),e=0;e<i.length;e+=1)t[e]=(a[e]-i[e])/-.001;else t=(a-i)/-.001;return t},getValueAtTime:function(n){return n*=this.elem.globalData.frameRate,(n-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<n?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(n,this._cachingAtTime),this._cachingAtTime.lastFrame=n),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(n){this.propertyGroup=n}};function addPropertyDecorator(){function n(y,b,x){if(!this.k||!this.keyframes)return this.pv;y=y?y.toLowerCase():"";var E,A,S,T,D,R=this.comp.renderedFrame,F=this.keyframes,k=F[F.length-1].t;if(R<=k)return this.pv;if(x?A=k-(E=b?Math.abs(k-this.elem.comp.globalData.frameRate*b):Math.max(0,k-this.elem.data.ip)):((!b||b>F.length-1)&&(b=F.length-1),E=k-(A=F[F.length-1-b].t)),y==="pingpong"){if(Math.floor((R-A)/E)%2!=0)return this.getValueAtTime((E-(R-A)%E+A)/this.comp.globalData.frameRate,0)}else{if(y==="offset"){var P=this.getValueAtTime(A/this.comp.globalData.frameRate,0),L=this.getValueAtTime(k/this.comp.globalData.frameRate,0),B=this.getValueAtTime(((R-A)%E+A)/this.comp.globalData.frameRate,0),V=Math.floor((R-A)/E);if(this.pv.length){for(T=(D=new Array(P.length)).length,S=0;S<T;S+=1)D[S]=(L[S]-P[S])*V+B[S];return D}return(L-P)*V+B}if(y==="continue"){var z=this.getValueAtTime(k/this.comp.globalData.frameRate,0),j=this.getValueAtTime((k-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(T=(D=new Array(z.length)).length,S=0;S<T;S+=1)D[S]=z[S]+(z[S]-j[S])*((R-k)/this.comp.globalData.frameRate)/5e-4;return D}return z+(R-k)/.001*(z-j)}}return this.getValueAtTime(((R-A)%E+A)/this.comp.globalData.frameRate,0)}function t(y,b,x){if(!this.k)return this.pv;y=y?y.toLowerCase():"";var E,A,S,T,D,R=this.comp.renderedFrame,F=this.keyframes,k=F[0].t;if(R>=k)return this.pv;if(x?A=k+(E=b?Math.abs(this.elem.comp.globalData.frameRate*b):Math.max(0,this.elem.data.op-k)):((!b||b>F.length-1)&&(b=F.length-1),E=(A=F[b].t)-k),y==="pingpong"){if(Math.floor((k-R)/E)%2==0)return this.getValueAtTime(((k-R)%E+k)/this.comp.globalData.frameRate,0)}else{if(y==="offset"){var P=this.getValueAtTime(k/this.comp.globalData.frameRate,0),L=this.getValueAtTime(A/this.comp.globalData.frameRate,0),B=this.getValueAtTime((E-(k-R)%E+k)/this.comp.globalData.frameRate,0),V=Math.floor((k-R)/E)+1;if(this.pv.length){for(T=(D=new Array(P.length)).length,S=0;S<T;S+=1)D[S]=B[S]-(L[S]-P[S])*V;return D}return B-(L-P)*V}if(y==="continue"){var z=this.getValueAtTime(k/this.comp.globalData.frameRate,0),j=this.getValueAtTime((k+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(T=(D=new Array(z.length)).length,S=0;S<T;S+=1)D[S]=z[S]+(z[S]-j[S])*(k-R)/.001;return D}return z+(z-j)*(k-R)/.001}}return this.getValueAtTime((E-((k-R)%E+k))/this.comp.globalData.frameRate,0)}function e(y,b){if(!this.k)return this.pv;if(y=.5*(y||.4),(b=Math.floor(b||5))<=1)return this.pv;var x,E,A=this.comp.renderedFrame/this.comp.globalData.frameRate,S=A-y,T=b>1?(A+y-S)/(b-1):1,D=0,R=0;for(x=this.pv.length?createTypedArray("float32",this.pv.length):0;D<b;){if(E=this.getValueAtTime(S+D*T),this.pv.length)for(R=0;R<this.pv.length;R+=1)x[R]+=E[R];else x+=E;D+=1}if(this.pv.length)for(R=0;R<this.pv.length;R+=1)x[R]/=b;else x/=b;return x}function i(y){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var b=this._transformCachingAtTime.v;if(b.cloneFromProps(this.pre.props),this.appliedTransformations<1){var x=this.a.getValueAtTime(y);b.translate(-x[0]*this.a.mult,-x[1]*this.a.mult,x[2]*this.a.mult)}if(this.appliedTransformations<2){var E=this.s.getValueAtTime(y);b.scale(E[0]*this.s.mult,E[1]*this.s.mult,E[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var A=this.sk.getValueAtTime(y),S=this.sa.getValueAtTime(y);b.skewFromAxis(-A*this.sk.mult,S*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var T=this.r.getValueAtTime(y);b.rotate(-T*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var D=this.rz.getValueAtTime(y),R=this.ry.getValueAtTime(y),F=this.rx.getValueAtTime(y),k=this.or.getValueAtTime(y);b.rotateZ(-D*this.rz.mult).rotateY(R*this.ry.mult).rotateX(F*this.rx.mult).rotateZ(-k[2]*this.or.mult).rotateY(k[1]*this.or.mult).rotateX(k[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var P=this.px.getValueAtTime(y),L=this.py.getValueAtTime(y);if(this.data.p.z){var B=this.pz.getValueAtTime(y);b.translate(P*this.px.mult,L*this.py.mult,-B*this.pz.mult)}else b.translate(P*this.px.mult,L*this.py.mult,0)}else{var V=this.p.getValueAtTime(y);b.translate(V[0]*this.p.mult,V[1]*this.p.mult,-V[2]*this.p.mult)}return b}function a(){return this.v.clone(new Matrix)}var o=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(y,b,x){var E=o(y,b,x);return E.dynamicProperties.length?E.getValueAtTime=i.bind(E):E.getValueAtTime=a.bind(E),E.setGroupProperty=expressionHelpers.setGroupProperty,E};var c=PropertyFactory.getProp;PropertyFactory.getProp=function(y,b,x,E,A){var S=c(y,b,x,E,A);S.kf?S.getValueAtTime=expressionHelpers.getValueAtTime.bind(S):S.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(S),S.setGroupProperty=expressionHelpers.setGroupProperty,S.loopOut=n,S.loopIn=t,S.smooth=e,S.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(S),S.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(S),S.numKeys=b.a===1?b.k.length:0,S.propertyIndex=b.ix;var T=0;return x!==0&&(T=createTypedArray("float32",b.a===1?b.k[0].s.length:b.k.length)),S._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:T},expressionHelpers.searchExpressions(y,b,S),S.k&&A.addDynamicProperty(S),S};var u=ShapePropertyFactory.getConstructorFunction(),f=ShapePropertyFactory.getKeyframedConstructorFunction();function p(){}p.prototype={vertices:function(y,b){this.k&&this.getValue();var x,E=this.v;b!==void 0&&(E=this.getValueAtTime(b,0));var A=E._length,S=E[y],T=E.v,D=createSizedArray(A);for(x=0;x<A;x+=1)D[x]=y==="i"||y==="o"?[S[x][0]-T[x][0],S[x][1]-T[x][1]]:[S[x][0],S[x][1]];return D},points:function(y){return this.vertices("v",y)},inTangents:function(y){return this.vertices("i",y)},outTangents:function(y){return this.vertices("o",y)},isClosed:function(){return this.v.c},pointOnPath:function(y,b){var x=this.v;b!==void 0&&(x=this.getValueAtTime(b,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(x));for(var E,A=this._segmentsLength,S=A.lengths,T=A.totalLength*y,D=0,R=S.length,F=0;D<R;){if(F+S[D].addedLength>T){var k=D,P=x.c&&D===R-1?0:D+1,L=(T-F)/S[D].addedLength;E=bez.getPointInSegment(x.v[k],x.v[P],x.o[k],x.i[P],L,S[D]);break}F+=S[D].addedLength,D+=1}return E||(E=x.c?[x.v[0][0],x.v[0][1]]:[x.v[x._length-1][0],x.v[x._length-1][1]]),E},vectorOnPath:function(y,b,x){y==1?y=this.v.c:y==0&&(y=.999);var E=this.pointOnPath(y,b),A=this.pointOnPath(y+.001,b),S=A[0]-E[0],T=A[1]-E[1],D=Math.sqrt(Math.pow(S,2)+Math.pow(T,2));return D===0?[0,0]:x==="tangent"?[S/D,T/D]:[-T/D,S/D]},tangentOnPath:function(y,b){return this.vectorOnPath(y,b,"tangent")},normalOnPath:function(y,b){return this.vectorOnPath(y,b,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([p],u),extendPrototype([p],f),f.prototype.getValueAtTime=function(y){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),y*=this.elem.globalData.frameRate,(y-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<y?this._caching.lastIndex:0,this._cachingAtTime.lastTime=y,this.interpolateShape(y,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},f.prototype.initiateExpression=ExpressionManager.initiateExpression;var m=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(y,b,x,E,A){var S=m(y,b,x,E,A);return S.propertyIndex=b.ix,S.lock=!1,x===3?expressionHelpers.searchExpressions(y,b.pt,S):x===4&&expressionHelpers.searchExpressions(y,b.ks,S),S.k&&y.addDynamicProperty(S),S}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(n,t){var e=this.calculateExpression(t);if(n.t!==e){var i={};return this.copyData(i,n),i.t=e.toString(),i.__complete=!1,i}return n},TextProperty.prototype.searchProperty=function(){var n=this.searchKeyframes(),t=this.searchExpressions();return this.kf=n||t,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(n,t){var e,i,a=createNS("feMerge");for(a.setAttribute("result",n),i=0;i<t.length;i+=1)(e=createNS("feMergeNode")).setAttribute("in",t[i]),a.appendChild(e),a.appendChild(e);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(n,t,e,i,a){this.filterManager=t;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=o,o.setAttribute("result",i+"_tint_1"),n.appendChild(o),(o=createNS("feColorMatrix")).setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",i+"_tint_2"),n.appendChild(o),this.matrixFilter=o;var c=this.createMergeNode(i,[a,i+"_tint_1",i+"_tint_2"]);n.appendChild(c)}function SVGFillFilter(n,t,e,i){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),a.setAttribute("result",i),n.appendChild(a),this.matrixFilter=a}function SVGStrokeEffect(n,t,e){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(n,t,e,i){this.filterManager=t;var a=createNS("feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","linearRGB"),a.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.appendChild(a);var o=createNS("feComponentTransfer");o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",i),this.matrixFilter=o;var c=createNS("feFuncR");c.setAttribute("type","table"),o.appendChild(c),this.feFuncR=c;var u=createNS("feFuncG");u.setAttribute("type","table"),o.appendChild(u),this.feFuncG=u;var f=createNS("feFuncB");f.setAttribute("type","table"),o.appendChild(f),this.feFuncB=f,n.appendChild(o)}function SVGProLevelsFilter(n,t,e,i){this.filterManager=t;var a=this.filterManager.effectElements,o=createNS("feComponentTransfer");(a[10].p.k||a[10].p.v!==0||a[11].p.k||a[11].p.v!==1||a[12].p.k||a[12].p.v!==1||a[13].p.k||a[13].p.v!==0||a[14].p.k||a[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",o)),(a[17].p.k||a[17].p.v!==0||a[18].p.k||a[18].p.v!==1||a[19].p.k||a[19].p.v!==1||a[20].p.k||a[20].p.v!==0||a[21].p.k||a[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",o)),(a[24].p.k||a[24].p.v!==0||a[25].p.k||a[25].p.v!==1||a[26].p.k||a[26].p.v!==1||a[27].p.k||a[27].p.v!==0||a[28].p.k||a[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",o)),(a[31].p.k||a[31].p.v!==0||a[32].p.k||a[32].p.v!==1||a[33].p.k||a[33].p.v!==1||a[34].p.k||a[34].p.v!==0||a[35].p.k||a[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",o)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(o.setAttribute("color-interpolation-filters","sRGB"),n.appendChild(o)),(a[3].p.k||a[3].p.v!==0||a[4].p.k||a[4].p.v!==1||a[5].p.k||a[5].p.v!==1||a[6].p.k||a[6].p.v!==0||a[7].p.k||a[7].p.v!==1)&&((o=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("result",i),n.appendChild(o),this.feFuncRComposed=this.createFeFunc("feFuncR",o),this.feFuncGComposed=this.createFeFunc("feFuncG",o),this.feFuncBComposed=this.createFeFunc("feFuncB",o))}function SVGDropShadowEffect(n,t,e,i,a){var o=t.container.globalData.renderConfig.filterSize,c=t.data.fs||o;n.setAttribute("x",c.x||o.x),n.setAttribute("y",c.y||o.y),n.setAttribute("width",c.width||o.width),n.setAttribute("height",c.height||o.height),this.filterManager=t;var u=createNS("feGaussianBlur");u.setAttribute("in","SourceAlpha"),u.setAttribute("result",i+"_drop_shadow_1"),u.setAttribute("stdDeviation","0"),this.feGaussianBlur=u,n.appendChild(u);var f=createNS("feOffset");f.setAttribute("dx","25"),f.setAttribute("dy","0"),f.setAttribute("in",i+"_drop_shadow_1"),f.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=f,n.appendChild(f);var p=createNS("feFlood");p.setAttribute("flood-color","#00ff00"),p.setAttribute("flood-opacity","1"),p.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=p,n.appendChild(p);var m=createNS("feComposite");m.setAttribute("in",i+"_drop_shadow_3"),m.setAttribute("in2",i+"_drop_shadow_2"),m.setAttribute("operator","in"),m.setAttribute("result",i+"_drop_shadow_4"),n.appendChild(m);var y=this.createMergeNode(i,[i+"_drop_shadow_4",a]);n.appendChild(y)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",e[0]-t[0]+" 0 0 0 "+t[0]+" "+(e[1]-t[1])+" 0 0 0 "+t[1]+" "+(e[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,e=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+e+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var n,t,e,i,a=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(i=this.elem.maskManager.masksProperties.length,e=0):i=(e=this.filterManager.effectElements[0].p.v-1)+1,(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);e<i;e+=1)n=createNS("path"),t.appendChild(n),this.paths.push({p:n,m:e});if(this.filterManager.effectElements[10].p.v===3){var o=createNS("mask"),c=createElementID();o.setAttribute("id",c),o.setAttribute("mask-type","alpha"),o.appendChild(t),this.elem.globalData.defs.appendChild(o);var u=createNS("g");for(u.setAttribute("mask","url("+getLocationHref()+"#"+c+")");a[0];)u.appendChild(a[0]);this.elem.layerElement.appendChild(u),this.masker=o,t.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(a=this.elem.layerElement.children||this.elem.layerElement.childNodes;a.length;)this.elem.layerElement.removeChild(a[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(n){var t;this.initialized||this.initialize();var e,i,a=this.paths.length;for(t=0;t<a;t+=1)if(this.paths[t].m!==-1&&(e=this.elem.maskManager.viewData[this.paths[t].m],i=this.paths[t].p,(n||this.filterManager._mdf||e.prop._mdf)&&i.setAttribute("d",e.lastPath),n||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||e.prop._mdf)){var o;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var c=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),u=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),f=i.getTotalLength();o="0 0 0 "+f*c+" ";var p,m=f*(u-c),y=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,b=Math.floor(m/y);for(p=0;p<b;p+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";o+="0 "+10*f+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;i.setAttribute("stroke-dasharray",o)}if((n||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(n||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(n||this.filterManager.effectElements[3].p._mdf)){var x=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*x[0])+","+bmFloor(255*x[1])+","+bmFloor(255*x[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,a=i[0]+" "+e[0]+" "+t[0],o=i[1]+" "+e[1]+" "+t[1],c=i[2]+" "+e[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",a),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",c)}},SVGProLevelsFilter.prototype.createFeFunc=function(n,t){var e=createNS(n);return e.setAttribute("type","table"),t.appendChild(e),e},SVGProLevelsFilter.prototype.getTableValue=function(n,t,e,i,a){for(var o,c,u=0,f=Math.min(n,t),p=Math.max(n,t),m=Array.call(null,{length:256}),y=0,b=a-i,x=t-n;u<=256;)c=(o=u/256)<=f?x<0?a:i:o>=p?x<0?i:a:i+b*Math.pow((o-n)/x,1/e),m[y]=c,y+=1,u+=256/255;return m.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){var t,e=this.filterManager.effectElements;this.feFuncRComposed&&(n||e[3].p._mdf||e[4].p._mdf||e[5].p._mdf||e[6].p._mdf||e[7].p._mdf)&&(t=this.getTableValue(e[3].p.v,e[4].p.v,e[5].p.v,e[6].p.v,e[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(n||e[10].p._mdf||e[11].p._mdf||e[12].p._mdf||e[13].p._mdf||e[14].p._mdf)&&(t=this.getTableValue(e[10].p.v,e[11].p.v,e[12].p.v,e[13].p.v,e[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(n||e[17].p._mdf||e[18].p._mdf||e[19].p._mdf||e[20].p._mdf||e[21].p._mdf)&&(t=this.getTableValue(e[17].p.v,e[18].p.v,e[19].p.v,e[20].p.v,e[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(n||e[24].p._mdf||e[25].p._mdf||e[26].p._mdf||e[27].p._mdf||e[28].p._mdf)&&(t=this.getTableValue(e[24].p.v,e[25].p.v,e[26].p.v,e[27].p.v,e[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(n||e[31].p._mdf||e[32].p._mdf||e[33].p._mdf||e[34].p._mdf||e[35].p._mdf)&&(t=this.getTableValue(e[31].p.v,e[32].p.v,e[33].p.v,e[34].p.v,e[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){if((n||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),n||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((n||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),n||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var e=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,a=e*Math.cos(i),o=e*Math.sin(i);this.feOffset.setAttribute("dx",a),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(n,t,e){this.initialized=!1,this.filterManager=t,this.filterElem=n,this.elem=e,e.matteElement=createNS("g"),e.matteElement.appendChild(e.layerElement),e.matteElement.appendChild(e.transformedElement),e.baseElement=e.matteElement}function SVGGaussianBlurEffect(n,t,e,i){n.setAttribute("x","-100%"),n.setAttribute("y","-100%"),n.setAttribute("width","300%"),n.setAttribute("height","300%"),this.filterManager=t;var a=createNS("feGaussianBlur");a.setAttribute("result",i),n.appendChild(a),this.feGaussianBlur=a}function TransformEffect(){}function SVGTransformEffect(n,t){this.init(t)}function CVTransformEffect(n){this.init(n)}return SVGMatte3Effect.prototype.findSymbol=function(n){for(var t=0,e=_svgMatteSymbols.length;t<e;){if(_svgMatteSymbols[t]===n)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(n,t){var e=n.layerElement.parentNode;if(e){for(var i,a=e.children,o=0,c=a.length;o<c&&a[o]!==n.layerElement;)o+=1;o<=c-2&&(i=a[o+1]);var u=createNS("use");u.setAttribute("href","#"+t),i?e.insertBefore(u,i):e.appendChild(u)}},SVGMatte3Effect.prototype.setElementAsMask=function(n,t){if(!this.findSymbol(t)){var e=createElementID(),i=createNS("mask");i.setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var a=n.globalData.defs;a.appendChild(i);var o=createNS("symbol");o.setAttribute("id",e),this.replaceInParent(t,e),o.appendChild(t.layerElement),a.appendChild(o);var c=createNS("use");c.setAttribute("href","#"+e),i.appendChild(c),t.data.hd=!1,t.show()}n.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var n=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,e=0,i=t.length;e<i;)t[e]&&t[e].data.ind===n&&this.setElementAsMask(this.elem,t[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(n){if(n||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,i=e==3?0:t,a=e==2?0:t;this.feGaussianBlur.setAttribute("stdDeviation",i+" "+a);var o=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}},TransformEffect.prototype.init=function(n){this.effectsManager=n,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(n){if(this._opMdf=!1,this._mdf=!1,n||this.effectsManager._mdf){var t=this.effectsManager.effectElements,e=t[0].p.v,i=t[1].p.v,a=t[2].p.v===1,o=t[3].p.v,c=a?o:t[4].p.v,u=t[5].p.v,f=t[6].p.v,p=t[7].p.v;this.matrix.reset(),this.matrix.translate(-e[0],-e[1],e[2]),this.matrix.scale(.01*c,.01*o,1),this.matrix.rotate(-p*degToRads),this.matrix.skewFromAxis(-u*degToRads,(f+90)*degToRads),this.matrix.translate(i[0],i[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie}))})),REACT_LOTTIE_PLAYER_VERSION="3.6.0",LOTTIE_WEB_VERSION="^5.12.2",PlayerState,PlayerEvent;function parseSrc(n){if(typeof n=="object")return n;try{return JSON.parse(n)}catch{}try{return new URL(n).toString()}catch{}return n}(function(n){n.Loading="loading",n.Playing="playing",n.Paused="paused",n.Stopped="stopped",n.Frozen="frozen",n.Error="error"})(PlayerState||(PlayerState={})),(function(n){n.Load="load",n.InstanceSaved="instanceSaved",n.Error="error",n.Ready="ready",n.Play="play",n.Pause="pause",n.Stop="stop",n.Freeze="freeze",n.Loop="loop",n.Complete="complete",n.Frame="frame"})(PlayerEvent||(PlayerEvent={}));var defaultOptions={clearCanvas:!1,hideOnTransparent:!0,progressiveLoad:!0},Player=(function(n){function t(e){var i=n.call(this,e)||this;return i.container=null,i.unmounted=!1,i.handleBgChange=function(a){i.setState({background:a})},i.triggerDownload=function(a,o){var c=document.createElement("a");c.href=a,c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c)},i.snapshot=function(a){var o;a===void 0&&(a=!0);var c=i.props.id?i.props.id:"lottie",u=document.getElementById(c);if(i.props.renderer==="svg"){if(u){var f=u.querySelector("svg");if(f){var p=new XMLSerializer().serializeToString(f);o="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(p)}}a&&i.triggerDownload(o,"snapshot.svg")}else if(i.props.renderer==="canvas"){if(u){var m=u.querySelector("canvas");m&&(o=m.toDataURL("image/png"))}a&&i.triggerDownload(o,"snapshot.png")}return o},typeof window<"u"&&(window.lottie=lottie),i.state={animationData:null,background:"transparent",containerRef:reactExports.createRef(),debug:!0,instance:null,playerState:PlayerState.Loading,seeker:0},i}return __extends(t,n),t.getDerivedStateFromProps=function(e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){return e.background!==i.background?[2,{background:e.background}]:[2,null]}))}))},t.prototype.getVersions=function(){return{lottieWebVersion:LOTTIE_WEB_VERSION,lottiePlayerVersion:REACT_LOTTIE_PLAYER_VERSION}},t.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.unmounted?[3,2]:[4,this.createLottie()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.state.instance&&this.state.instance.destroy()},t.prototype.componentDidUpdate=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return this.props.src===e.src?[3,2]:(this.state.instance&&this.state.instance.destroy(),[4,this.createLottie()]);case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){var e=this,i=this.props,a=i.children,o=i.loop,c=i.style,u=i.onBackgroundChange,f=i.className,p=this.state,m=p.animationData,y=p.instance,b=p.playerState,x=p.seeker,E=p.debug,A=p.background;return reactExports.createElement("div",{className:"lf-player-container"},this.state.playerState===PlayerState.Error?reactExports.createElement("div",{className:"lf-error"},reactExports.createElement("span",{"aria-label":"error-symbol",role:"img"},"⚠️")):reactExports.createElement("div",{id:this.props.id?this.props.id:"lottie",ref:function(S){return e.container=S},style:__assign({background:A,margin:"0 auto",outline:"none",overflow:"hidden"},c),className:f}),reactExports.Children.map(a,(function(S){return reactExports.isValidElement(S)?reactExports.cloneElement(S,{animationData:m,background:A,debug:E,instance:y,loop:o,pause:function(){return e.pause()},play:function(){return e.play()},playerState:b,seeker:x,setBackground:function(T){e.setState({background:T}),typeof u=="function"&&u(T)},setSeeker:function(T,D){return e.setSeeker(T,D)},stop:function(){return e.stop()},toggleDebug:function(){return e.toggleDebug()},setLoop:function(T){return e.setLoop(T)},colorChangedEvent:function(T){e.handleBgChange(T)},snapshot:function(){e.snapshot()}}):null})))},t.prototype.toggleDebug=function(){this.setState({debug:!this.state.debug})},t.prototype.createLottie=function(){return __awaiter(this,void 0,void 0,(function(){var e,i,a,o,c,u,f,p,m,y,b,x,E,A,S=this;return __generator(this,(function(T){switch(T.label){case 0:if(e=this.props,i=e.autoplay,a=e.direction,o=e.loop,c=e.lottieRef,u=e.renderer,f=e.speed,p=e.src,m=e.background,y=e.rendererSettings,b=e.hover,x=this.state.instance,!p||!this.container)return[2];T.label=1;case 1:return T.trys.push([1,5,,6]),typeof(E=parseSrc(p))!="string"?[3,4]:[4,fetch(E).catch((function(){throw S.setState({playerState:PlayerState.Error}),S.triggerEvent(PlayerEvent.Error),new Error("@LottieFiles/lottie-react: Animation data could not be fetched.")}))];case 2:return[4,T.sent().json().catch((function(){throw S.setState({playerState:PlayerState.Error}),S.triggerEvent(PlayerEvent.Error),new Error("@LottieFiles/lottie-react: Animation data could not be fetched.")}))];case 3:E=T.sent(),T.label=4;case 4:return x&&x.destroy(),A=lottie.loadAnimation({rendererSettings:y||defaultOptions,animationData:E,autoplay:i||!1,container:this.container,loop:o||!1,renderer:u}),f&&A.setSpeed(f),this.setState({animationData:E}),this.setState({instance:A},(function(){S.triggerEvent(PlayerEvent.InstanceSaved),typeof c=="function"&&c(A),i&&S.play()})),A.addEventListener("enterFrame",(function(){S.triggerEvent(PlayerEvent.Frame),S.setState({seeker:Math.floor(A.currentFrame)})})),A.addEventListener("DOMLoaded",(function(){S.triggerEvent(PlayerEvent.Load)})),A.addEventListener("data_ready",(function(){S.triggerEvent(PlayerEvent.Ready)})),A.addEventListener("data_failed",(function(){S.setState({playerState:PlayerState.Error}),S.triggerEvent(PlayerEvent.Error)})),A.addEventListener("loopComplete",(function(){S.triggerEvent(PlayerEvent.Loop)})),A.addEventListener("complete",(function(){S.triggerEvent(PlayerEvent.Complete),S.setState({playerState:PlayerState.Paused}),S.props.keepLastFrame&&!S.props.loop||S.setSeeker(0)})),this.container&&(this.container.addEventListener("mouseenter",(function(){b&&S.state.playerState!==PlayerState.Playing&&(S.props.keepLastFrame&&S.stop(),S.play())})),this.container.addEventListener("mouseleave",(function(){b&&S.state.playerState===PlayerState.Playing&&S.stop()}))),f&&this.setPlayerSpeed(f),a&&this.setPlayerDirection(a),m&&this.setState({background:m}),[3,6];case 5:return T.sent(),this.setState({playerState:PlayerState.Error}),this.triggerEvent(PlayerEvent.Error),[3,6];case 6:return[2]}}))}))},t.prototype.play=function(){var e=this.state.instance;e&&(this.triggerEvent(PlayerEvent.Play),e.play(),this.setState({playerState:PlayerState.Playing}))},t.prototype.pause=function(){var e=this.state.instance;e&&(this.triggerEvent(PlayerEvent.Pause),e.pause(),this.setState({playerState:PlayerState.Paused}))},t.prototype.stop=function(){var e=this.state.instance;e&&(this.triggerEvent(PlayerEvent.Stop),e.stop(),this.setState({playerState:PlayerState.Stopped}))},t.prototype.setPlayerSpeed=function(e){var i=this.state.instance;i&&i.setSpeed(e)},t.prototype.setPlayerDirection=function(e){var i=this.state.instance;i&&i.setDirection(e)},t.prototype.setSeeker=function(e,i){i===void 0&&(i=!1);var a=this.state,o=a.instance,c=a.playerState;o&&(i&&c===PlayerState.Playing?o.goToAndPlay(e,!0):(o.goToAndStop(e,!0),this.triggerEvent(PlayerEvent.Pause),this.setState({playerState:PlayerState.Paused})))},t.prototype.setLoop=function(e){var i=this.state.instance;i&&(i.loop=e,this.setState({instance:i}))},t.prototype.triggerEvent=function(e){var i=this.props.onEvent;i&&i(e)},t.defaultProps={loop:!1},t})(reactExports.Component);function styleInject(n,t){t===void 0&&(t={});var e=t.insertAt;if(typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",e==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var css_248z=`.lf-progress {
  -webkit-appearance: none;
  -moz-apperance: none;
  width: 100%;
  /* margin: 0 10px; */
  height: 4px;
  border-radius: 3px;
  cursor: pointer;
}
.lf-progress:focus {
  outline: none;
  border: none;
}
.lf-progress::-moz-range-track {
  cursor: pointer;
  background: none;
  border: none;
  outline: none;
}
.lf-progress::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-moz-range-thumb {
  -moz-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-ms-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.lf-progress::-ms-fill-lower {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-fill-upper {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-thumb {
  border: 0;
  height: 15px;
  width: 15px;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress:focus::-ms-fill-lower {
  background: #ccc;
}
.lf-progress:focus::-ms-fill-upper {
  background: #ccc;
}
.lf-player-container :focus {
  outline: 0;
}
.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  opacity: 1;
  visibility: visible;
  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-player-btn-container {
  display: flex;
  align-items: center;
}
.lf-player-btn {
  cursor: pointer;
  fill: #999;
  width: 14px;
}

.lf-player-btn.active {
  fill: #555;
}

.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  background-color: #ffffff;
  opacity: 1;

  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
  padding: 10px;
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-arrow {
  position: absolute;
  z-index: -1;
  content: '';
  bottom: -9px;
  border-style: solid;
  border-width: 10px 10px 0px 10px;
}

.lf-left-align,
.lf-left-align .lfarrow {
  left: 0;
  right: unset;
}

.lf-right-align,
.lf-right-align .lf-arrow {
  right: 0;
  left: unset;
}

.lf-text-input {
  border: 1px #ccc solid;
  border-radius: 5px;
  padding: 3px;
  width: 60px;
  margin: 0;
}

.lf-color-picker {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 90px;
}

.lf-color-selectors {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.lf-color-component {
  display: flex;
  flex-direction: row;
  font-size: 12px;
  align-items: center;
  justify-content: center;
}

.lf-color-component strong {
  width: 40px;
}

.lf-color-component input[type='range'] {
  margin: 0 0 0 10px;
}

.lf-color-component input[type='number'] {
  width: 50px;
  margin: 0 0 0 10px;
}

.lf-color-preview {
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding-left: 5px;
}

.lf-preview {
  height: 60px;
  width: 60px;
}

.lf-popover-snapshot {
  width: 150px;
}
.lf-popover-snapshot h5 {
  margin: 5px 0 10px 0;
  font-size: 0.75rem;
}
.lf-popover-snapshot a {
  display: block;
  text-decoration: none;
}
.lf-popover-snapshot a:before {
  content: '⥼';
  margin-right: 5px;
}
.lf-popover-snapshot .lf-note {
  display: block;
  margin-top: 10px;
  color: #999;
}
.lf-player-controls > div {
  margin-right: 5px;
  margin-left: 5px;
}
.lf-player-controls > div:first-child {
  margin-left: 0px;
}
.lf-player-controls > div:last-child {
  margin-right: 0px;
}
`;styleInject(css_248z);var ColorPicker=(function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.state={red:0,green:0,blue:0,rgba:null,hex:"#000000",colorComponents:[]},e.handleChange=function(i,a){if(i==="r"){var o="#"+(256|a).toString(16).slice(1)+(256|e.state.green).toString(16).slice(1)+(256|e.state.blue).toString(16).slice(1);e.setState({hex:o})}else i==="g"?(o="#"+(256|e.state.red).toString(16).slice(1)+(256|a).toString(16).slice(1)+(256|e.state.blue).toString(16).slice(1),e.setState({hex:o})):i==="b"&&(o="#"+(256|e.state.red).toString(16).slice(1)+(256|e.state.green).toString(16).slice(1)+(256|a).toString(16).slice(1),e.setState({hex:o}))},e.parseColor=function(i){var a;if(typeof i=="string"){if(i[0]==="#"){var o=i.length===4?[i.slice(1,2),i.slice(2,3),i.slice(3,4)].map((function(c){return parseInt(""+c+c,16)})):[i.slice(1,3),i.slice(3,5),i.slice(5,7)].map((function(c){return parseInt(c,16)}));e.setState({colorComponents:o})}else i.startsWith("rgb")&&(o=(a=i.match(/\d+/g))===null||a===void 0?void 0:a.map((function(c){return parseInt(c)})))!==void 0&&e.setState({colorComponents:o});e.state.colorComponents.length&&(e.setState({red:e.state.colorComponents[0]}),e.setState({green:e.state.colorComponents[1]}),e.setState({blue:e.state.colorComponents[2]}))}},e}return __extends(t,n),t.prototype.componentDidUpdate=function(e,i){return this.props.colorChangedEvent&&this.state.hex!==i.hex&&this.props.colorChangedEvent(this.state.hex),!0},t.prototype.render=function(){var e=this;return reactExports.createElement("div",{className:"lf-color-picker"},reactExports.createElement("div",{className:"lf-color-selectors"},reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Red"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.red,onChange:function(i){e.setState({red:i.target.value}),e.handleChange("r",i.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.red,onChange:function(i){e.setState({red:i.target.value}),e.handleChange("r",i.target.value)}})),reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Green"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.green,onChange:function(i){e.setState({green:i.target.value}),e.handleChange("g",i.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.green,onChange:function(i){e.setState({green:i.target.value}),e.handleChange("g",i.target.value)}})),reactExports.createElement("div",{className:"lf-color-component"},reactExports.createElement("strong",null,"Blue"),reactExports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.blue,onChange:function(i){e.setState({blue:i.target.value}),e.handleChange("b",i.target.value)}}),reactExports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.blue,onChange:function(i){e.setState({blue:i.target.value}),e.handleChange("b",i.target.value)}}))),reactExports.createElement("div",{className:"lf-color-preview"},reactExports.createElement("div",{className:"lf-preview",style:{background:"rgb("+this.state.red+", "+this.state.green+", "+this.state.blue+")"}}),reactExports.createElement("div",null,reactExports.createElement("input",{className:"lf-text-input",type:"text",value:this.state.hex,onChange:function(i){e.setState({hex:i.target.value}),e.parseColor(i.target.value)}}))))},t})(reactExports.Component),Popover=function(n){var t=n.children,e=n.icon,i=reactExports.useState(null),a=i[0],o=i[1],c=reactExports.useState(null),u=c[0],f=c[1],p=reactExports.useState(null),m=p[0],y=p[1],b=reactExports.useState(!1),x=b[0],E=b[1];return reactExports.useEffect((function(){if(a&&u){var A=a.getBoundingClientRect(),S=u.getBoundingClientRect(),T=A.left+S.width>window.innerWidth?-1:0;y(T)}}),[m,u,a]),reactExports.createElement("div",{className:"lf-popover",onMouseOver:function(){E(!0)},onMouseLeave:function(){E(!1)},ref:function(A){o(A)}},reactExports.createElement("div",{className:" lf-player-btn"},e),reactExports.createElement("div",{className:"lf-popover-content",ref:function(A){f(A)},style:{bottom:"22px",right:"0px",zIndex:2,visibility:x?"visible":"hidden"}},t))},Seeker=(function(n){function t(e){var i=n.call(this,e)||this;return i.inputRef=reactExports.createRef(),i.handleChange=function(){return function(a){var o=a.target.value,c=Math.floor(o/100*i.props.max);i.props.onChange(c)}},i.state={value:0},i}return __extends(t,n),t.prototype.render=function(){var e=this.props.value/this.props.max*100,i={backgroundImage:"-webkit-gradient(linear, left top, right top, color-stop("+e+"%, rgba(15, 204, 206, 0.4)), color-stop("+e+"%, #DAE1E7))"},a={position:"absolute",left:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"},o={position:"absolute",right:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"};return reactExports.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginRight:"5px",marginLeft:"5px",position:"relative"}},reactExports.createElement("input",{ref:this.inputRef,id:"track",className:"lf-progress",name:"progress","aria-label":"progress",type:"range",min:"0",max:"100",step:"0.1",value:e,onInput:this.handleChange(),onChange:this.handleChange(),style:i}),this.props.showLabels&&reactExports.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},reactExports.createElement("div",{style:a},this.props.min),reactExports.createElement("div",{style:o},this.props.max)))},t})(reactExports.Component),ControlButtonStyle={display:"inline-flex",cursor:"pointer"};(function(n){function t(e){var i=n.call(this,e)||this;return i.state={activeFrame:0,mouseDown:!1},i}return __extends(t,n),t.prototype.render=function(){var e=this,i=this.props,a=i.instance,o=i.playerState,c=i.seeker,u=i.setLoop,f=i.setSeeker,p=i.play,m=i.pause,y=i.stop,b=i.visible,x=i.buttons;if(!a||!b)return null;var E=!x||x.includes("play"),A=!x||x.includes("stop"),S=!x||x.includes("repeat"),T=!x||x.includes("frame"),D=!x||x.includes("background"),R=!x||x.includes("snapshot"),F={width:14,height:14,viewBox:"0 0 24 24"},k=Math.round(a.currentFrame);return reactExports.createElement("div",{className:"lf-player-controls",style:{display:"flex",justifyContent:"space-between",height:"60px",alignItems:"center",backgroundColor:this.props.transparentTheme?"transparent":this.props.darkTheme?"#3C3C3C":"#ffffff",paddingLeft:"10px",paddingRight:"10px"}},E&&reactExports.createElement("div",{role:"button","aria-label":o===PlayerState.Playing?PlayerEvent.Pause:PlayerEvent.Play,tabIndex:0,onClick:function(){o===PlayerState.Playing?typeof m=="function"&&m():typeof p=="function"&&p()},onKeyDown:function(){o===PlayerState.Playing?typeof m=="function"&&m():typeof p=="function"&&p()},className:"lf-player-btn",style:ControlButtonStyle},o===PlayerState.Playing?reactExports.createElement("svg",__assign({},F),reactExports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"14",y:".5"}),reactExports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"2",y:".5"})):reactExports.createElement("svg",__assign({},F),reactExports.createElement("path",{d:"M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"}))),A&&reactExports.createElement("div",{tabIndex:0,role:"button","aria-label":PlayerEvent.Stop,onClick:function(){return y&&y()},onKeyDown:function(){return y&&y()},className:o===PlayerState.Stopped?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},reactExports.createElement("svg",__assign({},F),reactExports.createElement("path",{d:`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`}))),reactExports.createElement(Seeker,{min:0,step:1,max:a?a.totalFrames:1,value:c||0,onChange:function(P){f&&e.setState({activeFrame:P},(function(){f(P,!1)}))},onChangeEnd:function(P){f&&e.setState({activeFrame:P},(function(){f(P,!1)}))},showLabels:this.props.showLabels,darkTheme:this.props.darkTheme}),T&&reactExports.createElement("div",{role:"button",className:"lf-player-btn-container"},reactExports.createElement("input",{style:{outline:"none",border:this.props.darkTheme?"1px #505050 solid":"1px #ccc solid",borderRadius:"3px",width:"40px",textAlign:"center",backgroundColor:this.props.darkTheme?"#505050":"#ffffff",color:this.props.darkTheme?"#B9B9B9":"#999",fontSize:"0.7rem",padding:"0",fontFamily:"inherit"},type:"text",value:k,readOnly:!0})),S&&reactExports.createElement("div",{role:"button","aria-label":PlayerEvent.Loop,tabIndex:0,onClick:function(){a&&u&&u(!a.loop)},onKeyDown:function(){a&&u&&u(!a.loop)},className:a.loop?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},reactExports.createElement("svg",__assign({},F),reactExports.createElement("path",{d:`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`,stroke:"#8795A1",strokeWidth:".26"}),reactExports.createElement("path",{d:`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`,fill:"#8795A1",stroke:"#8795A1",strokeWidth:".26"}))),D&&reactExports.createElement(Popover,{icon:reactExports.createElement("svg",__assign({},F),reactExports.createElement("path",{d:`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
            3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
            9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
            01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
            1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`}))},reactExports.createElement("div",{slot:"content",className:"lf-popover popover-background"},reactExports.createElement(ColorPicker,{colorChangedEvent:this.props.colorChangedEvent}))),R&&reactExports.createElement(Popover,{icon:reactExports.createElement("svg",__assign({},F),reactExports.createElement("path",{clipRule:"evenodd",d:`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
              2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
              .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`,fillRule:"evenodd"}),reactExports.createElement("path",{d:"M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"}),reactExports.createElement("circle",{cx:"7.444",cy:"6.513",r:"2.032"}),reactExports.createElement("path",{d:`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
              01-.803.804H9.562a1.061 1.061 0 100 2.123z`,stroke:"#8795a1",strokeWidth:".215"}))},reactExports.createElement("div",{slot:"content",className:"lf-popover lf-popover-snapshot",onWheel:function(P){f&&f(k+(P.deltaY>0?-1:1),!1)}},reactExports.createElement("h5",null,"Frame ",k),reactExports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download SVG"),reactExports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download PNG"),reactExports.createElement("i",{className:"lf-note"},"Scroll with mousewheel to find exact frame"))))},t})(reactExports.Component);const v="5.4.4",fr=24,ip=0,op=72,w=500,h=500,nm="Search",ddd=0,assets=[],layers=JSON.parse('[{"ddd":0,"ind":1,"ty":4,"nm":"Check Middle","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":2,"s":[100],"e":[0]},{"t":20}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":2,"s":[250,250,0],"e":[52,250,0],"to":[-33,0,0],"ti":[33,0,0]},{"t":14}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.134,0.134,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":4,"s":[100,100,100],"e":[69,69,100]},{"t":16}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-52.5,11.5],[-11,50.5],[60.5,-34.5]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.8549019607843137,0.7254901960784313,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":15,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":145,"st":-60,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Check Right","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[250,250,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-52.5,11.5],[-11,50.5],[60.5,-34.5]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0.8549019607843137,0.7254901960784313,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":15,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":58,"s":[0],"e":[100]},{"t":65}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":58,"op":144,"st":-2,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Magnifying Glass","parent":4,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-31.335,-31.31,0],"ix":2},"a":{"a":0,"k":[86,86,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-29.547],[29.547,0],[0,29.547],[-29.547,0]],"o":[[0,29.547],[-29.547,0],[0,-29.547],[29.547,0]],"v":[[53.5,0],[0,53.5],[-53.5,0],[0,-53.5]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.7725490196078432,0.7725490196078432,0.7725490196078432,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":13,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[86,86],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":144,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Handle","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.394,"y":1},"o":{"x":0.333,"y":0},"t":18,"s":[648.829,532.045,0],"e":[220.829,170.045,0],"to":[-71.333,-60.333,0],"ti":[33.833,65.833,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":24,"s":[220.829,170.045,0],"e":[220.829,170.045,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0,"y":1},"o":{"x":0.216,"y":0},"t":28,"s":[220.829,170.045,0],"e":[284.829,168.045,0],"to":[13.667,-11.333,0],"ti":[-17.667,-10.167,0]},{"i":{"x":0,"y":0},"o":{"x":0.851,"y":0.851},"t":32,"s":[284.829,168.045,0],"e":[284.829,168.045,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.057,"y":1},"o":{"x":0.375,"y":0},"t":34,"s":[284.829,168.045,0],"e":[216.829,246.045,0],"to":[1.667,31.5,0],"ti":[-2.631,-12.748,0]},{"i":{"x":0.826,"y":1},"o":{"x":0.981,"y":0},"t":37,"s":[216.829,246.045,0],"e":[280.829,246.045,0],"to":[4.333,21,0],"ti":[-9.667,-12,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":41,"s":[280.829,246.045,0],"e":[280.829,246.045,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.04,"y":1},"o":{"x":0.333,"y":0},"t":44,"s":[280.829,246.045,0],"e":[222.829,322.045,0],"to":[-2.167,23.667,0],"ti":[-1,-13,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.871,"y":0},"t":48,"s":[222.829,322.045,0],"e":[286.829,324.045,0],"to":[1,13,0],"ti":[-10.667,-0.333,0]},{"i":{"x":0.667,"y":0.667},"o":{"x":0.333,"y":0.333},"t":54,"s":[286.829,324.045,0],"e":[286.829,324.045,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.923,"y":0},"t":56,"s":[286.829,324.045,0],"e":[650.829,536.045,0],"to":[60.667,35.333,0],"ti":[-60.667,-35.333,0]},{"t":60}],"ix":2},"a":{"a":0,"k":[-30.17,-31.17,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.221,1.12],[0,0],[1.122,-1.22],[0,0],[-1.221,-1.121],[0,0],[-1.12,1.221],[0,0]],"o":[[0,0],[-1.221,-1.12],[0,0],[-1.121,1.221],[0,0],[1.22,1.121],[0,0],[1.121,-1.219]],"v":[[46.352,42.076],[-23.804,-22.35],[-28.044,-22.169],[-36.836,-12.594],[-36.656,-8.355],[33.501,56.07],[37.74,55.889],[46.533,46.314]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.776000019148,0.776000019148,0.776000019148,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[38.207,23.72],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":144,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Profile","parent":15,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[37.904,43.851,0],"ix":2},"a":{"a":0,"k":[21.129,20.971,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":9,"s":[0,0,100],"e":[93.913,93.913,100]},{"t":15}],"ix":6,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.08;\\n    freq = 3;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[3.642,0],[0,0],[0,3.642],[0,0],[-3.643,0],[0,0],[0,-3.642],[0,0]],"o":[[0,0],[-3.643,0],[0,0],[0,-3.642],[0,0],[3.642,0],[0,0],[0,3.642]],"v":[[14.126,20.72],[-14.126,20.72],[-20.721,14.126],[-20.721,-14.126],[-14.126,-20.72],[14.126,-20.72],[20.721,-14.126],[20.721,14.126]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[21.129,20.971],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Profile","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":9,"op":144,"st":4,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Line 1","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":10,"s":[0],"e":[100]},{"t":16}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[65.64,36.578,0],"ix":2},"a":{"a":0,"k":[50.672,13.223,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":10,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":16}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[20.074,4.963],[-20.074,4.963],[-23.074,1.963],[-23.074,-1.963],[-20.074,-4.963],[20.074,-4.963],[23.074,-1.963],[23.074,1.963]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[73.746,13.223],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Line 2","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":11,"s":[0],"e":[100]},{"t":17}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[65.972,54.476,0],"ix":2},"a":{"a":0,"k":[50.421,32.288,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":11,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":17}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.658],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.658],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[20.576,4.962],[-20.576,4.962],[-23.576,1.962],[-23.576,-1.962],[-20.576,-4.962],[20.576,-4.962],[23.576,-1.962],[23.576,1.962]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[73.996,32.288],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":9,"ty":4,"nm":"Line 3","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":12,"s":[0],"e":[100]},{"t":18}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[18.539,80.853,0],"ix":2},"a":{"a":0,"k":[0.501,60.383,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":12,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":18}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[45.159,4.963],[-45.159,4.963],[-48.159,1.963],[-48.159,-1.963],[-45.159,-4.963],[45.159,-4.963],[48.159,-1.963],[48.159,1.963]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[48.66,60.383],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"Line 4","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":13,"s":[0],"e":[100]},{"t":19}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[18.774,102.99,0],"ix":2},"a":{"a":0,"k":[0.752,83.963,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":13,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":19}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[45.034,4.962],[-45.034,4.962],[-48.034,1.962],[-48.034,-1.962],[-45.034,-4.962],[45.034,-4.962],[48.034,-1.962],[48.034,1.962]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[48.786,83.963],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 4","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"Line 5","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":14,"s":[0],"e":[100]},{"t":20}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[18.303,125.128,0],"ix":2},"a":{"a":0,"k":[0.25,107.543,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":14,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":20}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[45.661,4.962],[-45.661,4.962],[-48.661,1.962],[-48.661,-1.962],[-45.661,-4.962],[45.661,-4.962],[48.661,-1.962],[48.661,1.962]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[48.911,107.543],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 5","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"Line 6","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":15,"s":[0],"e":[100]},{"t":21}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[18.303,147.972,0],"ix":2},"a":{"a":0,"k":[0.25,131.876,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":15,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":21}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.656],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.656],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[45.661,4.963],[-45.661,4.963],[-48.661,1.963],[-48.661,-1.963],[-45.661,-4.963],[45.661,-4.963],[48.661,-1.963],[48.661,1.963]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[48.911,131.876],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 6","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":144,"st":5,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"Line 7","parent":15,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":16,"s":[0],"e":[100]},{"t":22}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[18.539,170.581,0],"ix":2},"a":{"a":0,"k":[0.501,155.958,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":16,"s":[0,93.883,100],"e":[93.883,93.883,100]},{"t":22}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.656],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.656]],"v":[[45.159,4.963],[-45.159,4.963],[-48.159,1.963],[-48.159,-1.963],[-45.159,-4.963],[45.159,-4.963],[48.159,-1.963],[48.159,1.963]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[48.66,155.958],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Line 7","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":10,"op":145,"st":5,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"Right Page 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":4,"s":[435.776,247,0],"e":[250.776,247.017,0],"to":[-30.833,0.003,0],"ti":[30.833,-0.003,0]},{"t":16}],"ix":2,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"},"a":{"a":0,"k":[64.304,101.087,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":4,"s":[100,94.05,100],"e":[138,138,100]},{"t":16}],"ix":6,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0]],"o":[[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],"v":[[51.292,100.837],[-51.293,100.837],[-64.054,88.076],[-64.054,-88.076],[-51.293,-100.837],[51.292,-100.837],[64.054,-88.076],[64.054,88.076]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":4,"s":[0.917999985639,0.917999985639,0.917999985639,1],"e":[1,1,1,1]},{"t":16}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.304,101.087],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[101.747,96.634],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":145,"st":-6,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"Right Page 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":8,"s":[575.776,252.017,0],"e":[435.776,247.017,0],"to":[-23.333,-0.833,0],"ti":[23.333,0.833,0]},{"t":20}],"ix":2,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"},"a":{"a":0,"k":[64.304,101.087,0],"ix":1},"s":{"a":0,"k":[100,88.1,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.047],[0,0]],"o":[[0,0],[-7.048,0],[0,0],[0,-7.047],[0,0],[7.048,0],[0,0],[0,7.048]],"v":[[51.292,100.837],[-51.293,100.837],[-64.054,88.076],[-64.054,-88.076],[-51.293,-100.837],[51.292,-100.837],[64.054,-88.076],[64.054,88.076]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.917999985639,0.917999985639,0.917999985639,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.304,101.087],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":4,"op":148,"st":4,"bm":0},{"ddd":0,"ind":17,"ty":4,"nm":"Left Page 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":-2,"s":[64.898,247.073,0],"e":[-93.102,247.073,0],"to":[-26.333,0,0],"ti":[26.333,0,0]},{"t":10}],"ix":2,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"},"a":{"a":0,"k":[64.303,101.087,0],"ix":1},"s":{"a":0,"k":[100,93.058,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.048,0],[0,0],[0,7.048],[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0]],"o":[[0,0],[-7.048,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],"v":[[51.293,100.837],[-51.292,100.837],[-64.053,88.075],[-64.053,-88.076],[-51.292,-100.837],[51.293,-100.837],[64.054,-88.076],[64.054,88.075]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.917999985639,0.917999985639,0.917999985639,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.303,101.087],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":145,"st":0,"bm":0},{"ddd":0,"ind":18,"ty":4,"nm":"Middle Text","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":2,"s":[100],"e":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":8,"s":[100],"e":[0]},{"t":14}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":2,"s":[249.339,244.683,0],"e":[65.339,244.683,0],"to":[-30.667,0,0],"ti":[30.667,0,0]},{"t":14}],"ix":2},"a":{"a":0,"k":[64.911,107,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":3,"s":[100,100,100],"e":[75,75,100]},{"t":15}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[3.642,0],[0,0],[0,3.642],[0,0],[-3.642,0],[0,0],[0,-3.642],[0,0]],"o":[[0,0],[-3.642,0],[0,0],[0,-3.642],[0,0],[3.642,0],[0,0],[0,3.642]],"v":[[20.939,27.533],[-20.939,27.533],[-27.534,20.939],[-27.534,-20.939],[-20.939,-27.533],[20.939,-27.533],[27.534,-20.939],[27.534,20.939]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[27.993,27.784],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.656],[0,0],[-1.657,0],[0,0],[0,-1.658],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.658],[0,0],[1.657,0],[0,0],[0,1.656]],"v":[[61.661,6.594],[-61.661,6.594],[-64.661,3.594],[-64.661,-3.594],[-61.661,-6.594],[61.661,-6.594],[64.661,-3.594],[64.661,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.911,142.822],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[60.827,6.594],[-60.827,6.594],[-63.827,3.594],[-63.827,-3.594],[-60.827,-6.594],[60.827,-6.594],[63.827,-3.594],[63.827,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.744,111.488],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.658,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[28.327,6.594],[-28.327,6.594],[-31.327,3.594],[-31.327,-3.594],[-28.327,-6.594],[28.327,-6.594],[31.327,-3.594],[31.327,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[98.244,42.822],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[27.661,6.594],[-27.661,6.594],[-30.661,3.594],[-30.661,-3.594],[-27.661,-6.594],[27.661,-6.594],[30.661,-3.594],[30.661,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[97.911,17.489],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[60.995,6.594],[-60.995,6.594],[-63.995,3.594],[-63.995,-3.594],[-60.995,-6.594],[60.995,-6.594],[63.995,-3.594],[63.995,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.577,80.155],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[61.661,6.594],[-61.661,6.594],[-64.661,3.594],[-64.661,-3.594],[-61.661,-6.594],[61.661,-6.594],[64.661,-3.594],[64.661,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.911,175.155],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":2,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.657,0],[0,0],[0,1.657],[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0]],"o":[[0,0],[-1.657,0],[0,0],[0,-1.657],[0,0],[1.657,0],[0,0],[0,1.657]],"v":[[60.995,6.594],[-60.995,6.594],[-63.995,3.594],[-63.995,-3.594],[-60.995,-6.594],[60.995,-6.594],[63.995,-3.594],[63.995,3.594]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002394,0.847000002394,0.847000002394,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[64.577,207.155],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":144,"st":0,"bm":0},{"ddd":0,"ind":19,"ty":4,"nm":"Middle Page","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.377,"y":0},"t":2,"s":[227.461,246.517,0],"e":[46.461,246.517,0],"to":[-30.167,0,0],"ti":[30.167,0,0]},{"t":14}],"ix":2,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"},"a":{"a":0,"k":[91.789,134.239,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.598,0.598,0.667],"y":[1,1,1]},"o":{"x":[0.392,0.392,0.333],"y":[0,0,0]},"t":3,"s":[100,100,100],"e":[69,69,100]},{"t":15}],"ix":6,"x":"var $bm_rt;\\nvar n, n, t, t, v, amp, freq, decay;\\n$bm_rt = n = 0;\\nif (numKeys > 0) {\\n    $bm_rt = n = nearestKey(time).index;\\n    if (key(n).time > time) {\\n        n--;\\n    }\\n}\\nif (n == 0) {\\n    $bm_rt = t = 0;\\n} else {\\n    $bm_rt = t = $bm_sub(time, key(n).time);\\n}\\nif (n > 0 && t < 1) {\\n    v = velocityAtTime($bm_sub(key(n).time, $bm_div(thisComp.frameDuration, 10)));\\n    amp = 0.05;\\n    freq = 2;\\n    decay = 8;\\n    $bm_rt = $bm_sum(value, $bm_div($bm_mul($bm_mul(v, amp), Math.sin($bm_mul($bm_mul($bm_mul(freq, t), 2), Math.PI))), Math.exp($bm_mul(decay, t))));\\n} else {\\n    $bm_rt = value;\\n}"}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.048,0],[0,0],[0,7.048],[0,0],[-7.047,0],[0,0],[0,-7.048],[0,0]],"o":[[0,0],[-7.047,0],[0,0],[0,-7.048],[0,0],[7.048,0],[0,0],[0,7.048]],"v":[[78.779,133.989],[-78.779,133.989],[-91.539,121.227],[-91.539,-121.228],[-78.779,-133.989],[78.779,-133.989],[91.539,-121.228],[91.539,121.227]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":2,"s":[1,1,1,1],"e":[0.917647063732,0.917647063732,0.917647063732,1]},{"t":14}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 2","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[115.102,134.239],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":144,"st":0,"bm":0},{"ddd":0,"ind":20,"ty":4,"nm":"Circle","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[246.09,247.079,0],"ix":2},"a":{"a":0,"k":[168.508,168.508,0],"ix":1},"s":{"a":0,"k":[115.452,115.452,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-92.927],[92.927,0],[0,92.926],[-92.927,0]],"o":[[0,92.926],[-92.927,0],[0,-92.927],[92.927,0]],"v":[[168.258,0],[-0.001,168.258],[-168.258,0],[-0.001,-168.258]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.23921568627450981,0.3254901960784314,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[168.508,168.508],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":144,"st":0,"bm":0}]'),markers=[],FileCheck={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers},invoice="/invoice-web/assets/Jubair%20K-BOPjzEn9.pdf";GlobalWorkerOptions.workerSrc=new URL("/invoice-web/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const validationSchema=create$3({vendor:create$6().required("Vendor is required").min(2,"Vendor name must be at least 2 characters"),purchaseOrderNumber:create$6().required("Purchase Order Number is required").matches(/^PO-\d{4}-\d{3}$/,"PO Number must be in format PO-YYYY-XXX"),invoiceNumber:create$6().required("Invoice Number is required").matches(/^INV-\d{3}$/,"Invoice Number must be in format INV-XXX"),totalAmount:create$5().required("Total Amount is required").min(.01,"Amount must be greater than 0").max(999999.99,"Amount cannot exceed $999,999.99"),invoiceDueDate:create$6().required("Invoice Due Date is required").matches(/^\d{2}\/\d{2}\/\d{4}$/,"Date must be in MM/DD/YYYY format"),invoiceDescription:create$6().required("Invoice Description is required").min(10,"Description must be at least 10 characters").max(500,"Description cannot exceed 500 characters"),invoiceDate:create$6().required("Invoice Date is required").matches(/^\d{2}\/\d{2}\/\d{4}$/,"Date must be in MM/DD/YYYY format"),paymentTerms:create$6().required("Payment Terms is required"),glPostDate:create$6().required("GL Post Date is required").matches(/^\d{2}\/\d{2}\/\d{4}$/,"Date must be in MM/DD/YYYY format"),lineAmount:create$5().required("Line Amount is required").min(.01,"Amount must be greater than 0").max(999999.99,"Amount cannot exceed $999,999.99"),account:create$6().required("Account is required"),description:create$6().required("Description is required").min(5,"Description must be at least 5 characters").max(200,"Description cannot exceed 200 characters"),department:create$6().required("Department is required"),location:create$6().required("Location is required"),comments:create$6().max(1e3,"Comments cannot exceed 1000 characters")}),dummyData={fileName:invoice,vendor:"A-1 Exterminators",purchaseOrderNumber:"PO-2024-001",invoiceNumber:"INV-001",totalAmount:1250,invoiceDueDate:"12/31/2024",invoiceDescription:"Monthly pest control services for office building - comprehensive treatment",invoiceDate:"12/01/2024",paymentTerms:"Net 30",glPostDate:"12/15/2024",lineAmount:1250,account:"Office Supplies",description:"Professional pest control services for office building",department:"Facilities",location:"Main Office",comments:"Regular monthly service - all areas treated including kitchen and storage areas"};function Home(){const n=useNavigate(),[t,e]=reactExports.useState("Vendor Details"),[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(null),[u,f]=reactExports.useState(null),[p,m]=reactExports.useState(!1),[y,b]=reactExports.useState(!1),[x,E]=reactExports.useState(!1),A=reactExports.useRef(null),S=["Vendor Details","Invoice Details","Comments"];reactExports.useEffect(()=>{const $=D();if($){const N={name:$.name,size:$.size,type:$.type,lastModified:$.lastModified,isRestored:!0};c(N),$.name==="Jubair K.pdf"||$.isAssetsFile?(f(invoice),console.log("Assets PDF restored successfully")):$.data?(f($.data),console.log("Uploaded file restored successfully:",$.name)):(console.log("File info restored but no data available:",$.name),f(null)),console.log("File state restored from localStorage")}},[]);const T=()=>{try{const $=localStorage.getItem("invoiceFormData");if($){const N=JSON.parse($);return console.log("Loaded data from localStorage:",N),N}}catch($){console.error("Error loading data from localStorage:",$),localStorage.removeItem("invoiceFormData")}return{}},D=()=>{try{const $=localStorage.getItem("invoiceFileInfo");if($){const N=JSON.parse($);return console.log("Loaded file info from localStorage:",N),N}}catch($){console.error("Error loading file info from localStorage:",$),localStorage.removeItem("invoiceFileInfo")}return null},R=$=>{try{localStorage.setItem("invoiceFormData",JSON.stringify($)),console.log("Data saved to localStorage:",$)}catch(N){console.error("Error saving to localStorage:",N)}},F=$=>{try{Object.values($).some(G=>G&&G.toString().trim()!=="")&&(localStorage.setItem("invoiceFormData",JSON.stringify($)),console.log("Auto-saved data to localStorage"))}catch(N){console.error("Error auto-saving to localStorage:",N)}},k=$=>{try{const N=new FileReader;N.onload=function(G){const I={name:$.name,size:$.size,type:$.type,lastModified:$.lastModified,data:G.target.result};localStorage.setItem("invoiceFileInfo",JSON.stringify(I)),console.log("File info and data saved to localStorage:",I.name)},N.readAsDataURL($)}catch(N){console.error("Error saving file info to localStorage:",N)}},P=()=>{localStorage.removeItem("session"),localStorage.removeItem("invoiceFormData"),localStorage.removeItem("invoiceFileInfo"),n("/")},L=($,N)=>{const G=$.target.files[0];if(console.log("File selected:",G),!G){console.log("No file selected");return}if(G.type!=="application/pdf"){console.log("Invalid file type:",G.type),alert("Please select a valid PDF file"),$.target.value="";return}const I=10*1024*1024;if(G.size>I){console.log("File too large:",G.size),alert("File size must be less than 10MB"),$.target.value="";return}console.log("PDF file uploaded successfully"),c(G);const X=URL.createObjectURL(G);f(X),k(G);const et=G.name.replace(".pdf","");N&&(N("fileName",G.name),N("invoiceNumber",et))},B=()=>{c(null),u&&u!==invoice&&URL.revokeObjectURL(u),f(null),localStorage.removeItem("invoiceFileInfo");const $=document.getElementById("pdf-upload");$&&($.value=""),console.log("Uploaded file cleared")},V=$=>{$.preventDefault(),$.stopPropagation(),m(!0)},z=$=>{$.preventDefault(),$.stopPropagation(),m(!0)},j=$=>{$.preventDefault(),$.stopPropagation(),m(!1)},J=($,N)=>{$.preventDefault(),$.stopPropagation(),m(!1);const G=$.dataTransfer.files;if(console.log("Files dropped:",G),!G||!G[0]){console.log("No files dropped");return}const I=G[0];if(I.type!=="application/pdf"){console.log("Invalid file type dropped:",I.type),alert("Please drop a valid PDF file");return}const X=10*1024*1024;if(I.size>X){console.log("File too large:",I.size),alert("File size must be less than 10MB");return}console.log("PDF file dropped successfully"),c(I);const et=URL.createObjectURL(I);f(et),k(I);const H=I.name.replace(".pdf","");N&&(N("fileName",I.name),N("invoiceNumber",H))},W=$=>{Object.keys(dummyData).forEach(G=>{$(G,dummyData[G])});const N={name:"Jubair K.pdf",size:199*1024,type:"application/pdf",lastModified:Date.now()};c(N),f(invoice);try{fetch(invoice).then(G=>G.blob()).then(G=>{const I=new FileReader;I.onload=function(X){const et={name:N.name,size:N.size,type:N.type,lastModified:N.lastModified,data:X.target.result,isAssetsFile:!0};localStorage.setItem("invoiceFileInfo",JSON.stringify(et)),console.log("Assets PDF file info and data saved to localStorage:",et.name)},I.readAsDataURL(G)}).catch(G=>{console.error("Error fetching assets PDF:",G);const I={name:N.name,size:N.size,type:N.type,lastModified:N.lastModified,isAssetsFile:!0};localStorage.setItem("invoiceFileInfo",JSON.stringify(I))})}catch(G){console.error("Error saving assets PDF info:",G)}console.log("Dummy data populated and PDF file uploaded from assets")},K=$=>{localStorage.removeItem("invoiceFormData"),localStorage.removeItem("invoiceFileInfo"),B(),$&&["fileName","vendor","purchaseOrderNumber","invoiceNumber","totalAmount","invoiceDueDate","invoiceDescription","invoiceDate","paymentTerms","glPostDate","lineAmount","account","description","department","location","comments"].forEach(G=>{$(G,"")}),E(!0),setTimeout(()=>{E(!1)},3e3),console.log("All data cleared successfully")};return jsxRuntimeExports.jsx(Formik,{initialValues:{fileName:"",vendor:"",purchaseOrderNumber:"",invoiceNumber:"",totalAmount:"",invoiceDueDate:"",invoiceDescription:"",invoiceDate:"",paymentTerms:"",glPostDate:"",lineAmount:"",account:"",description:"",department:"",location:"",comments:"",...T()},validationSchema,enableReinitialize:!0,onSubmit:($,{setSubmitting:N,setStatus:G,setFieldValue:I})=>{try{if(i){if($.lineAmount>100){G({error:"Percentage cannot exceed 100%"}),N(!1);return}}else if($.lineAmount>$.totalAmount){G({error:"Line Amount cannot exceed Total Amount"}),N(!1);return}const X=new Date($.invoiceDate),et=new Date($.invoiceDueDate),H=new Date($.glPostDate);if(et<X){G({error:"Invoice Due Date cannot be before Invoice Date"}),N(!1);return}if(H<X){G({error:"GL Post Date cannot be before Invoice Date"}),N(!1);return}R($),G({success:"Invoice submitted successfully! Data has been saved to localStorage."}),N(!1),setTimeout(()=>{b(!0);const Q=T();Object.keys(Q).forEach(st=>{I(st,Q[st])}),setTimeout(()=>{b(!1)},5e3)},100)}catch(X){console.error("Submission error:",X),G({error:"An error occurred while submitting. Please try again."}),N(!1)}},children:({errors:$,touched:N,setFieldValue:G,values:I,isSubmitting:X})=>(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{F(I)},1e3),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 px-8 py-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-8",children:[jsxRuntimeExports.jsx("button",{className:"text-blue-600 hover:text-blue-800 mr-3 text-lg",children:"←"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Invoice"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center ml-[500px] space-x-8",children:S.map(et=>jsxRuntimeExports.jsxs("button",{onClick:()=>e(et),className:`relative pb-3 text-base transition-colors ${t===et?"text-sky-500 font-bold":"text-gray-600 font-normal hover:text-gray-900"}`,children:[et,t===et&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-sky-500"})]},et))})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("button",{onClick:P,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[jsxRuntimeExports.jsx(FaSignOutAlt,{className:"w-4 h-4 mr-2"}),"Logout"]})})]})}),y&&jsxRuntimeExports.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg flex items-center space-x-3 animate-slide-in",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Success!"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Invoice submitted successfully! Data has been saved to localStorage."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>b(!1),className:"text-green-200 hover:text-white transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x&&jsxRuntimeExports.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-lg shadow-lg flex items-center space-x-3 animate-slide-in",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Data Cleared!"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"All form data and uploaded files have been cleared successfully."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>E(!1),className:"text-red-200 hover:text-white transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen",children:[jsxRuntimeExports.jsx("div",{className:"w-[50%] bg-gray-200 p-8",children:jsxRuntimeExports.jsxs("div",{className:`bg-white border-2 border-dashed rounded-xl p-12 text-center transition-colors cursor-pointer ${p?"border-blue-500 bg-blue-50":"border-gray-400 hover:border-blue-500"}`,onDragOver:V,onDragEnter:z,onDragLeave:j,onDrop:et=>J(et,G),children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:p?"Drop PDF Here":o?"Upload Another Invoice":"Upload Your Invoice"}),jsxRuntimeExports.jsx("p",{className:"text-black mb-8 text-lg",children:p?"Release to upload":o?"Drop another PDF or click upload":"To auto-populate fields and save time"}),o?jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(FiCheck,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:"PDF Uploaded Successfully"})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-4 mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-900",children:o.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:[(o.size/1024/1024).toFixed(2)," MB"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{u&&window.open(u,"_blank")},className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"View PDF"}),jsxRuntimeExports.jsx("button",{onClick:B,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Remove"})]})]})}),jsxRuntimeExports.jsx(PdfComponent,{fileUrl:u})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Player,{src:FileCheck,autoplay:!0,loop:!0,className:"w-72 h-72"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",onChange:et=>L(et,G),className:"hidden",id:"pdf-upload"}),jsxRuntimeExports.jsxs("label",{htmlFor:"pdf-upload",className:"bg-white border-2 border-gray-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors mb-4 flex items-center justify-center cursor-pointer w-48 shadow-lg",onClick:()=>{const et=document.getElementById("pdf-upload");et&&(et.value="",setTimeout(()=>{et.click()},10))},children:[jsxRuntimeExports.jsx(FiUpload,{className:"w-5 h-5 mr-2 text-black"}),o?"Upload Another":"Upload File"]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 text-gray-500 mb-4",children:jsxRuntimeExports.jsxs("p",{className:"text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"font-semibold text-sky-400",children:["Click to upload"," "]}),"or drag and drop"]})})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-gray-200 p-8",children:jsxRuntimeExports.jsxs(Form,{children:[jsxRuntimeExports.jsxs("div",{className:"mb-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-200 rounded-full p-4",children:jsxRuntimeExports.jsx(FaBuilding,{className:"w-5 h-5 text-sky-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 ml-3",children:"Vendor Details"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Vendor ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"vendor",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg bg-white text-gray-400 border-black appearance-none ${$.vendor&&N.vendor?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Vendor"}),jsxRuntimeExports.jsx("option",{value:"A-1 Exterminators",children:"A-1 Exterminators"}),jsxRuntimeExports.jsx("option",{value:"ABC Services",children:"ABC Services"}),jsxRuntimeExports.jsx("option",{value:"XYZ Corp",children:"XYZ Corp"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.vendor&&N.vendor&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.vendor})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("button",{type:"button",className:"flex items-center text-sky-500 hover:text-sky-700 text-base font-semibold transition-colors",children:[jsxRuntimeExports.jsx(FaChevronDown,{className:"w-3 h-3 mr-2"}),"View Vendor Details"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-200 rounded-full p-4 mr-4",children:jsxRuntimeExports.jsx(FaFileInvoice,{className:"w-5 h-5 text-sky-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900 ml-3",children:"Invoice Details"})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"General Information"})}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Purchase Order Number"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"purchaseOrderNumber",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 border-black appearance-none ${$.purchaseOrderNumber&&N.purchaseOrderNumber?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select PO Number"}),jsxRuntimeExports.jsx("option",{value:"PO-2024-001",children:"PO-2024-001"}),jsxRuntimeExports.jsx("option",{value:"PO-2024-002",children:"PO-2024-002"}),jsxRuntimeExports.jsx("option",{value:"PO-2024-003",children:"PO-2024-003"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.purchaseOrderNumber&&N.purchaseOrderNumber&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.purchaseOrderNumber})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Invoice Details"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Invoice Number"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"invoiceNumber",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 border-black appearance-none ${$.invoiceNumber&&N.invoiceNumber?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Vendor"}),jsxRuntimeExports.jsx("option",{value:"INV-001",children:"INV-001"}),jsxRuntimeExports.jsx("option",{value:"INV-002",children:"INV-002"}),jsxRuntimeExports.jsx("option",{value:"INV-003",children:"INV-003"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.invoiceNumber&&N.invoiceNumber&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.invoiceNumber})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Total Amount"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center border border-black rounded-lg bg-white overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"pl-4 text-gray-400 font-bold bg-gray-200 px-3 py-3",children:"$"}),jsxRuntimeExports.jsx(Field,{name:"totalAmount",type:"number",step:"0.01",className:`w-full px-2 py-3 border-0   focus:outline-none bg-white text-black ${$.totalAmount&&N.totalAmount?"border-red-500":""}`,placeholder:"0.00"}),jsxRuntimeExports.jsx("span",{className:"pr-4 text-black",children:"USD"})]})}),$.totalAmount&&N.totalAmount&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.totalAmount})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Invoice Due Date"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(FaCalendarAlt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"}),jsxRuntimeExports.jsx(Field,{name:"invoiceDueDate",type:"text",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black ${$.invoiceDueDate&&N.invoiceDueDate?"border-red-500":"border-black"}`,placeholder:"MM/DD/YYYY"})]}),$.invoiceDueDate&&N.invoiceDueDate&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.invoiceDueDate})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Invoice Date"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(FaCalendarAlt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"}),jsxRuntimeExports.jsx(Field,{name:"invoiceDate",type:"text",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black ${$.invoiceDate&&N.invoiceDate?"border-red-500":"border-black"}`,placeholder:"MM/DD/YYYY"})]}),$.invoiceDate&&N.invoiceDate&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.invoiceDate})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Payment Terms"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"paymentTerms",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 appearance-none ${$.paymentTerms&&N.paymentTerms?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select"}),jsxRuntimeExports.jsx("option",{value:"Net 15",children:"Net 15"}),jsxRuntimeExports.jsx("option",{value:"Net 30",children:"Net 30"}),jsxRuntimeExports.jsx("option",{value:"Net 60",children:"Net 60"}),jsxRuntimeExports.jsx("option",{value:"Due on Receipt",children:"Due on Receipt"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.paymentTerms&&N.paymentTerms&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.paymentTerms})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["GL Post Date"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(FaCalendarAlt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"}),jsxRuntimeExports.jsx(Field,{name:"glPostDate",type:"text",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black ${$.glPostDate&&N.glPostDate?"border-red-500":"border-black"}`,placeholder:"MM/DD/YYYY"})]}),$.glPostDate&&N.glPostDate&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.glPostDate})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Invoice Description"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(Field,{as:"textarea",name:"invoiceDescription",rows:1,className:`w-full px-4 py-3 border border-black rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900 resize-none ${$.invoiceDescription&&N.invoiceDescription?"border-red-500":"border-black"}`,placeholder:"Enter invoice description..."})}),$.invoiceDescription&&N.invoiceDescription&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.invoiceDescription})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Expense Details"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-600",children:i?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[I.lineAmount||"0.00","% / %",I.totalAmount||"0.00"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["$",I.lineAmount||"0.00"," / $",I.totalAmount||"0.00"]})}),jsxRuntimeExports.jsxs("div",{className:"relative inline-block w-18 h-8 align-middle select-none",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i,onChange:()=>a(!i),className:"hidden",id:"toggle"}),jsxRuntimeExports.jsx("label",{htmlFor:"toggle",className:"block overflow-hidden w-18 h-8 rounded-lg bg-gray-300 cursor-pointer",children:jsxRuntimeExports.jsx("span",{className:`block h-8 w-10 rounded-lg transform transition-transform duration-200 ease-in ${i?"translate-x-8 bg-blue-600":"translate-x-0 bg-white"}`,children:jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center h-full text-xs font-bold",children:i?"%":"$"})})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Line Amount"," ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center border border-black rounded-lg bg-white overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"pl-4 text-gray-400 font-bold bg-gray-200 px-3 py-3",children:i?"%":"$"}),jsxRuntimeExports.jsx(Field,{name:"lineAmount",type:"number",step:"0.01",className:`w-full px-2 py-3 border-0  focus:outline-none bg-white text-black ${$.lineAmount&&N.lineAmount?"border-red-500":""}`,placeholder:"0.00"}),jsxRuntimeExports.jsx("span",{className:"pr-4 text-black",children:i?"Percent":"USD"})]})}),i&&I.totalAmount&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Calculated amount: $",((I.lineAmount||0)*(I.totalAmount||0)/100).toFixed(2)]}),$.lineAmount&&N.lineAmount&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.lineAmount})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Account ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"account",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 appearance-none ${$.account&&N.account?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Account"}),jsxRuntimeExports.jsx("option",{value:"Office Supplies",children:"Office Supplies"}),jsxRuntimeExports.jsx("option",{value:"Professional Services",children:"Professional Services"}),jsxRuntimeExports.jsx("option",{value:"Utilities",children:"Utilities"}),jsxRuntimeExports.jsx("option",{value:"Equipment",children:"Equipment"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.account&&N.account&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.account})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Department ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"department",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 appearance-none ${$.department&&N.department?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Department"}),jsxRuntimeExports.jsx("option",{value:"Facilities",children:"Facilities"}),jsxRuntimeExports.jsx("option",{value:"IT",children:"IT"}),jsxRuntimeExports.jsx("option",{value:"HR",children:"HR"}),jsxRuntimeExports.jsx("option",{value:"Finance",children:"Finance"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.department&&N.department&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.department})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Location ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(Field,{as:"select",name:"location",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-400 appearance-none ${$.location&&N.location?"border-red-500":"border-black"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select Location"}),jsxRuntimeExports.jsx("option",{value:"Main Office",children:"Main Office"}),jsxRuntimeExports.jsx("option",{value:"Branch Office",children:"Branch Office"}),jsxRuntimeExports.jsx("option",{value:"Warehouse",children:"Warehouse"}),jsxRuntimeExports.jsx("option",{value:"Remote",children:"Remote"})]}),jsxRuntimeExports.jsx(FaChevronDown,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),$.location&&N.location&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.location})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Description ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(Field,{as:"textarea",name:"description",rows:1,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900 resize-none ${$.description&&N.description?"border-red-500":"border-black"}`,placeholder:"Enter description..."})}),$.description&&N.description&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.description})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mt-6",children:jsxRuntimeExports.jsxs("button",{type:"button",className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:[jsxRuntimeExports.jsx(FaPlus,{className:"w-4 h-4 mr-2"}),"Add Expense Coding"]})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-200 rounded-full p-4 mr-4",children:jsxRuntimeExports.jsx(TbMessage,{className:"w-5 h-5 text-sky-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Comments"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Field,{as:"textarea",name:"comments",rows:1,className:`w-full px-4 py-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900 resize-none ${$.comments&&N.comments?"border-red-500":"border-black"}`,placeholder:"Add any additional comments..."}),jsxRuntimeExports.jsx(VscSend,{className:"absolute right-3 top-4 text-gray-400"}),$.comments&&N.comments&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-1",children:$.comments})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center space-x-3 mb-8 bg-white p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col space-y-1 cursor-pointer hover:bg-gray-100 p-4 rounded",children:jsxRuntimeExports.jsx(BsThreeDotsVertical,{className:"text-gray-500 mr-18"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>W(G),className:"px-14 py-3 text-nowrap bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Save as Draft"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>K(G),className:"px-6 py-3 text-nowrap bg-red-100 border border-red-300 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-medium",children:"Clear Saved Data"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:X,className:`px-14 py-3 rounded-lg text-nowrap transition-colors font-medium ${X?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-sky-500 text-white hover:bg-sky-700"}`,children:X?"Submitting...":"Submit & New"})]})]})]})})]})]}))})}const ProtectedRoute=({children:n})=>{const t=localStorage.getItem("session"),e=t?JSON.parse(t):null;return e&&e.isLoggedIn?n:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})},PublicRoute=({children:n})=>{const t=localStorage.getItem("session"),e=t?JSON.parse(t):null;return e&&e.isLoggedIn?jsxRuntimeExports.jsx(Navigate,{to:"/home",replace:!0}):n},appRouter=createHashRouter([{path:"/",element:jsxRuntimeExports.jsx(PublicRoute,{children:jsxRuntimeExports.jsx(Login,{})})},{path:"/home",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Home,{})})}]);function App(){return jsxRuntimeExports.jsx("div",{className:"App",children:jsxRuntimeExports.jsx(RouterProvider2,{router:appRouter})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
